(function(wt){typeof define=="function"&&define.amd?define(wt):wt()})(function(){"use strict";var LF=Object.defineProperty;var Gm=wt=>{throw TypeError(wt)};var DF=(wt,Ue,Nt)=>Ue in wt?LF(wt,Ue,{enumerable:!0,configurable:!0,writable:!0,value:Nt}):wt[Ue]=Nt;var ft=(wt,Ue,Nt)=>DF(wt,typeof Ue!="symbol"?Ue+"":Ue,Nt),NF=(wt,Ue,Nt)=>Ue.has(wt)||Gm("Cannot "+Nt);var Km=(wt,Ue,Nt)=>Ue.has(wt)?Gm("Cannot add the same private member more than once"):Ue instanceof WeakSet?Ue.add(wt):Ue.set(wt,Nt);var La=(wt,Ue,Nt)=>(NF(wt,Ue,"access private method"),Nt);/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/var tr,Zc,Jm;function wt(e,t){const n=new Set(e.split(","));return s=>n.has(s)}const Ue={},Nt=[],nn=()=>{},Zm=()=>!1,Wo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Da=e=>e.startsWith("onUpdate:"),Mt=Object.assign,Na=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Ym=Object.prototype.hasOwnProperty,Ye=(e,t)=>Ym.call(e,t),Oe=Array.isArray,lr=e=>ur(e)==="[object Map]",cr=e=>ur(e)==="[object Set]",Yc=e=>ur(e)==="[object Date]",eg=e=>ur(e)==="[object RegExp]",je=e=>typeof e=="function",ht=e=>typeof e=="string",rs=e=>typeof e=="symbol",ot=e=>e!==null&&typeof e=="object",eu=e=>(ot(e)||je(e))&&je(e.then)&&je(e.catch),tu=Object.prototype.toString,ur=e=>tu.call(e),tg=e=>ur(e).slice(8,-1),nu=e=>ur(e)==="[object Object]",ja=e=>ht(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,qr=wt(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Go=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},ng=/-(\w)/g,sn=Go(e=>e.replace(ng,(t,n)=>n?n.toUpperCase():"")),sg=/\B([A-Z])/g,os=Go(e=>e.replace(sg,"-$1").toLowerCase()),Ko=Go(e=>e.charAt(0).toUpperCase()+e.slice(1)),Qo=Go(e=>e?`on${Ko(e)}`:""),An=(e,t)=>!Object.is(e,t),dr=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Jo=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Br=e=>{const t=parseFloat(e);return isNaN(t)?e:t},rg=e=>{const t=ht(e)?Number(e):NaN;return isNaN(t)?e:t};let su;const ru=()=>su||(su=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function kt(e){if(Oe(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],r=ht(s)?lg(s):kt(s);if(r)for(const o in r)t[o]=r[o]}return t}else if(ht(e)||ot(e))return e}const og=/;(?![^(]*\))/g,ig=/:([^]+)/,ag=/\/\*[^]*?\*\//g;function lg(e){const t={};return e.replace(ag,"").split(og).forEach(n=>{if(n){const s=n.split(ig);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function se(e){let t="";if(ht(e))t=e;else if(Oe(e))for(let n=0;n<e.length;n++){const s=se(e[n]);s&&(t+=s+" ")}else if(ot(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Xo(e){if(!e)return null;let{class:t,style:n}=e;return t&&!ht(t)&&(e.class=se(t)),n&&(e.style=kt(n)),e}const cg=wt("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function ou(e){return!!e||e===""}function ug(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=As(e[s],t[s]);return n}function As(e,t){if(e===t)return!0;let n=Yc(e),s=Yc(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=rs(e),s=rs(t),n||s)return e===t;if(n=Oe(e),s=Oe(t),n||s)return n&&s?ug(e,t):!1;if(n=ot(e),s=ot(t),n||s){if(!n||!s)return!1;const r=Object.keys(e).length,o=Object.keys(t).length;if(r!==o)return!1;for(const i in e){const a=e.hasOwnProperty(i),l=t.hasOwnProperty(i);if(a&&!l||!a&&l||!As(e[i],t[i]))return!1}}return String(e)===String(t)}function Fa(e,t){return e.findIndex(n=>As(n,t))}const V=e=>ht(e)?e:e==null?"":Oe(e)||ot(e)&&(e.toString===tu||!je(e.toString))?JSON.stringify(e,iu,2):String(e),iu=(e,t)=>t&&t.__v_isRef?iu(e,t.value):lr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,r],o)=>(n[za(s,o)+" =>"]=r,n),{})}:cr(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>za(n))}:rs(t)?za(t):ot(t)&&!Oe(t)&&!nu(t)?String(t):t,za=(e,t="")=>{var n;return rs(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let rn;class au{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=rn,!t&&rn&&(this.index=(rn.scopes||(rn.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=rn;try{return rn=this,t()}finally{rn=n}}}on(){rn=this}off(){rn=this.parent}stop(t){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function dg(e){return new au(e)}function fg(e,t=rn){t&&t.active&&t.effects.push(e)}function lu(){return rn}function hg(e){rn&&rn.cleanups.push(e)}let Es;class qa{constructor(t,n,s,r){this.fn=t,this.trigger=n,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,fg(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,as();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(pg(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),ls()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=is,n=Es;try{return is=!0,Es=this,this._runnings++,cu(this),this.fn()}finally{uu(this),this._runnings--,Es=n,is=t}}stop(){var t;this.active&&(cu(this),uu(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function pg(e){return e.value}function cu(e){e._trackId++,e._depsLength=0}function uu(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)du(e.deps[t],e);e.deps.length=e._depsLength}}function du(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let is=!0,Ba=0;const fu=[];function as(){fu.push(is),is=!1}function ls(){const e=fu.pop();is=e===void 0?!0:e}function Ua(){Ba++}function Va(){for(Ba--;!Ba&&Ha.length;)Ha.shift()()}function hu(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const s=e.deps[e._depsLength];s!==t?(s&&du(s,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Ha=[];function pu(e,t,n){Ua();for(const s of e.keys()){let r;s._dirtyLevel<t&&(r??(r=e.get(s)===s._trackId))&&(s._shouldSchedule||(s._shouldSchedule=s._dirtyLevel===0),s._dirtyLevel=t),s._shouldSchedule&&(r??(r=e.get(s)===s._trackId))&&(s.trigger(),(!s._runnings||s.allowRecurse)&&s._dirtyLevel!==2&&(s._shouldSchedule=!1,s.scheduler&&Ha.push(s.scheduler)))}Va()}const mu=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},Zo=new WeakMap,Is=Symbol(""),Wa=Symbol("");function Xt(e,t,n){if(is&&Es){let s=Zo.get(e);s||Zo.set(e,s=new Map);let r=s.get(n);r||s.set(n,r=mu(()=>s.delete(n))),hu(Es,r)}}function Hn(e,t,n,s,r,o){const i=Zo.get(e);if(!i)return;let a=[];if(t==="clear")a=[...i.values()];else if(n==="length"&&Oe(e)){const l=Number(s);i.forEach((u,d)=>{(d==="length"||!rs(d)&&d>=l)&&a.push(u)})}else switch(n!==void 0&&a.push(i.get(n)),t){case"add":Oe(e)?ja(n)&&a.push(i.get("length")):(a.push(i.get(Is)),lr(e)&&a.push(i.get(Wa)));break;case"delete":Oe(e)||(a.push(i.get(Is)),lr(e)&&a.push(i.get(Wa)));break;case"set":lr(e)&&a.push(i.get(Is));break}Ua();for(const l of a)l&&pu(l,4);Va()}function mg(e,t){var n;return(n=Zo.get(e))==null?void 0:n.get(t)}const gg=wt("__proto__,__v_isRef,__isVue"),gu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(rs)),vu=vg();function vg(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const s=Je(this);for(let o=0,i=this.length;o<i;o++)Xt(s,"get",o+"");const r=s[t](...n);return r===-1||r===!1?s[t](...n.map(Je)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){as(),Ua();const s=Je(this)[t].apply(this,n);return Va(),ls(),s}}),e}function yg(e){const t=Je(this);return Xt(t,"has",e),t.hasOwnProperty(e)}class yu{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){const r=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return o;if(n==="__v_raw")return s===(r?o?Pg:$u:o?Cu:Su).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const i=Oe(t);if(!r){if(i&&Ye(vu,n))return Reflect.get(vu,n,s);if(n==="hasOwnProperty")return yg}const a=Reflect.get(t,n,s);return(rs(n)?gu.has(n):gg(n))||(r||Xt(t,"get",n),o)?a:St(a)?i&&ja(n)?a:a.value:ot(a)?r?fr(a):st(a):a}}class bu extends yu{constructor(t=!1){super(!1,t)}set(t,n,s,r){let o=t[n];if(!this._isShallow){const l=pr(o);if(!oi(s)&&!pr(s)&&(o=Je(o),s=Je(s)),!Oe(t)&&St(o)&&!St(s))return l?!1:(o.value=s,!0)}const i=Oe(t)&&ja(n)?Number(n)<t.length:Ye(t,n),a=Reflect.set(t,n,s,r);return t===Je(r)&&(i?An(s,o)&&Hn(t,"set",n,s):Hn(t,"add",n,s)),a}deleteProperty(t,n){const s=Ye(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&s&&Hn(t,"delete",n,void 0),r}has(t,n){const s=Reflect.has(t,n);return(!rs(n)||!gu.has(n))&&Xt(t,"has",n),s}ownKeys(t){return Xt(t,"iterate",Oe(t)?"length":Is),Reflect.ownKeys(t)}}class bg extends yu{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const xg=new bu,_g=new bg,wg=new bu(!0),Ga=e=>e,Yo=e=>Reflect.getPrototypeOf(e);function ei(e,t,n=!1,s=!1){e=e.__v_raw;const r=Je(e),o=Je(t);n||(An(t,o)&&Xt(r,"get",t),Xt(r,"get",o));const{has:i}=Yo(r),a=s?Ga:n?Ja:Ur;if(i.call(r,t))return a(e.get(t));if(i.call(r,o))return a(e.get(o));e!==r&&e.get(t)}function ti(e,t=!1){const n=this.__v_raw,s=Je(n),r=Je(e);return t||(An(e,r)&&Xt(s,"has",e),Xt(s,"has",r)),e===r?n.has(e):n.has(e)||n.has(r)}function ni(e,t=!1){return e=e.__v_raw,!t&&Xt(Je(e),"iterate",Is),Reflect.get(e,"size",e)}function xu(e){e=Je(e);const t=Je(this);return Yo(t).has.call(t,e)||(t.add(e),Hn(t,"add",e,e)),this}function _u(e,t){t=Je(t);const n=Je(this),{has:s,get:r}=Yo(n);let o=s.call(n,e);o||(e=Je(e),o=s.call(n,e));const i=r.call(n,e);return n.set(e,t),o?An(t,i)&&Hn(n,"set",e,t):Hn(n,"add",e,t),this}function wu(e){const t=Je(this),{has:n,get:s}=Yo(t);let r=n.call(t,e);r||(e=Je(e),r=n.call(t,e)),s&&s.call(t,e);const o=t.delete(e);return r&&Hn(t,"delete",e,void 0),o}function ku(){const e=Je(this),t=e.size!==0,n=e.clear();return t&&Hn(e,"clear",void 0,void 0),n}function si(e,t){return function(s,r){const o=this,i=o.__v_raw,a=Je(i),l=t?Ga:e?Ja:Ur;return!e&&Xt(a,"iterate",Is),i.forEach((u,d)=>s.call(r,l(u),l(d),o))}}function ri(e,t,n){return function(...s){const r=this.__v_raw,o=Je(r),i=lr(o),a=e==="entries"||e===Symbol.iterator&&i,l=e==="keys"&&i,u=r[e](...s),d=n?Ga:t?Ja:Ur;return!t&&Xt(o,"iterate",l?Wa:Is),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:a?[d(f[0]),d(f[1])]:d(f),done:h}},[Symbol.iterator](){return this}}}}function cs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function kg(){const e={get(o){return ei(this,o)},get size(){return ni(this)},has:ti,add:xu,set:_u,delete:wu,clear:ku,forEach:si(!1,!1)},t={get(o){return ei(this,o,!1,!0)},get size(){return ni(this)},has:ti,add:xu,set:_u,delete:wu,clear:ku,forEach:si(!1,!0)},n={get(o){return ei(this,o,!0)},get size(){return ni(this,!0)},has(o){return ti.call(this,o,!0)},add:cs("add"),set:cs("set"),delete:cs("delete"),clear:cs("clear"),forEach:si(!0,!1)},s={get(o){return ei(this,o,!0,!0)},get size(){return ni(this,!0)},has(o){return ti.call(this,o,!0)},add:cs("add"),set:cs("set"),delete:cs("delete"),clear:cs("clear"),forEach:si(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=ri(o,!1,!1),n[o]=ri(o,!0,!1),t[o]=ri(o,!1,!0),s[o]=ri(o,!0,!0)}),[e,n,t,s]}const[Sg,Cg,$g,Tg]=kg();function Ka(e,t){const n=t?e?Tg:$g:e?Cg:Sg;return(s,r,o)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?s:Reflect.get(Ye(n,r)&&r in s?n:s,r,o)}const Ag={get:Ka(!1,!1)},Eg={get:Ka(!1,!0)},Ig={get:Ka(!0,!1)},Su=new WeakMap,Cu=new WeakMap,$u=new WeakMap,Pg=new WeakMap;function Og(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Rg(e){return e.__v_skip||!Object.isExtensible(e)?0:Og(tg(e))}function st(e){return pr(e)?e:Qa(e,!1,xg,Ag,Su)}function Mg(e){return Qa(e,!1,wg,Eg,Cu)}function fr(e){return Qa(e,!0,_g,Ig,$u)}function Qa(e,t,n,s,r){if(!ot(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=r.get(e);if(o)return o;const i=Rg(e);if(i===0)return e;const a=new Proxy(e,i===2?s:n);return r.set(e,a),a}function hr(e){return pr(e)?hr(e.__v_raw):!!(e&&e.__v_isReactive)}function pr(e){return!!(e&&e.__v_isReadonly)}function oi(e){return!!(e&&e.__v_isShallow)}function Tu(e){return hr(e)||pr(e)}function Je(e){const t=e&&e.__v_raw;return t?Je(t):e}function Au(e){return Object.isExtensible(e)&&Jo(e,"__v_skip",!0),e}const Ur=e=>ot(e)?st(e):e,Ja=e=>ot(e)?fr(e):e;class Eu{constructor(t,n,s,r){this.getter=t,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new qa(()=>t(this._value),()=>Vr(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=s}get value(){const t=Je(this);return(!t._cacheable||t.effect.dirty)&&An(t._value,t._value=t.effect.run())&&Vr(t,4),Xa(t),t.effect._dirtyLevel>=2&&Vr(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Lg(e,t,n=!1){let s,r;const o=je(e);return o?(s=e,r=nn):(s=e.get,r=e.set),new Eu(s,r,o||!r,n)}function Xa(e){var t;is&&Es&&(e=Je(e),hu(Es,(t=e.dep)!=null?t:e.dep=mu(()=>e.dep=void 0,e instanceof Eu?e:void 0)))}function Vr(e,t=4,n){e=Je(e);const s=e.dep;s&&pu(s,t)}function St(e){return!!(e&&e.__v_isRef===!0)}function L(e){return Pu(e,!1)}function Iu(e){return Pu(e,!0)}function Pu(e,t){return St(e)?e:new Dg(e,t)}class Dg{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Je(t),this._value=n?t:Ur(t)}get value(){return Xa(this),this._value}set value(t){const n=this.__v_isShallow||oi(t)||pr(t);t=n?t:Je(t),An(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Ur(t),Vr(this,4))}}function b(e){return St(e)?e.value:e}const Ng={get:(e,t,n)=>b(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const r=e[t];return St(r)&&!St(n)?(r.value=n,!0):Reflect.set(e,t,n,s)}};function Ou(e){return hr(e)?e:new Proxy(e,Ng)}class jg{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:s}=t(()=>Xa(this),()=>Vr(this));this._get=n,this._set=s}get value(){return this._get()}set value(t){this._set(t)}}function Fg(e){return new jg(e)}function Ct(e){const t=Oe(e)?new Array(e.length):{};for(const n in e)t[n]=Ru(e,n);return t}class zg{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return mg(Je(this._object),this._key)}}class qg{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Bg(e,t,n){return St(e)?e:je(e)?new qg(e):ot(e)&&arguments.length>1?Ru(e,t,n):L(e)}function Ru(e,t,n){const s=e[t];return St(s)?s:new zg(e,t,n)}var Hr={FORGE_RELEASE_DIRECTORY:"/home/forge/widget.easyaichat.app/releases/59946249",FORGE_SITE_BRANCH:"main",USER:"forge",SSH_CLIENT:"159.203.150.232 45596 22",npm_config_user_agent:"pnpm/10.2.1 npm/? node/v18.20.8 linux x64",FORGE_CUSTOM_DEPLOY:"1",XDG_SESSION_TYPE:"tty",npm_node_execpath:"/home/forge/.nvm/versions/node/v18.20.8/bin/node",SHLVL:"1",MOTD_SHOWN:"pam",HOME:"/home/forge",OLDPWD:"/home/forge",FORGE_DEPLOY_MESSAGE:"pick file metric pico (#671)",NVM_BIN:"/home/forge/.nvm/versions/node/v18.20.8/bin",NVM_INC:"/home/forge/.nvm/versions/node/v18.20.8/include/node",FORGE_SITE_USER:"forge",DBUS_SESSION_BUS_ADDRESS:"unix:path=/run/user/1000/bus",FORGE_SITE_ROOT:"/home/forge/widget.easyaichat.app",NVM_DIR:"/home/forge/.nvm",FORGE_MANUAL_DEPLOY:"0",FORGE_REDEPLOY:"0",LOGNAME:"forge",_:"/home/forge/.nvm/versions/node/v18.20.8/bin/pnpm",LARAVEL_FORGE:"1",XDG_SESSION_CLASS:"user",FORGE_DEPLOYMENT_ID:"59946249",npm_config_registry:"https://registry.npmjs.org/",FORGE_COMPOSER:"php8.4 /usr/local/bin/composer",XDG_SESSION_ID:"4478",npm_config_node_gyp:"/home/forge/.local/share/pnpm/.tools/pnpm/10.2.1/node_modules/pnpm/dist/node_modules/node-gyp/bin/node-gyp.js",PATH:"/home/forge/widget.easyaichat.app/node_modules/.bin:/home/forge/.local/share/pnpm/.tools/pnpm/10.2.1/node_modules/pnpm/dist/node-gyp-bin:/home/forge/.local/share/pnpm/.tools/pnpm/10.2.1/bin:/home/forge/.nvm/versions/node/v18.20.8/bin:/tmp/site-2755124:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin",npm_package_name:"jam-easychatgpt-widget",NODE:"/home/forge/.nvm/versions/node/v18.20.8/bin/node",XDG_RUNTIME_DIR:"/run/user/1000",npm_config_frozen_lockfile:"",LANG:"C.UTF-8",FORGE_PHP:"php8.4",FORGE_DEPLOY_COMMIT:"a778a01db22d6539002309c447c8596a28ff3852",FORGE_SITE_ID:"2755124",npm_lifecycle_script:"vite build --config vite.config.widget.js --mode production",SHELL:"/bin/bash",FORGE_QUICK_DEPLOY:"1",FORGE_ROLLBACK:"0",npm_package_version:"0.0.0",npm_lifecycle_event:"build-widget",npm_config_verify_deps_before_run:"false",NODE_PATH:"/home/forge/widget.easyaichat.app/node_modules/.pnpm/vite@5.4.20_sass@1.93.2/node_modules/vite/bin/node_modules:/home/forge/widget.easyaichat.app/node_modules/.pnpm/vite@5.4.20_sass@1.93.2/node_modules/vite/node_modules:/home/forge/widget.easyaichat.app/node_modules/.pnpm/vite@5.4.20_sass@1.93.2/node_modules:/home/forge/widget.easyaichat.app/node_modules/.pnpm/node_modules",FORGE_SITE_PATH:"/home/forge/widget.easyaichat.app",FORGE_SERVER_ID:"925163",PWD:"/home/forge/widget.easyaichat.app",npm_execpath:"/home/forge/.local/share/pnpm/.tools/pnpm/10.2.1/node_modules/pnpm/bin/pnpm.cjs",FORGE_PHP_FPM:"php8.4-fpm",SSH_CONNECTION:"159.203.150.232 45596 192.168.0.40 22",NVM_CD_FLAGS:"",FORGE_DEPLOY_AUTHOR:"Do Vu Thanh Nhan",npm_command:"run-script",PNPM_SCRIPT_SRC_DIR:"/home/forge/widget.easyaichat.app",INIT_CWD:"/home/forge/widget.easyaichat.app",NODE_ENV:"production"};const Wr=[];function Ug(e,...t){as();const n=Wr.length?Wr[Wr.length-1].component:null,s=n&&n.appContext.config.warnHandler,r=Vg();if(s)Wn(s,n,11,[e+t.map(o=>{var i,a;return(a=(i=o.toString)==null?void 0:i.call(o))!=null?a:JSON.stringify(o)}).join(""),n&&n.proxy,r.map(({vnode:o})=>`at <${Ed(n,o.type)}>`).join(`
`),r]);else{const o=[`[Vue warn]: ${e}`,...t];r.length&&o.push(`
`,...Hg(r)),console.warn(...o)}ls()}function Vg(){let e=Wr[Wr.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const s=e.component&&e.component.parent;e=s&&s.vnode}return t}function Hg(e){const t=[];return e.forEach((n,s)=>{t.push(...s===0?[]:[`
`],...Wg(n))}),t}function Wg({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",s=e.component?e.component.parent==null:!1,r=` at <${Ed(e.component,e.type,s)}`,o=">"+n;return e.props?[r,...Gg(e.props),o]:[r+o]}function Gg(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(s=>{t.push(...Mu(s,e[s]))}),n.length>3&&t.push(" ..."),t}function Mu(e,t,n){return ht(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:St(t)?(t=Mu(e,Je(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):je(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=Je(t),n?t:[`${e}=`,t])}function Wn(e,t,n,s){try{return s?e(...s):e()}catch(r){Gr(r,t,n)}}function fn(e,t,n,s){if(je(e)){const o=Wn(e,t,n,s);return o&&eu(o)&&o.catch(i=>{Gr(i,t,n)}),o}const r=[];for(let o=0;o<e.length;o++)r.push(fn(e[o],t,n,s));return r}function Gr(e,t,n,s=!0){const r=t?t.vnode:null;if(t){let o=t.parent;const i=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;o;){const u=o.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,i,a)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){Wn(l,null,10,[e,i,a]);return}}Kg(e,n,r,s)}function Kg(e,t,n,s=!0){console.error(e)}let Kr=!1,Za=!1;const Bt=[];let En=0;const mr=[];let us=null,Ps=0;const Lu=Promise.resolve();let Ya=null;function gt(e){const t=Ya||Lu;return e?t.then(this?e.bind(this):e):t}function Qg(e){let t=En+1,n=Bt.length;for(;t<n;){const s=t+n>>>1,r=Bt[s],o=Qr(r);o<e||o===e&&r.pre?t=s+1:n=s}return t}function ii(e){(!Bt.length||!Bt.includes(e,Kr&&e.allowRecurse?En+1:En))&&(e.id==null?Bt.push(e):Bt.splice(Qg(e.id),0,e),Du())}function Du(){!Kr&&!Za&&(Za=!0,Ya=Lu.then(Fu))}function Jg(e){const t=Bt.indexOf(e);t>En&&Bt.splice(t,1)}function Xg(e){Oe(e)?mr.push(...e):(!us||!us.includes(e,e.allowRecurse?Ps+1:Ps))&&mr.push(e),Du()}function Nu(e,t,n=Kr?En+1:0){for(;n<Bt.length;n++){const s=Bt[n];if(s&&s.pre){if(e&&s.id!==e.uid)continue;Bt.splice(n,1),n--,s()}}}function ju(e){if(mr.length){const t=[...new Set(mr)].sort((n,s)=>Qr(n)-Qr(s));if(mr.length=0,us){us.push(...t);return}for(us=t,Ps=0;Ps<us.length;Ps++)us[Ps]();us=null,Ps=0}}const Qr=e=>e.id==null?1/0:e.id,Zg=(e,t)=>{const n=Qr(e)-Qr(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Fu(e){Za=!1,Kr=!0,Bt.sort(Zg);const t=nn;try{for(En=0;En<Bt.length;En++){const n=Bt[En];n&&n.active!==!1&&(Hr.NODE_ENV!=="production"&&t(n),Wn(n,null,14))}}finally{En=0,Bt.length=0,ju(),Kr=!1,Ya=null,(Bt.length||mr.length)&&Fu()}}function Yg(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||Ue;let r=n;const o=t.startsWith("update:"),i=o&&t.slice(7);if(i&&i in s){const d=`${i==="modelValue"?"model":i}Modifiers`,{number:f,trim:h}=s[d]||Ue;h&&(r=n.map(p=>ht(p)?p.trim():p)),f&&(r=n.map(Br))}let a,l=s[a=Qo(t)]||s[a=Qo(sn(t))];!l&&o&&(l=s[a=Qo(os(t))]),l&&fn(l,e,6,r);const u=s[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,fn(u,e,6,r)}}function zu(e,t,n=!1){const s=t.emitsCache,r=s.get(e);if(r!==void 0)return r;const o=e.emits;let i={},a=!1;if(!je(e)){const l=u=>{const d=zu(u,t,!0);d&&(a=!0,Mt(i,d))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(ot(e)&&s.set(e,null),null):(Oe(o)?o.forEach(l=>i[l]=null):Mt(i,o),ot(e)&&s.set(e,i),i)}function ai(e,t){return!e||!Wo(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ye(e,t[0].toLowerCase()+t.slice(1))||Ye(e,os(t))||Ye(e,t))}let Pt=null,li=null;function ci(e){const t=Pt;return Pt=e,li=e&&e.type.__scopeId||null,t}function In(e){li=e}function Pn(){li=null}function xe(e,t=Pt,n){if(!t||e._n)return e;const s=(...r)=>{s._d&&_d(-1);const o=ci(t);let i;try{i=e(...r)}finally{ci(o),s._d&&_d(1)}return i};return s._n=!0,s._c=!0,s._d=!0,s}function FF(){}function qu(e){const{type:t,vnode:n,proxy:s,withProxy:r,props:o,propsOptions:[i],slots:a,attrs:l,emit:u,render:d,renderCache:f,data:h,setupState:p,ctx:m,inheritAttrs:x}=e;let y,_;const C=ci(e);try{if(n.shapeFlag&4){const E=r||s,$=Hr.NODE_ENV!=="production"&&p.__isScriptSetup?new Proxy(E,{get(T,I,R){return Ug(`Property '${String(I)}' was accessed via 'this'. Avoid using 'this' in templates.`),Reflect.get(T,I,R)}}):E;y=Rn(d.call($,E,f,o,p,h,m)),_=l}else{const E=t;Hr.NODE_ENV,y=Rn(E.length>1?E(o,Hr.NODE_ENV!=="production"?{get attrs(){return l},slots:a,emit:u}:{attrs:l,slots:a,emit:u}):E(o,null)),_=t.props?l:ev(l)}}catch(E){so.length=0,Gr(E,e,1),y=U(on)}let A=y;if(_&&x!==!1){const E=Object.keys(_),{shapeFlag:$}=A;E.length&&$&7&&(i&&E.some(Da)&&(_=tv(_,i)),A=On(A,_))}return n.dirs&&(A=On(A),A.dirs=A.dirs?A.dirs.concat(n.dirs):n.dirs),n.transition&&(A.transition=n.transition),y=A,ci(C),y}const ev=e=>{let t;for(const n in e)(n==="class"||n==="style"||Wo(n))&&((t||(t={}))[n]=e[n]);return t},tv=(e,t)=>{const n={};for(const s in e)(!Da(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function nv(e,t,n){const{props:s,children:r,component:o}=e,{props:i,children:a,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?Bu(s,i,u):!!i;if(l&8){const d=t.dynamicProps;for(let f=0;f<d.length;f++){const h=d[f];if(i[h]!==s[h]&&!ai(u,h))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===i?!1:s?i?Bu(s,i,u):!0:!!i;return!1}function Bu(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let r=0;r<s.length;r++){const o=s[r];if(t[o]!==e[o]&&!ai(n,o))return!0}return!1}function sv({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const rv="components",Uu=Symbol.for("v-ndc");function Gt(e){return ht(e)?ov(rv,e,!1)||e:e||Uu}function ov(e,t,n=!0,s=!1){const r=Pt||$t;if(r){const o=r.type;{const a=Ci(o,!1);if(a&&(a===t||a===sn(t)||a===Ko(sn(t))))return o}const i=Vu(r[e]||o[e],t)||Vu(r.appContext[e],t);return!i&&s?o:i}}function Vu(e,t){return e&&(e[t]||e[sn(t)]||e[Ko(sn(t))])}const Hu=e=>e.__isSuspense;function iv(e,t){t&&t.pendingBranch?Oe(e)?t.effects.push(...e):t.effects.push(e):Xg(e)}const av=Symbol.for("v-scx"),lv=()=>yr(av);function ds(e,t){return di(e,null,t)}function cv(e,t){return di(e,null,{flush:"sync"})}const ui={};function Ee(e,t,n){return di(e,t,n)}function di(e,t,{immediate:n,deep:s,flush:r,once:o,onTrack:i,onTrigger:a}=Ue){if(t&&o){const T=t;t=(...I)=>{T(...I),$()}}const l=$t,u=T=>s===!0?T:Os(T,s===!1?1:void 0);let d,f=!1,h=!1;if(St(e)?(d=()=>e.value,f=oi(e)):hr(e)?(d=()=>u(e),f=!0):Oe(e)?(h=!0,f=e.some(T=>hr(T)||oi(T)),d=()=>e.map(T=>{if(St(T))return T.value;if(hr(T))return u(T);if(je(T))return Wn(T,l,2)})):je(e)?t?d=()=>Wn(e,l,2):d=()=>(p&&p(),fn(e,l,3,[m])):d=nn,t&&s){const T=d;d=()=>Os(T())}let p,m=T=>{p=A.onStop=()=>{Wn(T,l,4),p=A.onStop=void 0}},x;if(ao)if(m=nn,t?n&&fn(t,l,3,[d(),h?[]:void 0,m]):d(),r==="sync"){const T=lv();x=T.__watcherHandles||(T.__watcherHandles=[])}else return nn;let y=h?new Array(e.length).fill(ui):ui;const _=()=>{if(!(!A.active||!A.dirty))if(t){const T=A.run();(s||f||(h?T.some((I,R)=>An(I,y[R])):An(T,y)))&&(p&&p(),fn(t,l,3,[T,y===ui?void 0:h&&y[0]===ui?[]:y,m]),y=T)}else A.run()};_.allowRecurse=!!t;let C;r==="sync"?C=_:r==="post"?C=()=>jt(_,l&&l.suspense):(_.pre=!0,l&&(_.id=l.uid),C=()=>ii(_));const A=new qa(d,nn,C),E=lu(),$=()=>{A.stop(),E&&Na(E.effects,A)};return t?n?_():y=A.run():r==="post"?jt(A.run.bind(A),l&&l.suspense):A.run(),x&&x.push($),$}function uv(e,t,n){const s=this.proxy,r=ht(e)?e.includes(".")?Wu(s,e):()=>s[e]:e.bind(s,s);let o;je(t)?o=t:(o=t.handler,n=t);const i=io(this),a=di(r,o.bind(s),n);return i(),a}function Wu(e,t){const n=t.split(".");return()=>{let s=e;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}function Os(e,t,n=0,s){if(!ot(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(s=s||new Set,s.has(e))return e;if(s.add(e),St(e))Os(e.value,t,n,s);else if(Oe(e))for(let r=0;r<e.length;r++)Os(e[r],t,n,s);else if(cr(e)||lr(e))e.forEach(r=>{Os(r,t,n,s)});else if(nu(e))for(const r in e)Os(e[r],t,n,s);return e}function Ot(e,t){if(Pt===null)return e;const n=Si(Pt)||Pt.proxy,s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[o,i,a,l=Ue]=t[r];o&&(je(o)&&(o={mounted:o,updated:o}),o.deep&&Os(i),s.push({dir:o,instance:n,value:i,oldValue:void 0,arg:a,modifiers:l}))}return e}function Rs(e,t,n,s){const r=e.dirs,o=t&&t.dirs;for(let i=0;i<r.length;i++){const a=r[i];o&&(a.oldValue=o[i].value);let l=a.dir[s];l&&(as(),fn(l,n,8,[e.el,a,e,t]),ls())}}const fs=Symbol("_leaveCb"),fi=Symbol("_enterCb");function dv(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ke(()=>{e.isMounted=!0}),hs(()=>{e.isUnmounting=!0}),e}const hn=[Function,Array],Gu={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:hn,onEnter:hn,onAfterEnter:hn,onEnterCancelled:hn,onBeforeLeave:hn,onLeave:hn,onAfterLeave:hn,onLeaveCancelled:hn,onBeforeAppear:hn,onAppear:hn,onAfterAppear:hn,onAppearCancelled:hn},fv={name:"BaseTransition",props:Gu,setup(e,{slots:t}){const n=wn(),s=dv();return()=>{const r=t.default&&Ju(t.default(),!0);if(!r||!r.length)return;let o=r[0];if(r.length>1){for(const h of r)if(h.type!==on){o=h;break}}const i=Je(e),{mode:a}=i;if(s.isLeaving)return tl(o);const l=Qu(o);if(!l)return tl(o);const u=el(l,i,s,n);hi(l,u);const d=n.subTree,f=d&&Qu(d);if(f&&f.type!==on&&!ps(l,f)){const h=el(f,i,s,n);if(hi(f,h),a==="out-in")return s.isLeaving=!0,h.afterLeave=()=>{s.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},tl(o);a==="in-out"&&l.type!==on&&(h.delayLeave=(p,m,x)=>{const y=Ku(s,f);y[String(f.key)]=f,p[fs]=()=>{m(),p[fs]=void 0,delete u.delayedLeave},u.delayedLeave=x})}return o}}};function Ku(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function el(e,t,n,s){const{appear:r,mode:o,persisted:i=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:x,onAppear:y,onAfterAppear:_,onAppearCancelled:C}=t,A=String(e.key),E=Ku(n,e),$=(R,q)=>{R&&fn(R,s,9,q)},T=(R,q)=>{const G=q[1];$(R,q),Oe(R)?R.every(K=>K.length<=1)&&G():R.length<=1&&G()},I={mode:o,persisted:i,beforeEnter(R){let q=a;if(!n.isMounted)if(r)q=x||a;else return;R[fs]&&R[fs](!0);const G=E[A];G&&ps(e,G)&&G.el[fs]&&G.el[fs](),$(q,[R])},enter(R){let q=l,G=u,K=d;if(!n.isMounted)if(r)q=y||l,G=_||u,K=C||d;else return;let H=!1;const ee=R[fi]=ce=>{H||(H=!0,ce?$(K,[R]):$(G,[R]),I.delayedLeave&&I.delayedLeave(),R[fi]=void 0)};q?T(q,[R,ee]):ee()},leave(R,q){const G=String(e.key);if(R[fi]&&R[fi](!0),n.isUnmounting)return q();$(f,[R]);let K=!1;const H=R[fs]=ee=>{K||(K=!0,q(),ee?$(m,[R]):$(p,[R]),R[fs]=void 0,E[G]===e&&delete E[G])};E[G]=e,h?T(h,[R,H]):H()},clone(R){return el(R,t,n,s)}};return I}function tl(e){if(Jr(e))return e=On(e),e.children=null,e}function Qu(e){return Jr(e)?e.children?e.children[0]:void 0:e}function hi(e,t){e.shapeFlag&6&&e.component?hi(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ju(e,t=!1,n){let s=[],r=0;for(let o=0;o<e.length;o++){let i=e[o];const a=n==null?i.key:String(n)+String(i.key!=null?i.key:o);i.type===be?(i.patchFlag&128&&r++,s=s.concat(Ju(i.children,t,a))):(t||i.type!==on)&&s.push(a!=null?On(i,{key:a}):i)}if(r>1)for(let o=0;o<s.length;o++)s[o].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function Lt(e,t){return je(e)?Mt({name:e.name},t,{setup:e}):e}const gr=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Rt(e){je(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:s,delay:r=200,timeout:o,suspensible:i=!0,onError:a}=e;let l=null,u,d=0;const f=()=>(d++,l=null,h()),h=()=>{let p;return l||(p=l=t().catch(m=>{if(m=m instanceof Error?m:new Error(String(m)),a)return new Promise((x,y)=>{a(m,()=>x(f()),()=>y(m),d+1)});throw m}).then(m=>p!==l&&l?l:(m&&(m.__esModule||m[Symbol.toStringTag]==="Module")&&(m=m.default),u=m,m)))};return Lt({name:"AsyncComponentWrapper",__asyncLoader:h,get __asyncResolved(){return u},setup(){const p=$t;if(u)return()=>nl(u,p);const m=C=>{l=null,Gr(C,p,13,!s)};if(i&&p.suspense||ao)return h().then(C=>()=>nl(C,p)).catch(C=>(m(C),()=>s?U(s,{error:C}):null));const x=L(!1),y=L(),_=L(!!r);return r&&setTimeout(()=>{_.value=!1},r),o!=null&&setTimeout(()=>{if(!x.value&&!y.value){const C=new Error(`Async component timed out after ${o}ms.`);m(C),y.value=C}},o),h().then(()=>{x.value=!0,p.parent&&Jr(p.parent.vnode)&&(p.parent.effect.dirty=!0,ii(p.parent.update))}).catch(C=>{m(C),y.value=C}),()=>{if(x.value&&u)return nl(u,p);if(y.value&&s)return U(s,{error:y.value});if(n&&!_.value)return U(n)}}})}function nl(e,t){const{ref:n,props:s,children:r,ce:o}=t.vnode,i=U(e,s,r);return i.ref=n,i.ce=o,delete t.vnode.ce,i}const Jr=e=>e.type.__isKeepAlive,Xr={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=wn(),s=n.ctx;if(!s.renderer)return()=>{const C=t.default&&t.default();return C&&C.length===1?C[0]:C};const r=new Map,o=new Set;let i=null;const a=n.suspense,{renderer:{p:l,m:u,um:d,o:{createElement:f}}}=s,h=f("div");s.activate=(C,A,E,$,T)=>{const I=C.component;u(C,A,E,0,a),l(I.vnode,C,A,E,I,a,$,C.slotScopeIds,T),jt(()=>{I.isDeactivated=!1,I.a&&dr(I.a);const R=C.props&&C.props.onVnodeMounted;R&&pn(R,I.parent,C)},a)},s.deactivate=C=>{const A=C.component;u(C,h,null,1,a),jt(()=>{A.da&&dr(A.da);const E=C.props&&C.props.onVnodeUnmounted;E&&pn(E,A.parent,C),A.isDeactivated=!0},a)};function p(C){sl(C),d(C,n,a,!0)}function m(C){r.forEach((A,E)=>{const $=Ci(A.type);$&&(!C||!C($))&&x(E)})}function x(C){const A=r.get(C);!i||!ps(A,i)?p(A):i&&sl(i),r.delete(C),o.delete(C)}Ee(()=>[e.include,e.exclude],([C,A])=>{C&&m(E=>Zr(C,E)),A&&m(E=>!Zr(A,E))},{flush:"post",deep:!0});let y=null;const _=()=>{y!=null&&r.set(y,rl(n.subTree))};return Ke(_),Zu(_),hs(()=>{r.forEach(C=>{const{subTree:A,suspense:E}=n,$=rl(A);if(C.type===$.type&&C.key===$.key){sl($);const T=$.component.da;T&&jt(T,E);return}p(C)})}),()=>{if(y=null,!t.default)return null;const C=t.default(),A=C[0];if(C.length>1)return i=null,C;if(!oo(A)||!(A.shapeFlag&4)&&!(A.shapeFlag&128))return i=null,A;let E=rl(A);const $=E.type,T=Ci(gr(E)?E.type.__asyncResolved||{}:$),{include:I,exclude:R,max:q}=e;if(I&&(!T||!Zr(I,T))||R&&T&&Zr(R,T))return i=E,A;const G=E.key==null?$:E.key,K=r.get(G);return E.el&&(E=On(E),A.shapeFlag&128&&(A.ssContent=E)),y=G,K?(E.el=K.el,E.component=K.component,E.transition&&hi(E,E.transition),E.shapeFlag|=512,o.delete(G),o.add(G)):(o.add(G),q&&o.size>parseInt(q,10)&&x(o.values().next().value)),E.shapeFlag|=256,i=E,Hu(A.type)?A:E}}};function Zr(e,t){return Oe(e)?e.some(n=>Zr(n,t)):ht(e)?e.split(",").includes(t):eg(e)?e.test(t):!1}function hv(e,t){Xu(e,"a",t)}function pv(e,t){Xu(e,"da",t)}function Xu(e,t,n=$t){const s=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(pi(t,s,n),n){let r=n.parent;for(;r&&r.parent;)Jr(r.parent.vnode)&&mv(s,t,n,r),r=r.parent}}function mv(e,t,n,s){const r=pi(t,e,s,!0);Kt(()=>{Na(s[t],r)},n)}function sl(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function rl(e){return e.shapeFlag&128?e.ssContent:e}function pi(e,t,n=$t,s=!1){if(n){const r=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;as();const a=io(n),l=fn(t,n,e,i);return a(),ls(),l});return s?r.unshift(o):r.push(o),o}}const Gn=e=>(t,n=$t)=>(!ao||e==="sp")&&pi(e,(...s)=>t(...s),n),gv=Gn("bm"),Ke=Gn("m"),vv=Gn("bu"),Zu=Gn("u"),hs=Gn("bum"),Kt=Gn("um"),yv=Gn("sp"),bv=Gn("rtg"),xv=Gn("rtc");function _v(e,t=$t){pi("ec",e,t)}function Ie(e,t,n,s){let r;const o=n;if(Oe(e)||ht(e)){r=new Array(e.length);for(let i=0,a=e.length;i<a;i++)r[i]=t(e[i],i,void 0,o)}else if(typeof e=="number"){r=new Array(e);for(let i=0;i<e;i++)r[i]=t(i+1,i,void 0,o)}else if(ot(e))if(e[Symbol.iterator])r=Array.from(e,(i,a)=>t(i,a,void 0,o));else{const i=Object.keys(e);r=new Array(i.length);for(let a=0,l=i.length;a<l;a++){const u=i[a];r[a]=t(e[u],u,a,o)}}else r=[];return r}function bt(e,t,n={},s,r){if(Pt.isCE||Pt.parent&&gr(Pt.parent)&&Pt.parent.isCE)return t!=="default"&&(n.name=t),U("slot",n,s);let o=e[t];o&&o._c&&(o._d=!1),v();const i=o&&Yu(o(n)),a=re(be,{key:n.key||i&&i.key||`_${t}`},i||[],i&&e._===1?64:-2);return a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function Yu(e){return e.some(t=>oo(t)?!(t.type===on||t.type===be&&!Yu(t.children)):!0)?e:null}const ol=e=>e?Cd(e)?Si(e)||e.proxy:ol(e.parent):null,Yr=Mt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ol(e.parent),$root:e=>ol(e.root),$emit:e=>e.emit,$options:e=>rd(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,ii(e.update)}),$nextTick:e=>e.n||(e.n=gt.bind(e.proxy)),$watch:e=>uv.bind(e)}),il=(e,t)=>e!==Ue&&!e.__isScriptSetup&&Ye(e,t),wv={get({_:e},t){const{ctx:n,setupState:s,data:r,props:o,accessCache:i,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const p=i[t];if(p!==void 0)switch(p){case 1:return s[t];case 2:return r[t];case 4:return n[t];case 3:return o[t]}else{if(il(s,t))return i[t]=1,s[t];if(r!==Ue&&Ye(r,t))return i[t]=2,r[t];if((u=e.propsOptions[0])&&Ye(u,t))return i[t]=3,o[t];if(n!==Ue&&Ye(n,t))return i[t]=4,n[t];al&&(i[t]=0)}}const d=Yr[t];let f,h;if(d)return t==="$attrs"&&Xt(e,"get",t),d(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==Ue&&Ye(n,t))return i[t]=4,n[t];if(h=l.config.globalProperties,Ye(h,t))return h[t]},set({_:e},t,n){const{data:s,setupState:r,ctx:o}=e;return il(r,t)?(r[t]=n,!0):s!==Ue&&Ye(s,t)?(s[t]=n,!0):Ye(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:r,propsOptions:o}},i){let a;return!!n[i]||e!==Ue&&Ye(e,i)||il(t,i)||(a=o[0])&&Ye(a,i)||Ye(s,i)||Ye(Yr,i)||Ye(r.config.globalProperties,i)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ye(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function ed(){return td().slots}function kv(){return td().attrs}function td(){const e=wn();return e.setupContext||(e.setupContext=Ad(e))}function mi(e){return Oe(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function vr(e,t){return!e||!t?e||t:Oe(e)&&Oe(t)?e.concat(t):Mt({},mi(e),mi(t))}let al=!0;function Sv(e){const t=rd(e),n=e.proxy,s=e.ctx;al=!1,t.beforeCreate&&nd(t.beforeCreate,e,"bc");const{data:r,computed:o,methods:i,watch:a,provide:l,inject:u,created:d,beforeMount:f,mounted:h,beforeUpdate:p,updated:m,activated:x,deactivated:y,beforeDestroy:_,beforeUnmount:C,destroyed:A,unmounted:E,render:$,renderTracked:T,renderTriggered:I,errorCaptured:R,serverPrefetch:q,expose:G,inheritAttrs:K,components:H,directives:ee,filters:ce}=t;if(u&&Cv(u,s,null),i)for(const J in i){const ne=i[J];je(ne)&&(s[J]=ne.bind(n))}if(r){const J=r.call(n,n);ot(J)&&(e.data=st(J))}if(al=!0,o)for(const J in o){const ne=o[J],ke=je(ne)?ne.bind(n,n):je(ne.get)?ne.get.bind(n,n):nn,qe=!je(ne)&&je(ne.set)?ne.set.bind(n):nn,Ce=pe({get:ke,set:qe});Object.defineProperty(s,J,{enumerable:!0,configurable:!0,get:()=>Ce.value,set:Re=>Ce.value=Re})}if(a)for(const J in a)sd(a[J],s,n,J);if(l){const J=je(l)?l.call(n):l;Reflect.ownKeys(J).forEach(ne=>{cl(ne,J[ne])})}d&&nd(d,e,"c");function Q(J,ne){Oe(ne)?ne.forEach(ke=>J(ke.bind(n))):ne&&J(ne.bind(n))}if(Q(gv,f),Q(Ke,h),Q(vv,p),Q(Zu,m),Q(hv,x),Q(pv,y),Q(_v,R),Q(xv,T),Q(bv,I),Q(hs,C),Q(Kt,E),Q(yv,q),Oe(G))if(G.length){const J=e.exposed||(e.exposed={});G.forEach(ne=>{Object.defineProperty(J,ne,{get:()=>n[ne],set:ke=>n[ne]=ke})})}else e.exposed||(e.exposed={});$&&e.render===nn&&(e.render=$),K!=null&&(e.inheritAttrs=K),H&&(e.components=H),ee&&(e.directives=ee)}function Cv(e,t,n=nn){Oe(e)&&(e=ll(e));for(const s in e){const r=e[s];let o;ot(r)?"default"in r?o=yr(r.from||s,r.default,!0):o=yr(r.from||s):o=yr(r),St(o)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:i=>o.value=i}):t[s]=o}}function nd(e,t,n){fn(Oe(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function sd(e,t,n,s){const r=s.includes(".")?Wu(n,s):()=>n[s];if(ht(e)){const o=t[e];je(o)&&Ee(r,o)}else if(je(e))Ee(r,e.bind(n));else if(ot(e))if(Oe(e))e.forEach(o=>sd(o,t,n,s));else{const o=je(e.handler)?e.handler.bind(n):t[e.handler];je(o)&&Ee(r,o,e)}}function rd(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:r,optionsCache:o,config:{optionMergeStrategies:i}}=e.appContext,a=o.get(t);let l;return a?l=a:!r.length&&!n&&!s?l=t:(l={},r.length&&r.forEach(u=>gi(l,u,i,!0)),gi(l,t,i)),ot(t)&&o.set(t,l),l}function gi(e,t,n,s=!1){const{mixins:r,extends:o}=t;o&&gi(e,o,n,!0),r&&r.forEach(i=>gi(e,i,n,!0));for(const i in t)if(!(s&&i==="expose")){const a=$v[i]||n&&n[i];e[i]=a?a(e[i],t[i]):t[i]}return e}const $v={data:od,props:id,emits:id,methods:eo,computed:eo,beforeCreate:Qt,created:Qt,beforeMount:Qt,mounted:Qt,beforeUpdate:Qt,updated:Qt,beforeDestroy:Qt,beforeUnmount:Qt,destroyed:Qt,unmounted:Qt,activated:Qt,deactivated:Qt,errorCaptured:Qt,serverPrefetch:Qt,components:eo,directives:eo,watch:Av,provide:od,inject:Tv};function od(e,t){return t?e?function(){return Mt(je(e)?e.call(this,this):e,je(t)?t.call(this,this):t)}:t:e}function Tv(e,t){return eo(ll(e),ll(t))}function ll(e){if(Oe(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Qt(e,t){return e?[...new Set([].concat(e,t))]:t}function eo(e,t){return e?Mt(Object.create(null),e,t):t}function id(e,t){return e?Oe(e)&&Oe(t)?[...new Set([...e,...t])]:Mt(Object.create(null),mi(e),mi(t??{})):t}function Av(e,t){if(!e)return t;if(!t)return e;const n=Mt(Object.create(null),e);for(const s in t)n[s]=Qt(e[s],t[s]);return n}function ad(){return{app:null,config:{isNativeTag:Zm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ev=0;function Iv(e,t){return function(s,r=null){je(s)||(s=Mt({},s)),r!=null&&!ot(r)&&(r=null);const o=ad(),i=new WeakSet;let a=!1;const l=o.app={_uid:Ev++,_component:s,_props:r,_container:null,_context:o,_instance:null,version:t0,get config(){return o.config},set config(u){},use(u,...d){return i.has(u)||(u&&je(u.install)?(i.add(u),u.install(l,...d)):je(u)&&(i.add(u),u(l,...d))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,d){return d?(o.components[u]=d,l):o.components[u]},directive(u,d){return d?(o.directives[u]=d,l):o.directives[u]},mount(u,d,f){if(!a){const h=U(s,r);return h.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),e(h,u,f),a=!0,l._container=u,u.__vue_app__=l,Si(h.component)||h.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,d){return o.provides[u]=d,l},runWithContext(u){const d=to;to=l;try{return u()}finally{to=d}}};return l}}let to=null;function cl(e,t){if($t){let n=$t.provides;const s=$t.parent&&$t.parent.provides;s===n&&(n=$t.provides=Object.create(s)),n[e]=t}}function yr(e,t,n=!1){const s=$t||Pt;if(s||to){const r=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:to._context.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&je(t)?t.call(s&&s.proxy):t}}function Pv(e,t,n,s=!1){const r={},o={};Jo(o,xi,1),e.propsDefaults=Object.create(null),ld(e,t,r,o);for(const i in e.propsOptions[0])i in r||(r[i]=void 0);n?e.props=s?r:Mg(r):e.type.props?e.props=r:e.props=o,e.attrs=o}function Ov(e,t,n,s){const{props:r,attrs:o,vnode:{patchFlag:i}}=e,a=Je(r),[l]=e.propsOptions;let u=!1;if((s||i>0)&&!(i&16)){if(i&8){const d=e.vnode.dynamicProps;for(let f=0;f<d.length;f++){let h=d[f];if(ai(e.emitsOptions,h))continue;const p=t[h];if(l)if(Ye(o,h))p!==o[h]&&(o[h]=p,u=!0);else{const m=sn(h);r[m]=ul(l,a,m,p,e,!1)}else p!==o[h]&&(o[h]=p,u=!0)}}}else{ld(e,t,r,o)&&(u=!0);let d;for(const f in a)(!t||!Ye(t,f)&&((d=os(f))===f||!Ye(t,d)))&&(l?n&&(n[f]!==void 0||n[d]!==void 0)&&(r[f]=ul(l,a,f,void 0,e,!0)):delete r[f]);if(o!==a)for(const f in o)(!t||!Ye(t,f))&&(delete o[f],u=!0)}u&&Hn(e,"set","$attrs")}function ld(e,t,n,s){const[r,o]=e.propsOptions;let i=!1,a;if(t)for(let l in t){if(qr(l))continue;const u=t[l];let d;r&&Ye(r,d=sn(l))?!o||!o.includes(d)?n[d]=u:(a||(a={}))[d]=u:ai(e.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,i=!0)}if(o){const l=Je(n),u=a||Ue;for(let d=0;d<o.length;d++){const f=o[d];n[f]=ul(r,l,f,u[f],e,!Ye(u,f))}}return i}function ul(e,t,n,s,r,o){const i=e[n];if(i!=null){const a=Ye(i,"default");if(a&&s===void 0){const l=i.default;if(i.type!==Function&&!i.skipFactory&&je(l)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const d=io(r);s=u[n]=l.call(null,t),d()}}else s=l}i[0]&&(o&&!a?s=!1:i[1]&&(s===""||s===os(n))&&(s=!0))}return s}function cd(e,t,n=!1){const s=t.propsCache,r=s.get(e);if(r)return r;const o=e.props,i={},a=[];let l=!1;if(!je(e)){const d=f=>{l=!0;const[h,p]=cd(f,t,!0);Mt(i,h),p&&a.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!o&&!l)return ot(e)&&s.set(e,Nt),Nt;if(Oe(o))for(let d=0;d<o.length;d++){const f=sn(o[d]);ud(f)&&(i[f]=Ue)}else if(o)for(const d in o){const f=sn(d);if(ud(f)){const h=o[d],p=i[f]=Oe(h)||je(h)?{type:h}:Mt({},h);if(p){const m=hd(Boolean,p.type),x=hd(String,p.type);p[0]=m>-1,p[1]=x<0||m<x,(m>-1||Ye(p,"default"))&&a.push(f)}}}const u=[i,a];return ot(e)&&s.set(e,u),u}function ud(e){return e[0]!=="$"&&!qr(e)}function dd(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function fd(e,t){return dd(e)===dd(t)}function hd(e,t){return Oe(t)?t.findIndex(n=>fd(n,e)):je(t)&&fd(t,e)?0:-1}const pd=e=>e[0]==="_"||e==="$stable",dl=e=>Oe(e)?e.map(Rn):[Rn(e)],Rv=(e,t,n)=>{if(t._n)return t;const s=xe((...r)=>(Hr.NODE_ENV!=="production"&&$t&&(!n||(n.root,$t.root)),dl(t(...r))),n);return s._c=!1,s},md=(e,t,n)=>{const s=e._ctx;for(const r in e){if(pd(r))continue;const o=e[r];if(je(o))t[r]=Rv(r,o,s);else if(o!=null){const i=dl(o);t[r]=()=>i}}},gd=(e,t)=>{const n=dl(t);e.slots.default=()=>n},Mv=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Je(t),Jo(t,"_",n)):md(t,e.slots={})}else e.slots={},t&&gd(e,t);Jo(e.slots,xi,1)},Lv=(e,t,n)=>{const{vnode:s,slots:r}=e;let o=!0,i=Ue;if(s.shapeFlag&32){const a=t._;a?n&&a===1?o=!1:(Mt(r,t),!n&&a===1&&delete r._):(o=!t.$stable,md(t,r)),i=t}else t&&(gd(e,t),i={default:1});if(o)for(const a in r)!pd(a)&&i[a]==null&&delete r[a]};function fl(e,t,n,s,r=!1){if(Oe(e)){e.forEach((h,p)=>fl(h,t&&(Oe(t)?t[p]:t),n,s,r));return}if(gr(s)&&!r)return;const o=s.shapeFlag&4?Si(s.component)||s.component.proxy:s.el,i=r?null:o,{i:a,r:l}=e,u=t&&t.r,d=a.refs===Ue?a.refs={}:a.refs,f=a.setupState;if(u!=null&&u!==l&&(ht(u)?(d[u]=null,Ye(f,u)&&(f[u]=null)):St(u)&&(u.value=null)),je(l))Wn(l,a,12,[i,d]);else{const h=ht(l),p=St(l);if(h||p){const m=()=>{if(e.f){const x=h?Ye(f,l)?f[l]:d[l]:l.value;r?Oe(x)&&Na(x,o):Oe(x)?x.includes(o)||x.push(o):h?(d[l]=[o],Ye(f,l)&&(f[l]=d[l])):(l.value=[o],e.k&&(d[e.k]=l.value))}else h?(d[l]=i,Ye(f,l)&&(f[l]=i)):p&&(l.value=i,e.k&&(d[e.k]=i))};i?(m.id=-1,jt(m,n)):m()}}}const jt=iv;function Dv(e){return Nv(e)}function Nv(e,t){const n=ru();n.__VUE__=!0;const{insert:s,remove:r,patchProp:o,createElement:i,createText:a,createComment:l,setText:u,setElementText:d,parentNode:f,nextSibling:h,setScopeId:p=nn,insertStaticContent:m}=e,x=(O,F,z,P=null,N=null,Z=null,le=void 0,ie=null,he=!!F.dynamicChildren)=>{if(O===F)return;O&&!ps(O,F)&&(P=Se(O),Re(O,N,Z,!0),O=null),F.patchFlag===-2&&(he=!1,F.dynamicChildren=null);const{type:ae,ref:te,shapeFlag:oe}=F;switch(ae){case yi:y(O,F,z,P);break;case on:_(O,F,z,P);break;case bi:O==null&&C(F,z,P,le);break;case be:H(O,F,z,P,N,Z,le,ie,he);break;default:oe&1?$(O,F,z,P,N,Z,le,ie,he):oe&6?ee(O,F,z,P,N,Z,le,ie,he):(oe&64||oe&128)&&ae.process(O,F,z,P,N,Z,le,ie,he,Ae)}te!=null&&N&&fl(te,O&&O.ref,Z,F||O,!F)},y=(O,F,z,P)=>{if(O==null)s(F.el=a(F.children),z,P);else{const N=F.el=O.el;F.children!==O.children&&u(N,F.children)}},_=(O,F,z,P)=>{O==null?s(F.el=l(F.children||""),z,P):F.el=O.el},C=(O,F,z,P)=>{[O.el,O.anchor]=m(O.children,F,z,P,O.el,O.anchor)},A=({el:O,anchor:F},z,P)=>{let N;for(;O&&O!==F;)N=h(O),s(O,z,P),O=N;s(F,z,P)},E=({el:O,anchor:F})=>{let z;for(;O&&O!==F;)z=h(O),r(O),O=z;r(F)},$=(O,F,z,P,N,Z,le,ie,he)=>{F.type==="svg"?le="svg":F.type==="math"&&(le="mathml"),O==null?T(F,z,P,N,Z,le,ie,he):q(O,F,N,Z,le,ie,he)},T=(O,F,z,P,N,Z,le,ie)=>{let he,ae;const{props:te,shapeFlag:oe,transition:ye,dirs:ge}=O;if(he=O.el=i(O.type,Z,te&&te.is,te),oe&8?d(he,O.children):oe&16&&R(O.children,he,null,P,N,hl(O,Z),le,ie),ge&&Rs(O,null,P,"created"),I(he,O,O.scopeId,le,P),te){for(const ue in te)ue!=="value"&&!qr(ue)&&o(he,ue,null,te[ue],Z,O.children,P,N,de);"value"in te&&o(he,"value",null,te.value,Z),(ae=te.onVnodeBeforeMount)&&pn(ae,P,O)}ge&&Rs(O,null,P,"beforeMount");const De=jv(N,ye);De&&ye.beforeEnter(he),s(he,F,z),((ae=te&&te.onVnodeMounted)||De||ge)&&jt(()=>{ae&&pn(ae,P,O),De&&ye.enter(he),ge&&Rs(O,null,P,"mounted")},N)},I=(O,F,z,P,N)=>{if(z&&p(O,z),P)for(let Z=0;Z<P.length;Z++)p(O,P[Z]);if(N){let Z=N.subTree;if(F===Z){const le=N.vnode;I(O,le,le.scopeId,le.slotScopeIds,N.parent)}}},R=(O,F,z,P,N,Z,le,ie,he=0)=>{for(let ae=he;ae<O.length;ae++){const te=O[ae]=ie?ms(O[ae]):Rn(O[ae]);x(null,te,F,z,P,N,Z,le,ie)}},q=(O,F,z,P,N,Z,le)=>{const ie=F.el=O.el;let{patchFlag:he,dynamicChildren:ae,dirs:te}=F;he|=O.patchFlag&16;const oe=O.props||Ue,ye=F.props||Ue;let ge;if(z&&Ms(z,!1),(ge=ye.onVnodeBeforeUpdate)&&pn(ge,z,F,O),te&&Rs(F,O,z,"beforeUpdate"),z&&Ms(z,!0),ae?G(O.dynamicChildren,ae,ie,z,P,hl(F,N),Z):le||ne(O,F,ie,null,z,P,hl(F,N),Z,!1),he>0){if(he&16)K(ie,F,oe,ye,z,P,N);else if(he&2&&oe.class!==ye.class&&o(ie,"class",null,ye.class,N),he&4&&o(ie,"style",oe.style,ye.style,N),he&8){const De=F.dynamicProps;for(let ue=0;ue<De.length;ue++){const We=De[ue],ct=oe[We],mt=ye[We];(mt!==ct||We==="value")&&o(ie,We,ct,mt,N,O.children,z,P,de)}}he&1&&O.children!==F.children&&d(ie,F.children)}else!le&&ae==null&&K(ie,F,oe,ye,z,P,N);((ge=ye.onVnodeUpdated)||te)&&jt(()=>{ge&&pn(ge,z,F,O),te&&Rs(F,O,z,"updated")},P)},G=(O,F,z,P,N,Z,le)=>{for(let ie=0;ie<F.length;ie++){const he=O[ie],ae=F[ie],te=he.el&&(he.type===be||!ps(he,ae)||he.shapeFlag&70)?f(he.el):z;x(he,ae,te,null,P,N,Z,le,!0)}},K=(O,F,z,P,N,Z,le)=>{if(z!==P){if(z!==Ue)for(const ie in z)!qr(ie)&&!(ie in P)&&o(O,ie,z[ie],null,le,F.children,N,Z,de);for(const ie in P){if(qr(ie))continue;const he=P[ie],ae=z[ie];he!==ae&&ie!=="value"&&o(O,ie,ae,he,le,F.children,N,Z,de)}"value"in P&&o(O,"value",z.value,P.value,le)}},H=(O,F,z,P,N,Z,le,ie,he)=>{const ae=F.el=O?O.el:a(""),te=F.anchor=O?O.anchor:a("");let{patchFlag:oe,dynamicChildren:ye,slotScopeIds:ge}=F;ge&&(ie=ie?ie.concat(ge):ge),O==null?(s(ae,z,P),s(te,z,P),R(F.children||[],z,te,N,Z,le,ie,he)):oe>0&&oe&64&&ye&&O.dynamicChildren?(G(O.dynamicChildren,ye,z,N,Z,le,ie),(F.key!=null||N&&F===N.subTree)&&pl(O,F,!0)):ne(O,F,z,te,N,Z,le,ie,he)},ee=(O,F,z,P,N,Z,le,ie,he)=>{F.slotScopeIds=ie,O==null?F.shapeFlag&512?N.ctx.activate(F,z,P,le,he):ce(F,z,P,N,Z,le,he):W(O,F,he)},ce=(O,F,z,P,N,Z,le)=>{const ie=O.component=Kv(O,P,N);if(Jr(O)&&(ie.ctx.renderer=Ae),Qv(ie),ie.asyncDep){if(N&&N.registerDep(ie,Q),!O.el){const he=ie.subTree=U(on);_(null,he,F,z)}}else Q(ie,O,F,z,N,Z,le)},W=(O,F,z)=>{const P=F.component=O.component;if(nv(O,F,z))if(P.asyncDep&&!P.asyncResolved){J(P,F,z);return}else P.next=F,Jg(P.update),P.effect.dirty=!0,P.update();else F.el=O.el,P.vnode=F},Q=(O,F,z,P,N,Z,le)=>{const ie=()=>{if(O.isMounted){let{next:te,bu:oe,u:ye,parent:ge,vnode:De}=O;{const _t=vd(O);if(_t){te&&(te.el=De.el,J(O,te,le)),_t.asyncDep.then(()=>{O.isUnmounted||ie()});return}}let ue=te,We;Ms(O,!1),te?(te.el=De.el,J(O,te,le)):te=De,oe&&dr(oe),(We=te.props&&te.props.onVnodeBeforeUpdate)&&pn(We,ge,te,De),Ms(O,!0);const ct=qu(O),mt=O.subTree;O.subTree=ct,x(mt,ct,f(mt.el),Se(mt),O,N,Z),te.el=ct.el,ue===null&&sv(O,ct.el),ye&&jt(ye,N),(We=te.props&&te.props.onVnodeUpdated)&&jt(()=>pn(We,ge,te,De),N)}else{let te;const{el:oe,props:ye}=F,{bm:ge,m:De,parent:ue}=O,We=gr(F);Ms(O,!1),ge&&dr(ge),!We&&(te=ye&&ye.onVnodeBeforeMount)&&pn(te,ue,F),Ms(O,!0);{const ct=O.subTree=qu(O);x(null,ct,z,P,O,N,Z),F.el=ct.el}if(De&&jt(De,N),!We&&(te=ye&&ye.onVnodeMounted)){const ct=F;jt(()=>pn(te,ue,ct),N)}(F.shapeFlag&256||ue&&gr(ue.vnode)&&ue.vnode.shapeFlag&256)&&O.a&&jt(O.a,N),O.isMounted=!0,F=z=P=null}},he=O.effect=new qa(ie,nn,()=>ii(ae),O.scope),ae=O.update=()=>{he.dirty&&he.run()};ae.id=O.uid,Ms(O,!0),ae()},J=(O,F,z)=>{F.component=O;const P=O.vnode.props;O.vnode=F,O.next=null,Ov(O,F.props,P,z),Lv(O,F.children,z),as(),Nu(O),ls()},ne=(O,F,z,P,N,Z,le,ie,he=!1)=>{const ae=O&&O.children,te=O?O.shapeFlag:0,oe=F.children,{patchFlag:ye,shapeFlag:ge}=F;if(ye>0){if(ye&128){qe(ae,oe,z,P,N,Z,le,ie,he);return}else if(ye&256){ke(ae,oe,z,P,N,Z,le,ie,he);return}}ge&8?(te&16&&de(ae,N,Z),oe!==ae&&d(z,oe)):te&16?ge&16?qe(ae,oe,z,P,N,Z,le,ie,he):de(ae,N,Z,!0):(te&8&&d(z,""),ge&16&&R(oe,z,P,N,Z,le,ie,he))},ke=(O,F,z,P,N,Z,le,ie,he)=>{O=O||Nt,F=F||Nt;const ae=O.length,te=F.length,oe=Math.min(ae,te);let ye;for(ye=0;ye<oe;ye++){const ge=F[ye]=he?ms(F[ye]):Rn(F[ye]);x(O[ye],ge,z,null,N,Z,le,ie,he)}ae>te?de(O,N,Z,!0,!1,oe):R(F,z,P,N,Z,le,ie,he,oe)},qe=(O,F,z,P,N,Z,le,ie,he)=>{let ae=0;const te=F.length;let oe=O.length-1,ye=te-1;for(;ae<=oe&&ae<=ye;){const ge=O[ae],De=F[ae]=he?ms(F[ae]):Rn(F[ae]);if(ps(ge,De))x(ge,De,z,null,N,Z,le,ie,he);else break;ae++}for(;ae<=oe&&ae<=ye;){const ge=O[oe],De=F[ye]=he?ms(F[ye]):Rn(F[ye]);if(ps(ge,De))x(ge,De,z,null,N,Z,le,ie,he);else break;oe--,ye--}if(ae>oe){if(ae<=ye){const ge=ye+1,De=ge<te?F[ge].el:P;for(;ae<=ye;)x(null,F[ae]=he?ms(F[ae]):Rn(F[ae]),z,De,N,Z,le,ie,he),ae++}}else if(ae>ye)for(;ae<=oe;)Re(O[ae],N,Z,!0),ae++;else{const ge=ae,De=ae,ue=new Map;for(ae=De;ae<=ye;ae++){const Et=F[ae]=he?ms(F[ae]):Rn(F[ae]);Et.key!=null&&ue.set(Et.key,ae)}let We,ct=0;const mt=ye-De+1;let _t=!1,Wt=0;const At=new Array(mt);for(ae=0;ae<mt;ae++)At[ae]=0;for(ae=ge;ae<=oe;ae++){const Et=O[ae];if(ct>=mt){Re(Et,N,Z,!0);continue}let zt;if(Et.key!=null)zt=ue.get(Et.key);else for(We=De;We<=ye;We++)if(At[We-De]===0&&ps(Et,F[We])){zt=We;break}zt===void 0?Re(Et,N,Z,!0):(At[zt-De]=ae+1,zt>=Wt?Wt=zt:_t=!0,x(Et,F[zt],z,null,N,Z,le,ie,he),ct++)}const Tn=_t?Fv(At):Nt;for(We=Tn.length-1,ae=mt-1;ae>=0;ae--){const Et=De+ae,zt=F[Et],ts=Et+1<te?F[Et+1].el:P;At[ae]===0?x(null,zt,z,ts,N,Z,le,ie,he):_t&&(We<0||ae!==Tn[We]?Ce(zt,z,ts,2):We--)}}},Ce=(O,F,z,P,N=null)=>{const{el:Z,type:le,transition:ie,children:he,shapeFlag:ae}=O;if(ae&6){Ce(O.component.subTree,F,z,P);return}if(ae&128){O.suspense.move(F,z,P);return}if(ae&64){le.move(O,F,z,Ae);return}if(le===be){s(Z,F,z);for(let oe=0;oe<he.length;oe++)Ce(he[oe],F,z,P);s(O.anchor,F,z);return}if(le===bi){A(O,F,z);return}if(P!==2&&ae&1&&ie)if(P===0)ie.beforeEnter(Z),s(Z,F,z),jt(()=>ie.enter(Z),N);else{const{leave:oe,delayLeave:ye,afterLeave:ge}=ie,De=()=>s(Z,F,z),ue=()=>{oe(Z,()=>{De(),ge&&ge()})};ye?ye(Z,De,ue):ue()}else s(Z,F,z)},Re=(O,F,z,P=!1,N=!1)=>{const{type:Z,props:le,ref:ie,children:he,dynamicChildren:ae,shapeFlag:te,patchFlag:oe,dirs:ye}=O;if(ie!=null&&fl(ie,null,z,O,!0),te&256){F.ctx.deactivate(O);return}const ge=te&1&&ye,De=!gr(O);let ue;if(De&&(ue=le&&le.onVnodeBeforeUnmount)&&pn(ue,F,O),te&6)X(O.component,z,P);else{if(te&128){O.suspense.unmount(z,P);return}ge&&Rs(O,null,F,"beforeUnmount"),te&64?O.type.remove(O,F,z,N,Ae,P):ae&&(Z!==be||oe>0&&oe&64)?de(ae,F,z,!1,!0):(Z===be&&oe&384||!N&&te&16)&&de(he,F,z),P&&Be(O)}(De&&(ue=le&&le.onVnodeUnmounted)||ge)&&jt(()=>{ue&&pn(ue,F,O),ge&&Rs(O,null,F,"unmounted")},z)},Be=O=>{const{type:F,el:z,anchor:P,transition:N}=O;if(F===be){Ne(z,P);return}if(F===bi){E(O);return}const Z=()=>{r(z),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(O.shapeFlag&1&&N&&!N.persisted){const{leave:le,delayLeave:ie}=N,he=()=>le(z,Z);ie?ie(O.el,Z,he):he()}else Z()},Ne=(O,F)=>{let z;for(;O!==F;)z=h(O),r(O),O=z;r(F)},X=(O,F,z)=>{const{bum:P,scope:N,update:Z,subTree:le,um:ie}=O;P&&dr(P),N.stop(),Z&&(Z.active=!1,Re(le,O,F,z)),ie&&jt(ie,F),jt(()=>{O.isUnmounted=!0},F),F&&F.pendingBranch&&!F.isUnmounted&&O.asyncDep&&!O.asyncResolved&&O.suspenseId===F.pendingId&&(F.deps--,F.deps===0&&F.resolve())},de=(O,F,z,P=!1,N=!1,Z=0)=>{for(let le=Z;le<O.length;le++)Re(O[le],F,z,P,N)},Se=O=>O.shapeFlag&6?Se(O.component.subTree):O.shapeFlag&128?O.suspense.next():h(O.anchor||O.el);let _e=!1;const $e=(O,F,z)=>{O==null?F._vnode&&Re(F._vnode,null,null,!0):x(F._vnode||null,O,F,null,null,null,z),_e||(_e=!0,Nu(),ju(),_e=!1),F._vnode=O},Ae={p:x,um:Re,m:Ce,r:Be,mt:ce,mc:R,pc:ne,pbc:G,n:Se,o:e};return{render:$e,hydrate:void 0,createApp:Iv($e)}}function hl({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ms({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function jv(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function pl(e,t,n=!1){const s=e.children,r=t.children;if(Oe(s)&&Oe(r))for(let o=0;o<s.length;o++){const i=s[o];let a=r[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[o]=ms(r[o]),a.el=i.el),n||pl(i,a)),a.type===yi&&(a.el=i.el)}}function Fv(e){const t=e.slice(),n=[0];let s,r,o,i,a;const l=e.length;for(s=0;s<l;s++){const u=e[s];if(u!==0){if(r=n[n.length-1],e[r]<u){t[s]=r,n.push(s);continue}for(o=0,i=n.length-1;o<i;)a=o+i>>1,e[n[a]]<u?o=a+1:i=a;u<e[n[o]]&&(o>0&&(t[s]=n[o-1]),n[o]=s)}}for(o=n.length,i=n[o-1];o-- >0;)n[o]=i,i=t[i];return n}function vd(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:vd(t)}const zv=e=>e.__isTeleport,no=e=>e&&(e.disabled||e.disabled===""),yd=e=>typeof SVGElement<"u"&&e instanceof SVGElement,bd=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,ml=(e,t)=>{const n=e&&e.to;return ht(n)?t?t(n):null:n},qv={name:"Teleport",__isTeleport:!0,process(e,t,n,s,r,o,i,a,l,u){const{mc:d,pc:f,pbc:h,o:{insert:p,querySelector:m,createText:x,createComment:y}}=u,_=no(t.props);let{shapeFlag:C,children:A,dynamicChildren:E}=t;if(e==null){const $=t.el=x(""),T=t.anchor=x("");p($,n,s),p(T,n,s);const I=t.target=ml(t.props,m),R=t.targetAnchor=x("");I&&(p(R,I),i==="svg"||yd(I)?i="svg":(i==="mathml"||bd(I))&&(i="mathml"));const q=(G,K)=>{C&16&&d(A,G,K,r,o,i,a,l)};_?q(n,T):I&&q(I,R)}else{t.el=e.el;const $=t.anchor=e.anchor,T=t.target=e.target,I=t.targetAnchor=e.targetAnchor,R=no(e.props),q=R?n:T,G=R?$:I;if(i==="svg"||yd(T)?i="svg":(i==="mathml"||bd(T))&&(i="mathml"),E?(h(e.dynamicChildren,E,q,r,o,i,a),pl(e,t,!0)):l||f(e,t,q,G,r,o,i,a,!1),_)R?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):vi(t,n,$,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const K=t.target=ml(t.props,m);K&&vi(t,K,null,u,0)}else R&&vi(t,T,I,u,1)}xd(t)},remove(e,t,n,s,{um:r,o:{remove:o}},i){const{shapeFlag:a,children:l,anchor:u,targetAnchor:d,target:f,props:h}=e;if(f&&o(d),i&&o(u),a&16){const p=i||!no(h);for(let m=0;m<l.length;m++){const x=l[m];r(x,t,n,p,!!x.dynamicChildren)}}},move:vi,hydrate:Bv};function vi(e,t,n,{o:{insert:s},m:r},o=2){o===0&&s(e.targetAnchor,t,n);const{el:i,anchor:a,shapeFlag:l,children:u,props:d}=e,f=o===2;if(f&&s(i,t,n),(!f||no(d))&&l&16)for(let h=0;h<u.length;h++)r(u[h],t,n,2);f&&s(a,t,n)}function Bv(e,t,n,s,r,o,{o:{nextSibling:i,parentNode:a,querySelector:l}},u){const d=t.target=ml(t.props,l);if(d){const f=d._lpa||d.firstChild;if(t.shapeFlag&16)if(no(t.props))t.anchor=u(i(e),t,a(e),n,s,r,o),t.targetAnchor=f;else{t.anchor=i(e);let h=f;for(;h;)if(h=i(h),h&&h.nodeType===8&&h.data==="teleport anchor"){t.targetAnchor=h,d._lpa=t.targetAnchor&&i(t.targetAnchor);break}u(f,t,d,n,s,r,o)}xd(t)}return t.anchor&&i(t.anchor)}const Uv=qv;function xd(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;for(;n&&n!==e.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const be=Symbol.for("v-fgt"),yi=Symbol.for("v-txt"),on=Symbol.for("v-cmt"),bi=Symbol.for("v-stc"),so=[];let _n=null;function v(e=!1){so.push(_n=e?null:[])}function Vv(){so.pop(),_n=so[so.length-1]||null}let ro=1;function _d(e){ro+=e}function wd(e){return e.dynamicChildren=ro>0?_n||Nt:null,Vv(),ro>0&&_n&&_n.push(e),e}function k(e,t,n,s,r,o){return wd(c(e,t,n,s,r,o,!0))}function re(e,t,n,s,r){return wd(U(e,t,n,s,r,!0))}function oo(e){return e?e.__v_isVNode===!0:!1}function ps(e,t){return e.type===t.type&&e.key===t.key}const xi="__vInternal",kd=({key:e})=>e??null,_i=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ht(e)||St(e)||je(e)?{i:Pt,r:e,k:t,f:!!n}:e:null);function c(e,t=null,n=null,s=0,r=null,o=e===be?0:1,i=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&kd(t),ref:t&&_i(t),scopeId:li,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Pt};return a?(vl(l,n),o&128&&e.normalize(l)):n&&(l.shapeFlag|=ht(n)?8:16),ro>0&&!i&&_n&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&_n.push(l),l}const U=Hv;function Hv(e,t=null,n=null,s=0,r=null,o=!1){if((!e||e===Uu)&&(e=on),oo(e)){const a=On(e,t,!0);return n&&vl(a,n),ro>0&&!o&&_n&&(a.shapeFlag&6?_n[_n.indexOf(e)]=a:_n.push(a)),a.patchFlag|=-2,a}if(e0(e)&&(e=e.__vccOpts),t){t=wi(t);let{class:a,style:l}=t;a&&!ht(a)&&(t.class=se(a)),ot(l)&&(Tu(l)&&!Oe(l)&&(l=Mt({},l)),t.style=kt(l))}const i=ht(e)?1:Hu(e)?128:zv(e)?64:ot(e)?4:je(e)?2:0;return c(e,t,n,s,r,i,o,!0)}function wi(e){return e?Tu(e)||xi in e?Mt({},e):e:null}function On(e,t,n=!1){const{props:s,ref:r,patchFlag:o,children:i}=e,a=t?an(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&kd(a),ref:t&&t.ref?n&&r?Oe(r)?r.concat(_i(t)):[r,_i(t)]:_i(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==be?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&On(e.ssContent),ssFallback:e.ssFallback&&On(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Fe(e=" ",t=0){return U(yi,null,e,t)}function gl(e,t){const n=U(bi,null,e);return n.staticCount=t,n}function B(e="",t=!1){return t?(v(),re(on,null,e)):U(on,null,e)}function Rn(e){return e==null||typeof e=="boolean"?U(on):Oe(e)?U(be,null,e.slice()):typeof e=="object"?ms(e):U(yi,null,String(e))}function ms(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:On(e)}function vl(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(Oe(t))n=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),vl(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!(xi in t)?t._ctx=Pt:r===3&&Pt&&(Pt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else je(t)?(t={default:t,_ctx:Pt},n=32):(t=String(t),s&64?(n=16,t=[Fe(t)]):n=8);e.children=t,e.shapeFlag|=n}function an(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=se([t.class,s.class]));else if(r==="style")t.style=kt([t.style,s.style]);else if(Wo(r)){const o=t[r],i=s[r];i&&o!==i&&!(Oe(o)&&o.includes(i))&&(t[r]=o?[].concat(o,i):i)}else r!==""&&(t[r]=s[r])}return t}function pn(e,t,n,s=null){fn(e,t,7,[n,s])}const Wv=ad();let Gv=0;function Kv(e,t,n){const s=e.type,r=(t?t.appContext:e.appContext)||Wv,o={uid:Gv++,vnode:e,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new au(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cd(s,r),emitsOptions:zu(s,r),emit:null,emitted:null,propsDefaults:Ue,inheritAttrs:s.inheritAttrs,ctx:Ue,data:Ue,props:Ue,attrs:Ue,slots:Ue,refs:Ue,setupState:Ue,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Yg.bind(null,o),e.ce&&e.ce(o),o}let $t=null;const wn=()=>$t||Pt;let ki,yl;{const e=ru(),t=(n,s)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(s),o=>{r.length>1?r.forEach(i=>i(o)):r[0](o)}};ki=t("__VUE_INSTANCE_SETTERS__",n=>$t=n),yl=t("__VUE_SSR_SETTERS__",n=>ao=n)}const io=e=>{const t=$t;return ki(e),e.scope.on(),()=>{e.scope.off(),ki(t)}},Sd=()=>{$t&&$t.scope.off(),ki(null)};function Cd(e){return e.vnode.shapeFlag&4}let ao=!1;function Qv(e,t=!1){t&&yl(t);const{props:n,children:s}=e.vnode,r=Cd(e);Pv(e,n,r,t),Mv(e,s);const o=r?Jv(e,t):void 0;return t&&yl(!1),o}function Jv(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Au(new Proxy(e.ctx,wv));const{setup:s}=n;if(s){const r=e.setupContext=s.length>1?Ad(e):null,o=io(e);as();const i=Wn(s,e,0,[e.props,r]);if(ls(),o(),eu(i)){if(i.then(Sd,Sd),t)return i.then(a=>{$d(e,a)}).catch(a=>{Gr(a,e,0)});e.asyncDep=i}else $d(e,i)}else Td(e)}function $d(e,t,n){je(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ot(t)&&(e.setupState=Ou(t)),Td(e)}function Td(e,t,n){const s=e.type;e.render||(e.render=s.render||nn);{const r=io(e);as();try{Sv(e)}finally{ls(),r()}}}function Xv(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Xt(e,"get","$attrs"),t[n]}}))}function Ad(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return Xv(e)},slots:e.slots,emit:e.emit,expose:t}}function Si(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ou(Au(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Yr)return Yr[n](e)},has(t,n){return n in t||n in Yr}}))}const Zv=/(?:^|[-_])(\w)/g,Yv=e=>e.replace(Zv,t=>t.toUpperCase()).replace(/[-_]/g,"");function Ci(e,t=!0){return je(e)?e.displayName||e.name:e.name||t&&e.__name}function Ed(e,t,n=!1){let s=Ci(t);if(!s&&t.__file){const r=t.__file.match(/([^/\\]+)\.\w+$/);r&&(s=r[1])}if(!s&&e&&e.parent){const r=o=>{for(const i in o)if(o[i]===t)return i};s=r(e.components||e.parent.type.components)||r(e.appContext.components)}return s?Yv(s):n?"App":"Anonymous"}function e0(e){return je(e)&&"__vccOpts"in e}const pe=(e,t)=>Lg(e,t,ao);function Ls(e,t,n=Ue){const s=wn(),r=sn(t),o=os(t),i=Fg((l,u)=>{let d;return cv(()=>{const f=e[t];An(d,f)&&(d=f,u())}),{get(){return l(),n.get?n.get(d):d},set(f){const h=s.vnode.props;!(h&&(t in h||r in h||o in h)&&(`onUpdate:${t}`in h||`onUpdate:${r}`in h||`onUpdate:${o}`in h))&&An(f,d)&&(d=f,u()),s.emit(`update:${t}`,n.set?n.set(f):f)}}}),a=t==="modelValue"?"modelModifiers":`${t}Modifiers`;return i[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?e[a]||{}:i,done:!1}:{done:!0}}}},i}function Ds(e,t,n){const s=arguments.length;return s===2?ot(t)&&!Oe(t)?oo(t)?U(e,null,[t]):U(e,t):U(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&oo(n)&&(n=[n]),U(e,t,n))}const t0="3.4.21",n0="http://www.w3.org/2000/svg",s0="http://www.w3.org/1998/Math/MathML",gs=typeof document<"u"?document:null,Id=gs&&gs.createElement("template"),r0={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const r=t==="svg"?gs.createElementNS(n0,e):t==="mathml"?gs.createElementNS(s0,e):gs.createElement(e,n?{is:n}:void 0);return e==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:e=>gs.createTextNode(e),createComment:e=>gs.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>gs.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,r,o){const i=n?n.previousSibling:t.lastChild;if(r&&(r===o||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===o||!(r=r.nextSibling)););else{Id.innerHTML=s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e;const a=Id.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},vs="transition",lo="animation",co=Symbol("_vtc"),mn=(e,{slots:t})=>Ds(fv,o0(e),t);mn.displayName="Transition";const Pd={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};mn.props=Mt({},Gu,Pd);const Ns=(e,t=[])=>{Oe(e)?e.forEach(n=>n(...t)):e&&e(...t)},Od=e=>e?Oe(e)?e.some(t=>t.length>1):e.length>1:!1;function o0(e){const t={};for(const H in e)H in Pd||(t[H]=e[H]);if(e.css===!1)return t;const{name:n="v",type:s,duration:r,enterFromClass:o=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=o,appearActiveClass:u=i,appearToClass:d=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,m=i0(r),x=m&&m[0],y=m&&m[1],{onBeforeEnter:_,onEnter:C,onEnterCancelled:A,onLeave:E,onLeaveCancelled:$,onBeforeAppear:T=_,onAppear:I=C,onAppearCancelled:R=A}=t,q=(H,ee,ce)=>{js(H,ee?d:a),js(H,ee?u:i),ce&&ce()},G=(H,ee)=>{H._isLeaving=!1,js(H,f),js(H,p),js(H,h),ee&&ee()},K=H=>(ee,ce)=>{const W=H?I:C,Q=()=>q(ee,H,ce);Ns(W,[ee,Q]),Rd(()=>{js(ee,H?l:o),ys(ee,H?d:a),Od(W)||Md(ee,s,x,Q)})};return Mt(t,{onBeforeEnter(H){Ns(_,[H]),ys(H,o),ys(H,i)},onBeforeAppear(H){Ns(T,[H]),ys(H,l),ys(H,u)},onEnter:K(!1),onAppear:K(!0),onLeave(H,ee){H._isLeaving=!0;const ce=()=>G(H,ee);ys(H,f),c0(),ys(H,h),Rd(()=>{H._isLeaving&&(js(H,f),ys(H,p),Od(E)||Md(H,s,y,ce))}),Ns(E,[H,ce])},onEnterCancelled(H){q(H,!1),Ns(A,[H])},onAppearCancelled(H){q(H,!0),Ns(R,[H])},onLeaveCancelled(H){G(H),Ns($,[H])}})}function i0(e){if(e==null)return null;if(ot(e))return[bl(e.enter),bl(e.leave)];{const t=bl(e);return[t,t]}}function bl(e){return rg(e)}function ys(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[co]||(e[co]=new Set)).add(t)}function js(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[co];n&&(n.delete(t),n.size||(e[co]=void 0))}function Rd(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let a0=0;function Md(e,t,n,s){const r=e._endId=++a0,o=()=>{r===e._endId&&s()};if(n)return setTimeout(o,n);const{type:i,timeout:a,propCount:l}=l0(e,t);if(!i)return s();const u=i+"end";let d=0;const f=()=>{e.removeEventListener(u,h),o()},h=p=>{p.target===e&&++d>=l&&f()};setTimeout(()=>{d<l&&f()},a+1),e.addEventListener(u,h)}function l0(e,t){const n=window.getComputedStyle(e),s=m=>(n[m]||"").split(", "),r=s(`${vs}Delay`),o=s(`${vs}Duration`),i=Ld(r,o),a=s(`${lo}Delay`),l=s(`${lo}Duration`),u=Ld(a,l);let d=null,f=0,h=0;t===vs?i>0&&(d=vs,f=i,h=o.length):t===lo?u>0&&(d=lo,f=u,h=l.length):(f=Math.max(i,u),d=f>0?i>u?vs:lo:null,h=d?d===vs?o.length:l.length:0);const p=d===vs&&/\b(transform|all)(,|$)/.test(s(`${vs}Property`).toString());return{type:d,timeout:f,propCount:h,hasTransform:p}}function Ld(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Dd(n)+Dd(e[s])))}function Dd(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function c0(){return document.body.offsetHeight}function u0(e,t,n){const s=e[co];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const $i=Symbol("_vod"),Nd=Symbol("_vsh"),uo={beforeMount(e,{value:t},{transition:n}){e[$i]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):fo(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),fo(e,!0),s.enter(e)):s.leave(e,()=>{fo(e,!1)}):fo(e,t))},beforeUnmount(e,{value:t}){fo(e,t)}};function fo(e,t){e.style.display=t?e[$i]:"none",e[Nd]=!t}const d0=Symbol(""),f0=/(^|;)\s*display\s*:/;function h0(e,t,n){const s=e.style,r=ht(n);let o=!1;if(n&&!r){if(t)if(ht(t))for(const i of t.split(";")){const a=i.slice(0,i.indexOf(":")).trim();n[a]==null&&Ti(s,a,"")}else for(const i in t)n[i]==null&&Ti(s,i,"");for(const i in n)i==="display"&&(o=!0),Ti(s,i,n[i])}else if(r){if(t!==n){const i=s[d0];i&&(n+=";"+i),s.cssText=n,o=f0.test(n)}}else t&&e.removeAttribute("style");$i in e&&(e[$i]=o?s.display:"",e[Nd]&&(s.display="none"))}const jd=/\s*!important$/;function Ti(e,t,n){if(Oe(n))n.forEach(s=>Ti(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=p0(e,t);jd.test(n)?e.setProperty(os(s),n.replace(jd,""),"important"):e[s]=n}}const Fd=["Webkit","Moz","ms"],xl={};function p0(e,t){const n=xl[t];if(n)return n;let s=sn(t);if(s!=="filter"&&s in e)return xl[t]=s;s=Ko(s);for(let r=0;r<Fd.length;r++){const o=Fd[r]+s;if(o in e)return xl[t]=o}return t}const zd="http://www.w3.org/1999/xlink";function m0(e,t,n,s,r){if(s&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(zd,t.slice(6,t.length)):e.setAttributeNS(zd,t,n);else{const o=cg(t);n==null||o&&!ou(n)?e.removeAttribute(t):e.setAttribute(t,o?"":n)}}function g0(e,t,n,s,r,o,i){if(t==="innerHTML"||t==="textContent"){s&&i(s,r,o),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const u=a==="OPTION"?e.getAttribute("value")||"":e.value,d=n??"";(u!==d||!("_value"in e))&&(e.value=d),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const u=typeof e[t];u==="boolean"?n=ou(n):n==null&&u==="string"?(n="",l=!0):u==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function Kn(e,t,n,s){e.addEventListener(t,n,s)}function v0(e,t,n,s){e.removeEventListener(t,n,s)}const qd=Symbol("_vei");function y0(e,t,n,s,r=null){const o=e[qd]||(e[qd]={}),i=o[t];if(s&&i)i.value=s;else{const[a,l]=b0(t);if(s){const u=o[t]=w0(s,r);Kn(e,a,u,l)}else i&&(v0(e,a,i,l),o[t]=void 0)}}const Bd=/(?:Once|Passive|Capture)$/;function b0(e){let t;if(Bd.test(e)){t={};let s;for(;s=e.match(Bd);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):os(e.slice(2)),t]}let _l=0;const x0=Promise.resolve(),_0=()=>_l||(x0.then(()=>_l=0),_l=Date.now());function w0(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;fn(k0(s,n.value),t,5,[s])};return n.value=e,n.attached=_0(),n}function k0(e,t){if(Oe(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>r=>!r._stopped&&s&&s(r))}else return t}const Ud=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,S0=(e,t,n,s,r,o,i,a,l)=>{const u=r==="svg";t==="class"?u0(e,s,u):t==="style"?h0(e,n,s):Wo(t)?Da(t)||y0(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):C0(e,t,s,u))?g0(e,t,s,o,i,a,l):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),m0(e,t,s,u))};function C0(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ud(t)&&je(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Ud(t)&&ht(n)?!1:t in e}const bs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Oe(t)?n=>dr(t,n):t};function $0(e){e.target.composing=!0}function Vd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const gn=Symbol("_assign"),ln={created(e,{modifiers:{lazy:t,trim:n,number:s}},r){e[gn]=bs(r);const o=s||r.props&&r.props.type==="number";Kn(e,t?"change":"input",i=>{if(i.target.composing)return;let a=e.value;n&&(a=a.trim()),o&&(a=Br(a)),e[gn](a)}),n&&Kn(e,"change",()=>{e.value=e.value.trim()}),t||(Kn(e,"compositionstart",$0),Kn(e,"compositionend",Vd),Kn(e,"change",Vd))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:s,number:r}},o){if(e[gn]=bs(o),e.composing)return;const i=r||e.type==="number"?Br(e.value):e.value,a=t??"";i!==a&&(document.activeElement===e&&e.type!=="range"&&(n||s&&e.value.trim()===a)||(e.value=a))}},T0={deep:!0,created(e,t,n){e[gn]=bs(n),Kn(e,"change",()=>{const s=e._modelValue,r=br(e),o=e.checked,i=e[gn];if(Oe(s)){const a=Fa(s,r),l=a!==-1;if(o&&!l)i(s.concat(r));else if(!o&&l){const u=[...s];u.splice(a,1),i(u)}}else if(cr(s)){const a=new Set(s);o?a.add(r):a.delete(r),i(a)}else i(Qd(e,o))})},mounted:Hd,beforeUpdate(e,t,n){e[gn]=bs(n),Hd(e,t,n)}};function Hd(e,{value:t,oldValue:n},s){e._modelValue=t,Oe(t)?e.checked=Fa(t,s.props.value)>-1:cr(t)?e.checked=t.has(s.props.value):t!==n&&(e.checked=As(t,Qd(e,!0)))}const Wd={created(e,{value:t},n){e.checked=As(t,n.props.value),e[gn]=bs(n),Kn(e,"change",()=>{e[gn](br(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e[gn]=bs(s),t!==n&&(e.checked=As(t,s.props.value))}},Gd={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const r=cr(t);Kn(e,"change",()=>{const o=Array.prototype.filter.call(e.options,i=>i.selected).map(i=>n?Br(br(i)):br(i));e[gn](e.multiple?r?new Set(o):o:o[0]),e._assigning=!0,gt(()=>{e._assigning=!1})}),e[gn]=bs(s)},mounted(e,{value:t,modifiers:{number:n}}){Kd(e,t,n)},beforeUpdate(e,t,n){e[gn]=bs(n)},updated(e,{value:t,modifiers:{number:n}}){e._assigning||Kd(e,t,n)}};function Kd(e,t,n){const s=e.multiple,r=Oe(t);if(!(s&&!r&&!cr(t))){for(let o=0,i=e.options.length;o<i;o++){const a=e.options[o],l=br(a);if(s)if(r){const u=typeof l;u==="string"||u==="number"?a.selected=t.includes(n?Br(l):l):a.selected=Fa(t,l)>-1}else a.selected=t.has(l);else if(As(br(a),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function br(e){return"_value"in e?e._value:e.value}function Qd(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const A0={created(e,t,n){Ai(e,t,n,null,"created")},mounted(e,t,n){Ai(e,t,n,null,"mounted")},beforeUpdate(e,t,n,s){Ai(e,t,n,s,"beforeUpdate")},updated(e,t,n,s){Ai(e,t,n,s,"updated")}};function E0(e,t){switch(e){case"SELECT":return Gd;case"TEXTAREA":return ln;default:switch(t){case"checkbox":return T0;case"radio":return Wd;default:return ln}}}function Ai(e,t,n,s,r){const i=E0(e.tagName,n.props&&n.props.type)[r];i&&i(e,t,n,s)}const I0=["ctrl","shift","alt","meta"],P0={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>I0.some(n=>e[`${n}Key`]&&!t.includes(n))},cn=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(r,...o)=>{for(let i=0;i<t.length;i++){const a=P0[t[i]];if(a&&a(r,t))return}return e(r,...o)})},O0={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},wl=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=r=>{if(!("key"in r))return;const o=os(r.key);if(t.some(i=>i===o||O0[i]===o))return e(r)})},R0=Mt({patchProp:S0},r0);let Jd;function M0(){return Jd||(Jd=Dv(R0))}const ho=(...e)=>{const t=M0().createApp(...e),{mount:n}=t;return t.mount=s=>{const r=D0(s);if(!r)return;const o=t._component;!je(o)&&!o.render&&!o.template&&(o.template=r.innerHTML),r.innerHTML="";const i=n(r,!1,L0(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),i},t};function L0(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function D0(e){return ht(e)?document.querySelector(e):e}function Xd(e,t){return function(){return e.apply(t,arguments)}}const{toString:N0}=Object.prototype,{getPrototypeOf:kl}=Object,{iterator:Ei,toStringTag:Zd}=Symbol,Ii=(e=>t=>{const n=N0.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kn=e=>(e=e.toLowerCase(),t=>Ii(t)===e),Pi=e=>t=>typeof t===e,{isArray:xr}=Array,_r=Pi("undefined");function po(e){return e!==null&&!_r(e)&&e.constructor!==null&&!_r(e.constructor)&&Zt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Yd=kn("ArrayBuffer");function j0(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Yd(e.buffer),t}const F0=Pi("string"),Zt=Pi("function"),ef=Pi("number"),mo=e=>e!==null&&typeof e=="object",z0=e=>e===!0||e===!1,Oi=e=>{if(Ii(e)!=="object")return!1;const t=kl(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Zd in e)&&!(Ei in e)},q0=e=>{if(!mo(e)||po(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},B0=kn("Date"),U0=kn("File"),V0=kn("Blob"),H0=kn("FileList"),W0=e=>mo(e)&&Zt(e.pipe),G0=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Zt(e.append)&&((t=Ii(e))==="formdata"||t==="object"&&Zt(e.toString)&&e.toString()==="[object FormData]"))},K0=kn("URLSearchParams"),[Q0,J0,X0,Z0]=["ReadableStream","Request","Response","Headers"].map(kn),Y0=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function go(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),xr(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(po(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let a;for(s=0;s<i;s++)a=o[s],t.call(null,e[a],a,e)}}function tf(e,t){if(po(e))return null;t=t.toLowerCase();const n=Object.keys(e);let s=n.length,r;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const Fs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,nf=e=>!_r(e)&&e!==Fs;function Sl(){const{caseless:e,skipUndefined:t}=nf(this)&&this||{},n={},s=(r,o)=>{const i=e&&tf(n,o)||o;Oi(n[i])&&Oi(r)?n[i]=Sl(n[i],r):Oi(r)?n[i]=Sl({},r):xr(r)?n[i]=r.slice():(!t||!_r(r))&&(n[i]=r)};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&go(arguments[r],s);return n}const ey=(e,t,n,{allOwnKeys:s}={})=>(go(t,(r,o)=>{n&&Zt(r)?e[o]=Xd(r,n):e[o]=r},{allOwnKeys:s}),e),ty=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ny=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},sy=(e,t,n,s)=>{let r,o,i;const a={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),o=r.length;o-- >0;)i=r[o],(!s||s(i,e,t))&&!a[i]&&(t[i]=e[i],a[i]=!0);e=n!==!1&&kl(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},ry=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},oy=e=>{if(!e)return null;if(xr(e))return e;let t=e.length;if(!ef(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},iy=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&kl(Uint8Array)),ay=(e,t)=>{const s=(e&&e[Ei]).call(e);let r;for(;(r=s.next())&&!r.done;){const o=r.value;t.call(e,o[0],o[1])}},ly=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},cy=kn("HTMLFormElement"),uy=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),sf=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),dy=kn("RegExp"),rf=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};go(n,(r,o)=>{let i;(i=t(r,o,e))!==!1&&(s[o]=i||r)}),Object.defineProperties(e,s)},fy=e=>{rf(e,(t,n)=>{if(Zt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(Zt(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},hy=(e,t)=>{const n={},s=r=>{r.forEach(o=>{n[o]=!0})};return xr(e)?s(e):s(String(e).split(t)),n},py=()=>{},my=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function gy(e){return!!(e&&Zt(e.append)&&e[Zd]==="FormData"&&e[Ei])}const vy=e=>{const t=new Array(10),n=(s,r)=>{if(mo(s)){if(t.indexOf(s)>=0)return;if(po(s))return s;if(!("toJSON"in s)){t[r]=s;const o=xr(s)?[]:{};return go(s,(i,a)=>{const l=n(i,r+1);!_r(l)&&(o[a]=l)}),t[r]=void 0,o}}return s};return n(e,0)},yy=kn("AsyncFunction"),by=e=>e&&(mo(e)||Zt(e))&&Zt(e.then)&&Zt(e.catch),of=((e,t)=>e?setImmediate:t?((n,s)=>(Fs.addEventListener("message",({source:r,data:o})=>{r===Fs&&o===n&&s.length&&s.shift()()},!1),r=>{s.push(r),Fs.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Zt(Fs.postMessage)),xy=typeof queueMicrotask<"u"?queueMicrotask.bind(Fs):typeof process<"u"&&process.nextTick||of,Y={isArray:xr,isArrayBuffer:Yd,isBuffer:po,isFormData:G0,isArrayBufferView:j0,isString:F0,isNumber:ef,isBoolean:z0,isObject:mo,isPlainObject:Oi,isEmptyObject:q0,isReadableStream:Q0,isRequest:J0,isResponse:X0,isHeaders:Z0,isUndefined:_r,isDate:B0,isFile:U0,isBlob:V0,isRegExp:dy,isFunction:Zt,isStream:W0,isURLSearchParams:K0,isTypedArray:iy,isFileList:H0,forEach:go,merge:Sl,extend:ey,trim:Y0,stripBOM:ty,inherits:ny,toFlatObject:sy,kindOf:Ii,kindOfTest:kn,endsWith:ry,toArray:oy,forEachEntry:ay,matchAll:ly,isHTMLForm:cy,hasOwnProperty:sf,hasOwnProp:sf,reduceDescriptors:rf,freezeMethods:fy,toObjectSet:hy,toCamelCase:uy,noop:py,toFiniteNumber:my,findKey:tf,global:Fs,isContextDefined:nf,isSpecCompliantForm:gy,toJSONObject:vy,isAsyncFn:yy,isThenable:by,setImmediate:of,asap:xy,isIterable:e=>e!=null&&Zt(e[Ei])};function He(e,t,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}Y.inherits(He,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Y.toJSONObject(this.config),code:this.code,status:this.status}}});const af=He.prototype,lf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{lf[e]={value:e}}),Object.defineProperties(He,lf),Object.defineProperty(af,"isAxiosError",{value:!0}),He.from=(e,t,n,s,r,o)=>{const i=Object.create(af);Y.toFlatObject(e,i,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const a=e&&e.message?e.message:"Error",l=t==null&&e?e.code:t;return He.call(i,a,l,n,s,r),e&&i.cause==null&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",o&&Object.assign(i,o),i};const _y=null;function Cl(e){return Y.isPlainObject(e)||Y.isArray(e)}function cf(e){return Y.endsWith(e,"[]")?e.slice(0,-2):e}function uf(e,t,n){return e?e.concat(t).map(function(r,o){return r=cf(r),!n&&o?"["+r+"]":r}).join(n?".":""):t}function wy(e){return Y.isArray(e)&&!e.some(Cl)}const ky=Y.toFlatObject(Y,{},null,function(t){return/^is[A-Z]/.test(t)});function Ri(e,t,n){if(!Y.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Y.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,y){return!Y.isUndefined(y[x])});const s=n.metaTokens,r=n.visitor||d,o=n.dots,i=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Y.isSpecCompliantForm(t);if(!Y.isFunction(r))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(Y.isDate(m))return m.toISOString();if(Y.isBoolean(m))return m.toString();if(!l&&Y.isBlob(m))throw new He("Blob is not supported. Use a Buffer instead.");return Y.isArrayBuffer(m)||Y.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,x,y){let _=m;if(m&&!y&&typeof m=="object"){if(Y.endsWith(x,"{}"))x=s?x:x.slice(0,-2),m=JSON.stringify(m);else if(Y.isArray(m)&&wy(m)||(Y.isFileList(m)||Y.endsWith(x,"[]"))&&(_=Y.toArray(m)))return x=cf(x),_.forEach(function(A,E){!(Y.isUndefined(A)||A===null)&&t.append(i===!0?uf([x],E,o):i===null?x:x+"[]",u(A))}),!1}return Cl(m)?!0:(t.append(uf(y,x,o),u(m)),!1)}const f=[],h=Object.assign(ky,{defaultVisitor:d,convertValue:u,isVisitable:Cl});function p(m,x){if(!Y.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+x.join("."));f.push(m),Y.forEach(m,function(_,C){(!(Y.isUndefined(_)||_===null)&&r.call(t,_,Y.isString(C)?C.trim():C,x,h))===!0&&p(_,x?x.concat(C):[C])}),f.pop()}}if(!Y.isObject(e))throw new TypeError("data must be an object");return p(e),t}function df(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function $l(e,t){this._pairs=[],e&&Ri(e,this,t)}const ff=$l.prototype;ff.append=function(t,n){this._pairs.push([t,n])},ff.toString=function(t){const n=t?function(s){return t.call(this,s,df)}:df;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function Sy(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function hf(e,t,n){if(!t)return e;const s=n&&n.encode||Sy;Y.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let o;if(r?o=r(t,n):o=Y.isURLSearchParams(t)?t.toString():new $l(t,n).toString(s),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class pf{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Y.forEach(this.handlers,function(s){s!==null&&t(s)})}}const mf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Cy={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:$l,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},Tl=typeof window<"u"&&typeof document<"u",Al=typeof navigator=="object"&&navigator||void 0,$y=Tl&&(!Al||["ReactNative","NativeScript","NS"].indexOf(Al.product)<0),Ty=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ay=Tl&&window.location.href||"http://localhost",Ut={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Tl,hasStandardBrowserEnv:$y,hasStandardBrowserWebWorkerEnv:Ty,navigator:Al,origin:Ay},Symbol.toStringTag,{value:"Module"})),...Cy};function Ey(e,t){return Ri(e,new Ut.classes.URLSearchParams,{visitor:function(n,s,r,o){return Ut.isNode&&Y.isBuffer(n)?(this.append(s,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function Iy(e){return Y.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Py(e){const t={},n=Object.keys(e);let s;const r=n.length;let o;for(s=0;s<r;s++)o=n[s],t[o]=e[o];return t}function gf(e){function t(n,s,r,o){let i=n[o++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),l=o>=n.length;return i=!i&&Y.isArray(r)?r.length:i,l?(Y.hasOwnProp(r,i)?r[i]=[r[i],s]:r[i]=s,!a):((!r[i]||!Y.isObject(r[i]))&&(r[i]=[]),t(n,s,r[i],o)&&Y.isArray(r[i])&&(r[i]=Py(r[i])),!a)}if(Y.isFormData(e)&&Y.isFunction(e.entries)){const n={};return Y.forEachEntry(e,(s,r)=>{t(Iy(s),r,n,0)}),n}return null}function Oy(e,t,n){if(Y.isString(e))try{return(t||JSON.parse)(e),Y.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const vo={transitional:mf,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,o=Y.isObject(t);if(o&&Y.isHTMLForm(t)&&(t=new FormData(t)),Y.isFormData(t))return r?JSON.stringify(gf(t)):t;if(Y.isArrayBuffer(t)||Y.isBuffer(t)||Y.isStream(t)||Y.isFile(t)||Y.isBlob(t)||Y.isReadableStream(t))return t;if(Y.isArrayBufferView(t))return t.buffer;if(Y.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Ey(t,this.formSerializer).toString();if((a=Y.isFileList(t))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ri(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return o||r?(n.setContentType("application/json",!1),Oy(t)):t}],transformResponse:[function(t){const n=this.transitional||vo.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(Y.isResponse(t)||Y.isReadableStream(t))return t;if(t&&Y.isString(t)&&(s&&!this.responseType||r)){const i=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(a){if(i)throw a.name==="SyntaxError"?He.from(a,He.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ut.classes.FormData,Blob:Ut.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Y.forEach(["delete","get","head","post","put","patch"],e=>{vo.headers[e]={}});const Ry=Y.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),My=e=>{const t={};let n,s,r;return e&&e.split(`
`).forEach(function(i){r=i.indexOf(":"),n=i.substring(0,r).trim().toLowerCase(),s=i.substring(r+1).trim(),!(!n||t[n]&&Ry[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},vf=Symbol("internals");function yo(e){return e&&String(e).trim().toLowerCase()}function Mi(e){return e===!1||e==null?e:Y.isArray(e)?e.map(Mi):String(e)}function Ly(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const Dy=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function El(e,t,n,s,r){if(Y.isFunction(s))return s.call(this,t,n);if(r&&(t=n),!!Y.isString(t)){if(Y.isString(s))return t.indexOf(s)!==-1;if(Y.isRegExp(s))return s.test(t)}}function Ny(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function jy(e,t){const n=Y.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(r,o,i){return this[s].call(this,t,r,o,i)},configurable:!0})})}let Yt=class{constructor(t){t&&this.set(t)}set(t,n,s){const r=this;function o(a,l,u){const d=yo(l);if(!d)throw new Error("header name must be a non-empty string");const f=Y.findKey(r,d);(!f||r[f]===void 0||u===!0||u===void 0&&r[f]!==!1)&&(r[f||l]=Mi(a))}const i=(a,l)=>Y.forEach(a,(u,d)=>o(u,d,l));if(Y.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if(Y.isString(t)&&(t=t.trim())&&!Dy(t))i(My(t),n);else if(Y.isObject(t)&&Y.isIterable(t)){let a={},l,u;for(const d of t){if(!Y.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[u=d[0]]=(l=a[u])?Y.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}i(a,n)}else t!=null&&o(n,t,s);return this}get(t,n){if(t=yo(t),t){const s=Y.findKey(this,t);if(s){const r=this[s];if(!n)return r;if(n===!0)return Ly(r);if(Y.isFunction(n))return n.call(this,r,s);if(Y.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=yo(t),t){const s=Y.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||El(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let r=!1;function o(i){if(i=yo(i),i){const a=Y.findKey(s,i);a&&(!n||El(s,s[a],a,n))&&(delete s[a],r=!0)}}return Y.isArray(t)?t.forEach(o):o(t),r}clear(t){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const o=n[s];(!t||El(this,this[o],o,t,!0))&&(delete this[o],r=!0)}return r}normalize(t){const n=this,s={};return Y.forEach(this,(r,o)=>{const i=Y.findKey(s,o);if(i){n[i]=Mi(r),delete n[o];return}const a=t?Ny(o):String(o).trim();a!==o&&delete n[o],n[a]=Mi(r),s[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Y.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=t&&Y.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[vf]=this[vf]={accessors:{}}).accessors,r=this.prototype;function o(i){const a=yo(i);s[a]||(jy(r,i),s[a]=!0)}return Y.isArray(t)?t.forEach(o):o(t),this}};Yt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Y.reduceDescriptors(Yt.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}}),Y.freezeMethods(Yt);function Il(e,t){const n=this||vo,s=t||n,r=Yt.from(s.headers);let o=s.data;return Y.forEach(e,function(a){o=a.call(n,o,r.normalize(),t?t.status:void 0)}),r.normalize(),o}function yf(e){return!!(e&&e.__CANCEL__)}function wr(e,t,n){He.call(this,e??"canceled",He.ERR_CANCELED,t,n),this.name="CanceledError"}Y.inherits(wr,He,{__CANCEL__:!0});function bf(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new He("Request failed with status code "+n.status,[He.ERR_BAD_REQUEST,He.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Fy(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function zy(e,t){e=e||10;const n=new Array(e),s=new Array(e);let r=0,o=0,i;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),d=s[o];i||(i=u),n[r]=l,s[r]=u;let f=o,h=0;for(;f!==r;)h+=n[f++],f=f%e;if(r=(r+1)%e,r===o&&(o=(o+1)%e),u-i<t)return;const p=d&&u-d;return p?Math.round(h*1e3/p):void 0}}function qy(e,t){let n=0,s=1e3/t,r,o;const i=(u,d=Date.now())=>{n=d,r=null,o&&(clearTimeout(o),o=null),e(...u)};return[(...u)=>{const d=Date.now(),f=d-n;f>=s?i(u,d):(r=u,o||(o=setTimeout(()=>{o=null,i(r)},s-f)))},()=>r&&i(r)]}const Li=(e,t,n=3)=>{let s=0;const r=zy(50,250);return qy(o=>{const i=o.loaded,a=o.lengthComputable?o.total:void 0,l=i-s,u=r(l),d=i<=a;s=i;const f={loaded:i,total:a,progress:a?i/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&d?(a-i)/u:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(f)},n)},xf=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},_f=e=>(...t)=>Y.asap(()=>e(...t)),By=Ut.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ut.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ut.origin),Ut.navigator&&/(msie|trident)/i.test(Ut.navigator.userAgent)):()=>!0,Uy=Ut.hasStandardBrowserEnv?{write(e,t,n,s,r,o){const i=[e+"="+encodeURIComponent(t)];Y.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),Y.isString(s)&&i.push("path="+s),Y.isString(r)&&i.push("domain="+r),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Vy(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Hy(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function wf(e,t,n){let s=!Vy(t);return e&&(s||n==!1)?Hy(e,t):t}const kf=e=>e instanceof Yt?{...e}:e;function zs(e,t){t=t||{};const n={};function s(u,d,f,h){return Y.isPlainObject(u)&&Y.isPlainObject(d)?Y.merge.call({caseless:h},u,d):Y.isPlainObject(d)?Y.merge({},d):Y.isArray(d)?d.slice():d}function r(u,d,f,h){if(Y.isUndefined(d)){if(!Y.isUndefined(u))return s(void 0,u,f,h)}else return s(u,d,f,h)}function o(u,d){if(!Y.isUndefined(d))return s(void 0,d)}function i(u,d){if(Y.isUndefined(d)){if(!Y.isUndefined(u))return s(void 0,u)}else return s(void 0,d)}function a(u,d,f){if(f in t)return s(u,d);if(f in e)return s(void 0,u)}const l={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(u,d,f)=>r(kf(u),kf(d),f,!0)};return Y.forEach(Object.keys({...e,...t}),function(d){const f=l[d]||r,h=f(e[d],t[d],d);Y.isUndefined(h)&&f!==a||(n[d]=h)}),n}const Sf=e=>{const t=zs({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:o,headers:i,auth:a}=t;if(t.headers=i=Yt.from(i),t.url=hf(wf(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),Y.isFormData(n)){if(Ut.hasStandardBrowserEnv||Ut.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(Y.isFunction(n.getHeaders)){const l=n.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([d,f])=>{u.includes(d.toLowerCase())&&i.set(d,f)})}}if(Ut.hasStandardBrowserEnv&&(s&&Y.isFunction(s)&&(s=s(t)),s||s!==!1&&By(t.url))){const l=r&&o&&Uy.read(o);l&&i.set(r,l)}return t},Wy=typeof XMLHttpRequest<"u"&&function(e){return new Promise(function(n,s){const r=Sf(e);let o=r.data;const i=Yt.from(r.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=r,d,f,h,p,m;function x(){p&&p(),m&&m(),r.cancelToken&&r.cancelToken.unsubscribe(d),r.signal&&r.signal.removeEventListener("abort",d)}let y=new XMLHttpRequest;y.open(r.method.toUpperCase(),r.url,!0),y.timeout=r.timeout;function _(){if(!y)return;const A=Yt.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),$={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:A,config:e,request:y};bf(function(I){n(I),x()},function(I){s(I),x()},$),y=null}"onloadend"in y?y.onloadend=_:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(_)},y.onabort=function(){y&&(s(new He("Request aborted",He.ECONNABORTED,e,y)),y=null)},y.onerror=function(E){const $=E&&E.message?E.message:"Network Error",T=new He($,He.ERR_NETWORK,e,y);T.event=E||null,s(T),y=null},y.ontimeout=function(){let E=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const $=r.transitional||mf;r.timeoutErrorMessage&&(E=r.timeoutErrorMessage),s(new He(E,$.clarifyTimeoutError?He.ETIMEDOUT:He.ECONNABORTED,e,y)),y=null},o===void 0&&i.setContentType(null),"setRequestHeader"in y&&Y.forEach(i.toJSON(),function(E,$){y.setRequestHeader($,E)}),Y.isUndefined(r.withCredentials)||(y.withCredentials=!!r.withCredentials),a&&a!=="json"&&(y.responseType=r.responseType),u&&([h,m]=Li(u,!0),y.addEventListener("progress",h)),l&&y.upload&&([f,p]=Li(l),y.upload.addEventListener("progress",f),y.upload.addEventListener("loadend",p)),(r.cancelToken||r.signal)&&(d=A=>{y&&(s(!A||A.type?new wr(null,e,y):A),y.abort(),y=null)},r.cancelToken&&r.cancelToken.subscribe(d),r.signal&&(r.signal.aborted?d():r.signal.addEventListener("abort",d)));const C=Fy(r.url);if(C&&Ut.protocols.indexOf(C)===-1){s(new He("Unsupported protocol "+C+":",He.ERR_BAD_REQUEST,e));return}y.send(o||null)})},Gy=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,r;const o=function(u){if(!r){r=!0,a();const d=u instanceof Error?u:this.reason;s.abort(d instanceof He?d:new wr(d instanceof Error?d.message:d))}};let i=t&&setTimeout(()=>{i=null,o(new He(`timeout ${t} of ms exceeded`,He.ETIMEDOUT))},t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:l}=s;return l.unsubscribe=()=>Y.asap(a),l}},Ky=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,r;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},Qy=async function*(e,t){for await(const n of Jy(e))yield*Ky(n,t)},Jy=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},Cf=(e,t,n,s)=>{const r=Qy(e,t);let o=0,i,a=l=>{i||(i=!0,s&&s(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await r.next();if(u){a(),l.close();return}let f=d.byteLength;if(n){let h=o+=f;n(h)}l.enqueue(new Uint8Array(d))}catch(u){throw a(u),u}},cancel(l){return a(l),r.return()}},{highWaterMark:2})},$f=64*1024,{isFunction:Di}=Y,Xy=(({Request:e,Response:t})=>({Request:e,Response:t}))(Y.global),{ReadableStream:Tf,TextEncoder:Af}=Y.global,Ef=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Zy=e=>{e=Y.merge.call({skipUndefined:!0},Xy,e);const{fetch:t,Request:n,Response:s}=e,r=t?Di(t):typeof fetch=="function",o=Di(n),i=Di(s);if(!r)return!1;const a=r&&Di(Tf),l=r&&(typeof Af=="function"?(m=>x=>m.encode(x))(new Af):async m=>new Uint8Array(await new n(m).arrayBuffer())),u=o&&a&&Ef(()=>{let m=!1;const x=new n(Ut.origin,{body:new Tf,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!x}),d=i&&a&&Ef(()=>Y.isReadableStream(new s("").body)),f={stream:d&&(m=>m.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!f[m]&&(f[m]=(x,y)=>{let _=x&&x[m];if(_)return _.call(x);throw new He(`Response type '${m}' is not supported`,He.ERR_NOT_SUPPORT,y)})});const h=async m=>{if(m==null)return 0;if(Y.isBlob(m))return m.size;if(Y.isSpecCompliantForm(m))return(await new n(Ut.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(Y.isArrayBufferView(m)||Y.isArrayBuffer(m))return m.byteLength;if(Y.isURLSearchParams(m)&&(m=m+""),Y.isString(m))return(await l(m)).byteLength},p=async(m,x)=>{const y=Y.toFiniteNumber(m.getContentLength());return y??h(x)};return async m=>{let{url:x,method:y,data:_,signal:C,cancelToken:A,timeout:E,onDownloadProgress:$,onUploadProgress:T,responseType:I,headers:R,withCredentials:q="same-origin",fetchOptions:G}=Sf(m),K=t||fetch;I=I?(I+"").toLowerCase():"text";let H=Gy([C,A&&A.toAbortSignal()],E),ee=null;const ce=H&&H.unsubscribe&&(()=>{H.unsubscribe()});let W;try{if(T&&u&&y!=="get"&&y!=="head"&&(W=await p(R,_))!==0){let Ce=new n(x,{method:"POST",body:_,duplex:"half"}),Re;if(Y.isFormData(_)&&(Re=Ce.headers.get("content-type"))&&R.setContentType(Re),Ce.body){const[Be,Ne]=xf(W,Li(_f(T)));_=Cf(Ce.body,$f,Be,Ne)}}Y.isString(q)||(q=q?"include":"omit");const Q=o&&"credentials"in n.prototype,J={...G,signal:H,method:y.toUpperCase(),headers:R.normalize().toJSON(),body:_,duplex:"half",credentials:Q?q:void 0};ee=o&&new n(x,J);let ne=await(o?K(ee,G):K(x,J));const ke=d&&(I==="stream"||I==="response");if(d&&($||ke&&ce)){const Ce={};["status","statusText","headers"].forEach(X=>{Ce[X]=ne[X]});const Re=Y.toFiniteNumber(ne.headers.get("content-length")),[Be,Ne]=$&&xf(Re,Li(_f($),!0))||[];ne=new s(Cf(ne.body,$f,Be,()=>{Ne&&Ne(),ce&&ce()}),Ce)}I=I||"text";let qe=await f[Y.findKey(f,I)||"text"](ne,m);return!ke&&ce&&ce(),await new Promise((Ce,Re)=>{bf(Ce,Re,{data:qe,headers:Yt.from(ne.headers),status:ne.status,statusText:ne.statusText,config:m,request:ee})})}catch(Q){throw ce&&ce(),Q&&Q.name==="TypeError"&&/Load failed|fetch/i.test(Q.message)?Object.assign(new He("Network Error",He.ERR_NETWORK,m,ee),{cause:Q.cause||Q}):He.from(Q,Q&&Q.code,m,ee)}}},Yy=new Map,If=e=>{let t=e?e.env:{};const{fetch:n,Request:s,Response:r}=t,o=[s,r,n];let i=o.length,a=i,l,u,d=Yy;for(;a--;)l=o[a],u=d.get(l),u===void 0&&d.set(l,u=a?new Map:Zy(t)),d=u;return u};If();const Pl={http:_y,xhr:Wy,fetch:{get:If}};Y.forEach(Pl,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Pf=e=>`- ${e}`,e1=e=>Y.isFunction(e)||e===null||e===!1,Of={getAdapter:(e,t)=>{e=Y.isArray(e)?e:[e];const{length:n}=e;let s,r;const o={};for(let i=0;i<n;i++){s=e[i];let a;if(r=s,!e1(s)&&(r=Pl[(a=String(s)).toLowerCase()],r===void 0))throw new He(`Unknown adapter '${a}'`);if(r&&(Y.isFunction(r)||(r=r.get(t))))break;o[a||"#"+i]=r}if(!r){const i=Object.entries(o).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=n?i.length>1?`since :
`+i.map(Pf).join(`
`):" "+Pf(i[0]):"as no adapter specified";throw new He("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:Pl};function Ol(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new wr(null,e)}function Rf(e){return Ol(e),e.headers=Yt.from(e.headers),e.data=Il.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Of.getAdapter(e.adapter||vo.adapter,e)(e).then(function(s){return Ol(e),s.data=Il.call(e,e.transformResponse,s),s.headers=Yt.from(s.headers),s},function(s){return yf(s)||(Ol(e),s&&s.response&&(s.response.data=Il.call(e,e.transformResponse,s.response),s.response.headers=Yt.from(s.response.headers))),Promise.reject(s)})}const Mf="1.12.2",Ni={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ni[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const Lf={};Ni.transitional=function(t,n,s){function r(o,i){return"[Axios v"+Mf+"] Transitional option '"+o+"'"+i+(s?". "+s:"")}return(o,i,a)=>{if(t===!1)throw new He(r(i," has been removed"+(n?" in "+n:"")),He.ERR_DEPRECATED);return n&&!Lf[i]&&(Lf[i]=!0,console.warn(r(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,i,a):!0}},Ni.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function t1(e,t,n){if(typeof e!="object")throw new He("options must be an object",He.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const o=s[r],i=t[o];if(i){const a=e[o],l=a===void 0||i(a,o,e);if(l!==!0)throw new He("option "+o+" must be "+l,He.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new He("Unknown option "+o,He.ERR_BAD_OPTION)}}const ji={assertOptions:t1,validators:Ni},Mn=ji.validators;let qs=class{constructor(t){this.defaults=t||{},this.interceptors={request:new pf,response:new pf}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=zs(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:o}=n;s!==void 0&&ji.assertOptions(s,{silentJSONParsing:Mn.transitional(Mn.boolean),forcedJSONParsing:Mn.transitional(Mn.boolean),clarifyTimeoutError:Mn.transitional(Mn.boolean)},!1),r!=null&&(Y.isFunction(r)?n.paramsSerializer={serialize:r}:ji.assertOptions(r,{encode:Mn.function,serialize:Mn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ji.assertOptions(n,{baseUrl:Mn.spelling("baseURL"),withXsrfToken:Mn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&Y.merge(o.common,o[n.method]);o&&Y.forEach(["delete","get","head","post","put","patch","common"],m=>{delete o[m]}),n.headers=Yt.concat(i,o);const a=[];let l=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(l=l&&x.synchronous,a.unshift(x.fulfilled,x.rejected))});const u=[];this.interceptors.response.forEach(function(x){u.push(x.fulfilled,x.rejected)});let d,f=0,h;if(!l){const m=[Rf.bind(this),void 0];for(m.unshift(...a),m.push(...u),h=m.length,d=Promise.resolve(n);f<h;)d=d.then(m[f++],m[f++]);return d}h=a.length;let p=n;for(;f<h;){const m=a[f++],x=a[f++];try{p=m(p)}catch(y){x.call(this,y);break}}try{d=Rf.call(this,p)}catch(m){return Promise.reject(m)}for(f=0,h=u.length;f<h;)d=d.then(u[f++],u[f++]);return d}getUri(t){t=zs(this.defaults,t);const n=wf(t.baseURL,t.url,t.allowAbsoluteUrls);return hf(n,t.params,t.paramsSerializer)}};Y.forEach(["delete","get","head","options"],function(t){qs.prototype[t]=function(n,s){return this.request(zs(s||{},{method:t,url:n,data:(s||{}).data}))}}),Y.forEach(["post","put","patch"],function(t){function n(s){return function(o,i,a){return this.request(zs(a||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}qs.prototype[t]=n(),qs.prototype[t+"Form"]=n(!0)});let n1=class Qm{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const s=this;this.promise.then(r=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](r);s._listeners=null}),this.promise.then=r=>{let o;const i=new Promise(a=>{s.subscribe(a),o=a}).then(r);return i.cancel=function(){s.unsubscribe(o)},i},t(function(o,i,a){s.reason||(s.reason=new wr(o,i,a),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Qm(function(r){t=r}),cancel:t}}};function s1(e){return function(n){return e.apply(null,n)}}function r1(e){return Y.isObject(e)&&e.isAxiosError===!0}const Rl={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Rl).forEach(([e,t])=>{Rl[t]=e});function Df(e){const t=new qs(e),n=Xd(qs.prototype.request,t);return Y.extend(n,qs.prototype,t,{allOwnKeys:!0}),Y.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return Df(zs(e,r))},n}const ut=Df(vo);ut.Axios=qs,ut.CanceledError=wr,ut.CancelToken=n1,ut.isCancel=yf,ut.VERSION=Mf,ut.toFormData=Ri,ut.AxiosError=He,ut.Cancel=ut.CanceledError,ut.all=function(t){return Promise.all(t)},ut.spread=s1,ut.isAxiosError=r1,ut.mergeConfig=zs,ut.AxiosHeaders=Yt,ut.formToJSON=e=>gf(Y.isHTMLForm(e)?new FormData(e):e),ut.getAdapter=Of.getAdapter,ut.HttpStatusCode=Rl,ut.default=ut;const{Axios:KF,AxiosError:QF,CanceledError:JF,isCancel:XF,CancelToken:ZF,VERSION:YF,all:ez,Cancel:tz,isAxiosError:nz,spread:sz,toFormData:rz,AxiosHeaders:oz,HttpStatusCode:iz,formToJSON:az,getAdapter:lz,mergeConfig:cz}=ut,Ft=[];for(let e=0;e<256;++e)Ft.push((e+256).toString(16).slice(1));function o1(e,t=0){return(Ft[e[t+0]]+Ft[e[t+1]]+Ft[e[t+2]]+Ft[e[t+3]]+"-"+Ft[e[t+4]]+Ft[e[t+5]]+"-"+Ft[e[t+6]]+Ft[e[t+7]]+"-"+Ft[e[t+8]]+Ft[e[t+9]]+"-"+Ft[e[t+10]]+Ft[e[t+11]]+Ft[e[t+12]]+Ft[e[t+13]]+Ft[e[t+14]]+Ft[e[t+15]]).toLowerCase()}let Ml;const i1=new Uint8Array(16);function a1(){if(!Ml){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ml=crypto.getRandomValues.bind(crypto)}return Ml(i1)}const Nf={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Fi(e,t,n){var r;if(Nf.randomUUID&&!e)return Nf.randomUUID();e=e||{};const s=e.random??((r=e.rng)==null?void 0:r.call(e))??a1();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,o1(s)}function Bs(){return{getStorage:function(s,r){try{if(localStorage.getItem(s)&&r)return JSON.parse(localStorage.getItem(s))[r]||null;if(localStorage.getItem(s))return JSON.parse(localStorage.getItem(s))}catch{if(localStorage.getItem(s))return localStorage.getItem(s)}return null},saveStorage:function(s,r){localStorage.setItem(s,JSON.stringify(r))},clearStorage:function(s="false"){s?localStorage.removeItem(s):localStorage.clear()}}}const jf="eac_uuid",zi="eac-user-id",l1="rybbit-user-id",kr=()=>{var o;const{getStorage:e,saveStorage:t,clearStorage:n}=Bs();let s=e(zi),r=e(l1);if(r)return r;if(!s){const i=e(jf);i&&(s=i,t(zi,i),n(jf))}return s?(o=window.rybbit)==null||o.identify(s):(s=Fi(),t(zi,s)),s};async function c1(e){return e}const u1=async(e,t)=>e,d1=(e,t,n)=>async function(s){if(!s)throw new Error("userId is required");try{let r=await t(s);return r||(r=Fi(),await n(s,r)),e(r),r}catch(r){console.error("Enhanced identify failed:",r)}},f1=()=>{const e=window.rybbit.identify;window.rybbit.identify=d1(e,c1,u1)},h1=()=>{const e=window.rybbit.clearUserId;window.rybbit.clearUserId=()=>{e(),localStorage.removeItem(zi)}},p1=()=>{f1(),h1()};function Ll(e){return new Promise(t=>setTimeout(t,e))}function Qe(e,t={}){let{currency:n}=t;n=n??"VND";const s=n==="VND"?"vi-VN":"en-US";return new Intl.NumberFormat(s,{style:"currency",currency:n}).format(e)}function Dl(e,t="DD/MM/YYYY"){const n=new Date(e),s=String(n.getDate()).padStart(2,"0"),r=String(n.getMonth()+1).padStart(2,"0"),o=n.getFullYear(),i={"DD/MM/YYYY":`${s}/${r}/${o}`,"MM/DD/YYYY":`${r}/${s}/${o}`,"YYYY/MM/DD":`${o}/${r}/${s}`};return i[t]||i["DD/MM/YYYY"]}const Ff={product:[{id:1,name:" Tm tt u im",message:"Tm tt u im ca {title}"}],category:[{id:1,name:" Top bn chy",message:"Top {title} bn chy"},{id:2,name:" Top theo phn khc gi",message:"Top {title} theo phn khc gi"},{id:3,name:" Khuyn mi hot nht",message:"Khuyn mi {title} hot nht"}]},Sr={default:{product:[{id:1,name:" Tm tt u nhc im",message:"Tm tt u nhc im ca {title}"},{id:2,name:"  So snh cc mu tng ng",message:"So snh cc mu tng ng vi {title}"},{id:3,name:"{logo} Ti sao nn mua ti {brand}",message:"Ti sao nn mua {title} ti {brand}"}],category:[{id:1,name:" Top bn chy",message:"Top {title} bn chy"},{id:2,name:" Top theo phn khc gi",message:"Top {title} theo phn khc gi"},{id:3,name:" Khuyn mi hot nht",message:"Khuyn mi {title} hot nht"},{id:4,name:"  So snh cc hng",message:"So snh cc hng {title}"}]},"wwwthegioididongcom-rtx":Ff,"wwwdienmayxanhcom-urk":Ff},Nl="EASYCHATGPT_WIDGET_CLOSE_MESSAGE",jl="easychatgpt-form",Ln="ecg_auth_token",Dn="easychatgpt_conversations",Sn="rangdongstorevn-zll",xs="wwwdienmayxanhcom-urk",Qn="wwwthegioididongcom-rtx",Fl="easychatgptio-ujc",Nn="dienmaycholoncom",Jn="mediamartvn",Xn="picovn-drr",Zn="eco-martvn-a3r",Cr="eradovn-fyw",bo="wwwdragontourvn",m1=["bepantoanvn-upq","easyaiagentsapp"],qi={SPA:["rangdongstorevn-zll"],SSR:["eradovn-fyw"]};function Bi(e){return(JSON.parse(localStorage.getItem(Dn))||{})[e]}const $r={lpnasamarketcom:{category:/(.*)-pc(\d+)\.html$/,product:/(.*)-p(\d+)\.html$/},"picovn-drr":{category:/^\/[^\/]+\.c$/}};function Vt(e){var r;const t=document.querySelectorAll('body script[type="application/ld+json"]'),n=document.querySelectorAll('head script[type="application/ld+json"]'),s=[...t,...n];for(const o of s)try{const a=o.textContent.replace(/[\x00-\x1F]+/g," "),l=JSON.parse(a);if((r=l["@context"])!=null&&r.includes("https://schema.org")&&l["@type"]===e)return l}catch(i){console.warn(" Skipped invalid JSON schema:",i.message);continue}return null}function zl(){const e=document.querySelector('meta[property="og:image"]');return e?e.getAttribute("content"):null}function g1(){const e=document.querySelector('link[rel="canonical"]');return e&&e.href?e.href:window.location.origin+window.location.pathname}function v1(e){if(!$r[e])return null;const t=g1(),n=new URL(t).pathname;if(n==="/")return null;let s=!1,r=!1;return $r[e].category&&(s=n.match($r[e].category)),$r[e].product&&(r=n.match($r[e].product)),s?"category":r?"product":null}function Tr(){try{const e={type:null,title:null,description:null,image:null,url:null,price_amount:null,price_currency:null};return[{key:"title",property:"og:title"},{key:"description",property:"og:description"},{key:"image",property:"og:image"},{key:"url",property:"og:url"},{key:"price_amount",property:"product:price:amount"},{key:"price_currency",property:"product:price:currency"}].forEach(({key:n,property:s})=>{let r=`meta[property="${s}"]`;n==="title"&&(r+=':not([itemprop="headline"])');const o=document.querySelector(r);o&&(e[n]=o.getAttribute("content"))}),e}catch{return null}}function y1({handle:e}){if(!$r[e])return null;try{const t=v1(e);if(t)return t;const n=document.querySelector('meta[property="og:type"]');return n&&["product","category"].includes(n.content)?n.content:null}catch{return null}}function b1(e,t="-"){return e&&e.toLowerCase().replace(/\t/g,"").replace(/||||||||||||||||/g,"a").replace(/||||||||||/g,"e").replace(/||||/g,"i").replace(/||||||||||||||||/g,"o").replace(/||||||||||/g,"u").replace(/||||/g,"y").replace(//g,"d").replace(/\s+/g,t).replace(/[^A-Za-z0-9_-]/g,"").replace(/-+/g,t)}function ql(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Us=ql();function zf(e){Us=e}const qf=/[&<>"']/,x1=new RegExp(qf.source,"g"),Bf=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,_1=new RegExp(Bf.source,"g"),w1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Uf=e=>w1[e];function un(e,t){if(t){if(qf.test(e))return e.replace(x1,Uf)}else if(Bf.test(e))return e.replace(_1,Uf);return e}const k1=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function S1(e){return e.replace(k1,(t,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const C1=/(^|[^\[])\^/g;function it(e,t){let n=typeof e=="string"?e:e.source;t=t||"";const s={replace:(r,o)=>{let i=typeof o=="string"?o:o.source;return i=i.replace(C1,"$1"),n=n.replace(r,i),s},getRegex:()=>new RegExp(n,t)};return s}function Vf(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const xo={exec:()=>null};function Hf(e,t){const n=e.replace(/\|/g,(o,i,a)=>{let l=!1,u=i;for(;--u>=0&&a[u]==="\\";)l=!l;return l?"|":" |"}),s=n.split(/ \|/);let r=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),t)if(s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(/\\\|/g,"|");return s}function Ui(e,t,n){const s=e.length;if(s===0)return"";let r=0;for(;r<s&&e.charAt(s-r-1)===t;)r++;return e.slice(0,s-r)}function $1(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let s=0;s<e.length;s++)if(e[s]==="\\")s++;else if(e[s]===t[0])n++;else if(e[s]===t[1]&&(n--,n<0))return s;return-1}function Wf(e,t,n,s){const r=t.href,o=t.title?un(t.title):null,i=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){s.state.inLink=!0;const a={type:"link",raw:n,href:r,title:o,text:i,tokens:s.inlineTokens(i)};return s.state.inLink=!1,a}return{type:"image",raw:n,href:r,title:o,text:un(i)}}function T1(e,t){const n=e.match(/^(\s+)(?:```)/);if(n===null)return t;const s=n[1];return t.split(`
`).map(r=>{const o=r.match(/^\s+/);if(o===null)return r;const[i]=o;return i.length>=s.length?r.slice(s.length):r}).join(`
`)}class Vi{constructor(t){ft(this,"options");ft(this,"rules");ft(this,"lexer");this.options=t||Us}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const s=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?s:Ui(s,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const s=n[0],r=T1(s,n[3]||"");return{type:"code",raw:s,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:r}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let s=n[2].trim();if(/#$/.test(s)){const r=Ui(s,"#");(this.options.pedantic||!r||/ $/.test(r))&&(s=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:n[0]}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){let s=n[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);s=Ui(s.replace(/^ *>[ \t]?/gm,""),`
`);const r=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(s);return this.lexer.state.top=r,{type:"blockquote",raw:n[0],tokens:o,text:s}}}list(t){let n=this.rules.block.list.exec(t);if(n){let s=n[1].trim();const r=s.length>1,o={type:"list",raw:"",ordered:r,start:r?+s.slice(0,-1):"",loose:!1,items:[]};s=r?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=r?s:"[*+-]");const i=new RegExp(`^( {0,3}${s})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a="",l="",u=!1;for(;t;){let d=!1;if(!(n=i.exec(t))||this.rules.block.hr.test(t))break;a=n[0],t=t.substring(a.length);let f=n[2].split(`
`,1)[0].replace(/^\t+/,_=>" ".repeat(3*_.length)),h=t.split(`
`,1)[0],p=0;this.options.pedantic?(p=2,l=f.trimStart()):(p=n[2].search(/[^ ]/),p=p>4?1:p,l=f.slice(p),p+=n[1].length);let m=!1;if(!f&&/^ *$/.test(h)&&(a+=h+`
`,t=t.substring(h.length+1),d=!0),!d){const _=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),C=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),A=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),E=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;t;){const $=t.split(`
`,1)[0];if(h=$,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),A.test(h)||E.test(h)||_.test(h)||C.test(t))break;if(h.search(/[^ ]/)>=p||!h.trim())l+=`
`+h.slice(p);else{if(m||f.search(/[^ ]/)>=4||A.test(f)||E.test(f)||C.test(f))break;l+=`
`+h}!m&&!h.trim()&&(m=!0),a+=$+`
`,t=t.substring($.length+1),f=h.slice(p)}}o.loose||(u?o.loose=!0:/\n *\n *$/.test(a)&&(u=!0));let x=null,y;this.options.gfm&&(x=/^\[[ xX]\] /.exec(l),x&&(y=x[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),o.items.push({type:"list_item",raw:a,task:!!x,checked:y,loose:!1,text:l,tokens:[]}),o.raw+=a}o.items[o.items.length-1].raw=a.trimEnd(),o.items[o.items.length-1].text=l.trimEnd(),o.raw=o.raw.trimEnd();for(let d=0;d<o.items.length;d++)if(this.lexer.state.top=!1,o.items[d].tokens=this.lexer.blockTokens(o.items[d].text,[]),!o.loose){const f=o.items[d].tokens.filter(p=>p.type==="space"),h=f.length>0&&f.some(p=>/\n.*\n/.test(p.raw));o.loose=h}if(o.loose)for(let d=0;d<o.items.length;d++)o.items[d].loose=!0;return o}}html(t){const n=this.rules.block.html.exec(t);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(t){const n=this.rules.block.def.exec(t);if(n){const s=n[1].toLowerCase().replace(/\s+/g," "),r=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:s,raw:n[0],href:r,title:o}}}table(t){const n=this.rules.block.table.exec(t);if(!n||!/[:|]/.test(n[2]))return;const s=Hf(n[1]),r=n[2].replace(/^\||\| *$/g,"").split("|"),o=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],i={type:"table",raw:n[0],header:[],align:[],rows:[]};if(s.length===r.length){for(const a of r)/^ *-+: *$/.test(a)?i.align.push("right"):/^ *:-+: *$/.test(a)?i.align.push("center"):/^ *:-+ *$/.test(a)?i.align.push("left"):i.align.push(null);for(const a of s)i.header.push({text:a,tokens:this.lexer.inline(a)});for(const a of o)i.rows.push(Hf(a,i.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return i}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const s=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:s,tokens:this.lexer.inline(s)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:un(n[1])}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const s=n[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const i=Ui(s.slice(0,-1),"\\");if((s.length-i.length)%2===0)return}else{const i=$1(n[2],"()");if(i>-1){const l=(n[0].indexOf("!")===0?5:4)+n[1].length+i;n[2]=n[2].substring(0,i),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let r=n[2],o="";if(this.options.pedantic){const i=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);i&&(r=i[1],o=i[3])}else o=n[3]?n[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(s)?r=r.slice(1):r=r.slice(1,-1)),Wf(n,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(t,n){let s;if((s=this.rules.inline.reflink.exec(t))||(s=this.rules.inline.nolink.exec(t))){const r=(s[2]||s[1]).replace(/\s+/g," "),o=n[r.toLowerCase()];if(!o){const i=s[0].charAt(0);return{type:"text",raw:i,text:i}}return Wf(s,o,s[0],this.lexer)}}emStrong(t,n,s=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&s.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!s||this.rules.inline.punctuation.exec(s)){const i=[...r[0]].length-1;let a,l,u=i,d=0;const f=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,n=n.slice(-1*t.length+i);(r=f.exec(n))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(l=[...a].length,r[3]||r[4]){u+=l;continue}else if((r[5]||r[6])&&i%3&&!((i+l)%3)){d+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+d);const h=[...r[0]][0].length,p=t.slice(0,i+r.index+h+l);if(Math.min(i,l)%2){const x=p.slice(1,-1);return{type:"em",raw:p,text:x,tokens:this.lexer.inlineTokens(x)}}const m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let s=n[2].replace(/\n/g," ");const r=/[^ ]/.test(s),o=/^ /.test(s)&&/ $/.test(s);return r&&o&&(s=s.substring(1,s.length-1)),s=un(s,!0),{type:"codespan",raw:n[0],text:s}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t){const n=this.rules.inline.autolink.exec(t);if(n){let s,r;return n[2]==="@"?(s=un(n[1]),r="mailto:"+s):(s=un(n[1]),r=s),{type:"link",raw:n[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}url(t){var s;let n;if(n=this.rules.inline.url.exec(t)){let r,o;if(n[2]==="@")r=un(n[0]),o="mailto:"+r;else{let i;do i=n[0],n[0]=((s=this.rules.inline._backpedal.exec(n[0]))==null?void 0:s[0])??"";while(i!==n[0]);r=un(n[0]),n[1]==="www."?o="http://"+n[0]:o=n[0]}return{type:"link",raw:n[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const n=this.rules.inline.text.exec(t);if(n){let s;return this.lexer.state.inRawBlock?s=n[0]:s=un(n[0]),{type:"text",raw:n[0],text:s}}}}const A1=/^(?: *(?:\n|$))+/,E1=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,I1=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,_o=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,P1=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Gf=/(?:[*+-]|\d{1,9}[.)])/,Kf=it(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Gf).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Bl=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,O1=/^[^\n]+/,Ul=/(?!\s*\])(?:\\.|[^\[\]\\])+/,R1=it(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Ul).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),M1=it(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Gf).getRegex(),Hi="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Vl=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,L1=it("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Vl).replace("tag",Hi).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Qf=it(Bl).replace("hr",_o).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Hi).getRegex(),Hl={blockquote:it(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Qf).getRegex(),code:E1,def:R1,fences:I1,heading:P1,hr:_o,html:L1,lheading:Kf,list:M1,newline:A1,paragraph:Qf,table:xo,text:O1},Jf=it("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",_o).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Hi).getRegex(),D1={...Hl,table:Jf,paragraph:it(Bl).replace("hr",_o).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Jf).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Hi).getRegex()},N1={...Hl,html:it(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Vl).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:xo,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:it(Bl).replace("hr",_o).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Kf).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Xf=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,j1=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Zf=/^( {2,}|\\)\n(?!\s*$)/,F1=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,wo="\\p{P}\\p{S}",z1=it(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,wo).getRegex(),q1=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,B1=it(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,wo).getRegex(),U1=it("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,wo).getRegex(),V1=it("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,wo).getRegex(),H1=it(/\\([punct])/,"gu").replace(/punct/g,wo).getRegex(),W1=it(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),G1=it(Vl).replace("(?:-->|$)","-->").getRegex(),K1=it("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",G1).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Wi=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Q1=it(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Wi).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Yf=it(/^!?\[(label)\]\[(ref)\]/).replace("label",Wi).replace("ref",Ul).getRegex(),eh=it(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ul).getRegex(),J1=it("reflink|nolink(?!\\()","g").replace("reflink",Yf).replace("nolink",eh).getRegex(),Wl={_backpedal:xo,anyPunctuation:H1,autolink:W1,blockSkip:q1,br:Zf,code:j1,del:xo,emStrongLDelim:B1,emStrongRDelimAst:U1,emStrongRDelimUnd:V1,escape:Xf,link:Q1,nolink:eh,punctuation:z1,reflink:Yf,reflinkSearch:J1,tag:K1,text:F1,url:xo},X1={...Wl,link:it(/^!?\[(label)\]\((.*?)\)/).replace("label",Wi).getRegex(),reflink:it(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Wi).getRegex()},Gl={...Wl,escape:it(Xf).replace("])","~|])").getRegex(),url:it(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Z1={...Gl,br:it(Zf).replace("{2,}","*").getRegex(),text:it(Gl.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Gi={normal:Hl,gfm:D1,pedantic:N1},ko={normal:Wl,gfm:Gl,breaks:Z1,pedantic:X1};class jn{constructor(t){ft(this,"tokens");ft(this,"options");ft(this,"state");ft(this,"tokenizer");ft(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Us,this.options.tokenizer=this.options.tokenizer||new Vi,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Gi.normal,inline:ko.normal};this.options.pedantic?(n.block=Gi.pedantic,n.inline=ko.pedantic):this.options.gfm&&(n.block=Gi.gfm,this.options.breaks?n.inline=ko.breaks:n.inline=ko.gfm),this.tokenizer.rules=n}static get rules(){return{block:Gi,inline:ko}}static lex(t,n){return new jn(n).lex(t)}static lexInline(t,n){return new jn(n).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const s=this.inlineQueue[n];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(a,l,u)=>l+"    ".repeat(u.length));let s,r,o,i;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},t,n))?(t=t.substring(s.raw.length),n.push(s),!0):!1))){if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length),s.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length),r=n[n.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length),r=n[n.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+s.raw,r.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),n.push(s);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=t.slice(1);let u;this.options.extensions.startBlock.forEach(d=>{u=d.call({lexer:this},l),typeof u=="number"&&u>=0&&(a=Math.min(a,u))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(o))){r=n[n.length-1],i&&r.type==="paragraph"?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(s),i=o.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length),r=n[n.length-1],r&&r.type==="text"?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(s);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let s,r,o,i=t,a,l,u;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,a.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(l||(u=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(s=d.call({lexer:this},t,n))?(t=t.substring(s.raw.length),n.push(s),!0):!1))){if(s=this.tokenizer.escape(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.tag(t)){t=t.substring(s.raw.length),r=n[n.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):n.push(s);continue}if(s=this.tokenizer.link(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(s.raw.length),r=n[n.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):n.push(s);continue}if(s=this.tokenizer.emStrong(t,i,u)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.codespan(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.br(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.del(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.autolink(t)){t=t.substring(s.raw.length),n.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(t))){t=t.substring(s.raw.length),n.push(s);continue}if(o=t,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const f=t.slice(1);let h;this.options.extensions.startInline.forEach(p=>{h=p.call({lexer:this},f),typeof h=="number"&&h>=0&&(d=Math.min(d,h))}),d<1/0&&d>=0&&(o=t.substring(0,d+1))}if(s=this.tokenizer.inlineText(o)){t=t.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(u=s.raw.slice(-1)),l=!0,r=n[n.length-1],r&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):n.push(s);continue}if(t){const d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return n}}class Ki{constructor(t){ft(this,"options");this.options=t||Us}code(t,n,s){var o;const r=(o=(n||"").match(/^\S*/))==null?void 0:o[0];return t=t.replace(/\n$/,"")+`
`,r?'<pre><code class="language-'+un(r)+'">'+(s?t:un(t,!0))+`</code></pre>
`:"<pre><code>"+(s?t:un(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,n){return t}heading(t,n,s){return`<h${n}>${t}</h${n}>
`}hr(){return`<hr>
`}list(t,n,s){const r=n?"ol":"ul",o=n&&s!==1?' start="'+s+'"':"";return"<"+r+o+`>
`+t+"</"+r+`>
`}listitem(t,n,s){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,n){const s=n.header?"th":"td";return(n.align?`<${s} align="${n.align}">`:`<${s}>`)+t+`</${s}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,n,s){const r=Vf(t);if(r===null)return s;t=r;let o='<a href="'+t+'"';return n&&(o+=' title="'+n+'"'),o+=">"+s+"</a>",o}image(t,n,s){const r=Vf(t);if(r===null)return s;t=r;let o=`<img src="${t}" alt="${s}"`;return n&&(o+=` title="${n}"`),o+=">",o}text(t){return t}}class Kl{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,n,s){return""+s}image(t,n,s){return""+s}br(){return""}}class Fn{constructor(t){ft(this,"options");ft(this,"renderer");ft(this,"textRenderer");this.options=t||Us,this.options.renderer=this.options.renderer||new Ki,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Kl}static parse(t,n){return new Fn(n).parse(t)}static parseInline(t,n){return new Fn(n).parseInline(t)}parse(t,n=!0){let s="";for(let r=0;r<t.length;r++){const o=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const i=o,a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(i.type)){s+=a||"";continue}}switch(o.type){case"space":continue;case"hr":{s+=this.renderer.hr();continue}case"heading":{const i=o;s+=this.renderer.heading(this.parseInline(i.tokens),i.depth,S1(this.parseInline(i.tokens,this.textRenderer)));continue}case"code":{const i=o;s+=this.renderer.code(i.text,i.lang,!!i.escaped);continue}case"table":{const i=o;let a="",l="";for(let d=0;d<i.header.length;d++)l+=this.renderer.tablecell(this.parseInline(i.header[d].tokens),{header:!0,align:i.align[d]});a+=this.renderer.tablerow(l);let u="";for(let d=0;d<i.rows.length;d++){const f=i.rows[d];l="";for(let h=0;h<f.length;h++)l+=this.renderer.tablecell(this.parseInline(f[h].tokens),{header:!1,align:i.align[h]});u+=this.renderer.tablerow(l)}s+=this.renderer.table(a,u);continue}case"blockquote":{const i=o,a=this.parse(i.tokens);s+=this.renderer.blockquote(a);continue}case"list":{const i=o,a=i.ordered,l=i.start,u=i.loose;let d="";for(let f=0;f<i.items.length;f++){const h=i.items[f],p=h.checked,m=h.task;let x="";if(h.task){const y=this.renderer.checkbox(!!p);u?h.tokens.length>0&&h.tokens[0].type==="paragraph"?(h.tokens[0].text=y+" "+h.tokens[0].text,h.tokens[0].tokens&&h.tokens[0].tokens.length>0&&h.tokens[0].tokens[0].type==="text"&&(h.tokens[0].tokens[0].text=y+" "+h.tokens[0].tokens[0].text)):h.tokens.unshift({type:"text",text:y+" "}):x+=y+" "}x+=this.parse(h.tokens,u),d+=this.renderer.listitem(x,m,!!p)}s+=this.renderer.list(d,a,l);continue}case"html":{const i=o;s+=this.renderer.html(i.text,i.block);continue}case"paragraph":{const i=o;s+=this.renderer.paragraph(this.parseInline(i.tokens));continue}case"text":{let i=o,a=i.tokens?this.parseInline(i.tokens):i.text;for(;r+1<t.length&&t[r+1].type==="text";)i=t[++r],a+=`
`+(i.tokens?this.parseInline(i.tokens):i.text);s+=n?this.renderer.paragraph(a):a;continue}default:{const i='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return s}parseInline(t,n){n=n||this.renderer;let s="";for(let r=0;r<t.length;r++){const o=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const i=this.options.extensions.renderers[o.type].call({parser:this},o);if(i!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){s+=i||"";continue}}switch(o.type){case"escape":{const i=o;s+=n.text(i.text);break}case"html":{const i=o;s+=n.html(i.text);break}case"link":{const i=o;s+=n.link(i.href,i.title,this.parseInline(i.tokens,n));break}case"image":{const i=o;s+=n.image(i.href,i.title,i.text);break}case"strong":{const i=o;s+=n.strong(this.parseInline(i.tokens,n));break}case"em":{const i=o;s+=n.em(this.parseInline(i.tokens,n));break}case"codespan":{const i=o;s+=n.codespan(i.text);break}case"br":{s+=n.br();break}case"del":{const i=o;s+=n.del(this.parseInline(i.tokens,n));break}case"text":{const i=o;s+=n.text(i.text);break}default:{const i='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return s}}class So{constructor(t){ft(this,"options");this.options=t||Us}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}ft(So,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class Y1{constructor(...t){Km(this,tr);ft(this,"defaults",ql());ft(this,"options",this.setOptions);ft(this,"parse",La(this,tr,Zc).call(this,jn.lex,Fn.parse));ft(this,"parseInline",La(this,tr,Zc).call(this,jn.lexInline,Fn.parseInline));ft(this,"Parser",Fn);ft(this,"Renderer",Ki);ft(this,"TextRenderer",Kl);ft(this,"Lexer",jn);ft(this,"Tokenizer",Vi);ft(this,"Hooks",So);this.use(...t)}walkTokens(t,n){var r,o;let s=[];for(const i of t)switch(s=s.concat(n.call(this,i)),i.type){case"table":{const a=i;for(const l of a.header)s=s.concat(this.walkTokens(l.tokens,n));for(const l of a.rows)for(const u of l)s=s.concat(this.walkTokens(u.tokens,n));break}case"list":{const a=i;s=s.concat(this.walkTokens(a.items,n));break}default:{const a=i;(o=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&o[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{const u=a[l].flat(1/0);s=s.concat(this.walkTokens(u,n))}):a.tokens&&(s=s.concat(this.walkTokens(a.tokens,n)))}}return s}use(...t){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(s=>{const r={...s};if(r.async=this.defaults.async||r.async||!1,s.extensions&&(s.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){const i=n.renderers[o.name];i?n.renderers[o.name]=function(...a){let l=o.renderer.apply(this,a);return l===!1&&(l=i.apply(this,a)),l}:n.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const i=n[o.level];i?i.unshift(o.tokenizer):n[o.level]=[o.tokenizer],o.start&&(o.level==="block"?n.startBlock?n.startBlock.push(o.start):n.startBlock=[o.start]:o.level==="inline"&&(n.startInline?n.startInline.push(o.start):n.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(n.childTokens[o.name]=o.childTokens)}),r.extensions=n),s.renderer){const o=this.defaults.renderer||new Ki(this.defaults);for(const i in s.renderer){if(!(i in o))throw new Error(`renderer '${i}' does not exist`);if(i==="options")continue;const a=i,l=s.renderer[a],u=o[a];o[a]=(...d)=>{let f=l.apply(o,d);return f===!1&&(f=u.apply(o,d)),f||""}}r.renderer=o}if(s.tokenizer){const o=this.defaults.tokenizer||new Vi(this.defaults);for(const i in s.tokenizer){if(!(i in o))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;const a=i,l=s.tokenizer[a],u=o[a];o[a]=(...d)=>{let f=l.apply(o,d);return f===!1&&(f=u.apply(o,d)),f}}r.tokenizer=o}if(s.hooks){const o=this.defaults.hooks||new So;for(const i in s.hooks){if(!(i in o))throw new Error(`hook '${i}' does not exist`);if(i==="options")continue;const a=i,l=s.hooks[a],u=o[a];So.passThroughHooks.has(i)?o[a]=d=>{if(this.defaults.async)return Promise.resolve(l.call(o,d)).then(h=>u.call(o,h));const f=l.call(o,d);return u.call(o,f)}:o[a]=(...d)=>{let f=l.apply(o,d);return f===!1&&(f=u.apply(o,d)),f}}r.hooks=o}if(s.walkTokens){const o=this.defaults.walkTokens,i=s.walkTokens;r.walkTokens=function(a){let l=[];return l.push(i.call(this,a)),o&&(l=l.concat(o.call(this,a))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,n){return jn.lex(t,n??this.defaults)}parser(t,n){return Fn.parse(t,n??this.defaults)}}tr=new WeakSet,Zc=function(t,n){return(s,r)=>{const o={...r},i={...this.defaults,...o};this.defaults.async===!0&&o.async===!1&&(i.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),i.async=!0);const a=La(this,tr,Jm).call(this,!!i.silent,!!i.async);if(typeof s>"u"||s===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));if(i.hooks&&(i.hooks.options=i),i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(s):s).then(l=>t(l,i)).then(l=>i.hooks?i.hooks.processAllTokens(l):l).then(l=>i.walkTokens?Promise.all(this.walkTokens(l,i.walkTokens)).then(()=>l):l).then(l=>n(l,i)).then(l=>i.hooks?i.hooks.postprocess(l):l).catch(a);try{i.hooks&&(s=i.hooks.preprocess(s));let l=t(s,i);i.hooks&&(l=i.hooks.processAllTokens(l)),i.walkTokens&&this.walkTokens(l,i.walkTokens);let u=n(l,i);return i.hooks&&(u=i.hooks.postprocess(u)),u}catch(l){return a(l)}}},Jm=function(t,n){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+un(s.message+"",!0)+"</pre>";return n?Promise.resolve(r):r}if(n)return Promise.reject(s);throw s}};const Vs=new Y1;function tt(e,t){return Vs.parse(e,t)}tt.options=tt.setOptions=function(e){return Vs.setOptions(e),tt.defaults=Vs.defaults,zf(tt.defaults),tt},tt.getDefaults=ql,tt.defaults=Us,tt.use=function(...e){return Vs.use(...e),tt.defaults=Vs.defaults,zf(tt.defaults),tt},tt.walkTokens=function(e,t){return Vs.walkTokens(e,t)},tt.parseInline=Vs.parseInline,tt.Parser=Fn,tt.parser=Fn.parse,tt.Renderer=Ki,tt.TextRenderer=Kl,tt.Lexer=jn,tt.lexer=jn.lex,tt.Tokenizer=Vi,tt.Hooks=So,tt.parse=tt,tt.options,tt.setOptions,tt.use,tt.walkTokens,tt.parseInline,Fn.parse,jn.lex;function th(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ql={exports:{}},vt={},Jl={exports:{}},Hs={};function nh(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function eb(e,t,n){}function tb(e,t,n){}var nb=/javascript\s*\:/img;function sb(e,t){return nb.test(t)?"":t}Hs.whiteList=nh(),Hs.getDefaultWhiteList=nh,Hs.onAttr=eb,Hs.onIgnoreAttr=tb,Hs.safeAttrValue=sb;var rb={indexOf:function(e,t){var n,s;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,s=e.length;n<s;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var s,r;if(Array.prototype.forEach)return e.forEach(t,n);for(s=0,r=e.length;s<r;s++)t.call(n,e[s],s,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Co=rb;function ob(e,t){e=Co.trimRight(e),e[e.length-1]!==";"&&(e+=";");var n=e.length,s=!1,r=0,o=0,i="";function a(){if(!s){var d=Co.trim(e.slice(r,o)),f=d.indexOf(":");if(f!==-1){var h=Co.trim(d.slice(0,f)),p=Co.trim(d.slice(f+1));if(h){var m=t(r,i.length,h,p,d);m&&(i+=m+"; ")}}}r=o+1}for(;o<n;o++){var l=e[o];if(l==="/"&&e[o+1]==="*"){var u=e.indexOf("*/",o+2);if(u===-1)break;o=u+1,r=o+1,s=!1}else l==="("?s=!0:l===")"?s=!1:l===";"?s||a():l===`
`&&a()}return Co.trim(i)}var ib=ob,Qi=Hs,ab=ib;function sh(e){return e==null}function lb(e){var t={};for(var n in e)t[n]=e[n];return t}function rh(e){e=lb(e||{}),e.whiteList=e.whiteList||Qi.whiteList,e.onAttr=e.onAttr||Qi.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Qi.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Qi.safeAttrValue,this.options=e}rh.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,s=n.whiteList,r=n.onAttr,o=n.onIgnoreAttr,i=n.safeAttrValue,a=ab(e,function(l,u,d,f,h){var p=s[d],m=!1;if(p===!0?m=p:typeof p=="function"?m=p(f):p instanceof RegExp&&(m=p.test(f)),m!==!0&&(m=!1),f=i(d,f),!!f){var x={position:u,sourcePosition:l,source:h,isWhite:m};if(m){var y=r(d,f,x);return sh(y)?d+":"+f:y}else{var y=o(d,f,x);if(!sh(y))return y}}});return a};var cb=rh;(function(e,t){var n=Hs,s=cb;function r(i,a){var l=new s(a);return l.process(i)}t=e.exports=r,t.FilterCSS=s;for(var o in n)t[o]=n[o];typeof window<"u"&&(window.filterCSS=e.exports)})(Jl,Jl.exports);var Xl=Jl.exports,Zl={indexOf:function(e,t){var n,s;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,s=e.length;n<s;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var s,r;if(Array.prototype.forEach)return e.forEach(t,n);for(s=0,r=e.length;s<r;s++)t.call(n,e[s],s,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,n=t.exec(e);return n?n.index:-1}},ub=Xl.FilterCSS,db=Xl.getDefaultWhiteList,Ji=Zl;function oh(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var ih=new ub;function fb(e,t,n){}function hb(e,t,n){}function pb(e,t,n){}function mb(e,t,n){}function ah(e){return e.replace(vb,"&lt;").replace(yb,"&gt;")}function gb(e,t,n,s){if(n=mh(n),t==="href"||t==="src"){if(n=Ji.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(t==="background"){if(Xi.lastIndex=0,Xi.test(n))return""}else if(t==="style"){if(lh.lastIndex=0,lh.test(n)||(ch.lastIndex=0,ch.test(n)&&(Xi.lastIndex=0,Xi.test(n))))return"";s!==!1&&(s=s||ih,n=s.process(n))}return n=gh(n),n}var vb=/</g,yb=/>/g,bb=/"/g,xb=/&quot;/g,_b=/&#([a-zA-Z0-9]*);?/gim,wb=/&colon;?/gim,kb=/&newline;?/gim,Xi=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,lh=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,ch=/u\s*r\s*l\s*\(.*/gi;function uh(e){return e.replace(bb,"&quot;")}function dh(e){return e.replace(xb,'"')}function fh(e){return e.replace(_b,function(n,s){return s[0]==="x"||s[0]==="X"?String.fromCharCode(parseInt(s.substr(1),16)):String.fromCharCode(parseInt(s,10))})}function hh(e){return e.replace(wb,":").replace(kb," ")}function ph(e){for(var t="",n=0,s=e.length;n<s;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return Ji.trim(t)}function mh(e){return e=dh(e),e=fh(e),e=hh(e),e=ph(e),e}function gh(e){return e=uh(e),e=ah(e),e}function Sb(){return""}function Cb(e,t){typeof t!="function"&&(t=function(){});var n=!Array.isArray(e);function s(i){return n?!0:Ji.indexOf(e,i)!==-1}var r=[],o=!1;return{onIgnoreTag:function(i,a,l){if(s(i))if(l.isClosing){var u="[/removed]",d=l.position+u.length;return r.push([o!==!1?o:l.position,d]),o=!1,u}else return o||(o=l.position),"[removed]";else return t(i,a,l)},remove:function(i){var a="",l=0;return Ji.forEach(r,function(u){a+=i.slice(l,u[0]),l=u[1]}),a+=i.slice(l),a}}}function $b(e){for(var t="",n=0;n<e.length;){var s=e.indexOf("<!--",n);if(s===-1){t+=e.slice(n);break}t+=e.slice(n,s);var r=e.indexOf("-->",s);if(r===-1)break;n=r+3}return t}function Tb(e){var t=e.split("");return t=t.filter(function(n){var s=n.charCodeAt(0);return s===127?!1:s<=31?s===10||s===13:!0}),t.join("")}vt.whiteList=oh(),vt.getDefaultWhiteList=oh,vt.onTag=fb,vt.onIgnoreTag=hb,vt.onTagAttr=pb,vt.onIgnoreTagAttr=mb,vt.safeAttrValue=gb,vt.escapeHtml=ah,vt.escapeQuote=uh,vt.unescapeQuote=dh,vt.escapeHtmlEntities=fh,vt.escapeDangerHtml5Entities=hh,vt.clearNonPrintableCharacter=ph,vt.friendlyAttrValue=mh,vt.escapeAttrValue=gh,vt.onIgnoreTagStripAll=Sb,vt.StripTagBody=Cb,vt.stripCommentTag=$b,vt.stripBlankChar=Tb,vt.attributeWrapSign='"',vt.cssFilter=ih,vt.getDefaultCSSWhiteList=db;var Zi={},_s=Zl;function Ab(e){var t=_s.spaceIndex(e),n;return t===-1?n=e.slice(1,-1):n=e.slice(1,t+1),n=_s.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function Eb(e){return e.slice(0,2)==="</"}function Ib(e,t,n){var s="",r=0,o=!1,i=!1,a=0,l=e.length,u="",d="";e:for(a=0;a<l;a++){var f=e.charAt(a);if(o===!1){if(f==="<"){o=a;continue}}else if(i===!1){if(f==="<"){s+=n(e.slice(r,a)),o=a,r=a;continue}if(f===">"||a===l-1){s+=n(e.slice(r,o)),d=e.slice(o,a+1),u=Ab(d),s+=t(o,s.length,u,d,Eb(d)),r=a+1,o=!1;continue}if(f==='"'||f==="'")for(var h=1,p=e.charAt(a-h);p.trim()===""||p==="=";){if(p==="="){i=f;continue e}p=e.charAt(a-++h)}}else if(f===i){i=!1;continue}}return r<l&&(s+=n(e.substr(r))),s}var Pb=/[^a-zA-Z0-9\\_:.-]/gim;function Ob(e,t){var n=0,s=0,r=[],o=!1,i=e.length;function a(h,p){if(h=_s.trim(h),h=h.replace(Pb,"").toLowerCase(),!(h.length<1)){var m=t(h,p||"");m&&r.push(m)}}for(var l=0;l<i;l++){var u=e.charAt(l),d,f;if(o===!1&&u==="="){o=e.slice(n,l),n=l+1,s=e.charAt(n)==='"'||e.charAt(n)==="'"?n:Mb(e,l+1);continue}if(o!==!1&&l===s){if(f=e.indexOf(u,l+1),f===-1)break;d=_s.trim(e.slice(s+1,f)),a(o,d),o=!1,l=f,n=l+1;continue}if(/\s|\n|\t/.test(u))if(e=e.replace(/\s|\n|\t/g," "),o===!1)if(f=Rb(e,l),f===-1){d=_s.trim(e.slice(n,l)),a(d),o=!1,n=l+1;continue}else{l=f-1;continue}else if(f=Lb(e,l-1),f===-1){d=_s.trim(e.slice(n,l)),d=vh(d),a(o,d),o=!1,n=l+1;continue}else continue}return n<e.length&&(o===!1?a(e.slice(n)):a(o,vh(_s.trim(e.slice(n))))),_s.trim(r.join(" "))}function Rb(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="="?t:-1}}function Mb(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="'"||n==='"'?t:-1}}function Lb(e,t){for(;t>0;t--){var n=e[t];if(n!==" ")return n==="="?t:-1}}function Db(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function vh(e){return Db(e)?e.substr(1,e.length-2):e}Zi.parseTag=Ib,Zi.parseAttr=Ob;var Nb=Xl.FilterCSS,vn=vt,yh=Zi,jb=yh.parseTag,Fb=yh.parseAttr,Yi=Zl;function ea(e){return e==null}function zb(e){var t=Yi.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=Yi.trim(e.slice(t+1,-1));var n=e[e.length-1]==="/";return n&&(e=Yi.trim(e.slice(0,-1))),{html:e,closing:n}}function qb(e){var t={};for(var n in e)t[n]=e[n];return t}function Bb(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map(function(s){return s.toLowerCase()}):t[n.toLowerCase()]=e[n];return t}function bh(e){e=qb(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=vn.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=Bb(e.whiteList||e.allowList):e.whiteList=vn.whiteList,this.attributeWrapSign=e.singleQuotedAttributeValue===!0?"'":vn.attributeWrapSign,e.onTag=e.onTag||vn.onTag,e.onTagAttr=e.onTagAttr||vn.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||vn.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||vn.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||vn.safeAttrValue,e.escapeHtml=e.escapeHtml||vn.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Nb(e.css))}bh.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,s=n.whiteList,r=n.onTag,o=n.onIgnoreTag,i=n.onTagAttr,a=n.onIgnoreTagAttr,l=n.safeAttrValue,u=n.escapeHtml,d=t.attributeWrapSign,f=t.cssFilter;n.stripBlankChar&&(e=vn.stripBlankChar(e)),n.allowCommentTag||(e=vn.stripCommentTag(e));var h=!1;n.stripIgnoreTagBody&&(h=vn.StripTagBody(n.stripIgnoreTagBody,o),o=h.onIgnoreTag);var p=jb(e,function(m,x,y,_,C){var A={sourcePosition:m,position:x,isClosing:C,isWhite:Object.prototype.hasOwnProperty.call(s,y)},E=r(y,_,A);if(!ea(E))return E;if(A.isWhite){if(A.isClosing)return"</"+y+">";var $=zb(_),T=s[y],I=Fb($.html,function(R,q){var G=Yi.indexOf(T,R)!==-1,K=i(y,R,q,G);return ea(K)?G?(q=l(y,R,q,f),q?R+"="+d+q+d:R):(K=a(y,R,q,G),ea(K)?void 0:K):K});return _="<"+y,I&&(_+=" "+I),$.closing&&(_+=" /"),_+=">",_}else return E=o(y,_,A),ea(E)?u(_):E},u);return h&&(p=h.remove(p)),p};var Ub=bh;(function(e,t){var n=vt,s=Zi,r=Ub;function o(a,l){var u=new r(l);return u.process(a)}t=e.exports=o,t.filterXSS=o,t.FilterXSS=r,function(){for(var a in n)t[a]=n[a];for(var l in s)t[l]=s[l]}(),typeof window<"u"&&(window.filterXSS=e.exports);function i(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}i()&&(self.filterXSS=e.exports)})(Ql,Ql.exports);var xh=Ql.exports;const Vb=[/<script[\s\S]*?(<\/script>|$)/i,/javascript\s*:/i,/vbscript\s*:/i,/data\s*:\s*text\s*\/\s*html/i,/on\w+\s*=/i,/expression\s*\(/i,/url\s*\(\s*['"]?\s*javascript\s*:/i,/srcdoc\s*=.*<script/i,/\{\{.*\}\}|\$\{.*\}|v-on:|ng-\w+=/,/@\w+\s*=\s*["'][^"']*["']/],_h=[/expression\s*\(/i,/javascript\s*:/i,/vbscript\s*:/i,/data\s*:\s*(?!image\/)/i,/@import/i,/behavior\s*:/i,/-moz-binding/i],wh=e=>{if(!e||typeof e!="string")return!1;if(Vb.some(t=>t.test(e)))return!0;if(/&[a-zA-Z]+;|&#\d+;|&#x[0-9a-fA-F]+;/.test(e)){const t=e.replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&quot;/gi,'"').replace(/&#39;/gi,"'").replace(/&amp;/gi,"&").replace(/&#x3C;/gi,"<").replace(/&#x3E;/gi,">").replace(/&#60;/gi,"<").replace(/&#62;/gi,">").replace(/&#x22;/gi,'"').replace(/&#x27;/gi,"'");if(t!==e)return wh(t)}return!1},Hb=e=>{if(!e||typeof e!="string")return"";let t=e.replace(/\/\*[\s\S]*?\*\//g,"").trim();if(_h.some(r=>r.test(t)))return console.warn("Blocked dangerous CSS:",e),"";const n=t.split(";").filter(r=>r.trim()),s=[];return n.forEach(r=>{const o=r.indexOf(":");if(o===-1)return;const i=r.substring(0,o).trim(),a=r.substring(o+1).trim();_h.some(l=>l.test(a))||s.push(`${i}: ${a}`)}),s.join("; ")},kh={whiteList:{a:["alt","class","href","id","title","target","rel"],b:["class","id"],blockquote:["class","id"],br:[],code:["class","id"],div:["class","id","style"],em:["class","id"],h1:["class","id"],h2:["class","id"],h3:["class","id"],h4:["class","id"],h5:["class","id"],h6:["class","id"],hr:["class","id"],i:["class","id"],p:["class","id","style"],pre:["class","id"],span:["class","id","style"],strong:["class","id"],li:["class","id"],ol:["class","id","start"],ul:["class","id"],table:["class","id"],tbody:["class","id"],td:["class","id","colspan","rowspan"],th:["class","id","colspan","rowspan"],thead:["class","id"],tr:["class","id"],img:["alt","class","id","src","title"],math:["class","id","mathvariant","displaystyle"],mrow:["class","id"],mi:["class","id","mathvariant"],mo:["class","id"],mn:["class","id"],msup:["class","id"],msub:["class","id"],mfrac:["class","id"],msqrt:["class","id"]},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"],onTagAttr:(e,t,n,s)=>{if(t.toLowerCase().startsWith("on"))return"";if(t==="style"){const r=Hb(n);return r?`style="${r}"`:""}if(t==="href"||t==="src"){const r=Kb(n);return r!==n?`${t}="${r}"`:null}return s?null:""},onIgnoreTagAttr:(e,t,n,s)=>""},Wb=new xh.FilterXSS(kh),Gb=(e,t={})=>{if(!e||typeof e!="string")return"";const n={...kh,...t};return(t&&Object.keys(t).length>0?new xh.FilterXSS(n):Wb).process(e)},Kb=e=>{if(!e||typeof e!="string")return"#";const t=e.trim().toLowerCase();return t.startsWith("javascript:")||t.startsWith("vbscript:")||t.startsWith("data:")&&!t.startsWith("data:image/")?"#blocked":e},Sh=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),Qb=e=>{let t=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`);const n=/\\{1,2}\[\s*([\s\S]*?)\s*\\{1,2}\]/g;t=t.replace(n,(r,o)=>`<div class="math-block"><code>${o.trim().replace(/\n\s*/g," ").replace(/\s+/g," ")}</code></div>`);const s=/\\{1,2}\(\s*(.*?)\s*\\{1,2}\)/g;return t=t.replace(s,(r,o)=>`<code class="math-inline">${o.trim()}</code>`),t},Jb=e=>{const t=e.trim();return/^\d+\.$/.test(t)};tt.setOptions({gfm:!0,breaks:!0,sanitize:!1});const Ch=e=>{if(typeof e=="string"){const t=e.trim();if(Jb(t))return[`<p>${t}</p>`];if(wh(e))return[`<p class="js-blocked-content">${Sh(e)}</p>`];try{let n=Qb(e);n=n.replace(/\[([^\]]*\|[^\]]*)\]/g,(a,l)=>`[${l.replace(/\|/g,"/")}]`);const s=tt(n),r=Gb(s),o=/\n<p>/gi,i=r.split(o).filter(a=>a.trim().length>0).map((a,l)=>l!==0&&!a.startsWith("<p>")?`<p>${a.trim()}`:a);return i.length===2&&i[0].includes("<h")?[i[0]+`
`+i[1]]:i}catch(n){return console.error("Error processing markdown:",n),[`<p class="processing-error">${Sh(e)}</p>`]}}return[]};async function Ar(e){const t=async()=>new Promise((n,s)=>{const r=new Image;r.onload=()=>{n({status:!0,message:"Hnh nh hp l",width:r.width,height:r.height})},r.onerror=()=>{s({status:!1,message:"URL hnh nh khng hp l hoc khng th ti c"})},r.src=e});try{return await t(e)}catch{return{status:!1,message:"URL hnh nh khng hp l hoc khng th ti c"}}}const Er=e=>typeof e=="function",ta=e=>{try{return JSON.parse(e),typeof e=="string"}catch{return!1}};function $h(e,t={}){const{title:n="",logo:s="",brand:r=""}=t;if(!e)return null;const o=JSON.parse(JSON.stringify(e)),i=a=>a.includes("{logo}")?(a=a.split("{logo}"),a=a.map(l=>l===""?`<img src='${s}'/>`:`<span>${l}</span>`),a.join("").replace(/{title}/g,n).replace(/{brand}/g,r).replace(/{category}/g,n).replace(/{product}/g,n)):a.replace(/{title}/g,n).replace(/{brand}/g,r).replace(/{category}/g,n).replace(/{product}/g,n);return o.product&&(o.product=o.product.map(a=>({...a,name:i(a.name),message:i(a.message)}))),o.category&&(o.category=o.category.map(a=>({...a,name:i(a.name),message:i(a.message)}))),o}function Yn(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function $o(e,t=!1){const n=history.pushState,s=history.replaceState,r=()=>{document.readyState==="complete"?e(window.location.href):window.addEventListener("load",()=>e(window.location.href),{once:!0})};history.pushState=function(){n.apply(this,arguments),r()},history.replaceState=function(){s.apply(this,arguments),r()},window.addEventListener("popstate",r),t&&r()}function Yl(e){const t=new URL(e),n={};for(const[s,r]of t.searchParams)n[s]=r;return n}function Xb(e,t){try{const n=new URL(e);return Object.entries(t).forEach(([s,r])=>{r!=null&&(n.searchParams.has(s)||n.searchParams.append(s,r))}),n.toString()}catch(n){return console.error("Invalid URL:",n),e}}const Th=(e,t="vi-VN")=>new Intl.NumberFormat(t,{minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:!0}).format(e),Ir=e=>e!==null&&typeof e=="object";function ws(e){if(typeof e=="string")try{const t=JSON.parse(e);if(typeof t=="object"&&t!==null)return t}catch{return e}return e}const Ah=e=>e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase(),Eh=(e,t="",n=null)=>{if(n||(n=document.getElementById("easychatgpt-widget")),!n){console.warn(" applyAllStyles: Root element not found");return}Object.keys(e).forEach(s=>{const r=e[s],o=`--${t}${Ah(s)}`;typeof r=="object"&&!Array.isArray(r)&&r!==null?Eh(r,`${t}${Ah(s)}-`,n):n.style.setProperty(o,r)})},Ih=(e,t)=>(Object.keys(t).forEach(n=>{const s=e[n],r=t[n];typeof s=="object"&&s&&typeof r=="object"&&r&&!Array.isArray(s)&&!Array.isArray(r)?e[n]=Ih({...s},r):e[n]=r}),e);function ec(e){return e===null||typeof e!="object"?e:JSON.parse(JSON.stringify(e))}function Pr({title:e,image:t,source:n,isImageValid:s,cartUrl:r="/cart"}){return`<div class="ecg-cart-success"><a class="product-image" href="${n}"><img src="${t}" alt="${e}" class="${s?"thumbnail":"thumbnail error"}" /></a><div><div class="notify-success"><div> thm vo gi hng</div></div><a class="product-title" href="${n}">${e}</a><a class="checkout-link" href="${window.location.origin+r}"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" size="18" class="lucide lucide-shopping-bag-icon mr-1"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path><path d="M3 6h18"></path><path d="M16 10a4 4 0 0 1-8 0"></path></svg>Thanh ton ngay</a></div></div>`}function Zb(e=[],t){const n=ec(e);return n.sort((s,r)=>s.sender_type===t&&r.sender_type===t?(parseInt(s.id)||0)-(parseInt(r.id)||0):0),n}function Ws(e){for(let t=0;t<e.length;t++){const n=e[t];if(n.sender_type==="assistant"){let s=t+1;if(s<e.length){const r=e[s];r.sender_type==="user"?n.is_last_assistant_message=!0:r.sender_type==="assistant"&&(r.content_type==="cards"||r.content_type==="product_cards"?(n.is_last_assistant_message=!0,r.is_last_assistant_message=!0):n.is_last_assistant_message=!1)}else n.is_last_assistant_message=!0}}return e}function Yb(e){const t=[];let n=[];const s=()=>{if(n.length===0)return;const r=n.filter(i=>i.content_type==="audio"),o=n.filter(i=>i.content_type!=="audio");t.push(...r,...o),n=[]};for(const r of e)r.sender_type==="assistant"?n.push(r):(s(),t.push(r));s();for(let r=t.length-1;r>=0;r--)if(t[r].content_type==="audio"){t[r].is_last_audio=!0;break}return t}const ex="https://console.easyaichat.app",tx=async(e,t={})=>{try{const n=t.apiHost||ex,s={preview:!!t.preview},{data:r}=await ut.get(`${n}/api/bots/${e}`,{params:s,headers:{"X-Easy-Ai-User-Id":kr()}}),o=r.config,i=Ih(o,t);return Eh(i.ui,"ui-"),r.config=i,r}catch(n){console.error(n)}},D=st({bot:null,handle:null,conversationId:null,apiDomain:"https://console.easyaichat.app",appDomain:"https://widget.easyaichat.app",forms:{},isOpenForm:!1,isSuccessForm:!1,totalFormItems:0,selectedForm:null,localStorageFormOrder:null,isOpenFormContact:!1,isSuccessFormContact:!1,cart:null,user:null,token:null});Ee(()=>D.selectedForm,e=>{var t;if(((t=e==null?void 0:e.items)==null?void 0:t.length)>0){let n=0;e.items.forEach(s=>{n=n+Number(s.quantity)}),D.totalFormItems=n}else D.totalFormItems=0},{immediate:!0}),Ee(()=>D.handle,()=>{const e=JSON.parse(localStorage.getItem("easychatgpt_conversations"))||{};Object.values(e).length>0&&(D.conversationId=Object.values(e)[0])});const nx=["home","conversations","helps","order_tracking"],Xe=st({bot:null,handle:null,isOpenLeadForm:!1,chatState:{isOpen:!1,visitor:null,viewTab:"conversations",unreadMessageCount:0,lastAssistantMessageId:null,lastUnreadMessage:null,assistantProcessing:!1,shouldOpenChatScreen:!1},isCheckInit:!1}),sx={setBot(e){Xe.bot=e,D.bot=e,D.handle=e.handle},setHandle(e){Xe.handle=e},incrementUnreadMessageCount(){Xe.chatState.unreadMessageCount+=1,this.saveChatState()},resetUnreadMessageCount(){Xe.chatState.unreadMessageCount=0,Xe.chatState.lastUnreadMessage=null,this.saveChatState()},resetChatState(){Xe.chatState.unreadMessageCount=0,Xe.chatState.lastUnreadMessage=null,Xe.chatState.lastAssistantMessageId=null,this.saveChatState()},updateLastUnreadMessage(e){if(Xe.chatState.unreadMessageCount===0){Xe.chatState.lastUnreadMessage=null,this.saveChatState();return}if(!e||!Array.isArray(e)||e.length===0)return;const t=e.filter(s=>s.sender_type==="assistant"&&!s.is_welcome_message);if(t.length===0)return;const n=t[t.length-1];Xe.chatState.lastUnreadMessage={id:n.id,content_type:n.content_type,content:n.content,created_at:n.created_at},this.saveChatState()},setLastAssistantMessageId(e){e<10||(Xe.chatState.lastAssistantMessageId=e,this.saveChatState())},updateLastAssistantMessageIdFromMessages(e){if(e&&e.length>0){const t=[...e].reverse().find(n=>n.sender_type==="assistant");t&&t.id&&(Xe.chatState.lastAssistantMessageId=t.id,this.saveChatState())}},handleMetricSubmit(e){try{const{handle:t,submission_id:n,source:s}=e.detail;t&&n&&window.rybbit.event("chatbot_widget_contact",{handle:t,submission_id:n,source:s})}catch(t){console.error("Error handling metric submit:",t)}},handleDispatchEvent(){window.addEventListener("metric-submit",this.handleMetricSubmit)},handleEventMessage(){window.addEventListener("message",e=>{var t;try{const n=e.data;if(!n||typeof n!="object")return;n.type==="submit-metric"&&n.submission_id&&(console.log("handleEventMessage submit-metric 01",n,window.rybbit),(t=window.rybbit)==null||t.event("chatbot_widget_contact",{handle:Xe.handle,submission_id:n.submission_id,source:n.source??"chatbot"}))}catch(n){console.error("Error handling message event:",n)}}),this.handleDispatchEvent()},async loadScriptTracking(){var r,o;const e=(o=(r=Xe.bot)==null?void 0:r.config)==null?void 0:o.easy_ai_metric_site_id;if(!e||document.querySelector(`script[data-site-id="${e}"]`))return;const n=document.createElement("script");n.src="https://metric.easyaichat.app/api/script.js",n.setAttribute("data-site-id",e),n.defer=!0,document.head.appendChild(n);async function s(){try{const{initMetricWebsiteFactory:i}=await Promise.resolve().then(()=>g_);window.rybbit&&(kr(),p1(),await i())}catch(i){console.error("Failed to load metrics:",i)}}n.onload=i=>{setTimeout(()=>{s()},2e3)}},checkChatStateInit(){const t=localStorage.getItem("eac_chat_state");if(t)try{const n=JSON.parse(t);Xe.chatState={isOpen:Yn()?!1:n.isOpen||!1,visitor:n.visitor||null,viewTab:n.viewTab||"conversations",unreadMessageCount:n.unreadMessageCount||0,lastAssistantMessageId:n.lastAssistantMessageId||null,lastUnreadMessage:n.lastUnreadMessage||null,assistantProcessing:n.assistantProcessing||!1}}catch(n){console.error("Error parsing chat state from localStorage:",n),this.saveChatState()}else this.saveChatState();Xe.isCheckInit=!0},saveChatState(){if(!Xe.isCheckInit)return;const e="eac_chat_state",t={...Xe.chatState};Yn()&&(t.isOpen=!1),localStorage.setItem(e,JSON.stringify(t))},updateChatState(e){var t,n;Xe.isCheckInit&&(Xe.chatState={...Xe.chatState,...e},nx.includes(Xe.chatState.viewTab)||(Xe.chatState.viewTab="conversations"),Xe.chatState.isOpen&&Xe.chatState.unreadMessageCount>0&&(!((n=(t=Xe.bot)==null?void 0:t.config)!=null&&n.page&&Object.values(Xe.bot.config.page).some(o=>o&&o.enabled===!0))||Xe.chatState.viewTab==="conversations")&&(Xe.chatState.unreadMessageCount=0,Xe.chatState.lastUnreadMessage=null),Xe.chatState.shouldOpenChatScreen&&(Xe.chatState.shouldOpenChatScreen=!1),this.saveChatState())},async fetchBotInit(e,t={},n={}){if(!e)return console.warn("Missing data: handle is required"),null;this.setHandle(e);try{const s=await tx(e,t);return s?(this.setBot(s),n.website&&![xs,Qn].includes(e)&&this.loadScriptTracking(),this.checkChatStateInit(),s):void 0}catch(s){return console.error("Error fetch bot in store = ",s),null}}},rx={handle:pe(()=>{var e;return(e=Xe.bot)==null?void 0:e.handle})},me={state:Xe,actions:sx,getters:rx},ox=st({user:null,token:null});fr(ox);const Ph=st({selectedProduct:null,isOpenPanelVariants:!1}),Oh={actions:{toggleOpenPanelVariants(e){Ph.isOpenPanelVariants=e},setSelectedProduct(e){Ph.selectedProduct=e}}},dn=st({message:null,type:null}),zn={state:dn,actions:{success({message:e,duration:t=3e3}){dn.message=e,dn.type="success",setTimeout(()=>{dn.message=null,dn.type=null},t)},error({message:e,duration:t=3e3}){dn.message=e,dn.type="error",setTimeout(()=>{dn.message=null,dn.type=null},t)},warning({message:e,duration:t=3e3}){dn.message=e,dn.type="warning",setTimeout(()=>{dn.message=null,dn.type=null},t)}},getters:{}},Rh="https://widget.easyaichat.app",tc={ai_product_insight:()=>Promise.resolve().then(()=>KP),ai_summary_page_content:()=>Promise.resolve().then(()=>oO),ai_ask:()=>Promise.resolve().then(()=>tm),eac_image_gallery:()=>Promise.resolve().then(()=>TO)};function ix(e){return e?typeof e=="string"?e:Object.entries(e).map(([t,n])=>`${t.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${n}`).join("; "):""}function nc(e,t,n={}){const s=document.querySelector(e);if(!s)return console.error(`Widget: Target element not found: ${e}`),null;if(!(t!=null&&t.type)||!tc[t.type])return console.error(`Widget: Invalid widget type: ${t.type}`),null;const r={shadowMode:"open",position:"top",props:{},...n},o=`eac-widget-${t.type.toLowerCase().replace(/_/g,"-")}`;if(document.getElementById(o))return null;if((r.position==="before"||r.position==="after")&&!s.parentNode)return console.error(`Widget: Cannot insert ${r.position} target element - no parent node found`),null;const i=document.createElement("div");switch(i.id=o,i.style.cssText=`background: transparent; ${ix(n.style)}`,r.position){case"top":s.firstChild?s.insertBefore(i,s.firstChild):s.appendChild(i);break;case"bottom":s.appendChild(i);break;case"before":s.parentNode.insertBefore(i,s);break;case"after":s.nextSibling?s.parentNode.insertBefore(i,s.nextSibling):s.parentNode.appendChild(i);break;default:s.appendChild(i)}const a=i.attachShadow({mode:r.shadowMode}),l=document.createElement("div");l.className="eac-widget-mount",a.appendChild(l);const u=Rt({loader:tc[t.type],delay:0,timeout:5e3,onError:(x,y,_)=>{console.error("Widget: Failed to load component:",x),_()}}),d={widget:t,...r.props},f=ho(u,d);let h=!1;const p=document.createElement("link");p.rel="stylesheet",p.href=`${Rh}/dist/widget/main.css`;const m=()=>{try{f.mount(l),h=!0}catch(x){console.error("Widget: Mount failed:",x)}};return p.onload=()=>{m()},p.onerror=()=>{m()},a.appendChild(p),{update(x,y={}){if(!h)return this;try{f.unmount();const _={widget:x,...r.props,...y},C=ho(u,_);C.mount(l),this.app=C}catch(_){console.error("Widget: Update error:",_)}return this},remove(){try{h&&f.unmount(),i.remove()}catch(x){console.error("Widget: Remove error:",x)}}}}function ax(e,t=0,n=null){const s="eac-image-gallery",r=document.getElementById(s);r&&r.remove();const o=document.createElement("div");o.id=s,o.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 99999999999;
        background: transparent;
    `,document.body.appendChild(o);const i=o.attachShadow({mode:"open"}),a=document.createElement("div");a.className="eac-gallery-mount",i.appendChild(a);const l=document.createElement("link");l.rel="stylesheet",l.href=`${Rh}/dist/widget/main.css`,i.appendChild(l);const u=Rt({loader:tc.eac_image_gallery,delay:0,timeout:5e3,onError:p=>{console.error("ImageGallery: Failed to load component:",p)}}),d=()=>{n&&n();try{f.unmount()}catch(p){console.error("ImageGallery: Unmount failed:",p)}o.remove()},f=ho(u,{media:e,initialIndex:t,onRemove:d}),h=()=>{try{f.mount(a)}catch(p){console.error("ImageGallery: Mount failed:",p)}};return l.onload=h,l.onerror=h,{remove:d}}const Mh=!1,lx=e=>({getList(){return e.get(`/bots/${D.handle}/addresses`,{params:{mock:Mh}})},create(t){return e.post(`/bots/${D.handle}/addresses`,t,{params:{mock:Mh}})}}),Or=!1,cx=e=>({getUser(){return e.get(`/bots/${D.handle}/profile`,{params:{mock:Or}})},updateUser(t){return e.put(`/bots/${D.handle}/profile`,t,{params:{mock:Or}})},login({type:t,identifier:n}){return e.post(`/bots/${D.handle}/auth/login`,{type:t,identifier:n},{params:{mock:Or}})},verifyOtp({code:t,identifier:n}){return e.post(`/bots/${D.handle}/auth/otp/verify`,{code:t,identifier:n},{params:{mock:Or}})},requestOtp({type:t,identifier:n}){return e.post(`/bots/${D.handle}/auth/otp/request`,{type:t,identifier:n},{params:{mock:Or}})},logout(){return e.post(`/bots/${D.handle}/auth/logout`,{},{params:{mock:Or}})}}),Gs=!1,ux=e=>({getList(){return e.get(`/bots/${D.handle}/cart`,{params:{mock:Gs}})},add(t){return e.post(`/bots/${D.handle}/cart/items`,t,{params:{mock:Gs}})},update(t,n){return e.patch(`/bots/${D.handle}/cart/items/${t}`,n,{params:{mock:Gs}})},remove(t){return e.delete(`/bots/${D.handle}/cart/items/${t}`,{params:{mock:Gs}})},coupons(){return e.get(`/bots/${D.handle}/coupons`,{params:{mock:Gs}})},applyCoupon(t){return e.post(`/bots/${D.handle}/cart/coupon`,t,{params:{mock:Gs}})},removeCoupon(t={}){return e.delete(`/bots/${D.handle}/cart/coupon`,{...t,params:{mock:Gs}})}});var Lh={exports:{}};(function(e,t){(function(){var n={expires:"1d",path:"; path=/",domain:"",secure:"",sameSite:"; SameSite=Lax",partitioned:""},s={install:function(r,o){o&&this.config(o.expires,o.path,o.domain,o.secure,o.sameSite,o.partitioned);const i=r.config&&r.config.globalProperties;i&&(r.config.globalProperties.$cookies=this,r.provide&&r.provide("$cookies",this)),(!i||r.prototype)&&(r.prototype.$cookies=this),r.$cookies=this},config:function(r,o,i,a,l,u){n.expires=r||"1d",n.path=o?"; path="+o:"; path=/",n.domain=i?"; domain="+i:"",n.secure=a?"; Secure":"",n.sameSite=l?"; SameSite="+l:"; SameSite=Lax",n.partitioned=u?"; Partitioned":""},get:function(r){var o=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(r).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;if(o&&(o.substring(0,1)==="{"&&o.substring(o.length-1,o.length)==="}"||o.substring(0,1)==="["&&o.substring(o.length-1,o.length)==="]"))try{o=JSON.parse(o)}catch{return o}return o},set:function(r,o,i,a,l,u,d,f){if(r){if(/^(?:expires|max\-age|path|domain|secure|SameSite)$/i.test(r))throw new Error('Cookie name illegality. Cannot be set to ["expires","max-age","path","domain","secure","SameSite"]	 current key name: '+r)}else throw new Error("Cookie name is not found in the first argument.");o&&typeof o=="object"&&(o=JSON.stringify(o));var h="";if(i=i===void 0?n.expires:i,i&&i!==0)switch(i.constructor){case Number:i===1/0||i===-1?h="; expires=Fri, 31 Dec 9999 23:59:59 GMT":h="; max-age="+i;break;case String:if(/^(?:\d+(y|m|d|h|min|s))$/i.test(i)){var p=i.replace(/^(\d+)(?:y|m|d|h|min|s)$/i,"$1");switch(i.replace(/^(?:\d+)(y|m|d|h|min|s)$/i,"$1").toLowerCase()){case"m":h="; max-age="+ +p*2592e3;break;case"d":h="; max-age="+ +p*86400;break;case"h":h="; max-age="+ +p*3600;break;case"min":h="; max-age="+ +p*60;break;case"s":h="; max-age="+p;break;case"y":h="; max-age="+ +p*31104e3;break}}else h="; expires="+i;break;case Date:h="; expires="+i.toUTCString();break}return document.cookie=encodeURIComponent(r)+"="+encodeURIComponent(o)+h+(l?"; domain="+l:n.domain)+(a?"; path="+a:n.path)+(u===void 0?n.secure:u?"; Secure":"")+(d===void 0?n.sameSite:d?"; SameSite="+d:"")+(f===void 0?n.partitioned:f?"; Partitioned":""),this},remove:function(r,o,i){return!r||!this.isKey(r)?!1:(document.cookie=encodeURIComponent(r)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(i?"; domain="+i:n.domain)+(o?"; path="+o:n.path)+"; SameSite=Lax",!0)},isKey:function(r){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(r).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){if(!document.cookie)return[];for(var r=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),o=0;o<r.length;o++)r[o]=decodeURIComponent(r[o]);return r}};e.exports=s,typeof window<"u"&&(window.$cookies=s)})()})(Lh);var dx=Lh.exports;const pt=th(dx),na={STATUS:"status",AUDIO:"audio",MESSAGES:"messages",DONE:"done"},fx="mp3",hx=e=>({getConversations({handle:t,conversationId:n,token:s}){const r={"Content-Type":"application/json"};return s&&(r.Authorization=`Bearer ${s}`),e.get(`/bots/${t}/conversations/${n}`,{headers:r})},async sendMessage(t,n,{isFormData:s=!1,onAudioChunk:r=null,onStatus:o=null,onComplete:i=null}={}){if(t.mode==="voice")return this._sendVoiceMessage(t,n,{onAudioChunk:r,onStatus:o,onComplete:i});const a={"Content-Type":s?"multipart/form-data":"application/json"};return n&&(a.Authorization=`Bearer ${n}`),e.post("/chat",t,{headers:a})},async _sendVoiceMessage(t,n,{onAudioChunk:s,onStatus:r,onComplete:o}){const i=await this._createVoiceRequest(t,n);return await this._processSSEStream(i,{onAudioChunk:s,onStatus:r,onComplete:o,fallbackConversationId:t.conversation_id})},async _createVoiceRequest(t,n){const s="https://console.easyaichat.app",r=this._buildVoiceHeaders(n),o=await fetch(`${s}/api/chat`,{method:"POST",headers:r,body:JSON.stringify(t),credentials:"include"});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return o},_buildVoiceHeaders(t){const n=kr(),s=t||pt.get(Ln),r={"Content-Type":"application/json",Accept:"text/event-stream","X-Easy-Ai-User-Id":n};return s&&(r.Authorization=`Bearer ${s}`),r},async _processSSEStream(t,{onAudioChunk:n,onStatus:s,onComplete:r,fallbackConversationId:o}){const i=t.body.getReader(),a=new TextDecoder;let l="",u=null;for(;;){const{done:d,value:f}=await i.read();if(d)break;l+=a.decode(f,{stream:!0});const h=l.split(`
`);l=h.pop()||"";for(const p of h)if(!(!p.trim()||p.startsWith(":")||p.startsWith("event:"))&&p.startsWith("data:")){const m=this._parseEventData(p);m&&(u=this._handleSSEEvent(m,{onAudioChunk:n,onStatus:s,onComplete:r,currentFinalData:u}))}}return{data:u||{messages:[],conversation_id:o,code:0,msg:"success"}}},_parseEventData(t){try{const n=t.substring(5).trim();return JSON.parse(n)}catch(n){return console.error("Error parsing SSE data:",n),null}},_handleSSEEvent(t,{onAudioChunk:n,onStatus:s,onComplete:r,currentFinalData:o}){switch(t.type){case na.STATUS:s&&s(t.status);break;case na.AUDIO:if(n){const i=t.format||fx;n(t.content,t.sentence_index,t.text,i)}break;case na.MESSAGES:return{messages:t.messages,conversation_id:t.conversation_id,response_mode:t.response_mode,total_audio_chunks:t.total_audio_chunks,code:t.code,msg:t.msg};case na.DONE:r&&r({conversation_id:t.conversation_id,total_sentences:t.total_sentences,response_mode:t.response_mode});break}return o}}),px=e=>({initConnection(t){return e.post("/live-chat/init",t)}}),sc=!1,mx=e=>({provinces(){return e.get(`/bots/${D.handle}/locations/provinces`,{params:{mock:sc}})},districts(t){return e.get(`/bots/${D.handle}/locations/provinces/${t}/districts`,{params:{mock:sc}})},wards(t){return e.get(`/bots/${D.handle}/locations/districts/${t}/wards`,{params:{mock:sc}})}}),To=!1,gx=e=>({checkout(t){return e.post(`/bots/${D.handle}/checkout`,t,{params:{mock:To}})},checkShipping(t){return e.post(`/bots/${D.handle}/cart/shipping-address`,t,{params:{mock:To}})},getList(t={}){return e.get(`/bots/${D.handle}/orders`,{params:{mock:To,...t}})},getOne(t){return e.get(`/bots/${D.handle}/orders/${t}`,{params:{mock:To}})},getStatuses(){return e.get(`/bots/${D.handle}/orders/statuses`,{params:{mock:To}})}}),vx=e=>({update({conversationId:t,messageId:n,form:s={reaction:"love"}}){return e.post(`/bots/${D.handle}/conversations/${t}/messages/${n}/reaction`,s)},removeAll({conversationId:t,messageId:n}){return e.post(`/bots/${D.handle}/conversations/${t}/messages/${n}/reset-all-reaction`)}}),yx=e=>({add({formId:t,formData:n}){return e.post(`/bots/${D.handle}/widgets/${t}/submission`,n)},submitWidget({widgetId:t,formData:n}){return e.post(`/bots/${D.handle}/widgets/${t}/submission`,n)}}),bx=e=>({getSummary(t){return e.post("/widgets/summary",t)},getComparisonSummary(t){return e.post("/widgets/compare",t)}}),xx=e=>({submitForm({widgetId:t,handle:n,formData:s}){return e.post(`/bots/${n}/widgets/${t}/submission`,s)},updateAll({handle:t,token:n,expires:s,widgets:r}){return e.put(`/bots/${t}/widgets?expires=${s}&signature=${n}`,{widgets:r})}}),yn=ut.create({baseURL:"https://console.easyaichat.app"+"/api",withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}});yn.interceptors.request.use(e=>{const t=kr(),n=pt.get(Ln);return e.headers["X-Easy-Ai-User-Id"]=t,n&&(e.headers.Authorization=`Bearer ${n}`),e},e=>Promise.reject(e));const ze={address:lx(yn),auth:cx(yn),cart:ux(yn),chat:hx(yn),liveChat:px(yn),location:mx(yn),order:gx(yn),reaction:vx(yn),submission:yx(yn),summary:bx(yn),widget:xx(yn)},at={track:(e,t)=>{var n;(n=window.rybbit)==null||n.event(e,t)},identify:e=>{var t;(t=window.rybbit)==null||t.identify(e)},clearUserId:()=>{var e;(e=window.rybbit)==null||e.clearUserId()},getUserId:()=>{var e;return(e=window.rybbit)==null?void 0:e.getUserId()}},Dt={conversationStart:e=>{at.track("chatbot_conversation_start",e)},conversationReset:e=>{at.track("chatbot_conversation_reset",e)},quickPromptClick:e=>{at.track("chatbot_quick_prompt_click",e)},messageSend:e=>{at.track("chatbot_message_send",e)},linkClick:e=>{at.track("chatbot_link_click",e)},ctaClick:e=>{at.track("chatbot_cta_click",e)},interaction:e=>{at.track("chatbot_interaction",e)},widgetVoice:e=>{at.track("chatbot_widget_voice",e)},widgetFollowUpQuestions:e=>{at.track("chatbot_widget_follow_up_questions",e)},widgetContact:e=>{at.track("chatbot_widget_contact",e)}},_x=st({isPlaying:!1,currentSentenceIndex:null});function wx(){const{isPlaying:e,currentSentenceIndex:t}=Ct(_x),n=L(null),s=L(null),r=L(0),o=L([]),i=L(!1),a=L(!1),l=()=>{const y=window.AudioContext||window.webkitAudioContext;return n.value||(n.value=new y({sampleRate:48e3}),s.value=n.value.createGain(),s.value.gain.value=1,s.value.connect(n.value.destination)),n.value},u=async()=>{if(n.value||l(),n.value.state==="suspended")try{await n.value.resume()}catch(y){throw y}},d=async()=>{if(n.value||l(),n.value.state==="suspended")try{await n.value.resume()}catch{}if(!(i.value&&a.value))try{const y=n.value.createBufferSource();y.buffer=n.value.createBuffer(1,1,n.value.sampleRate),y.connect(s.value),y.start(0),i.value=!0,a.value=!0,r.value=n.value.currentTime}catch(y){throw y}},f=y=>{const _=atob(y);return Uint8Array.from(_,A=>A.charCodeAt(0)).buffer},h=async(y,_,C="mp3")=>{try{await u(),e.value=!0,t.value=_;const A=f(y),E=await n.value.decodeAudioData(A),$=n.value.createBufferSource();$.buffer=E,$.connect(s.value);const T=n.value.currentTime,I=Math.max(T+.01,r.value);$.start(I),r.value=I+E.duration,o.value.push($),$.onended=()=>{const R=o.value.indexOf($);R>-1&&o.value.splice(R,1),o.value.length===0&&(e.value=!1,t.value=null,r.value=n.value.currentTime)}}catch{n.value&&(r.value=n.value.currentTime)}},p=()=>{o.value.forEach(y=>{try{y.stop(),y.disconnect()}catch{}}),o.value=[],n.value&&(r.value=n.value.currentTime),e.value=!1,t.value=null},m=()=>{p()},x=()=>{p(),i.value=!1,a.value=!1,r.value=0};return Kt(()=>{p(),s.value&&(s.value.disconnect(),s.value=null),n.value&&(n.value.close(),n.value=null)}),{isPlaying:e,currentSentenceIndex:t,unlockAudio:d,queueAudioChunk:h,stopAudio:p,clearQueue:m,reset:x}}const kx=st({conversationId:null,messages:[],assistantProcessing:!1,storageConversations:{},messagesContainerRef:null});function Dh(){const{getStorage:e,saveStorage:t}=Bs(),{conversationId:n,messages:s,assistantProcessing:r,storageConversations:o,messagesContainerRef:i}=Ct(kx),a=pe(()=>{var E;return(E=me.state.bot)==null?void 0:E.handle}),l=wx(),u=async()=>{try{const{data:E}=await ze.cart.getList();E.success&&(D.cart=E.data,ECG.sync.emit("cart",{source:"easy-ai-chat",data:E.data}))}catch(E){console.log("error: ",E)}},d=()=>{s.value.find($=>$.content_type==="attachment")&&u()};(()=>{o.value=e(Dn)??{},n.value=o.value[a.value]??null})();const h=()=>{var $,T,I;s.value=[];const E=((I=(T=($=D.bot)==null?void 0:$.config)==null?void 0:T.initialMessage)==null?void 0:I.messages)??[];Object.values(E).forEach(R=>{s.value.push({content:R.content,content_type:R.displayType,sender_type:"assistant",is_welcome_message:!0})}),s.value=Ws(s.value)},p=()=>{const E=e(Dn);delete E[a.value],t(Dn,E)};async function m(){i.value&&(await gt(),await Ll(100),i.value.scrollTo({top:i.value.scrollHeight}))}function x(){var $,T,I;const E=((I=(T=($=D.bot)==null?void 0:$.config)==null?void 0:T.initialMessage)==null?void 0:I.messages)??[];if(E.length>0)for(let R=0;R<E.length;R++)s.value[R].is_welcome_message=!0;s.value=Ws(s.value)}return{handle:a,messages:s,conversationId:n,assistantProcessing:r,storageConversations:o,messagesContainerRef:i,send:async({message:E,files:$,onSuccess:T,mode:I,onError:R,onFinish:q}={})=>{var ee,ce;if(!E||r.value)return;r.value=!0;const G=($==null?void 0:$.map(W=>W.file_id))??[];G.length>0?s.value.push({content:$,content_type:"attachment",sender_type:"user"},{content:E,content_type:"text",sender_type:"user",audio_url:I==="voice"?!0:void 0}):s.value.push({content:E,content_type:"text",sender_type:"user",audio_url:I==="voice"?!0:void 0});let K={handle:a.value,query:E,stream:!1,conversation_id:n.value,attachments:G??[]};I&&(K.mode=I),n.value||Dt.conversationStart({handle:a.value});const H=((ee=s.value.filter(W=>W.sender_type==="user"))==null?void 0:ee.length)||1;Dt.messageSend({mode:I==="voice"?"voice":"text",content:E,conversation_id:n.value,message_user_order:H}),m();try{const W=(ce=D.cart)==null?void 0:ce.token,Q=I==="voice"?{onAudioChunk:(ne,ke,qe,Ce)=>{l.queueAudioChunk(ne,ke,qe,Ce)},onStatus:ne=>{console.log("Voice streaming status:",ne)},onComplete:ne=>{console.log("Voice streaming completed:",ne)}}:{},{data:J}=await ze.chat.sendMessage(K,W,Q);J&&J.conversation_id&&(s.value=Ws(J.messages||[]),a.value==="rangdongstorevn-zll"&&d(),n.value=J.conversation_id,o.value[a.value]=J.conversation_id,t(Dn,o.value),Er(T)&&T(J))}catch(W){Er(R)&&R(W)}finally{r.value=!1,Er(q)&&q(),x()}m()},fetchMessages:async({onSuccess:E,onError:$,onFinish:T}={})=>{var R;if(s.value.length>0)return;const I=(R=D==null?void 0:D.cart)==null?void 0:R.token;if(n.value){r.value=!0;try{const{data:q}=await ze.chat.getConversations({handle:a.value,conversationId:n.value,token:I});q&&(s.value=Ws(q.data),Er(E)&&E(q))}catch(q){h(),p(),Er($)&&$(q)}finally{r.value=!1,Er(T)&&T()}}else h()},initializeMessages:h,refreshConversation:async()=>{r.value||(l.reset(),s.value=[],n.value=null,delete o.value[a.value],localStorage.setItem(Dn,JSON.stringify(o.value)),h(),Dt.conversationReset())},clickQuickPrompt:E=>{Dt.quickPromptClick({handle:a.value,quick_prompt:E}),me.state.chatState.shouldOpenChatScreen=!0},scrollToBottom:m,voiceAudio:l}}class rc{constructor(){this.notificationCreatedEvent=".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated"}listenForWhisper(t,n){return this.listen(".client-"+t,n)}notification(t){return this.listen(this.notificationCreatedEvent,t)}stopListeningForNotification(t){return this.stopListening(this.notificationCreatedEvent,t)}stopListeningForWhisper(t,n){return this.stopListening(".client-"+t,n)}}class Nh{constructor(t){this.namespace=t}format(t){return[".","\\"].includes(t.charAt(0))?t.substring(1):(this.namespace&&(t=this.namespace+"."+t),t.replace(/\./g,"\\"))}setNamespace(t){this.namespace=t}}function Sx(e){try{new e}catch(t){if(t instanceof Error&&t.message.includes("is not a constructor"))return!1}return!0}class oc extends rc{constructor(t,n,s){super(),this.name=n,this.pusher=t,this.options=s,this.eventFormatter=new Nh(this.options.namespace),this.subscribe()}subscribe(){this.subscription=this.pusher.subscribe(this.name)}unsubscribe(){this.pusher.unsubscribe(this.name)}listen(t,n){return this.on(this.eventFormatter.format(t),n),this}listenToAll(t){return this.subscription.bind_global((n,s)=>{if(n.startsWith("pusher:"))return;let r=String(this.options.namespace??"").replace(/\./g,"\\"),o=n.startsWith(r)?n.substring(r.length+1):"."+n;t(o,s)}),this}stopListening(t,n){return n?this.subscription.unbind(this.eventFormatter.format(t),n):this.subscription.unbind(this.eventFormatter.format(t)),this}stopListeningToAll(t){return t?this.subscription.unbind_global(t):this.subscription.unbind_global(),this}subscribed(t){return this.on("pusher:subscription_succeeded",()=>{t()}),this}error(t){return this.on("pusher:subscription_error",n=>{t(n)}),this}on(t,n){return this.subscription.bind(t,n),this}}class jh extends oc{whisper(t,n){return this.pusher.channels.channels[this.name].trigger(`client-${t}`,n),this}}class Cx extends oc{whisper(t,n){return this.pusher.channels.channels[this.name].trigger(`client-${t}`,n),this}}class $x extends jh{here(t){return this.on("pusher:subscription_succeeded",n=>{t(Object.keys(n.members).map(s=>n.members[s]))}),this}joining(t){return this.on("pusher:member_added",n=>{t(n.info)}),this}whisper(t,n){return this.pusher.channels.channels[this.name].trigger(`client-${t}`,n),this}leaving(t){return this.on("pusher:member_removed",n=>{t(n.info)}),this}}class Fh extends rc{constructor(t,n,s){super(),this.events={},this.listeners={},this.name=n,this.socket=t,this.options=s,this.eventFormatter=new Nh(this.options.namespace),this.subscribe()}subscribe(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}unsubscribe(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}listen(t,n){return this.on(this.eventFormatter.format(t),n),this}stopListening(t,n){return this.unbindEvent(this.eventFormatter.format(t),n),this}subscribed(t){return this.on("connect",n=>{t(n)}),this}error(t){return this}on(t,n){return this.listeners[t]=this.listeners[t]||[],this.events[t]||(this.events[t]=(s,r)=>{this.name===s&&this.listeners[t]&&this.listeners[t].forEach(o=>o(r))},this.socket.on(t,this.events[t])),this.listeners[t].push(n),this}unbind(){Object.keys(this.events).forEach(t=>{this.unbindEvent(t)})}unbindEvent(t,n){this.listeners[t]=this.listeners[t]||[],n&&(this.listeners[t]=this.listeners[t].filter(s=>s!==n)),(!n||this.listeners[t].length===0)&&(this.events[t]&&(this.socket.removeListener(t,this.events[t]),delete this.events[t]),delete this.listeners[t])}}class zh extends Fh{whisper(t,n){return this.socket.emit("client event",{channel:this.name,event:`client-${t}`,data:n}),this}}class Tx extends zh{here(t){return this.on("presence:subscribed",n=>{t(n.map(s=>s.user_info))}),this}joining(t){return this.on("presence:joining",n=>t(n.user_info)),this}whisper(t,n){return this.socket.emit("client event",{channel:this.name,event:`client-${t}`,data:n}),this}leaving(t){return this.on("presence:leaving",n=>t(n.user_info)),this}}class sa extends rc{subscribe(){}unsubscribe(){}listen(t,n){return this}listenToAll(t){return this}stopListening(t,n){return this}subscribed(t){return this}error(t){return this}on(t,n){return this}}class qh extends sa{whisper(t,n){return this}}class Ax extends sa{whisper(t,n){return this}}class Ex extends qh{here(t){return this}joining(t){return this}whisper(t,n){return this}leaving(t){return this}}const Bh=class Xm{constructor(t){this.setOptions(t),this.connect()}setOptions(t){this.options={...Xm._defaultOptions,...t,broadcaster:t.broadcaster};let n=this.csrfToken();n&&(this.options.auth.headers["X-CSRF-TOKEN"]=n,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=n),n=this.options.bearerToken,n&&(this.options.auth.headers.Authorization="Bearer "+n,this.options.userAuthentication.headers.Authorization="Bearer "+n)}csrfToken(){var t,n;return typeof window<"u"&&(t=window.Laravel)!=null&&t.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"?((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))??null:null}};Bh._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"};let ic=Bh;class ra extends ic{constructor(){super(...arguments),this.channels={}}connect(){if(typeof this.options.client<"u")this.pusher=this.options.client;else if(this.options.Pusher)this.pusher=new this.options.Pusher(this.options.key,this.options);else if(typeof window<"u"&&typeof window.Pusher<"u")this.pusher=new window.Pusher(this.options.key,this.options);else throw new Error("Pusher client not found. Should be globally available or passed via options.client")}signin(){this.pusher.signin()}listen(t,n,s){return this.channel(t).listen(n,s)}channel(t){return this.channels[t]||(this.channels[t]=new oc(this.pusher,t,this.options)),this.channels[t]}privateChannel(t){return this.channels["private-"+t]||(this.channels["private-"+t]=new jh(this.pusher,"private-"+t,this.options)),this.channels["private-"+t]}encryptedPrivateChannel(t){return this.channels["private-encrypted-"+t]||(this.channels["private-encrypted-"+t]=new Cx(this.pusher,"private-encrypted-"+t,this.options)),this.channels["private-encrypted-"+t]}presenceChannel(t){return this.channels["presence-"+t]||(this.channels["presence-"+t]=new $x(this.pusher,"presence-"+t,this.options)),this.channels["presence-"+t]}leave(t){[t,"private-"+t,"private-encrypted-"+t,"presence-"+t].forEach(n=>{this.leaveChannel(n)})}leaveChannel(t){this.channels[t]&&(this.channels[t].unsubscribe(),delete this.channels[t])}socketId(){return this.pusher.connection.socket_id}disconnect(){this.pusher.disconnect()}}class Ix extends ic{constructor(){super(...arguments),this.channels={}}connect(){let t=this.getSocketIO();this.socket=t(this.options.host??void 0,this.options),this.socket.io.on("reconnect",()=>{Object.values(this.channels).forEach(n=>{n.subscribe()})})}getSocketIO(){if(typeof this.options.client<"u")return this.options.client;if(typeof window<"u"&&typeof window.io<"u")return window.io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}listen(t,n,s){return this.channel(t).listen(n,s)}channel(t){return this.channels[t]||(this.channels[t]=new Fh(this.socket,t,this.options)),this.channels[t]}privateChannel(t){return this.channels["private-"+t]||(this.channels["private-"+t]=new zh(this.socket,"private-"+t,this.options)),this.channels["private-"+t]}presenceChannel(t){return this.channels["presence-"+t]||(this.channels["presence-"+t]=new Tx(this.socket,"presence-"+t,this.options)),this.channels["presence-"+t]}leave(t){[t,"private-"+t,"presence-"+t].forEach(n=>{this.leaveChannel(n)})}leaveChannel(t){this.channels[t]&&(this.channels[t].unsubscribe(),delete this.channels[t])}socketId(){return this.socket.id}disconnect(){this.socket.disconnect()}}class Uh extends ic{constructor(){super(...arguments),this.channels={}}connect(){}listen(t,n,s){return new sa}channel(t){return new sa}privateChannel(t){return new qh}encryptedPrivateChannel(t){return new Ax}presenceChannel(t){return new Ex}leave(t){}leaveChannel(t){}socketId(){return"fake-socket-id"}disconnect(){}}class Px{constructor(t){this.options=t,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}channel(t){return this.connector.channel(t)}connect(){if(this.options.broadcaster==="reverb")this.connector=new ra({...this.options,cluster:""});else if(this.options.broadcaster==="pusher")this.connector=new ra(this.options);else if(this.options.broadcaster==="ably")this.connector=new ra({...this.options,cluster:"",broadcaster:"pusher"});else if(this.options.broadcaster==="socket.io")this.connector=new Ix(this.options);else if(this.options.broadcaster==="null")this.connector=new Uh(this.options);else if(typeof this.options.broadcaster=="function"&&Sx(this.options.broadcaster))this.connector=new this.options.broadcaster(this.options);else throw new Error(`Broadcaster ${typeof this.options.broadcaster} ${String(this.options.broadcaster)} is not supported.`)}disconnect(){this.connector.disconnect()}join(t){return this.connector.presenceChannel(t)}leave(t){this.connector.leave(t)}leaveChannel(t){this.connector.leaveChannel(t)}leaveAllChannels(){for(const t in this.connector.channels)this.leaveChannel(t)}listen(t,n,s){return this.connector.listen(t,n,s)}private(t){return this.connector.privateChannel(t)}encryptedPrivate(t){if(this.connectorSupportsEncryptedPrivateChannels(this.connector))return this.connector.encryptedPrivateChannel(t);throw new Error(`Broadcaster ${typeof this.options.broadcaster} ${String(this.options.broadcaster)} does not support encrypted private channels.`)}connectorSupportsEncryptedPrivateChannels(t){return t instanceof ra||t instanceof Uh}socketId(){return this.connector.socketId()}registerInterceptors(){typeof Vue<"u"&&Vue!=null&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios=="function"&&this.registerAxiosRequestInterceptor(),typeof jQuery=="function"&&this.registerjQueryAjaxSetup(),typeof Turbo=="object"&&this.registerTurboRequestInterceptor()}registerVueRequestInterceptor(){Vue.http.interceptors.push((t,n)=>{this.socketId()&&t.headers.set("X-Socket-ID",this.socketId()),n()})}registerAxiosRequestInterceptor(){axios.interceptors.request.use(t=>(this.socketId()&&(t.headers["X-Socket-Id"]=this.socketId()),t))}registerjQueryAjaxSetup(){typeof jQuery.ajax<"u"&&jQuery.ajaxPrefilter((t,n,s)=>{this.socketId()&&s.setRequestHeader("X-Socket-Id",this.socketId())})}registerTurboRequestInterceptor(){document.addEventListener("turbo:before-fetch-request",t=>{t.detail.fetchOptions.headers["X-Socket-Id"]=this.socketId()})}}var Vh={exports:{}};/*!
 * Pusher JavaScript Library v8.4.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(e,t){(function(s,r){e.exports=r()})(window,function(){return function(n){var s={};function r(o){if(s[o])return s[o].exports;var i=s[o]={i:o,l:!1,exports:{}};return n[o].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=n,r.c=s,r.d=function(o,i,a){r.o(o,i)||Object.defineProperty(o,i,{enumerable:!0,get:a})},r.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},r.t=function(o,i){if(i&1&&(o=r(o)),i&8||i&4&&typeof o=="object"&&o&&o.__esModule)return o;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:o}),i&2&&typeof o!="string")for(var l in o)r.d(a,l,(function(u){return o[u]}).bind(null,l));return a},r.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(i,"a",i),i},r.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)},r.p="",r(r.s=2)}([function(n,s,r){var o=this&&this.__extends||function(){var x=function(y,_){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,A){C.__proto__=A}||function(C,A){for(var E in A)A.hasOwnProperty(E)&&(C[E]=A[E])},x(y,_)};return function(y,_){x(y,_);function C(){this.constructor=y}y.prototype=_===null?Object.create(_):(C.prototype=_.prototype,new C)}}();Object.defineProperty(s,"__esModule",{value:!0});var i=256,a=function(){function x(y){y===void 0&&(y="="),this._paddingCharacter=y}return x.prototype.encodedLength=function(y){return this._paddingCharacter?(y+2)/3*4|0:(y*8+5)/6|0},x.prototype.encode=function(y){for(var _="",C=0;C<y.length-2;C+=3){var A=y[C]<<16|y[C+1]<<8|y[C+2];_+=this._encodeByte(A>>>3*6&63),_+=this._encodeByte(A>>>2*6&63),_+=this._encodeByte(A>>>1*6&63),_+=this._encodeByte(A>>>0*6&63)}var E=y.length-C;if(E>0){var A=y[C]<<16|(E===2?y[C+1]<<8:0);_+=this._encodeByte(A>>>3*6&63),_+=this._encodeByte(A>>>2*6&63),E===2?_+=this._encodeByte(A>>>1*6&63):_+=this._paddingCharacter||"",_+=this._paddingCharacter||""}return _},x.prototype.maxDecodedLength=function(y){return this._paddingCharacter?y/4*3|0:(y*6+7)/8|0},x.prototype.decodedLength=function(y){return this.maxDecodedLength(y.length-this._getPaddingLength(y))},x.prototype.decode=function(y){if(y.length===0)return new Uint8Array(0);for(var _=this._getPaddingLength(y),C=y.length-_,A=new Uint8Array(this.maxDecodedLength(C)),E=0,$=0,T=0,I=0,R=0,q=0,G=0;$<C-4;$+=4)I=this._decodeChar(y.charCodeAt($+0)),R=this._decodeChar(y.charCodeAt($+1)),q=this._decodeChar(y.charCodeAt($+2)),G=this._decodeChar(y.charCodeAt($+3)),A[E++]=I<<2|R>>>4,A[E++]=R<<4|q>>>2,A[E++]=q<<6|G,T|=I&i,T|=R&i,T|=q&i,T|=G&i;if($<C-1&&(I=this._decodeChar(y.charCodeAt($)),R=this._decodeChar(y.charCodeAt($+1)),A[E++]=I<<2|R>>>4,T|=I&i,T|=R&i),$<C-2&&(q=this._decodeChar(y.charCodeAt($+2)),A[E++]=R<<4|q>>>2,T|=q&i),$<C-3&&(G=this._decodeChar(y.charCodeAt($+3)),A[E++]=q<<6|G,T|=G&i),T!==0)throw new Error("Base64Coder: incorrect characters for decoding");return A},x.prototype._encodeByte=function(y){var _=y;return _+=65,_+=25-y>>>8&6,_+=51-y>>>8&-75,_+=61-y>>>8&-15,_+=62-y>>>8&3,String.fromCharCode(_)},x.prototype._decodeChar=function(y){var _=i;return _+=(42-y&y-44)>>>8&-i+y-43+62,_+=(46-y&y-48)>>>8&-i+y-47+63,_+=(47-y&y-58)>>>8&-i+y-48+52,_+=(64-y&y-91)>>>8&-i+y-65+0,_+=(96-y&y-123)>>>8&-i+y-97+26,_},x.prototype._getPaddingLength=function(y){var _=0;if(this._paddingCharacter){for(var C=y.length-1;C>=0&&y[C]===this._paddingCharacter;C--)_++;if(y.length<4||_>2)throw new Error("Base64Coder: incorrect padding")}return _},x}();s.Coder=a;var l=new a;function u(x){return l.encode(x)}s.encode=u;function d(x){return l.decode(x)}s.decode=d;var f=function(x){o(y,x);function y(){return x!==null&&x.apply(this,arguments)||this}return y.prototype._encodeByte=function(_){var C=_;return C+=65,C+=25-_>>>8&6,C+=51-_>>>8&-75,C+=61-_>>>8&-13,C+=62-_>>>8&49,String.fromCharCode(C)},y.prototype._decodeChar=function(_){var C=i;return C+=(44-_&_-46)>>>8&-i+_-45+62,C+=(94-_&_-96)>>>8&-i+_-95+63,C+=(47-_&_-58)>>>8&-i+_-48+52,C+=(64-_&_-91)>>>8&-i+_-65+0,C+=(96-_&_-123)>>>8&-i+_-97+26,C},y}(a);s.URLSafeCoder=f;var h=new f;function p(x){return h.encode(x)}s.encodeURLSafe=p;function m(x){return h.decode(x)}s.decodeURLSafe=m,s.encodedLength=function(x){return l.encodedLength(x)},s.maxDecodedLength=function(x){return l.maxDecodedLength(x)},s.decodedLength=function(x){return l.decodedLength(x)}},function(n,s,r){Object.defineProperty(s,"__esModule",{value:!0});var o="utf8: invalid string",i="utf8: invalid source encoding";function a(d){for(var f=new Uint8Array(l(d)),h=0,p=0;p<d.length;p++){var m=d.charCodeAt(p);m<128?f[h++]=m:m<2048?(f[h++]=192|m>>6,f[h++]=128|m&63):m<55296?(f[h++]=224|m>>12,f[h++]=128|m>>6&63,f[h++]=128|m&63):(p++,m=(m&1023)<<10,m|=d.charCodeAt(p)&1023,m+=65536,f[h++]=240|m>>18,f[h++]=128|m>>12&63,f[h++]=128|m>>6&63,f[h++]=128|m&63)}return f}s.encode=a;function l(d){for(var f=0,h=0;h<d.length;h++){var p=d.charCodeAt(h);if(p<128)f+=1;else if(p<2048)f+=2;else if(p<55296)f+=3;else if(p<=57343){if(h>=d.length-1)throw new Error(o);h++,f+=4}else throw new Error(o)}return f}s.encodedLength=l;function u(d){for(var f=[],h=0;h<d.length;h++){var p=d[h];if(p&128){var m=void 0;if(p<224){if(h>=d.length)throw new Error(i);var x=d[++h];if((x&192)!==128)throw new Error(i);p=(p&31)<<6|x&63,m=128}else if(p<240){if(h>=d.length-1)throw new Error(i);var x=d[++h],y=d[++h];if((x&192)!==128||(y&192)!==128)throw new Error(i);p=(p&15)<<12|(x&63)<<6|y&63,m=2048}else if(p<248){if(h>=d.length-2)throw new Error(i);var x=d[++h],y=d[++h],_=d[++h];if((x&192)!==128||(y&192)!==128||(_&192)!==128)throw new Error(i);p=(p&15)<<18|(x&63)<<12|(y&63)<<6|_&63,m=65536}else throw new Error(i);if(p<m||p>=55296&&p<=57343)throw new Error(i);if(p>=65536){if(p>1114111)throw new Error(i);p-=65536,f.push(String.fromCharCode(55296|p>>10)),p=56320|p&1023}}f.push(String.fromCharCode(p))}return f.join("")}s.decode=u},function(n,s,r){n.exports=r(3).default},function(n,s,r){r.r(s);class o{constructor(g,w){this.lastId=0,this.prefix=g,this.name=w}create(g){this.lastId++;var w=this.lastId,M=this.prefix+w,j=this.name+"["+w+"]",fe=!1,we=function(){fe||(g.apply(null,arguments),fe=!0)};return this[w]=we,{number:w,id:M,name:j,callback:we}}remove(g){delete this[g.number]}}var i=new o("_pusher_script_","Pusher.ScriptReceivers"),a={VERSION:"8.4.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},l=a;class u{constructor(g){this.options=g,this.receivers=g.receivers||i,this.loading={}}load(g,w,M){var j=this;if(j.loading[g]&&j.loading[g].length>0)j.loading[g].push(M);else{j.loading[g]=[M];var fe=Ge.createScriptRequest(j.getPath(g,w)),we=j.receivers.create(function(Pe){if(j.receivers.remove(we),j.loading[g]){var Ve=j.loading[g];delete j.loading[g];for(var et=function(It){It||fe.cleanup()},rt=0;rt<Ve.length;rt++)Ve[rt](Pe,et)}});fe.send(we)}}getRoot(g){var w,M=Ge.getDocument().location.protocol;return g&&g.useTLS||M==="https:"?w=this.options.cdn_https:w=this.options.cdn_http,w.replace(/\/*$/,"")+"/"+this.options.version}getPath(g,w){return this.getRoot(w)+"/"+g+this.options.suffix+".js"}}var d=new o("_pusher_dependencies","Pusher.DependenciesReceivers"),f=new u({cdn_http:l.cdn_http,cdn_https:l.cdn_https,version:l.VERSION,suffix:l.dependency_suffix,receivers:d});const h={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var m={buildLogSuffix:function(S){const g="See:",w=h.urls[S];if(!w)return"";let M;return w.fullUrl?M=w.fullUrl:w.path&&(M=h.baseUrl+w.path),M?`${g} ${M}`:""}},x;(function(S){S.UserAuthentication="user-authentication",S.ChannelAuthorization="channel-authorization"})(x||(x={}));class y extends Error{constructor(g){super(g),Object.setPrototypeOf(this,new.target.prototype)}}class _ extends Error{constructor(g){super(g),Object.setPrototypeOf(this,new.target.prototype)}}class C extends Error{constructor(g){super(g),Object.setPrototypeOf(this,new.target.prototype)}}class A extends Error{constructor(g){super(g),Object.setPrototypeOf(this,new.target.prototype)}}class E extends Error{constructor(g){super(g),Object.setPrototypeOf(this,new.target.prototype)}}class $ extends Error{constructor(g){super(g),Object.setPrototypeOf(this,new.target.prototype)}}class T extends Error{constructor(g){super(g),Object.setPrototypeOf(this,new.target.prototype)}}class I extends Error{constructor(g){super(g),Object.setPrototypeOf(this,new.target.prototype)}}class R extends Error{constructor(g,w){super(w),this.status=g,Object.setPrototypeOf(this,new.target.prototype)}}var G=function(S,g,w,M,j){const fe=Ge.createXHR();fe.open("POST",w.endpoint,!0),fe.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var we in w.headers)fe.setRequestHeader(we,w.headers[we]);if(w.headersProvider!=null){let Pe=w.headersProvider();for(var we in Pe)fe.setRequestHeader(we,Pe[we])}return fe.onreadystatechange=function(){if(fe.readyState===4)if(fe.status===200){let Pe,Ve=!1;try{Pe=JSON.parse(fe.responseText),Ve=!0}catch{j(new R(200,`JSON returned from ${M.toString()} endpoint was invalid, yet status code was 200. Data was: ${fe.responseText}`),null)}Ve&&j(null,Pe)}else{let Pe="";switch(M){case x.UserAuthentication:Pe=m.buildLogSuffix("authenticationEndpoint");break;case x.ChannelAuthorization:Pe=`Clients must be authorized to join private or presence channels. ${m.buildLogSuffix("authorizationEndpoint")}`;break}j(new R(fe.status,`Unable to retrieve auth string from ${M.toString()} endpoint - received status: ${fe.status} from ${w.endpoint}. ${Pe}`),null)}},fe.send(g),fe};function K(S){return J(W(S))}var H=String.fromCharCode,ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ce=function(S){var g=S.charCodeAt(0);return g<128?S:g<2048?H(192|g>>>6)+H(128|g&63):H(224|g>>>12&15)+H(128|g>>>6&63)+H(128|g&63)},W=function(S){return S.replace(/[^\x00-\x7F]/g,ce)},Q=function(S){var g=[0,2,1][S.length%3],w=S.charCodeAt(0)<<16|(S.length>1?S.charCodeAt(1):0)<<8|(S.length>2?S.charCodeAt(2):0),M=[ee.charAt(w>>>18),ee.charAt(w>>>12&63),g>=2?"=":ee.charAt(w>>>6&63),g>=1?"=":ee.charAt(w&63)];return M.join("")},J=window.btoa||function(S){return S.replace(/[\s\S]{1,3}/g,Q)};class ne{constructor(g,w,M,j){this.clear=w,this.timer=g(()=>{this.timer&&(this.timer=j(this.timer))},M)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var ke=ne;function qe(S){window.clearTimeout(S)}function Ce(S){window.clearInterval(S)}class Re extends ke{constructor(g,w){super(setTimeout,qe,g,function(M){return w(),null})}}class Be extends ke{constructor(g,w){super(setInterval,Ce,g,function(M){return w(),M})}}var Ne={now(){return Date.now?Date.now():new Date().valueOf()},defer(S){return new Re(0,S)},method(S,...g){var w=Array.prototype.slice.call(arguments,1);return function(M){return M[S].apply(M,w.concat(arguments))}}},X=Ne;function de(S,...g){for(var w=0;w<g.length;w++){var M=g[w];for(var j in M)M[j]&&M[j].constructor&&M[j].constructor===Object?S[j]=de(S[j]||{},M[j]):S[j]=M[j]}return S}function Se(){for(var S=["Pusher"],g=0;g<arguments.length;g++)typeof arguments[g]=="string"?S.push(arguments[g]):S.push(oe(arguments[g]));return S.join(" : ")}function _e(S,g){var w=Array.prototype.indexOf;if(S===null)return-1;if(w&&S.indexOf===w)return S.indexOf(g);for(var M=0,j=S.length;M<j;M++)if(S[M]===g)return M;return-1}function $e(S,g){for(var w in S)Object.prototype.hasOwnProperty.call(S,w)&&g(S[w],w,S)}function Ae(S){var g=[];return $e(S,function(w,M){g.push(M)}),g}function Te(S){var g=[];return $e(S,function(w){g.push(w)}),g}function O(S,g,w){for(var M=0;M<S.length;M++)g.call(w||window,S[M],M,S)}function F(S,g){for(var w=[],M=0;M<S.length;M++)w.push(g(S[M],M,S,w));return w}function z(S,g){var w={};return $e(S,function(M,j){w[j]=g(M)}),w}function P(S,g){g=g||function(j){return!!j};for(var w=[],M=0;M<S.length;M++)g(S[M],M,S,w)&&w.push(S[M]);return w}function N(S,g){var w={};return $e(S,function(M,j){(g&&g(M,j,S,w)||M)&&(w[j]=M)}),w}function Z(S){var g=[];return $e(S,function(w,M){g.push([M,w])}),g}function le(S,g){for(var w=0;w<S.length;w++)if(g(S[w],w,S))return!0;return!1}function ie(S,g){for(var w=0;w<S.length;w++)if(!g(S[w],w,S))return!1;return!0}function he(S){return z(S,function(g){return typeof g=="object"&&(g=oe(g)),encodeURIComponent(K(g.toString()))})}function ae(S){var g=N(S,function(M){return M!==void 0}),w=F(Z(he(g)),X.method("join","=")).join("&");return w}function te(S){var g=[],w=[];return function M(j,fe){var we,Pe,Ve;switch(typeof j){case"object":if(!j)return null;for(we=0;we<g.length;we+=1)if(g[we]===j)return{$ref:w[we]};if(g.push(j),w.push(fe),Object.prototype.toString.apply(j)==="[object Array]")for(Ve=[],we=0;we<j.length;we+=1)Ve[we]=M(j[we],fe+"["+we+"]");else{Ve={};for(Pe in j)Object.prototype.hasOwnProperty.call(j,Pe)&&(Ve[Pe]=M(j[Pe],fe+"["+JSON.stringify(Pe)+"]"))}return Ve;case"number":case"string":case"boolean":return j}}(S,"$")}function oe(S){try{return JSON.stringify(S)}catch{return JSON.stringify(te(S))}}class ye{constructor(){this.globalLog=g=>{window.console&&window.console.log&&window.console.log(g)}}debug(...g){this.log(this.globalLog,g)}warn(...g){this.log(this.globalLogWarn,g)}error(...g){this.log(this.globalLogError,g)}globalLogWarn(g){window.console&&window.console.warn?window.console.warn(g):this.globalLog(g)}globalLogError(g){window.console&&window.console.error?window.console.error(g):this.globalLogWarn(g)}log(g,...w){var M=Se.apply(this,arguments);Qc.log?Qc.log(M):Qc.logToConsole&&g.bind(this)(M)}}var ge=new ye,De=function(S,g,w,M,j){(w.headers!==void 0||w.headersProvider!=null)&&ge.warn(`To send headers with the ${M.toString()} request, you must use AJAX, rather than JSONP.`);var fe=S.nextAuthCallbackID.toString();S.nextAuthCallbackID++;var we=S.getDocument(),Pe=we.createElement("script");S.auth_callbacks[fe]=function(rt){j(null,rt)};var Ve="Pusher.auth_callbacks['"+fe+"']";Pe.src=w.endpoint+"?callback="+encodeURIComponent(Ve)+"&"+g;var et=we.getElementsByTagName("head")[0]||we.documentElement;et.insertBefore(Pe,et.firstChild)},ue=De;class We{constructor(g){this.src=g}send(g){var w=this,M="Error loading "+w.src;w.script=document.createElement("script"),w.script.id=g.id,w.script.src=w.src,w.script.type="text/javascript",w.script.charset="UTF-8",w.script.addEventListener?(w.script.onerror=function(){g.callback(M)},w.script.onload=function(){g.callback(null)}):w.script.onreadystatechange=function(){(w.script.readyState==="loaded"||w.script.readyState==="complete")&&g.callback(null)},w.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(w.errorScript=document.createElement("script"),w.errorScript.id=g.id+"_error",w.errorScript.text=g.name+"('"+M+"');",w.script.async=w.errorScript.async=!1):w.script.async=!0;var j=document.getElementsByTagName("head")[0];j.insertBefore(w.script,j.firstChild),w.errorScript&&j.insertBefore(w.errorScript,w.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class ct{constructor(g,w){this.url=g,this.data=w}send(g){if(!this.request){var w=ae(this.data),M=this.url+"/"+g.number+"?"+w;this.request=Ge.createScriptRequest(M),this.request.send(g)}}cleanup(){this.request&&this.request.cleanup()}}var mt=function(S,g){return function(w,M){var j="http"+(g?"s":"")+"://",fe=j+(S.host||S.options.host)+S.options.path,we=Ge.createJSONPRequest(fe,w),Pe=Ge.ScriptReceivers.create(function(Ve,et){i.remove(Pe),we.cleanup(),et&&et.host&&(S.host=et.host),M&&M(Ve,et)});we.send(Pe)}},_t={name:"jsonp",getAgent:mt},Wt=_t;function At(S,g,w){var M=S+(g.useTLS?"s":""),j=g.useTLS?g.hostTLS:g.hostNonTLS;return M+"://"+j+w}function Tn(S,g){var w="/app/"+S,M="?protocol="+l.PROTOCOL+"&client=js&version="+l.VERSION+(g?"&"+g:"");return w+M}var Et={getInitial:function(S,g){var w=(g.httpPath||"")+Tn(S,"flash=false");return At("ws",g,w)}},zt={getInitial:function(S,g){var w=(g.httpPath||"/pusher")+Tn(S);return At("http",g,w)}},ts={getInitial:function(S,g){return At("http",g,g.httpPath||"/pusher")},getPath:function(S,g){return Tn(S)}};class zr{constructor(){this._callbacks={}}get(g){return this._callbacks[ns(g)]}add(g,w,M){var j=ns(g);this._callbacks[j]=this._callbacks[j]||[],this._callbacks[j].push({fn:w,context:M})}remove(g,w,M){if(!g&&!w&&!M){this._callbacks={};return}var j=g?[ns(g)]:Ae(this._callbacks);w||M?this.removeCallback(j,w,M):this.removeAllCallbacks(j)}removeCallback(g,w,M){O(g,function(j){this._callbacks[j]=P(this._callbacks[j]||[],function(fe){return w&&w!==fe.fn||M&&M!==fe.context}),this._callbacks[j].length===0&&delete this._callbacks[j]},this)}removeAllCallbacks(g){O(g,function(w){delete this._callbacks[w]},this)}}function ns(S){return"_"+S}class en{constructor(g){this.callbacks=new zr,this.global_callbacks=[],this.failThrough=g}bind(g,w,M){return this.callbacks.add(g,w,M),this}bind_global(g){return this.global_callbacks.push(g),this}unbind(g,w,M){return this.callbacks.remove(g,w,M),this}unbind_global(g){return g?(this.global_callbacks=P(this.global_callbacks||[],w=>w!==g),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(g,w,M){for(var j=0;j<this.global_callbacks.length;j++)this.global_callbacks[j](g,w);var fe=this.callbacks.get(g),we=[];if(M?we.push(w,M):w&&we.push(w),fe&&fe.length>0)for(var j=0;j<fe.length;j++)fe[j].fn.apply(fe[j].context||window,we);else this.failThrough&&this.failThrough(g,w);return this}}class nr extends en{constructor(g,w,M,j,fe){super(),this.initialize=Ge.transportConnectionInitializer,this.hooks=g,this.name=w,this.priority=M,this.key=j,this.options=fe,this.state="new",this.timeline=fe.timeline,this.activityTimeout=fe.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var g=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(g,this.options)}catch(w){return X.defer(()=>{this.onError(w),this.changeState("closed")}),!1}return this.bindListeners(),ge.debug("Connecting",{transport:this.name,url:g}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(g){return this.state==="open"?(X.defer(()=>{this.socket&&this.socket.send(g)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(g){this.emit("error",{type:"WebSocketError",error:g}),this.timeline.error(this.buildTimelineMessage({error:g.toString()}))}onClose(g){g?this.changeState("closed",{code:g.code,reason:g.reason,wasClean:g.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(g){this.emit("message",g)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=g=>{this.onError(g)},this.socket.onclose=g=>{this.onClose(g)},this.socket.onmessage=g=>{this.onMessage(g)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(g,w){this.state=g,this.timeline.info(this.buildTimelineMessage({state:g,params:w})),this.emit(g,w)}buildTimelineMessage(g){return de({cid:this.id},g)}}class xn{constructor(g){this.hooks=g}isSupported(g){return this.hooks.isSupported(g)}createConnection(g,w,M,j){return new nr(this.hooks,g,w,M,j)}}var tn=new xn({urls:Et,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!Ge.getWebSocketAPI()},isSupported:function(){return!!Ge.getWebSocketAPI()},getSocket:function(S){return Ge.createWebSocket(S)}}),Un={urls:zt,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},sr=de({getSocket:function(S){return Ge.HTTPFactory.createStreamingSocket(S)}},Un),Vn=de({getSocket:function(S){return Ge.HTTPFactory.createPollingSocket(S)}},Un),rr={isSupported:function(){return Ge.isXHRSupported()}},Ea=new xn(de({},sr,rr)),Ia=new xn(de({},Vn,rr)),Im={ws:tn,xhr_streaming:Ea,xhr_polling:Ia},Pa=Im,ij=new xn({file:"sockjs",urls:ts,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(S,g){return new window.SockJS(S,null,{js_path:f.getPath("sockjs",{useTLS:g.useTLS}),ignore_null_origin:g.ignoreNullOrigin})},beforeOpen:function(S,g){S.send(JSON.stringify({path:g}))}}),Pm={isSupported:function(S){var g=Ge.isXDRSupported(S.useTLS);return g}},aj=new xn(de({},sr,Pm)),lj=new xn(de({},Vn,Pm));Pa.xdr_streaming=aj,Pa.xdr_polling=lj,Pa.sockjs=ij;var cj=Pa;class uj extends en{constructor(){super();var g=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){g.emit("online")},!1),window.addEventListener("offline",function(){g.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var dj=new uj;class fj{constructor(g,w,M){this.manager=g,this.transport=w,this.minPingDelay=M.minPingDelay,this.maxPingDelay=M.maxPingDelay,this.pingDelay=void 0}createConnection(g,w,M,j){j=de({},j,{activityTimeout:this.pingDelay});var fe=this.transport.createConnection(g,w,M,j),we=null,Pe=function(){fe.unbind("open",Pe),fe.bind("closed",Ve),we=X.now()},Ve=et=>{if(fe.unbind("closed",Ve),et.code===1002||et.code===1003)this.manager.reportDeath();else if(!et.wasClean&&we){var rt=X.now()-we;rt<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(rt/2,this.minPingDelay))}};return fe.bind("open",Pe),fe}isSupported(g){return this.manager.isAlive()&&this.transport.isSupported(g)}}const Om={decodeMessage:function(S){try{var g=JSON.parse(S.data),w=g.data;if(typeof w=="string")try{w=JSON.parse(g.data)}catch{}var M={event:g.event,channel:g.channel,data:w};return g.user_id&&(M.user_id=g.user_id),M}catch(j){throw{type:"MessageParseError",error:j,data:S.data}}},encodeMessage:function(S){return JSON.stringify(S)},processHandshake:function(S){var g=Om.decodeMessage(S);if(g.event==="pusher:connection_established"){if(!g.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:g.data.socket_id,activityTimeout:g.data.activity_timeout*1e3}}else{if(g.event==="pusher:error")return{action:this.getCloseAction(g.data),error:this.getCloseError(g.data)};throw"Invalid handshake"}},getCloseAction:function(S){return S.code<4e3?S.code>=1002&&S.code<=1004?"backoff":null:S.code===4e3?"tls_only":S.code<4100?"refused":S.code<4200?"backoff":S.code<4300?"retry":"refused"},getCloseError:function(S){return S.code!==1e3&&S.code!==1001?{type:"PusherError",data:{code:S.code,message:S.reason||S.message}}:null}};var or=Om;class hj extends en{constructor(g,w){super(),this.id=g,this.transport=w,this.activityTimeout=w.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(g){return this.transport.send(g)}send_event(g,w,M){var j={event:g,data:w};return M&&(j.channel=M),ge.debug("Event sent",j),this.send(or.encodeMessage(j))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var g={message:M=>{var j;try{j=or.decodeMessage(M)}catch(fe){this.emit("error",{type:"MessageParseError",error:fe,data:M.data})}if(j!==void 0){switch(ge.debug("Event recd",j),j.event){case"pusher:error":this.emit("error",{type:"PusherError",data:j.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",j)}},activity:()=>{this.emit("activity")},error:M=>{this.emit("error",M)},closed:M=>{w(),M&&M.code&&this.handleCloseEvent(M),this.transport=null,this.emit("closed")}},w=()=>{$e(g,(M,j)=>{this.transport.unbind(j,M)})};$e(g,(M,j)=>{this.transport.bind(j,M)})}handleCloseEvent(g){var w=or.getCloseAction(g),M=or.getCloseError(g);M&&this.emit("error",M),w&&this.emit(w,{action:w,error:M})}}class pj{constructor(g,w){this.transport=g,this.callback=w,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=g=>{this.unbindListeners();var w;try{w=or.processHandshake(g)}catch(M){this.finish("error",{error:M}),this.transport.close();return}w.action==="connected"?this.finish("connected",{connection:new hj(w.id,this.transport),activityTimeout:w.activityTimeout}):(this.finish(w.action,{error:w.error}),this.transport.close())},this.onClosed=g=>{this.unbindListeners();var w=or.getCloseAction(g)||"backoff",M=or.getCloseError(g);this.finish(w,{error:M})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(g,w){this.callback(de({transport:this.transport,action:g},w))}}class mj{constructor(g,w){this.timeline=g,this.options=w||{}}send(g,w){this.timeline.isEmpty()||this.timeline.send(Ge.TimelineTransport.getAgent(this,g),w)}}class Bc extends en{constructor(g,w){super(function(M,j){ge.debug("No callbacks on "+g+" for "+M)}),this.name=g,this.pusher=w,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(g,w){return w(null,{auth:""})}trigger(g,w){if(g.indexOf("client-")!==0)throw new y("Event '"+g+"' does not start with 'client-'");if(!this.subscribed){var M=m.buildLogSuffix("triggeringClientEvents");ge.warn(`Client event triggered before channel 'subscription_succeeded' event . ${M}`)}return this.pusher.send_event(g,w,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(g){var w=g.event,M=g.data;if(w==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(g);else if(w==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(g);else if(w.indexOf("pusher_internal:")!==0){var j={};this.emit(w,M,j)}}handleSubscriptionSucceededEvent(g){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",g.data)}handleSubscriptionCountEvent(g){g.data.subscription_count&&(this.subscriptionCount=g.data.subscription_count),this.emit("pusher:subscription_count",g.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(g,w)=>{g?(this.subscriptionPending=!1,ge.error(g.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:g.message},g instanceof R?{status:g.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:w.auth,channel_data:w.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class Uc extends Bc{authorize(g,w){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:g},w)}}class gj{constructor(){this.reset()}get(g){return Object.prototype.hasOwnProperty.call(this.members,g)?{id:g,info:this.members[g]}:null}each(g){$e(this.members,(w,M)=>{g(this.get(M))})}setMyID(g){this.myID=g}onSubscription(g){this.members=g.presence.hash,this.count=g.presence.count,this.me=this.get(this.myID)}addMember(g){return this.get(g.user_id)===null&&this.count++,this.members[g.user_id]=g.user_info,this.get(g.user_id)}removeMember(g){var w=this.get(g.user_id);return w&&(delete this.members[g.user_id],this.count--),w}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var vj=function(S,g,w,M){function j(fe){return fe instanceof w?fe:new w(function(we){we(fe)})}return new(w||(w=Promise))(function(fe,we){function Pe(rt){try{et(M.next(rt))}catch(It){we(It)}}function Ve(rt){try{et(M.throw(rt))}catch(It){we(It)}}function et(rt){rt.done?fe(rt.value):j(rt.value).then(Pe,Ve)}et((M=M.apply(S,g||[])).next())})};class yj extends Uc{constructor(g,w){super(g,w),this.members=new gj}authorize(g,w){super.authorize(g,(M,j)=>vj(this,void 0,void 0,function*(){if(!M)if(j=j,j.channel_data!=null){var fe=JSON.parse(j.channel_data);this.members.setMyID(fe.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let we=m.buildLogSuffix("authorizationEndpoint");ge.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${we}, or the user should be signed in.`),w("Invalid auth response");return}w(M,j)}))}handleEvent(g){var w=g.event;if(w.indexOf("pusher_internal:")===0)this.handleInternalEvent(g);else{var M=g.data,j={};g.user_id&&(j.user_id=g.user_id),this.emit(w,M,j)}}handleInternalEvent(g){var w=g.event,M=g.data;switch(w){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(g);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(g);break;case"pusher_internal:member_added":var j=this.members.addMember(M);this.emit("pusher:member_added",j);break;case"pusher_internal:member_removed":var fe=this.members.removeMember(M);fe&&this.emit("pusher:member_removed",fe);break}}handleSubscriptionSucceededEvent(g){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(g.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var bj=r(1),Vc=r(0);class xj extends Uc{constructor(g,w,M){super(g,w),this.key=null,this.nacl=M}authorize(g,w){super.authorize(g,(M,j)=>{if(M){w(M,j);return}let fe=j.shared_secret;if(!fe){w(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(Vc.decode)(fe),delete j.shared_secret,w(null,j)})}trigger(g,w){throw new $("Client events are not currently supported for encrypted channels")}handleEvent(g){var w=g.event,M=g.data;if(w.indexOf("pusher_internal:")===0||w.indexOf("pusher:")===0){super.handleEvent(g);return}this.handleEncryptedEvent(w,M)}handleEncryptedEvent(g,w){if(!this.key){ge.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!w.ciphertext||!w.nonce){ge.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+w);return}let M=Object(Vc.decode)(w.ciphertext);if(M.length<this.nacl.secretbox.overheadLength){ge.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${M.length}`);return}let j=Object(Vc.decode)(w.nonce);if(j.length<this.nacl.secretbox.nonceLength){ge.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${j.length}`);return}let fe=this.nacl.secretbox.open(M,j,this.key);if(fe===null){ge.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(we,Pe)=>{if(we){ge.error(`Failed to make a request to the authEndpoint: ${Pe}. Unable to fetch new key, so dropping encrypted event`);return}if(fe=this.nacl.secretbox.open(M,j,this.key),fe===null){ge.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(g,this.getDataToEmit(fe))});return}this.emit(g,this.getDataToEmit(fe))}getDataToEmit(g){let w=Object(bj.decode)(g);try{return JSON.parse(w)}catch{return w}}}class _j extends en{constructor(g,w){super(),this.state="initialized",this.connection=null,this.key=g,this.options=w,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var M=Ge.getNetwork();M.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),M.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(g){return this.connection?this.connection.send(g):!1}send_event(g,w,M){return this.connection?this.connection.send_event(g,w,M):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var g=(w,M)=>{w?this.runner=this.strategy.connect(0,g):M.action==="error"?(this.emit("error",{type:"HandshakeError",error:M.error}),this.timeline.error({handshakeError:M.error})):(this.abortConnecting(),this.handshakeCallbacks[M.action](M))};this.runner=this.strategy.connect(0,g)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var g=this.abandonConnection();g.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(g){this.timeline.info({action:"retry",delay:g}),g>0&&this.emit("connecting_in",Math.round(g/1e3)),this.retryTimer=new Re(g||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new Re(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new Re(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new Re(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(g){return de({},g,{message:w=>{this.resetActivityCheck(),this.emit("message",w)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:w=>{this.emit("error",w)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(g){return de({},g,{connected:w=>{this.activityTimeout=Math.min(this.options.activityTimeout,w.activityTimeout,w.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(w.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let g=w=>M=>{M.error&&this.emit("error",{type:"WebSocketError",error:M.error}),w(M)};return{tls_only:g(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:g(()=>{this.disconnect()}),backoff:g(()=>{this.retryIn(1e3)}),retry:g(()=>{this.retryIn(0)})}}setConnection(g){this.connection=g;for(var w in this.connectionCallbacks)this.connection.bind(w,this.connectionCallbacks[w]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var g in this.connectionCallbacks)this.connection.unbind(g,this.connectionCallbacks[g]);var w=this.connection;return this.connection=null,w}}updateState(g,w){var M=this.state;if(this.state=g,M!==g){var j=g;j==="connected"&&(j+=" with new socket ID "+w.socket_id),ge.debug("State changed",M+" -> "+j),this.timeline.info({state:g,params:w}),this.emit("state_change",{previous:M,current:g}),this.emit(g,w)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class wj{constructor(){this.channels={}}add(g,w){return this.channels[g]||(this.channels[g]=kj(g,w)),this.channels[g]}all(){return Te(this.channels)}find(g){return this.channels[g]}remove(g){var w=this.channels[g];return delete this.channels[g],w}disconnect(){$e(this.channels,function(g){g.disconnect()})}}function kj(S,g){if(S.indexOf("private-encrypted-")===0){if(g.config.nacl)return ss.createEncryptedChannel(S,g,g.config.nacl);let w="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",M=m.buildLogSuffix("encryptedChannelSupport");throw new $(`${w}. ${M}`)}else{if(S.indexOf("private-")===0)return ss.createPrivateChannel(S,g);if(S.indexOf("presence-")===0)return ss.createPresenceChannel(S,g);if(S.indexOf("#")===0)throw new _('Cannot create a channel with name "'+S+'".');return ss.createChannel(S,g)}}var Sj={createChannels(){return new wj},createConnectionManager(S,g){return new _j(S,g)},createChannel(S,g){return new Bc(S,g)},createPrivateChannel(S,g){return new Uc(S,g)},createPresenceChannel(S,g){return new yj(S,g)},createEncryptedChannel(S,g,w){return new xj(S,g,w)},createTimelineSender(S,g){return new mj(S,g)},createHandshake(S,g){return new pj(S,g)},createAssistantToTheTransportManager(S,g,w){return new fj(S,g,w)}},ss=Sj;class Rm{constructor(g){this.options=g||{},this.livesLeft=this.options.lives||1/0}getAssistant(g){return ss.createAssistantToTheTransportManager(this,g,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class ir{constructor(g,w){this.strategies=g,this.loop=!!w.loop,this.failFast=!!w.failFast,this.timeout=w.timeout,this.timeoutLimit=w.timeoutLimit}isSupported(){return le(this.strategies,X.method("isSupported"))}connect(g,w){var M=this.strategies,j=0,fe=this.timeout,we=null,Pe=(Ve,et)=>{et?w(null,et):(j=j+1,this.loop&&(j=j%M.length),j<M.length?(fe&&(fe=fe*2,this.timeoutLimit&&(fe=Math.min(fe,this.timeoutLimit))),we=this.tryStrategy(M[j],g,{timeout:fe,failFast:this.failFast},Pe)):w(!0))};return we=this.tryStrategy(M[j],g,{timeout:fe,failFast:this.failFast},Pe),{abort:function(){we.abort()},forceMinPriority:function(Ve){g=Ve,we&&we.forceMinPriority(Ve)}}}tryStrategy(g,w,M,j){var fe=null,we=null;return M.timeout>0&&(fe=new Re(M.timeout,function(){we.abort(),j(!0)})),we=g.connect(w,function(Pe,Ve){Pe&&fe&&fe.isRunning()&&!M.failFast||(fe&&fe.ensureAborted(),j(Pe,Ve))}),{abort:function(){fe&&fe.ensureAborted(),we.abort()},forceMinPriority:function(Pe){we.forceMinPriority(Pe)}}}}class Hc{constructor(g){this.strategies=g}isSupported(){return le(this.strategies,X.method("isSupported"))}connect(g,w){return Cj(this.strategies,g,function(M,j){return function(fe,we){if(j[M].error=fe,fe){$j(j)&&w(!0);return}O(j,function(Pe){Pe.forceMinPriority(we.transport.priority)}),w(null,we)}})}}function Cj(S,g,w){var M=F(S,function(j,fe,we,Pe){return j.connect(g,w(fe,Pe))});return{abort:function(){O(M,Tj)},forceMinPriority:function(j){O(M,function(fe){fe.forceMinPriority(j)})}}}function $j(S){return ie(S,function(g){return!!g.error})}function Tj(S){!S.error&&!S.aborted&&(S.abort(),S.aborted=!0)}class Aj{constructor(g,w,M){this.strategy=g,this.transports=w,this.ttl=M.ttl||1800*1e3,this.usingTLS=M.useTLS,this.timeline=M.timeline}isSupported(){return this.strategy.isSupported()}connect(g,w){var M=this.usingTLS,j=Ej(M),fe=j&&j.cacheSkipCount?j.cacheSkipCount:0,we=[this.strategy];if(j&&j.timestamp+this.ttl>=X.now()){var Pe=this.transports[j.transport];Pe&&(["ws","wss"].includes(j.transport)||fe>3?(this.timeline.info({cached:!0,transport:j.transport,latency:j.latency}),we.push(new ir([Pe],{timeout:j.latency*2+1e3,failFast:!0}))):fe++)}var Ve=X.now(),et=we.pop().connect(g,function rt(It,Ma){It?(Mm(M),we.length>0?(Ve=X.now(),et=we.pop().connect(g,rt)):w(It)):(Ij(M,Ma.transport.name,X.now()-Ve,fe),w(null,Ma))});return{abort:function(){et.abort()},forceMinPriority:function(rt){g=rt,et&&et.forceMinPriority(rt)}}}}function Wc(S){return"pusherTransport"+(S?"TLS":"NonTLS")}function Ej(S){var g=Ge.getLocalStorage();if(g)try{var w=g[Wc(S)];if(w)return JSON.parse(w)}catch{Mm(S)}return null}function Ij(S,g,w,M){var j=Ge.getLocalStorage();if(j)try{j[Wc(S)]=oe({timestamp:X.now(),transport:g,latency:w,cacheSkipCount:M})}catch{}}function Mm(S){var g=Ge.getLocalStorage();if(g)try{delete g[Wc(S)]}catch{}}class Oa{constructor(g,{delay:w}){this.strategy=g,this.options={delay:w}}isSupported(){return this.strategy.isSupported()}connect(g,w){var M=this.strategy,j,fe=new Re(this.options.delay,function(){j=M.connect(g,w)});return{abort:function(){fe.ensureAborted(),j&&j.abort()},forceMinPriority:function(we){g=we,j&&j.forceMinPriority(we)}}}}class Vo{constructor(g,w,M){this.test=g,this.trueBranch=w,this.falseBranch=M}isSupported(){var g=this.test()?this.trueBranch:this.falseBranch;return g.isSupported()}connect(g,w){var M=this.test()?this.trueBranch:this.falseBranch;return M.connect(g,w)}}class Pj{constructor(g){this.strategy=g}isSupported(){return this.strategy.isSupported()}connect(g,w){var M=this.strategy.connect(g,function(j,fe){fe&&M.abort(),w(j,fe)});return M}}function Ho(S){return function(){return S.isSupported()}}var Oj=function(S,g,w){var M={};function j(Hm,PF,OF,RF,MF){var Wm=w(S,Hm,PF,OF,RF,MF);return M[Hm]=Wm,Wm}var fe=Object.assign({},g,{hostNonTLS:S.wsHost+":"+S.wsPort,hostTLS:S.wsHost+":"+S.wssPort,httpPath:S.wsPath}),we=Object.assign({},fe,{useTLS:!0}),Pe=Object.assign({},g,{hostNonTLS:S.httpHost+":"+S.httpPort,hostTLS:S.httpHost+":"+S.httpsPort,httpPath:S.httpPath}),Ve={loop:!0,timeout:15e3,timeoutLimit:6e4},et=new Rm({minPingDelay:1e4,maxPingDelay:S.activityTimeout}),rt=new Rm({lives:2,minPingDelay:1e4,maxPingDelay:S.activityTimeout}),It=j("ws","ws",3,fe,et),Ma=j("wss","ws",3,we,et),$F=j("sockjs","sockjs",1,Pe),Fm=j("xhr_streaming","xhr_streaming",1,Pe,rt),TF=j("xdr_streaming","xdr_streaming",1,Pe,rt),zm=j("xhr_polling","xhr_polling",1,Pe),AF=j("xdr_polling","xdr_polling",1,Pe),qm=new ir([It],Ve),EF=new ir([Ma],Ve),IF=new ir([$F],Ve),Bm=new ir([new Vo(Ho(Fm),Fm,TF)],Ve),Um=new ir([new Vo(Ho(zm),zm,AF)],Ve),Vm=new ir([new Vo(Ho(Bm),new Hc([Bm,new Oa(Um,{delay:4e3})]),Um)],Ve),Jc=new Vo(Ho(Vm),Vm,IF),Xc;return g.useTLS?Xc=new Hc([qm,new Oa(Jc,{delay:2e3})]):Xc=new Hc([qm,new Oa(EF,{delay:2e3}),new Oa(Jc,{delay:5e3})]),new Aj(new Pj(new Vo(Ho(It),Xc,Jc)),M,{ttl:18e5,timeline:g.timeline,useTLS:g.useTLS})},Rj=Oj,Mj=function(){var S=this;S.timeline.info(S.buildTimelineMessage({transport:S.name+(S.options.useTLS?"s":"")})),S.hooks.isInitialized()?S.changeState("initialized"):S.hooks.file?(S.changeState("initializing"),f.load(S.hooks.file,{useTLS:S.options.useTLS},function(g,w){S.hooks.isInitialized()?(S.changeState("initialized"),w(!0)):(g&&S.onError(g),S.onClose(),w(!1))})):S.onClose()},Lj={getRequest:function(S){var g=new window.XDomainRequest;return g.ontimeout=function(){S.emit("error",new C),S.close()},g.onerror=function(w){S.emit("error",w),S.close()},g.onprogress=function(){g.responseText&&g.responseText.length>0&&S.onChunk(200,g.responseText)},g.onload=function(){g.responseText&&g.responseText.length>0&&S.onChunk(200,g.responseText),S.emit("finished",200),S.close()},g},abortRequest:function(S){S.ontimeout=S.onerror=S.onprogress=S.onload=null,S.abort()}},Dj=Lj;const Nj=256*1024;class jj extends en{constructor(g,w,M){super(),this.hooks=g,this.method=w,this.url=M}start(g){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},Ge.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(g)}close(){this.unloader&&(Ge.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(g,w){for(;;){var M=this.advanceBuffer(w);if(M)this.emit("chunk",{status:g,data:M});else break}this.isBufferTooLong(w)&&this.emit("buffer_too_long")}advanceBuffer(g){var w=g.slice(this.position),M=w.indexOf(`
`);return M!==-1?(this.position+=M+1,w.slice(0,M)):null}isBufferTooLong(g){return this.position===g.length&&g.length>Nj}}var Gc;(function(S){S[S.CONNECTING=0]="CONNECTING",S[S.OPEN=1]="OPEN",S[S.CLOSED=3]="CLOSED"})(Gc||(Gc={}));var ar=Gc,Fj=1;class zj{constructor(g,w){this.hooks=g,this.session=Dm(1e3)+"/"+Vj(8),this.location=qj(w),this.readyState=ar.CONNECTING,this.openStream()}send(g){return this.sendRaw(JSON.stringify([g]))}ping(){this.hooks.sendHeartbeat(this)}close(g,w){this.onClose(g,w,!0)}sendRaw(g){if(this.readyState===ar.OPEN)try{return Ge.createSocketRequest("POST",Lm(Bj(this.location,this.session))).start(g),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(g,w,M){this.closeStream(),this.readyState=ar.CLOSED,this.onclose&&this.onclose({code:g,reason:w,wasClean:M})}onChunk(g){if(g.status===200){this.readyState===ar.OPEN&&this.onActivity();var w,M=g.data.slice(0,1);switch(M){case"o":w=JSON.parse(g.data.slice(1)||"{}"),this.onOpen(w);break;case"a":w=JSON.parse(g.data.slice(1)||"[]");for(var j=0;j<w.length;j++)this.onEvent(w[j]);break;case"m":w=JSON.parse(g.data.slice(1)||"null"),this.onEvent(w);break;case"h":this.hooks.onHeartbeat(this);break;case"c":w=JSON.parse(g.data.slice(1)||"[]"),this.onClose(w[0],w[1],!0);break}}}onOpen(g){this.readyState===ar.CONNECTING?(g&&g.hostname&&(this.location.base=Uj(this.location.base,g.hostname)),this.readyState=ar.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(g){this.readyState===ar.OPEN&&this.onmessage&&this.onmessage({data:g})}onActivity(){this.onactivity&&this.onactivity()}onError(g){this.onerror&&this.onerror(g)}openStream(){this.stream=Ge.createSocketRequest("POST",Lm(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",g=>{this.onChunk(g)}),this.stream.bind("finished",g=>{this.hooks.onFinished(this,g)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(g){X.defer(()=>{this.onError(g),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function qj(S){var g=/([^\?]*)\/*(\??.*)/.exec(S);return{base:g[1],queryString:g[2]}}function Bj(S,g){return S.base+"/"+g+"/xhr_send"}function Lm(S){var g=S.indexOf("?")===-1?"?":"&";return S+g+"t="+ +new Date+"&n="+Fj++}function Uj(S,g){var w=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(S);return w[1]+g+w[3]}function Dm(S){return Ge.randomInt(S)}function Vj(S){for(var g=[],w=0;w<S;w++)g.push(Dm(32).toString(32));return g.join("")}var Hj=zj,Wj={getReceiveURL:function(S,g){return S.base+"/"+g+"/xhr_streaming"+S.queryString},onHeartbeat:function(S){S.sendRaw("[]")},sendHeartbeat:function(S){S.sendRaw("[]")},onFinished:function(S,g){S.onClose(1006,"Connection interrupted ("+g+")",!1)}},Gj=Wj,Kj={getReceiveURL:function(S,g){return S.base+"/"+g+"/xhr"+S.queryString},onHeartbeat:function(){},sendHeartbeat:function(S){S.sendRaw("[]")},onFinished:function(S,g){g===200?S.reconnect():S.onClose(1006,"Connection interrupted ("+g+")",!1)}},Qj=Kj,Jj={getRequest:function(S){var g=Ge.getXHRAPI(),w=new g;return w.onreadystatechange=w.onprogress=function(){switch(w.readyState){case 3:w.responseText&&w.responseText.length>0&&S.onChunk(w.status,w.responseText);break;case 4:w.responseText&&w.responseText.length>0&&S.onChunk(w.status,w.responseText),S.emit("finished",w.status),S.close();break}},w},abortRequest:function(S){S.onreadystatechange=null,S.abort()}},Xj=Jj,Zj={createStreamingSocket(S){return this.createSocket(Gj,S)},createPollingSocket(S){return this.createSocket(Qj,S)},createSocket(S,g){return new Hj(S,g)},createXHR(S,g){return this.createRequest(Xj,S,g)},createRequest(S,g,w){return new jj(S,g,w)}},Nm=Zj;Nm.createXDR=function(S,g){return this.createRequest(Dj,S,g)};var Yj=Nm,eF={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:i,DependenciesReceivers:d,getDefaultStrategy:Rj,Transports:cj,transportConnectionInitializer:Mj,HTTPFactory:Yj,TimelineTransport:Wt,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(S){window.Pusher=S;var g=()=>{this.onDocumentBody(S.ready)};window.JSON?g():f.load("json2",{},g)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:G,jsonp:ue}},onDocumentBody(S){document.body?S():setTimeout(()=>{this.onDocumentBody(S)},0)},createJSONPRequest(S,g){return new ct(S,g)},createScriptRequest(S){return new We(S)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var S=this.getXHRAPI();return new S},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return dj},createWebSocket(S){var g=this.getWebSocketAPI();return new g(S)},createSocketRequest(S,g){if(this.isXHRSupported())return this.HTTPFactory.createXHR(S,g);if(this.isXDRSupported(g.indexOf("https:")===0))return this.HTTPFactory.createXDR(S,g);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var S=this.getXHRAPI();return!!S&&new S().withCredentials!==void 0},isXDRSupported(S){var g=S?"https:":"http:",w=this.getProtocol();return!!window.XDomainRequest&&w===g},addUnloadListener(S){window.addEventListener!==void 0?window.addEventListener("unload",S,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",S)},removeUnloadListener(S){window.addEventListener!==void 0?window.removeEventListener("unload",S,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",S)},randomInt(S){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*S)}},Ge=eF,Kc;(function(S){S[S.ERROR=3]="ERROR",S[S.INFO=6]="INFO",S[S.DEBUG=7]="DEBUG"})(Kc||(Kc={}));var Ra=Kc;class tF{constructor(g,w,M){this.key=g,this.session=w,this.events=[],this.options=M||{},this.sent=0,this.uniqueID=0}log(g,w){g<=this.options.level&&(this.events.push(de({},w,{timestamp:X.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(g){this.log(Ra.ERROR,g)}info(g){this.log(Ra.INFO,g)}debug(g){this.log(Ra.DEBUG,g)}isEmpty(){return this.events.length===0}send(g,w){var M=de({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],g(M,(j,fe)=>{j||this.sent++,w&&w(j,fe)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class nF{constructor(g,w,M,j){this.name=g,this.priority=w,this.transport=M,this.options=j||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(g,w){if(this.isSupported()){if(this.priority<g)return jm(new A,w)}else return jm(new I,w);var M=!1,j=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),fe=null,we=function(){j.unbind("initialized",we),j.connect()},Pe=function(){fe=ss.createHandshake(j,function(It){M=!0,rt(),w(null,It)})},Ve=function(It){rt(),w(It)},et=function(){rt();var It;It=oe(j),w(new E(It))},rt=function(){j.unbind("initialized",we),j.unbind("open",Pe),j.unbind("error",Ve),j.unbind("closed",et)};return j.bind("initialized",we),j.bind("open",Pe),j.bind("error",Ve),j.bind("closed",et),j.initialize(),{abort:()=>{M||(rt(),fe?fe.close():j.close())},forceMinPriority:It=>{M||this.priority<It&&(fe?fe.close():j.close())}}}}function jm(S,g){return X.defer(function(){g(S)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:sF}=Ge;var rF=function(S,g,w,M,j,fe){var we=sF[w];if(!we)throw new T(w);var Pe=(!S.enabledTransports||_e(S.enabledTransports,g)!==-1)&&(!S.disabledTransports||_e(S.disabledTransports,g)===-1),Ve;return Pe?(j=Object.assign({ignoreNullOrigin:S.ignoreNullOrigin},j),Ve=new nF(g,M,fe?fe.getAssistant(we):we,j)):Ve=oF,Ve},oF={isSupported:function(){return!1},connect:function(S,g){var w=X.defer(function(){g(new I)});return{abort:function(){w.ensureAborted()},forceMinPriority:function(){}}}};function iF(S){if(S==null)throw"You must pass an options object";if(S.cluster==null)throw"Options object must provide a cluster";"disableStats"in S&&ge.warn("The disableStats option is deprecated in favor of enableStats")}const aF=(S,g)=>{var w="socket_id="+encodeURIComponent(S.socketId);for(var M in g.params)w+="&"+encodeURIComponent(M)+"="+encodeURIComponent(g.params[M]);if(g.paramsProvider!=null){let j=g.paramsProvider();for(var M in j)w+="&"+encodeURIComponent(M)+"="+encodeURIComponent(j[M])}return w};var lF=S=>{if(typeof Ge.getAuthorizers()[S.transport]>"u")throw`'${S.transport}' is not a recognized auth transport`;return(g,w)=>{const M=aF(g,S);Ge.getAuthorizers()[S.transport](Ge,M,S,x.UserAuthentication,w)}};const cF=(S,g)=>{var w="socket_id="+encodeURIComponent(S.socketId);w+="&channel_name="+encodeURIComponent(S.channelName);for(var M in g.params)w+="&"+encodeURIComponent(M)+"="+encodeURIComponent(g.params[M]);if(g.paramsProvider!=null){let j=g.paramsProvider();for(var M in j)w+="&"+encodeURIComponent(M)+"="+encodeURIComponent(j[M])}return w};var uF=S=>{if(typeof Ge.getAuthorizers()[S.transport]>"u")throw`'${S.transport}' is not a recognized auth transport`;return(g,w)=>{const M=cF(g,S);Ge.getAuthorizers()[S.transport](Ge,M,S,x.ChannelAuthorization,w)}};const dF=(S,g,w)=>{const M={authTransport:g.transport,authEndpoint:g.endpoint,auth:{params:g.params,headers:g.headers}};return(j,fe)=>{const we=S.channel(j.channelName);w(we,M).authorize(j.socketId,fe)}};function fF(S,g){let w={activityTimeout:S.activityTimeout||l.activityTimeout,cluster:S.cluster,httpPath:S.httpPath||l.httpPath,httpPort:S.httpPort||l.httpPort,httpsPort:S.httpsPort||l.httpsPort,pongTimeout:S.pongTimeout||l.pongTimeout,statsHost:S.statsHost||l.stats_host,unavailableTimeout:S.unavailableTimeout||l.unavailableTimeout,wsPath:S.wsPath||l.wsPath,wsPort:S.wsPort||l.wsPort,wssPort:S.wssPort||l.wssPort,enableStats:vF(S),httpHost:hF(S),useTLS:gF(S),wsHost:pF(S),userAuthenticator:yF(S),channelAuthorizer:xF(S,g)};return"disabledTransports"in S&&(w.disabledTransports=S.disabledTransports),"enabledTransports"in S&&(w.enabledTransports=S.enabledTransports),"ignoreNullOrigin"in S&&(w.ignoreNullOrigin=S.ignoreNullOrigin),"timelineParams"in S&&(w.timelineParams=S.timelineParams),"nacl"in S&&(w.nacl=S.nacl),w}function hF(S){return S.httpHost?S.httpHost:S.cluster?`sockjs-${S.cluster}.pusher.com`:l.httpHost}function pF(S){return S.wsHost?S.wsHost:mF(S.cluster)}function mF(S){return`ws-${S}.pusher.com`}function gF(S){return Ge.getProtocol()==="https:"?!0:S.forceTLS!==!1}function vF(S){return"enableStats"in S?S.enableStats:"disableStats"in S?!S.disableStats:!1}function yF(S){const g=Object.assign(Object.assign({},l.userAuthentication),S.userAuthentication);return"customHandler"in g&&g.customHandler!=null?g.customHandler:lF(g)}function bF(S,g){let w;return"channelAuthorization"in S?w=Object.assign(Object.assign({},l.channelAuthorization),S.channelAuthorization):(w={transport:S.authTransport||l.authTransport,endpoint:S.authEndpoint||l.authEndpoint},"auth"in S&&("params"in S.auth&&(w.params=S.auth.params),"headers"in S.auth&&(w.headers=S.auth.headers)),"authorizer"in S&&(w.customHandler=dF(g,w,S.authorizer))),w}function xF(S,g){const w=bF(S,g);return"customHandler"in w&&w.customHandler!=null?w.customHandler:uF(w)}class _F extends en{constructor(g){super(function(w,M){ge.debug(`No callbacks on watchlist events for ${w}`)}),this.pusher=g,this.bindWatchlistInternalEvent()}handleEvent(g){g.data.events.forEach(w=>{this.emit(w.name,w)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",g=>{var w=g.event;w==="pusher_internal:watchlist_events"&&this.handleEvent(g)})}}function wF(){let S,g;return{promise:new Promise((M,j)=>{S=M,g=j}),resolve:S,reject:g}}var kF=wF;class SF extends en{constructor(g){super(function(w,M){ge.debug("No callbacks on user for "+w)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(w,M)=>{if(w){ge.warn(`Error during signin: ${w}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:M.auth,user_data:M.user_data})},this.pusher=g,this.pusher.connection.bind("state_change",({previous:w,current:M})=>{w!=="connected"&&M==="connected"&&this._signin(),w==="connected"&&M!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new _F(g),this.pusher.connection.bind("message",w=>{var M=w.event;M==="pusher:signin_success"&&this._onSigninSuccess(w.data),this.serverToUserChannel&&this.serverToUserChannel.name===w.channel&&this.serverToUserChannel.handleEvent(w)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(g){try{this.user_data=JSON.parse(g.user_data)}catch{ge.error(`Failed parsing user data after signin: ${g.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){ge.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){const g=w=>{w.subscriptionPending&&w.subscriptionCancelled?w.reinstateSubscription():!w.subscriptionPending&&this.pusher.connection.state==="connected"&&w.subscribe()};this.serverToUserChannel=new Bc(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((w,M)=>{w.indexOf("pusher_internal:")===0||w.indexOf("pusher:")===0||this.emit(w,M)}),g(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:g,resolve:w}=kF();g.done=!1;const M=()=>{g.done=!0};g.then(M).catch(M),this.signinDonePromise=g,this._signinDoneResolve=w}}class qt{static ready(){qt.isReady=!0;for(var g=0,w=qt.instances.length;g<w;g++)qt.instances[g].connect()}static getClientFeatures(){return Ae(N({ws:Ge.Transports.ws},function(g){return g.isSupported({})}))}constructor(g,w){CF(g),iF(w),this.key=g,this.config=fF(w,this),this.channels=ss.createChannels(),this.global_emitter=new en,this.sessionID=Ge.randomInt(1e9),this.timeline=new tF(this.key,this.sessionID,{cluster:this.config.cluster,features:qt.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Ra.INFO,version:l.VERSION}),this.config.enableStats&&(this.timelineSender=ss.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+Ge.TimelineTransport.name}));var M=j=>Ge.getDefaultStrategy(this.config,j,rF);this.connection=ss.createConnectionManager(this.key,{getStrategy:M,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",j=>{var fe=j.event,we=fe.indexOf("pusher_internal:")===0;if(j.channel){var Pe=this.channel(j.channel);Pe&&Pe.handleEvent(j)}we||this.global_emitter.emit(j.event,j.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",j=>{ge.warn(j)}),qt.instances.push(this),this.timeline.info({instances:qt.instances.length}),this.user=new SF(this),qt.isReady&&this.connect()}channel(g){return this.channels.find(g)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var g=this.connection.isUsingTLS(),w=this.timelineSender;this.timelineSenderTimer=new Be(6e4,function(){w.send(g)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(g,w,M){return this.global_emitter.bind(g,w,M),this}unbind(g,w,M){return this.global_emitter.unbind(g,w,M),this}bind_global(g){return this.global_emitter.bind_global(g),this}unbind_global(g){return this.global_emitter.unbind_global(g),this}unbind_all(g){return this.global_emitter.unbind_all(),this}subscribeAll(){var g;for(g in this.channels.channels)this.channels.channels.hasOwnProperty(g)&&this.subscribe(g)}subscribe(g){var w=this.channels.add(g,this);return w.subscriptionPending&&w.subscriptionCancelled?w.reinstateSubscription():!w.subscriptionPending&&this.connection.state==="connected"&&w.subscribe(),w}unsubscribe(g){var w=this.channels.find(g);w&&w.subscriptionPending?w.cancelSubscription():(w=this.channels.remove(g),w&&w.subscribed&&w.unsubscribe())}send_event(g,w,M){return this.connection.send_event(g,w,M)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}qt.instances=[],qt.isReady=!1,qt.logToConsole=!1,qt.Runtime=Ge,qt.ScriptReceivers=Ge.ScriptReceivers,qt.DependenciesReceivers=Ge.DependenciesReceivers,qt.auth_callbacks=Ge.auth_callbacks;var Qc=s.default=qt;function CF(S){if(S==null)throw"You must pass your app key when you instantiate Pusher."}Ge.setup(qt)}])})})(Vh);var Ox=Vh.exports;const Rx=th(Ox);window.Pusher=Rx;let Ks=null;const Mx=e=>{const t=e.channel.bind(e);e.channel=function(n){const s=t(n);return s.whisper||(s.whisper=function(r,o){if(this.subscription&&this.subscription.trigger)return this.subscription.trigger(`client-${r}`,o);if(this.pusher&&this.pusher.trigger)return this.pusher.trigger(this.name,`client-${r}`,o);throw new Error("Unable to send whisper event")}),s}},Lx=()=>Ks||(Ks=new Px({broadcaster:"pusher",key:"8N4y8QSdfIB3nh2D",wsHost:"console.easyaichat.app",wsPort:"6002",wssPort:"6002",forceTLS:!0,cluster:"mt1",encrypted:!0,enabledTransports:["ws","wss"],disableStats:!0,auth:{headers:{}},pusherOptions:{enableStats:!1,encrypted:!0,enabledTransports:["ws","wss"],clientEvents:{enabled:!0}}}),Mx(Ks),window.Echo=Ks,Ks),Hh=()=>Ks,Dx="https://widget.easyaichat.app",Nx=st({isMobile:!1}),Ao=(e={})=>{const{openInit:t=!1,milliseconds:n}=e,s=768,{isMobile:r}=Ct(Nx),o=pe({get:()=>me.state.chatState.isOpen,set:f=>me.actions.updateChatState({isOpen:f})}),i=()=>{const f=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),h=window.innerWidth<=s,p="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;return[f,h,p].filter(Boolean).length>=2},a=()=>{r.value=i()},l=()=>{n&&!o.value&&setTimeout(()=>o.value=!0,n)};Ee(o,f=>{r.value&&(document.body.style.overflow=f?"hidden":"")});const u=()=>{o.value=!o.value};return(()=>{r.value=i(),!r.value&&(window.location.origin===Dx?l():me.state.chatState.isOpen||(o.value=t,l()),window.addEventListener("resize",a))})(),{isOpen:o,toggleChatbot:u}},Wh={MESSAGE_SEND:"push.message.send",USER_LEFT:"push.user.left"},Qs={CONNECTION_INITIALIZED:".pull.connection.initialized",CONVERSATION_PROCESSED:".pull.conversation.processed",MESSAGE_RECEIVED:".pull.message.received",MESSAGE_PROCESSED:".pull.message.processed"};let ac=null;function jx(){const{getStorage:e,saveStorage:t}=Bs(),{isOpen:n}=Ao();if(ac)return ac;const s=L(null),r=L(null),o=L([]),i=L(null),a=L(null),l=L(!1),u=L(!1),d=L(null),f=L(!1),h=L(!1),p=kr(),m=pe(()=>{var X,de,Se;return((Se=(de=(X=me==null?void 0:me.state)==null?void 0:X.bot)==null?void 0:de.config)==null?void 0:Se.livechat)===!0});(()=>{try{i.value=e(Dn)??{},a.value=i.value[me.state.handle]??null}catch(X){console.log(X)}})();const y=(X={})=>({user_id:p,handle:me.state.handle,...X}),_=()=>{s.value&&(s.value.listen(Qs.CONVERSATION_PROCESSED,qe),s.value.listen(Qs.MESSAGE_RECEIVED,Ce),s.value.listen(Qs.MESSAGE_PROCESSED,Be))},C=()=>{s.value&&(s.value.stopListening(Qs.CONNECTION_INITIALIZED),s.value.stopListening(Qs.CONVERSATION_PROCESSED),s.value.stopListening(Qs.MESSAGE_RECEIVED),s.value.stopListening(Qs.MESSAGE_PROCESSED))},A=()=>{const X=Hh();if(!X){console.warn("Echo not initialized for connection tracking");return}const de=X.connector.pusher.connection;l.value=de.state==="connected",de.bind("connected",()=>{l.value=!0}),de.bind("disconnected",()=>{l.value=!1})},E=()=>{var de,Se,_e,$e;let X=(($e=(_e=(Se=(de=me==null?void 0:me.state)==null?void 0:de.bot)==null?void 0:Se.config)==null?void 0:_e.initialMessage)==null?void 0:$e.messages)??[];return X=Object.values(X),Array.isArray(X)?X.map((Ae,Te)=>({id:Te,content_type:Ae.displayType,sender_type:"assistant",content:Ae.content,is_welcome_message:!0})):[]},$=()=>{o.value=[];const X=E();o.value=Ws(X)},T=(X=[])=>{let de=X.filter(_e=>!_e.is_welcome_message);if(!(de!=null&&de.length))return;if(!me.state.chatState.lastAssistantMessageId){const _e=[...de].reverse().find($e=>$e.sender_type==="assistant");_e!=null&&_e.id&&me.actions.setLastAssistantMessageId(_e.id);return}const Se=de.findIndex(_e=>_e.id===me.state.chatState.lastAssistantMessageId);if(Se!==-1){const _e=de.slice(Se+1).filter($e=>$e.sender_type==="assistant"&&!$e.is_welcome_message);if(_e.length>0){const $e=me.state.chatState.unreadMessageCount||0;me.state.chatState.unreadMessageCount=$e+_e.length;const Ae=_e[_e.length-1];Ae!=null&&Ae.id&&(me.state.chatState.lastAssistantMessageId=Ae.id),me.actions.saveChatState();const{isOpen:Te}=Ao();Te.value||me.actions.updateLastUnreadMessage(de)}}},I=X=>{if(!X.length)return[];const de=X.reduce((_e,$e)=>{const Ae=_e.find(Te=>Te.type===$e.type);return Ae?(Ae.files.push($e),Ae.ids.push($e.file_id)):_e.push({type:$e.type,message_id:Fi(),files:[$e],ids:[$e.file_id]}),_e},[]),Se=["image","video","audio","file"];return[...de.filter(_e=>Se.includes(_e.type)).sort((_e,$e)=>Se.indexOf(_e.type)-Se.indexOf($e.type)),...de.filter(_e=>!Se.includes(_e.type))]},R=()=>new Promise((X,de)=>{const Se=Hh();if(!Se){de(new Error("Echo not initialized"));return}const _e=Se.connector.pusher.connection;if(_e.state==="connected"){X();return}const $e=setTimeout(()=>{_e.unbind("connected",Ae),de(new Error("Connection timeout"))},1e4),Ae=()=>{clearTimeout($e),X()};_e.bind("connected",Ae)}),q=async()=>{if(m.value&&!(f.value||l.value&&s.value)&&a.value)try{f.value=!0,d.value=null;const X=Lx();if(!X)throw new Error("Failed to initialize Echo");const de=`chat.${a.value}`;s.value=X.channel(de),_(),A(),await R()}catch(X){throw d.value=X.message,X}finally{f.value=!1}},G=async X=>{var de;if(!(h.value||!m.value))try{h.value=!0,d.value=null,a.value||(a.value=e(Dn,X));const{data:Se}=await ze.liveChat.initConnection({handle:X,conversation_id:a.value});if(a.value||(a.value=Se.conversation_id,i.value[me.state.handle]=a.value,t(Dn,i.value)),((de=Se.messages)==null?void 0:de.length)>0)if(o.value=Ws(Se.messages),me.state.chatState.assistantProcessing){if(!me.state.chatState.isOpen){const _e=[...Se.messages].reverse().find($e=>$e.sender_type==="assistant");_e&&(me.actions.incrementUnreadMessageCount(),me.actions.setLastAssistantMessageId(_e.id),me.actions.updateLastUnreadMessage(Se.messages))}me.state.chatState.assistantProcessing=!1,me.actions.saveChatState()}else T(Se.messages);else $();Se.conversation&&(r.value=Se.conversation,await q())}catch(Se){throw d.value=Se.message,Se}finally{h.value=!1}},K=async(X,de=[])=>{var Se;if(!(!X.trim()||u.value))try{(r.value&&r.value.response_mode==="auto"||!r.value)&&(u.value=!0,me.state.chatState.assistantProcessing=!0,me.actions.saveChatState());const _e={message:X.trim(),message_id:Fi()},$e=I(de);$e.forEach(Te=>{o.value.push({content:Te.files,content_type:Te.type,sender_type:"user",message_id:Te.message_id})}),o.value.push({content:_e.message,message_id:_e.message_id,content_type:"text",sender_type:"user",status:"sending"});const Ae=((Se=o.value.filter(Te=>Te.sender_type==="user"))==null?void 0:Se.length)||1;if(Dt.messageSend({content:_e.message,message_user_order:Ae,conversation_id:a.value}),r.value||await q(),!s.value)throw u.value=!1,new Error("Channel not ready");s.value.whisper(Wh.MESSAGE_SEND,y({conversation_id:a.value,content:_e,attachments:$e}))}catch(_e){throw u.value=!1,_e}},H=()=>{s.value?(console.log(`[LiveChat]  Disconnecting from channel: chat.${a.value}`),s.value.whisper(Wh.USER_LEFT,y()),C(),s.value.unsubscribe(),console.log("[LiveChat]  Disconnected successfully")):console.log("[LiveChat]  No active channel to disconnect"),s.value=null,l.value=!1},ee=()=>{var X;H(),(X=me==null?void 0:me.state)!=null&&X.handle&&a.value&&q()},ce=async()=>{var Se;if(u.value)return;const X=o.value.filter(_e=>!_e.is_welcome_message).length>0,de=a.value!==null;if(!X||!de){console.warn("[LiveChat] Cannot refresh: no active conversation to reset");return}H(),o.value=[],a.value=null,r.value=null,delete i.value[me.state.handle],localStorage.setItem(Dn,JSON.stringify(i.value)),me.actions.resetChatState(),(Se=me==null?void 0:me.state)!=null&&Se.handle&&await G(me.state.handle),Dt.conversationReset()},W=X=>o.value.findIndex(de=>de.message_id===X&&de.status==="sending"),Q=X=>o.value.findIndex(de=>de.message_id===X&&de.status==="received"),J=(X,de)=>{X!==-1&&(o.value[X]={...o.value[X],...de})},ne=X=>o.value.find(de=>de.id===X.id||X.message_id&&X.message_id===de.message_id),ke=X=>{ne(X)||o.value.push(X)},qe=X=>{X.conversation&&(r.value=X.conversation)},Ce=X=>{let de=W(X.message_id);de!==-1&&J(de,{status:"received"})},Re=X=>{if(!(X!=null&&X.id)||X.sender_type!=="assistant")return;me.actions.setLastAssistantMessageId(X.id);const{isOpen:de}=Ao();de.value||(me.actions.incrementUnreadMessageCount(),me.actions.updateLastUnreadMessage(o.value))},Be=X=>{if(X.message){let de=Q(X.message.message_id);de!==-1?J(de,{...X.message,status:"processed"}):(ke(X.message),u.value=!1),Re(X.message),X.message.sender_type==="assistant"&&(me.state.chatState.assistantProcessing=!1,me.actions.saveChatState())}X.conversation&&(r.value=X.conversation)};Ee(n,async X=>{var de;X&&((de=o.value)==null?void 0:de.length)>0&&me.actions.updateLastAssistantMessageIdFromMessages(o.value)});const Ne={messages:o,conversationId:a,isConnected:l,isProcessing:u,connectionError:d,fetchInit:G,connect:q,sendMessage:K,disconnect:H,reconnect:ee,refreshConversation:ce};return ac=Ne,Ne}const Fx=st({widgets:{},selectedWidgetEmbed:null,widgetSettingType:null});function Js(){const{widgetSettingType:e,widgets:t,selectedWidgetEmbed:n}=Ct(Fx),{bot:s}=Ct(me.state),r=(d,f)=>(d.name==="demand"&&!d.options&&(d.options=["T vn","Yu cu bo gi","Tr thnh i tc","Khiu ni","H tr k thut","Khc"]),{...d,label:typeof d.label=="object"&&d.label!==null?d.label[f]:d.label,placeholder:typeof d.placeholder=="object"&&d.placeholder!==null?d.placeholder[f]:d.placeholder,hint:typeof d.hint=="object"&&d.hint!==null?d.hint[f]:d.hint,options:Array.isArray(d.options)?d.options:typeof d.options=="object"&&d.options!==null?d.options[f]:d.options}),o=()=>{const d=window.location.href,f=/\/embed\/([^\/]+)\/([a-f0-9-]+)(\?(.+))?/,h=d.match(f);if(h){const p=h[1],m=h[2],x=h[4]||"",y=x?x.split("&").reduce((_,C)=>{const[A,E]=C.split("=");return A&&E&&(_[A]=decodeURIComponent(E)),_},{}):{};return{widgetId:m,queryObject:y,handle:p}}else return console.error("URL does not match expected format"),{widgetId:null,queryObject:{},handle:null}},i=async(d=[])=>{const f="vi";if(d.length===0)return;const h=d.reduce((p,m)=>m.active?(m.fields&&Array.isArray(m.fields)&&(m.fields=m.fields.map(x=>r(x,f))),{...p,[m.type]:m}):p,{});t.value=h},a=(d=[])=>{const{widgetId:f}=o();n.value=d.find(h=>h.id===f)};function l(d){try{const h=new URL(window.location.href).searchParams.get(d);return h?decodeURIComponent(h):null}catch(f){return console.error(`Error extracting ${d}:`,f),null}}const u=async d=>{var f,h;try{if(!d||!((f=D.bot.widgets)!=null&&f.length))return;const p=ec(D.bot.widgets),m=p.findIndex(A=>A.id===d.id);if(m===-1)return;p[m]=d;const x=(h=D.bot)==null?void 0:h.handle,y=l("temp_token"),_=l("expires");if(!x||!y)throw new Error("Missing data: handle or token is required");const C=await ze.widget.updateAll({handle:x,token:y,widgets:p,expires:_});console.log("Response update bot widgets = ",C)}catch(p){throw new Error(p)}};return Ke(()=>{const d=new URLSearchParams(window.location.search);e.value=d.get("widget_setting_type")}),Ee(s,()=>{var d;(d=s.value)!=null&&d.widgets&&i(s.value.widgets)},{immediate:!0}),{widgets:t,selectedWidgetEmbed:n,getWidgetsActive:i,getSelectedWidgetByEmbedLink:a,updateBotWidgets:u,widgetSettingType:e}}const zx=st({pendingMessage:null,currentMessage:""});function Xs(e={}){const{pendingMessage:t,currentMessage:n}=Ct(zx),{widgets:s}=Js(),r=pe(()=>{var h,p,m;return((m=(p=(h=me==null?void 0:me.state)==null?void 0:h.bot)==null?void 0:p.config)==null?void 0:m.livechat)===!0}),o=pe(()=>r.value?"livechat":"http"),i=jx(),a=Dh();Ke(async()=>{var p,m;const h=(m=(p=me==null?void 0:me.state)==null?void 0:p.bot)==null?void 0:m.handle;r.value&&h&&await i.fetchInit(h)});const l=async()=>{await Ll(1200);const h=me.state.chatState.visitor,p=s.value.widget_form_render_pre_send,m=parseInt(p==null?void 0:p.maximumMessageCount)||1,y=(r.value?i.messages:a.messages).value.filter(_=>_.sender_type==="user").length;p&&!h&&y>=m&&(me.state.isOpenLeadForm=!0)},u=async h=>(l(),me.actions.updateChatState({viewTab:"conversations"}),r.value?await i.sendMessage(h.message,h.files):await a.send(h)),d=async(h={})=>{if(!r.value)return await a.fetchMessages(h)},f=async()=>r.value?await i.refreshConversation():await a.refreshConversation();return{isLiveChatEnabled:r,chatService:o,pendingMessage:t,currentMessage:n,messages:r.value?i.messages:a.messages,conversationId:r.value?i.conversationId:a.conversationId,assistantProcessing:r.value?i.isProcessing:a.assistantProcessing,storageConversations:a.storageConversations,send:u,fetchMessages:d,refreshConversation:f,initializeMessages:a.initializeMessages,clickQuickPrompt:a.clickQuickPrompt,isConnected:i.isConnected,connectionError:i.connectionError}}/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oa={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=(e,t)=>({size:n,strokeWidth:s=2,absoluteStrokeWidth:r,color:o,class:i,...a},{attrs:l,slots:u})=>Ds("svg",{...oa,width:n||oa.width,height:n||oa.height,stroke:o||oa.stroke,"stroke-width":r?Number(s)*24/Number(n):s,...l,class:["lucide",`lucide-${qx(e)}`],...a},[...t.map(d=>Ds(...d)),...u.default?[u.default()]:[]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=Me("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=Me("AudioLinesIcon",[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=Me("BookOpenIcon",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=Me("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=Me("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=Me("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=Me("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=Me("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=Me("CircleCheckBigIcon",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=Me("CircleCheckIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=Me("CircleHelpIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=Me("CirclePlusIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=Me("CircleXIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=Me("ClipboardCheckIcon",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=Me("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=Me("ExternalLinkIcon",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=Me("FileSpreadsheetIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=Me("FileTextIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=Me("FileTypeIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=Me("GlobeIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=Me("HandCoinsIcon",[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=Me("HeadsetIcon",[["path",{d:"M3 11h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-5Zm0 0a9 9 0 1 1 18 0m0 0v5a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3Z",key:"12oyoe"}],["path",{d:"M21 16v2a4 4 0 0 1-4 4h-5",key:"1x7m43"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=Me("HeartIcon",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=Me("HomeIcon",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=Me("InfoIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=Me("LoaderIcon",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=Me("MailIcon",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=Me("MapPinIcon",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=Me("MenuIcon",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=Me("MessageCircleMoreIcon",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=Me("MessageCircleQuestionIcon",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=Me("MessageCircleIcon",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=Me("MicOffIcon",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=Me("MicIcon",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=Me("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=Me("PackageIcon",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=Me("PaperclipIcon",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=Me("PauseIcon",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=Me("PenLineIcon",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=Me("PencilLineIcon",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=Me("PhoneCallIcon",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=Me("PhoneIcon",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=Me("PlayIcon",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=Me("RefreshCcwIcon",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=Me("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=Me("SendHorizontalIcon",[["path",{d:"m3 3 3 9-3 9 19-9Z",key:"1aobqy"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=Me("SendIcon",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=Me("ShoppingBagIcon",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=Me("SquarePenIcon",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=Me("StarIcon",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=Me("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=Me("TriangleAlertIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=Me("UserRoundIcon",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=Me("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Le={search:e=>{at.track("web_search",e)},categoryView:e=>{at.track("web_category_view",e)},productSelect:e=>{at.track("web_product_select",e)},productView:e=>{at.track("web_product_view",e)},addToCart:e=>{at.track("web_add_to_cart",e)},removeFromCart:e=>{at.track("web_remove_from_cart",e)},checkout:e=>{at.track("web_checkout",e)},purchase:e=>{at.track("web_purchase",e)},cartView:e=>{at.track("web_cart_view",e)},addShippingInfo:e=>{at.track("web_add_shipping_info",e)},addPaymentInfo:e=>{at.track("web_add_payment_info",e)},selectPromotion:e=>{at.track("web_promotion_select",e)},viewPromotion:e=>{at.track("web_promotion_view",e)},login:e=>{at.track("web_login",e)},signUp:e=>{at.track("web_sign_up",e)},generateLead:e=>{at.track("web_generate_lead",e)},trackOrder:e=>{at.track("web_order_track",e)}},g_=Object.freeze(Object.defineProperty({__proto__:null,initMetricWebsiteFactory:async()=>{try{const e=me.state.handle;if(!e)return;switch(e){case Sn:await Promise.resolve().then(()=>qO);break;case Nn:await Promise.resolve().then(()=>v9);break;case Xn:await Promise.resolve().then(()=>J9);break;case Fl:await Promise.resolve().then(()=>rR);break;case Jn:await Promise.resolve().then(()=>TR);break;default:break}}catch(e){console.error(`Failed to load metric for ${handle}:`,e)}},metric:at,metricChatbot:Dt,metricWebsite:Le},Symbol.toStringTag,{value:"Module"})),nt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,r]of t)n[s]=r;return n},v_=e=>(In("data-v-475543d6"),e=e(),Pn(),e),y_={class:"relative reaction-container"},b_={key:0,class:"select-none selected-reactions mr-2 flex items-center gap-1 bg-white/90 px-2 py-0.5 h-[24px] border border-gray-100 shadow-sm rounded-full transition-transform duration-150 ease-in-out hover:scale-105 will-change-transform-opacity"},x_={class:"text-xs font-medium leading-[100%] tracking-tight text-gray-700"},__={key:0,class:"leading-[100%]"},w_={class:"flex justify-center items-center px-2 py-0.5 rounded-3xl select-none bg-white/90",style:{"box-shadow":`rgba(0, 0, 0, 0.1) 0px 1px 3px 0px,
                        rgba(0, 0, 0, 0.06) 0px 1px 2px 0px`}},k_=["onClick"],S_={class:"custom-tooltip absolute -top-[25px] left-1/2 -translate-x-1/2 scale-[0.8] bg-black/75 text-white text-[10px] px-1.5 py-0.5 rounded whitespace-nowrap opacity-0 pointer-events-none transition-[opacity,transform] duration-200 ease-in-out z-[60] hidden hover-hover:group-hover/emoji:opacity-100 hover-hover:group-hover/emoji:scale-100 after:content-[''] after:absolute after:top-full after:left-1/2 after:-ml-1 after:border-4 after:border-solid after:border-t-black/75 after:border-x-transparent after:border-b-transparent"},C_=v_(()=>c("div",{class:"custom-tooltip absolute -top-[25px] left-1/2 -translate-x-1/2 scale-[0.8] bg-black/75 text-white text-[10px] px-1.5 py-0.5 rounded whitespace-nowrap opacity-0 pointer-events-none transition-[opacity,transform] duration-200 ease-in-out z-[60] hidden hover-hover:group-hover/close:opacity-100 hover-hover:group-hover/close:scale-100 after:content-[''] after:absolute after:top-full after:left-1/2 after:-ml-1 after:border-4 after:border-solid after:border-t-black/75 after:border-x-transparent after:border-b-transparent"}," Xa ",-1)),$_={key:0,class:"absolute top-0 left-0 w-full h-full pointer-events-none z-50 overflow-visible"},T_=350,A_=nt({__name:"MessageReactions",props:{messageId:{type:[String,Number]},conversationId:{type:[String,Number]},position:{type:String,default:"left"},messageReactions:{type:Object,default:()=>({})},chatViewRef:{type:Object,default:null}},emits:["update:messageReactions"],setup(e,{expose:t,emit:n}){const s=e,r=n,o=L(!1),i=L([]),a=L(!1),l=L(s.messageReactions),u=L(null),d={love:"",like:"",haha:"",wow:"",cry:"",dislike:""},f=[{id:"love",emoji:"",label:"Yu thch"},{id:"like",emoji:"",label:"Thch"},{id:"haha",emoji:"",label:"Haha"},{id:"wow",emoji:"",label:"Wow"},{id:"cry",emoji:"",label:"Bun"},{id:"dislike",emoji:"",label:"Khng thch"}],h=()=>{const ce=Math.random()*Math.PI*2,W=30+Math.random()*60,Q=Math.cos(ce)*W,J=Math.sin(ce)*W,ne=.4+Math.random()*.3,ke=Math.random()*.15,qe=12+Math.random()*8,Ce=.6+Math.random()*.4;return{"--x":`${Q}px`,"--y":`${J}px`,"--duration":`${ne}s`,"--delay":`${ke}s`,"--size":`${qe}px`,"--opacity":Ce}};let p;const m=()=>{a.value=!1,setTimeout(()=>{a.value=!0,p&&clearTimeout(p),p=setTimeout(()=>{a.value=!1},800)},10)},x=pe(()=>Object.keys(l.value||{}).slice(0,3).map(W=>({ui:d[W],id:W}))),y=pe(()=>Object.values(l.value||{}).reduce((ce,W)=>ce+W,0)),_=ce=>{u.value=ce,i.value=[ce],o.value=!1,K(),m(),Dt.interaction({type:"reaction",conversationId:s.conversationId,...ce})},C=()=>{if(u.value){K(),m(),Dt.interaction({type:"reaction",conversationId:s.conversationId,...u.value});return}const ce=f.find(W=>W.id==="love");if(ce){u.value=ce,i.value=[ce],l.value||(l.value={});const W={...l.value};W[ce.id]&&delete W[ce.id],l.value={[ce.id]:(l.value[ce.id]||0)+1,...W},K(),m()}},A=()=>{u.value=null,i.value=[],o.value=!1,H()};Kt(()=>{p&&clearTimeout(p)});const E=()=>{document.dispatchEvent(new CustomEvent("close-all-emoji-pickers",{detail:{except:s.messageId}})),o.value=!0},$=ce=>{const W=document.querySelector(".emoji-picker");W&&!W.contains(ce.target)&&(o.value=!1)};let T,I;Ke(()=>{if(document.addEventListener("click",$,{passive:!0}),s.chatViewRef&&(T=ce=>{if(!Yn()||!o.value)return;const W=s.chatViewRef.querySelector(".emoji-picker.show-emoji");if(!W)return;const Q=ce.target.closest(".reaction-container"),J=W.closest(".reaction-container");J&&Q!==J&&(o.value=!1)},s.chatViewRef.addEventListener("touchstart",T,{passive:!0}),I=ce=>{var Q;((Q=ce.detail)==null?void 0:Q.except)!==s.messageId&&(o.value=!1)},s.chatViewRef.addEventListener("close-all-emoji-pickers",I)),l.value&&Object.keys(l.value).length>0){const ce=Object.keys(l.value)[0],W=f.find(Q=>Q.id===ce);W&&(u.value=W,i.value=[W])}}),Kt(()=>{document.removeEventListener("click",$),s.chatViewRef&&(T&&s.chatViewRef.removeEventListener("touchstart",T),I&&s.chatViewRef.removeEventListener("close-all-emoji-pickers",I)),p&&clearTimeout(p)});let R;const q=()=>{Yn()&&(R=setTimeout(()=>{E()},T_))},G=()=>{Yn()&&R&&clearTimeout(R)},K=async()=>{try{if(!ee.value){console.error("Missing required props: messageId or conversationId");return}if(!u.value)return;const{data:ce}=await ze.reaction.update({conversationId:s.conversationId,messageId:s.messageId,form:{reaction:u.value.id}});if(ce.success){const W=ce.data.reactions;if(r("update:messageReactions",ce.data.reactions),u.value&&W[u.value.id]){const Q=u.value.id,J={[Q]:W[Q]};Object.keys(W).forEach(ne=>{ne!==Q&&(J[ne]=W[ne])}),l.value=J}else l.value=W}}catch(ce){console.error("Error saving reaction to message:",ce)}},H=async()=>{try{if(!ee.value){console.error("Missing required props: messageId or conversationId");return}const{data:ce}=await ze.reaction.removeAll({conversationId:s.conversationId,messageId:s.messageId});ce.success&&(l.value={},u.value=null,i.value=[],r("update:messageReactions",{}))}catch(ce){console.error("Error removing reactions from message:",ce)}};t({selectedReactions:i,showEmojis:o,openEmojis:E});const ee=pe(()=>!!s.messageId&&!!s.conversationId);return(ce,W)=>{var Q;return v(),k("div",y_,[c("div",{class:"flex items-center group-reactions",onTouchstartPassive:W[0]||(W[0]=J=>q()),onTouchend:W[1]||(W[1]=J=>G())},[y.value>1?(v(),k("div",b_,[(v(!0),k(be,null,Ie(x.value,J=>(v(),k("div",{key:J.id,class:"text-center"},[c("div",{class:se(["content-center",["love","dislike","like"].includes(J.id)?"text-sm sm:text-xs translate-y-[1px]":"text-sm"])},V(J.ui),3)]))),128)),c("div",x_,V(y.value),1)])):B("",!0),c("button",{onClick:C,class:se(["reaction-button flex items-center justify-center size-[26px] border border-gray-100 shadow-sm rounded-full bg-white select-none transition-[transform,filter,background-color] duration-[150ms,200ms,200ms] ease-[cubic-bezier(0.175,0.885,0.32,1.275),ease,ease] hover:scale-110 active:scale-95 will-change-transform-opacity",[u.value?"grayscale-0":"grayscale",["love","dislike","like"].includes((Q=u.value)==null?void 0:Q.id)?"text-sm sm:text-xs":"text-sm"]])},[u.value?(v(),k("div",__,V(u.value.emoji),1)):(v(),re(b(Yx),{key:1,size:"14",class:"text-gray-500"}))],2)],32),c("div",{class:se(["absolute -top-2 z-10 -translate-y-full emoji-picker sm:top-0 origin-center-bottom will-change-[transform,opacity]",[e.position==="center"?"translate-x-[46%] right-0":"translate-x-0 -right-0 sm:-right-3",{"show-emoji":o.value}]])},[c("div",w_,[(v(),k(be,null,Ie(f,(J,ne)=>c("button",{key:J.id,class:"emoji-btn bg-transparent border-none cursor-pointer flex items-center justify-center size-[28px] sm:size-[26px] rounded-3xl hover:bg-gray-100 hover:scale-115 relative transition-[transform,background-color] duration-150 ease-in-out will-change-transform",style:kt({"--delay":`${ne*.03}s`}),onClick:ke=>_(J)},[c("span",{class:se(["leading-[100%]",["love","dislike","like"].includes(J.id)?"text-base sm:text-sm translate-y-[1px]":"text-lg sm:text-base"])},V(J.emoji),3),c("div",S_,V(J.label),1)],12,k_)),64)),i.value.length>0?(v(),k("button",{key:0,class:"relative ml-0.5 text-gray-500 bg-transparent border-none cursor-pointer emoji-btn-close hover:text-red-500 group/close",style:{"--delay":`${6*.03}s`},onClick:A},[U(b(Zs),{size:"16","stroke-width":"2"}),C_])):B("",!0)])],2),a.value?(v(),k("div",$_,[(v(),k(be,null,Ie(15,J=>{var ne;return c("div",{key:J,class:"firework-particle absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 will-change-[transform,opacity]",style:kt(h())},V(((ne=u.value)==null?void 0:ne.emoji)||""),5)}),64))])):B("",!0)])}}},[["__scopeId","data-v-475543d6"]]),E_=["innerHTML"],I_={key:0},hc="chatbot-message-table",P_=500,ap={__name:"ChatBubble",props:{message:Object,isUser:Boolean,chatViewRef:{type:Object,default:null}},setup(e){const t=e,n=L(!1),s=L(null),r=new Map,o=y=>_=>{Dt.linkClick({type:"page",url:y})};function i(y){return/<table[^>]*>[\s\S]*?<\/table>/i.test(y)}function a(y){return i(y)?y.replace(/(<table[\s\S]*?<\/table>)/g,`<div class="${hc}">$1</div>`):y}const l=L(null),u=pe(()=>{const y=t.message.content;return a(y)}),d=pe(()=>t.message.content.includes("ecg-cart-success"));Ke(()=>{gt(()=>{var _;const y=(_=l.value)==null?void 0:_.querySelectorAll("a");y==null||y.forEach(C=>{const A=C.getAttribute("href"),E=A.includes(window.location.origin),$=A.includes("dienmayxanh"),T=E||$?"_self":"_blank";C.setAttribute("target",T);const I=o(A);r.set(C,I),C.addEventListener("click",I)})}),n.value=t.message.reactions&&Object.keys(t.message.reactions).length>0}),hs(()=>{r.forEach((y,_)=>{_.removeEventListener("click",y)}),r.clear()});let f;const h=L(!1),p=()=>{Yn()&&(h.value=!0,f=setTimeout(()=>{s.value.openEmojis(),f=null,n.value=!0},P_))},m=()=>{Yn()&&(h.value=!1,f&&(clearTimeout(f),f=null))},x=y=>{n.value=Object.keys(y).length>0};return(y,_)=>(v(),k("div",{class:se(["relative flex-1 group",[e.isUser?"w-full":u.value.includes(hc)||d.value?"max-w-full":"w-fit max-w-[96%]"]])},[c("div",{class:se(["message",e.isUser?"message-user":"message-assistant"]),onTouchstart:_[0]||(_[0]=C=>s.value?p():null),onTouchend:_[1]||(_[1]=C=>s.value?m():null)},[c("div",{ref_key:"messageContentRef",ref:l,innerHTML:u.value,class:se(["relative px-4 py-2.5 min-w-11 bg-gray-100 rounded-xl prose-sm prose max-sm:select-none",{"ml-auto order-first bg-primary text-white":e.isUser,"cart-success":d.value,"has-table":u.value.includes(hc)}])},null,10,E_)],34),e.isUser?B("",!0):(v(),k("div",I_,[c("div",{class:se(["absolute right-1.5 -bottom-3",e.message.is_last_assistant_message||n.value?"opacity-100":"opacity-0 md:group-hover:opacity-100 transition-opacity duration-300"])},[U(A_,{ref_key:"messageReactionsRef",ref:s,chatViewRef:e.chatViewRef,messageId:e.message.id,messageReactions:e.message.reactions,conversationId:e.message.chat_conversation_id,position:e.isUser||l.value&&l.value.offsetWidth>260?"left":l.value?"center":"left","onUpdate:messageReactions":x},null,8,["chatViewRef","messageId","messageReactions","conversationId","position"])],2)]))],2))}};function O_(e){return Object.prototype.toString.call(e)==="[object Object]"}function lp(e){return O_(e)||Array.isArray(e)}function R_(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function pc(e,t){const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;const r=JSON.stringify(Object.keys(e.breakpoints||{})),o=JSON.stringify(Object.keys(t.breakpoints||{}));return r!==o?!1:n.every(i=>{const a=e[i],l=t[i];return typeof a=="function"?`${a}`==`${l}`:!lp(a)||!lp(l)?a===l:pc(a,l)})}function cp(e){return e.concat().sort((t,n)=>t.name>n.name?1:-1).map(t=>t.options)}function M_(e,t){if(e.length!==t.length)return!1;const n=cp(e),s=cp(t);return n.every((r,o)=>{const i=s[o];return pc(r,i)})}function mc(e){return typeof e=="number"}function gc(e){return typeof e=="string"}function ca(e){return typeof e=="boolean"}function up(e){return Object.prototype.toString.call(e)==="[object Object]"}function xt(e){return Math.abs(e)}function vc(e){return Math.sign(e)}function Po(e,t){return xt(e-t)}function L_(e,t){if(e===0||t===0||xt(e)<=xt(t))return 0;const n=Po(xt(e),xt(t));return xt(n/e)}function D_(e){return Math.round(e*100)/100}function Oo(e){return Mo(e).map(Number)}function Cn(e){return e[Ro(e)]}function Ro(e){return Math.max(0,e.length-1)}function yc(e,t){return t===Ro(e)}function dp(e,t=0){return Array.from(Array(e),(n,s)=>t+s)}function Mo(e){return Object.keys(e)}function fp(e,t){return[e,t].reduce((n,s)=>(Mo(s).forEach(r=>{const o=n[r],i=s[r],a=up(o)&&up(i);n[r]=a?fp(o,i):i}),n),{})}function bc(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function N_(e,t){const n={start:s,center:r,end:o};function s(){return 0}function r(l){return o(l)/2}function o(l){return t-l}function i(l,u){return gc(e)?n[e](l):e(t,l,u)}return{measure:i}}function Lo(){let e=[];function t(r,o,i,a={passive:!0}){let l;if("addEventListener"in r)r.addEventListener(o,i,a),l=()=>r.removeEventListener(o,i,a);else{const u=r;u.addListener(i),l=()=>u.removeListener(i)}return e.push(l),s}function n(){e=e.filter(r=>r())}const s={add:t,clear:n};return s}function j_(e,t,n,s){const r=Lo(),o=1e3/60;let i=null,a=0,l=0;function u(){r.add(e,"visibilitychange",()=>{e.hidden&&m()})}function d(){p(),r.clear()}function f(y){if(!l)return;i||(i=y,n(),n());const _=y-i;for(i=y,a+=_;a>=o;)n(),a-=o;const C=a/o;s(C),l&&(l=t.requestAnimationFrame(f))}function h(){l||(l=t.requestAnimationFrame(f))}function p(){t.cancelAnimationFrame(l),i=null,a=0,l=0}function m(){i=null,a=0}return{init:u,destroy:d,start:h,stop:p,update:n,render:s}}function F_(e,t){const n=t==="rtl",s=e==="y",r=s?"y":"x",o=s?"x":"y",i=!s&&n?-1:1,a=d(),l=f();function u(m){const{height:x,width:y}=m;return s?x:y}function d(){return s?"top":n?"right":"left"}function f(){return s?"bottom":n?"left":"right"}function h(m){return m*i}return{scroll:r,cross:o,startEdge:a,endEdge:l,measureSize:u,direction:h}}function Ys(e=0,t=0){const n=xt(e-t);function s(u){return u<e}function r(u){return u>t}function o(u){return s(u)||r(u)}function i(u){return o(u)?s(u)?e:t:u}function a(u){return n?u-n*Math.ceil((u-t)/n):u}return{length:n,max:t,min:e,constrain:i,reachedAny:o,reachedMax:r,reachedMin:s,removeOffset:a}}function hp(e,t,n){const{constrain:s}=Ys(0,e),r=e+1;let o=i(t);function i(h){return n?xt((r+h)%r):s(h)}function a(){return o}function l(h){return o=i(h),f}function u(h){return d().set(a()+h)}function d(){return hp(e,a(),n)}const f={get:a,set:l,add:u,clone:d};return f}function z_(e,t,n,s,r,o,i,a,l,u,d,f,h,p,m,x,y,_,C){const{cross:A,direction:E}=e,$=["INPUT","SELECT","TEXTAREA"],T={passive:!1},I=Lo(),R=Lo(),q=Ys(50,225).constrain(p.measure(20)),G={mouse:300,touch:400},K={mouse:500,touch:600},H=m?43:25;let ee=!1,ce=0,W=0,Q=!1,J=!1,ne=!1,ke=!1;function qe(O){if(!C)return;function F(P){(ca(C)||C(O,P))&&de(P)}const z=t;I.add(z,"dragstart",P=>P.preventDefault(),T).add(z,"touchmove",()=>{},T).add(z,"touchend",()=>{}).add(z,"touchstart",F).add(z,"mousedown",F).add(z,"touchcancel",_e).add(z,"contextmenu",_e).add(z,"click",$e,!0)}function Ce(){I.clear(),R.clear()}function Re(){const O=ke?n:t;R.add(O,"touchmove",Se,T).add(O,"touchend",_e).add(O,"mousemove",Se,T).add(O,"mouseup",_e)}function Be(O){const F=O.nodeName||"";return $.includes(F)}function Ne(){return(m?K:G)[ke?"mouse":"touch"]}function X(O,F){const z=f.add(vc(O)*-1),P=d.byDistance(O,!m).distance;return m||xt(O)<q?P:y&&F?P*.5:d.byIndex(z.get(),0).distance}function de(O){const F=bc(O,s);ke=F,ne=m&&F&&!O.buttons&&ee,ee=Po(r.get(),i.get())>=2,!(F&&O.button!==0)&&(Be(O.target)||(Q=!0,o.pointerDown(O),u.useFriction(0).useDuration(0),r.set(i),Re(),ce=o.readPoint(O),W=o.readPoint(O,A),h.emit("pointerDown")))}function Se(O){if(!bc(O,s)&&O.touches.length>=2)return _e(O);const z=o.readPoint(O),P=o.readPoint(O,A),N=Po(z,ce),Z=Po(P,W);if(!J&&!ke&&(!O.cancelable||(J=N>Z,!J)))return _e(O);const le=o.pointerMove(O);N>x&&(ne=!0),u.useFriction(.3).useDuration(.75),a.start(),r.add(E(le)),O.preventDefault()}function _e(O){const z=d.byDistance(0,!1).index!==f.get(),P=o.pointerUp(O)*Ne(),N=X(E(P),z),Z=L_(P,N),le=H-10*Z,ie=_+Z/50;J=!1,Q=!1,R.clear(),u.useDuration(le).useFriction(ie),l.distance(N,!m),ke=!1,h.emit("pointerUp")}function $e(O){ne&&(O.stopPropagation(),O.preventDefault(),ne=!1)}function Ae(){return Q}return{init:qe,destroy:Ce,pointerDown:Ae}}function q_(e,t){let s,r;function o(f){return f.timeStamp}function i(f,h){const m=`client${(h||e.scroll)==="x"?"X":"Y"}`;return(bc(f,t)?f:f.touches[0])[m]}function a(f){return s=f,r=f,i(f)}function l(f){const h=i(f)-i(r),p=o(f)-o(s)>170;return r=f,p&&(s=f),h}function u(f){if(!s||!r)return 0;const h=i(r)-i(s),p=o(f)-o(s),m=o(f)-o(r)>170,x=h/p;return p&&!m&&xt(x)>.1?x:0}return{pointerDown:a,pointerMove:l,pointerUp:u,readPoint:i}}function B_(){function e(n){const{offsetTop:s,offsetLeft:r,offsetWidth:o,offsetHeight:i}=n;return{top:s,right:r+o,bottom:s+i,left:r,width:o,height:i}}return{measure:e}}function U_(e){function t(s){return e*(s/100)}return{measure:t}}function V_(e,t,n,s,r,o,i){const a=[e].concat(s);let l,u,d=[],f=!1;function h(y){return r.measureSize(i.measure(y))}function p(y){if(!o)return;u=h(e),d=s.map(h);function _(C){for(const A of C){if(f)return;const E=A.target===e,$=s.indexOf(A.target),T=E?u:d[$],I=h(E?e:s[$]);if(xt(I-T)>=.5){y.reInit(),t.emit("resize");break}}}l=new ResizeObserver(C=>{(ca(o)||o(y,C))&&_(C)}),n.requestAnimationFrame(()=>{a.forEach(C=>l.observe(C))})}function m(){f=!0,l&&l.disconnect()}return{init:p,destroy:m}}function H_(e,t,n,s,r,o){let i=0,a=0,l=r,u=o,d=e.get(),f=0;function h(){const T=s.get()-e.get(),I=!l;let R=0;return I?(i=0,n.set(s),e.set(s),R=T):(n.set(e),i+=T/l,i*=u,d+=i,e.add(i),R=d-f),a=vc(R),f=d,$}function p(){const T=s.get()-t.get();return xt(T)<.001}function m(){return l}function x(){return a}function y(){return i}function _(){return A(r)}function C(){return E(o)}function A(T){return l=T,$}function E(T){return u=T,$}const $={direction:x,duration:m,velocity:y,seek:h,settled:p,useBaseFriction:C,useBaseDuration:_,useFriction:E,useDuration:A};return $}function W_(e,t,n,s,r){const o=r.measure(10),i=r.measure(50),a=Ys(.1,.99);let l=!1;function u(){return!(l||!e.reachedAny(n.get())||!e.reachedAny(t.get()))}function d(p){if(!u())return;const m=e.reachedMin(t.get())?"min":"max",x=xt(e[m]-t.get()),y=n.get()-t.get(),_=a.constrain(x/i);n.subtract(y*_),!p&&xt(y)<o&&(n.set(e.constrain(n.get())),s.useDuration(25).useBaseFriction())}function f(p){l=!p}return{shouldConstrain:u,constrain:d,toggleActive:f}}function G_(e,t,n,s,r){const o=Ys(-t+e,0),i=f(),a=d(),l=h();function u(m,x){return Po(m,x)<=1}function d(){const m=i[0],x=Cn(i),y=i.lastIndexOf(m),_=i.indexOf(x)+1;return Ys(y,_)}function f(){return n.map((m,x)=>{const{min:y,max:_}=o,C=o.constrain(m),A=!x,E=yc(n,x);return A?_:E||u(y,C)?y:u(_,C)?_:C}).map(m=>parseFloat(m.toFixed(3)))}function h(){if(t<=e+r)return[o.max];if(s==="keepSnaps")return i;const{min:m,max:x}=a;return i.slice(m,x)}return{snapsContained:l,scrollContainLimit:a}}function K_(e,t,n){const s=t[0],r=n?s-e:Cn(t);return{limit:Ys(r,s)}}function Q_(e,t,n,s){const o=t.min+.1,i=t.max+.1,{reachedMin:a,reachedMax:l}=Ys(o,i);function u(h){return h===1?l(n.get()):h===-1?a(n.get()):!1}function d(h){if(!u(h))return;const p=e*(h*-1);s.forEach(m=>m.add(p))}return{loop:d}}function J_(e){const{max:t,length:n}=e;function s(o){const i=o-t;return n?i/-n:0}return{get:s}}function X_(e,t,n,s,r){const{startEdge:o,endEdge:i}=e,{groupSlides:a}=r,l=f().map(t.measure),u=h(),d=p();function f(){return a(s).map(x=>Cn(x)[i]-x[0][o]).map(xt)}function h(){return s.map(x=>n[o]-x[o]).map(x=>-xt(x))}function p(){return a(u).map(x=>x[0]).map((x,y)=>x+l[y])}return{snaps:u,snapsAligned:d}}function Z_(e,t,n,s,r,o){const{groupSlides:i}=r,{min:a,max:l}=s,u=d();function d(){const h=i(o),p=!e||t==="keepSnaps";return n.length===1?[o]:p?h:h.slice(a,l).map((m,x,y)=>{const _=!x,C=yc(y,x);if(_){const A=Cn(y[0])+1;return dp(A)}if(C){const A=Ro(o)-Cn(y)[0]+1;return dp(A,Cn(y)[0])}return m})}return{slideRegistry:u}}function Y_(e,t,n,s,r){const{reachedAny:o,removeOffset:i,constrain:a}=s;function l(m){return m.concat().sort((x,y)=>xt(x)-xt(y))[0]}function u(m){const x=e?i(m):a(m),y=t.map((C,A)=>({diff:d(C-x,0),index:A})).sort((C,A)=>xt(C.diff)-xt(A.diff)),{index:_}=y[0];return{index:_,distance:x}}function d(m,x){const y=[m,m+n,m-n];if(!e)return m;if(!x)return l(y);const _=y.filter(C=>vc(C)===x);return _.length?l(_):Cn(y)-n}function f(m,x){const y=t[m]-r.get(),_=d(y,x);return{index:m,distance:_}}function h(m,x){const y=r.get()+m,{index:_,distance:C}=u(y),A=!e&&o(y);if(!x||A)return{index:_,distance:m};const E=t[_]-C,$=m+d(E,0);return{index:_,distance:$}}return{byDistance:h,byIndex:f,shortcut:d}}function ew(e,t,n,s,r,o,i){function a(f){const h=f.distance,p=f.index!==t.get();o.add(h),h&&(s.duration()?e.start():(e.update(),e.render(1),e.update())),p&&(n.set(t.get()),t.set(f.index),i.emit("select"))}function l(f,h){const p=r.byDistance(f,h);a(p)}function u(f,h){const p=t.clone().set(f),m=r.byIndex(p.get(),h);a(m)}return{distance:l,index:u}}function tw(e,t,n,s,r,o,i,a){const l={passive:!0,capture:!0};let u=0;function d(p){if(!a)return;function m(x){if(new Date().getTime()-u>10)return;i.emit("slideFocusStart"),e.scrollLeft=0;const C=n.findIndex(A=>A.includes(x));mc(C)&&(r.useDuration(0),s.index(C,0),i.emit("slideFocus"))}o.add(document,"keydown",f,!1),t.forEach((x,y)=>{o.add(x,"focus",_=>{(ca(a)||a(p,_))&&m(y)},l)})}function f(p){p.code==="Tab"&&(u=new Date().getTime())}return{init:d}}function Do(e){let t=e;function n(){return t}function s(l){t=i(l)}function r(l){t+=i(l)}function o(l){t-=i(l)}function i(l){return mc(l)?l:l.get()}return{get:n,set:s,add:r,subtract:o}}function pp(e,t){const n=e.scroll==="x"?i:a,s=t.style;let r=null,o=!1;function i(h){return`translate3d(${h}px,0px,0px)`}function a(h){return`translate3d(0px,${h}px,0px)`}function l(h){if(o)return;const p=D_(e.direction(h));p!==r&&(s.transform=n(p),r=p)}function u(h){o=!h}function d(){o||(s.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:d,to:l,toggleActive:u}}function nw(e,t,n,s,r,o,i,a,l){const d=Oo(r),f=Oo(r).reverse(),h=_().concat(C());function p(I,R){return I.reduce((q,G)=>q-r[G],R)}function m(I,R){return I.reduce((q,G)=>p(q,R)>0?q.concat([G]):q,[])}function x(I){return o.map((R,q)=>({start:R-s[q]+.5+I,end:R+t-.5+I}))}function y(I,R,q){const G=x(R);return I.map(K=>{const H=q?0:-n,ee=q?n:0,ce=q?"end":"start",W=G[K][ce];return{index:K,loopPoint:W,slideLocation:Do(-1),translate:pp(e,l[K]),target:()=>a.get()>W?H:ee}})}function _(){const I=i[0],R=m(f,I);return y(R,n,!1)}function C(){const I=t-i[0]-1,R=m(d,I);return y(R,-n,!0)}function A(){return h.every(({index:I})=>{const R=d.filter(q=>q!==I);return p(R,t)<=.1})}function E(){h.forEach(I=>{const{target:R,translate:q,slideLocation:G}=I,K=R();K!==G.get()&&(q.to(K),G.set(K))})}function $(){h.forEach(I=>I.translate.clear())}return{canLoop:A,clear:$,loop:E,loopPoints:h}}function sw(e,t,n){let s,r=!1;function o(l){if(!n)return;function u(d){for(const f of d)if(f.type==="childList"){l.reInit(),t.emit("slidesChanged");break}}s=new MutationObserver(d=>{r||(ca(n)||n(l,d))&&u(d)}),s.observe(e,{childList:!0})}function i(){s&&s.disconnect(),r=!0}return{init:o,destroy:i}}function rw(e,t,n,s){const r={};let o=null,i=null,a,l=!1;function u(){a=new IntersectionObserver(m=>{l||(m.forEach(x=>{const y=t.indexOf(x.target);r[y]=x}),o=null,i=null,n.emit("slidesInView"))},{root:e.parentElement,threshold:s}),t.forEach(m=>a.observe(m))}function d(){a&&a.disconnect(),l=!0}function f(m){return Mo(r).reduce((x,y)=>{const _=parseInt(y),{isIntersecting:C}=r[_];return(m&&C||!m&&!C)&&x.push(_),x},[])}function h(m=!0){if(m&&o)return o;if(!m&&i)return i;const x=f(m);return m&&(o=x),m||(i=x),x}return{init:u,destroy:d,get:h}}function ow(e,t,n,s,r,o){const{measureSize:i,startEdge:a,endEdge:l}=e,u=n[0]&&r,d=m(),f=x(),h=n.map(i),p=y();function m(){if(!u)return 0;const C=n[0];return xt(t[a]-C[a])}function x(){if(!u)return 0;const C=o.getComputedStyle(Cn(s));return parseFloat(C.getPropertyValue(`margin-${l}`))}function y(){return n.map((C,A,E)=>{const $=!A,T=yc(E,A);return $?h[A]+d:T?h[A]+f:E[A+1][a]-C[a]}).map(xt)}return{slideSizes:h,slideSizesWithGaps:p,startGap:d,endGap:f}}function iw(e,t,n,s,r,o,i,a,l){const{startEdge:u,endEdge:d,direction:f}=e,h=mc(n);function p(_,C){return Oo(_).filter(A=>A%C===0).map(A=>_.slice(A,A+C))}function m(_){return _.length?Oo(_).reduce((C,A,E)=>{const $=Cn(C)||0,T=$===0,I=A===Ro(_),R=r[u]-o[$][u],q=r[u]-o[A][d],G=!s&&T?f(i):0,K=!s&&I?f(a):0,H=xt(q-K-(R+G));return E&&H>t+l&&C.push(A),I&&C.push(_.length),C},[]).map((C,A,E)=>{const $=Math.max(E[A-1]||0);return _.slice($,C)}):[]}function x(_){return h?p(_,n):m(_)}return{groupSlides:x}}function aw(e,t,n,s,r,o,i){const{align:a,axis:l,direction:u,startIndex:d,loop:f,duration:h,dragFree:p,dragThreshold:m,inViewThreshold:x,slidesToScroll:y,skipSnaps:_,containScroll:C,watchResize:A,watchSlides:E,watchDrag:$,watchFocus:T}=o,I=2,R=B_(),q=R.measure(t),G=n.map(R.measure),K=F_(l,u),H=K.measureSize(q),ee=U_(H),ce=N_(a,H),W=!f&&!!C,Q=f||!!C,{slideSizes:J,slideSizesWithGaps:ne,startGap:ke,endGap:qe}=ow(K,q,G,n,Q,r),Ce=iw(K,H,y,f,q,G,ke,qe,I),{snaps:Re,snapsAligned:Be}=X_(K,ce,q,G,Ce),Ne=-Cn(Re)+Cn(ne),{snapsContained:X,scrollContainLimit:de}=G_(H,Ne,Be,C,I),Se=W?X:Be,{limit:_e}=K_(Ne,Se,f),$e=hp(Ro(Se),d,f),Ae=$e.clone(),Te=Oo(n),O=({dragHandler:mt,scrollBody:_t,scrollBounds:Wt,options:{loop:At}})=>{At||Wt.constrain(mt.pointerDown()),_t.seek()},F=({scrollBody:mt,translate:_t,location:Wt,offsetLocation:At,previousLocation:Tn,scrollLooper:Et,slideLooper:zt,dragHandler:ts,animation:zr,eventHandler:ns,scrollBounds:en,options:{loop:nr}},xn)=>{const tn=mt.settled(),Un=!en.shouldConstrain(),sr=nr?tn:tn&&Un,Vn=sr&&!ts.pointerDown();Vn&&zr.stop();const rr=Wt.get()*xn+Tn.get()*(1-xn);At.set(rr),nr&&(Et.loop(mt.direction()),zt.loop()),_t.to(At.get()),Vn&&ns.emit("settle"),sr||ns.emit("scroll")},z=j_(s,r,()=>O(ct),mt=>F(ct,mt)),P=.68,N=Se[$e.get()],Z=Do(N),le=Do(N),ie=Do(N),he=Do(N),ae=H_(Z,ie,le,he,h,P),te=Y_(f,Se,Ne,_e,he),oe=ew(z,$e,Ae,ae,te,he,i),ye=J_(_e),ge=Lo(),De=rw(t,n,i,x),{slideRegistry:ue}=Z_(W,C,Se,de,Ce,Te),We=tw(e,n,ue,oe,ae,ge,i,T),ct={ownerDocument:s,ownerWindow:r,eventHandler:i,containerRect:q,slideRects:G,animation:z,axis:K,dragHandler:z_(K,e,s,r,he,q_(K,r),Z,z,oe,ae,te,$e,i,ee,p,m,_,P,$),eventStore:ge,percentOfView:ee,index:$e,indexPrevious:Ae,limit:_e,location:Z,offsetLocation:ie,previousLocation:le,options:o,resizeHandler:V_(t,i,r,n,K,A,R),scrollBody:ae,scrollBounds:W_(_e,ie,he,ae,ee),scrollLooper:Q_(Ne,_e,ie,[Z,ie,le,he]),scrollProgress:ye,scrollSnapList:Se.map(ye.get),scrollSnaps:Se,scrollTarget:te,scrollTo:oe,slideLooper:nw(K,H,Ne,J,ne,Re,Se,ie,n),slideFocus:We,slidesHandler:sw(t,i,E),slidesInView:De,slideIndexes:Te,slideRegistry:ue,slidesToScroll:Ce,target:he,translate:pp(K,t)};return ct}function lw(){let e={},t;function n(u){t=u}function s(u){return e[u]||[]}function r(u){return s(u).forEach(d=>d(t,u)),l}function o(u,d){return e[u]=s(u).concat([d]),l}function i(u,d){return e[u]=s(u).filter(f=>f!==d),l}function a(){e={}}const l={init:n,emit:r,off:i,on:o,clear:a};return l}const cw={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function uw(e){function t(o,i){return fp(o,i||{})}function n(o){const i=o.breakpoints||{},a=Mo(i).filter(l=>e.matchMedia(l).matches).map(l=>i[l]).reduce((l,u)=>t(l,u),{});return t(o,a)}function s(o){return o.map(i=>Mo(i.breakpoints||{})).reduce((i,a)=>i.concat(a),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:n,optionsMediaQueries:s}}function dw(e){let t=[];function n(o,i){return t=i.filter(({options:a})=>e.optionsAtMedia(a).active!==!1),t.forEach(a=>a.init(o,e)),i.reduce((a,l)=>Object.assign(a,{[l.name]:l}),{})}function s(){t=t.filter(o=>o.destroy())}return{init:n,destroy:s}}function ua(e,t,n){const s=e.ownerDocument,r=s.defaultView,o=uw(r),i=dw(o),a=Lo(),l=lw(),{mergeOptions:u,optionsAtMedia:d,optionsMediaQueries:f}=o,{on:h,off:p,emit:m}=l,x=K;let y=!1,_,C=u(cw,ua.globalOptions),A=u(C),E=[],$,T,I;function R(){const{container:Te,slides:O}=A;T=(gc(Te)?e.querySelector(Te):Te)||e.children[0];const z=gc(O)?T.querySelectorAll(O):O;I=[].slice.call(z||T.children)}function q(Te){const O=aw(e,T,I,s,r,Te,l);if(Te.loop&&!O.slideLooper.canLoop()){const F=Object.assign({},Te,{loop:!1});return q(F)}return O}function G(Te,O){y||(C=u(C,Te),A=d(C),E=O||E,R(),_=q(A),f([C,...E.map(({options:F})=>F)]).forEach(F=>a.add(F,"change",K)),A.active&&(_.translate.to(_.location.get()),_.animation.init(),_.slidesInView.init(),_.slideFocus.init(Ae),_.eventHandler.init(Ae),_.resizeHandler.init(Ae),_.slidesHandler.init(Ae),_.options.loop&&_.slideLooper.loop(),T.offsetParent&&I.length&&_.dragHandler.init(Ae),$=i.init(Ae,E)))}function K(Te,O){const F=Ce();H(),G(u({startIndex:F},Te),O),l.emit("reInit")}function H(){_.dragHandler.destroy(),_.eventStore.clear(),_.translate.clear(),_.slideLooper.clear(),_.resizeHandler.destroy(),_.slidesHandler.destroy(),_.slidesInView.destroy(),_.animation.destroy(),i.destroy(),a.clear()}function ee(){y||(y=!0,a.clear(),H(),l.emit("destroy"),l.clear())}function ce(Te,O,F){!A.active||y||(_.scrollBody.useBaseFriction().useDuration(O===!0?0:A.duration),_.scrollTo.index(Te,F||0))}function W(Te){const O=_.index.add(1).get();ce(O,Te,-1)}function Q(Te){const O=_.index.add(-1).get();ce(O,Te,1)}function J(){return _.index.add(1).get()!==Ce()}function ne(){return _.index.add(-1).get()!==Ce()}function ke(){return _.scrollSnapList}function qe(){return _.scrollProgress.get(_.offsetLocation.get())}function Ce(){return _.index.get()}function Re(){return _.indexPrevious.get()}function Be(){return _.slidesInView.get()}function Ne(){return _.slidesInView.get(!1)}function X(){return $}function de(){return _}function Se(){return e}function _e(){return T}function $e(){return I}const Ae={canScrollNext:J,canScrollPrev:ne,containerNode:_e,internalEngine:de,destroy:ee,off:p,on:h,emit:m,plugins:X,previousScrollSnap:Re,reInit:x,rootNode:Se,scrollNext:W,scrollPrev:Q,scrollProgress:qe,scrollSnapList:ke,scrollTo:ce,selectedScrollSnap:Ce,slideNodes:$e,slidesInView:Be,slidesNotInView:Ne};return G(t,n),setTimeout(()=>l.emit("init"),0),Ae}ua.globalOptions=void 0;function xc(e={},t=[]){const n=St(e),s=St(t);let r=n?e.value:e,o=s?t.value:t;const i=Iu(),a=Iu();function l(){a.value&&a.value.reInit(r,o)}return Ke(()=>{!R_()||!i.value||(ua.globalOptions=xc.globalOptions,a.value=ua(i.value,r,o))}),hs(()=>{a.value&&a.value.destroy()}),n&&Ee(e,u=>{pc(r,u)||(r=u,l())}),s&&Ee(t,u=>{M_(o,u)||(o=u,l())}),[i,a]}xc.globalOptions=void 0;const fw={},hw={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},pw=[c("path",{d:"m15 18-6-6 6-6"},null,-1)];function mw(e,t){return v(),k("svg",hw,pw)}const gw=nt(fw,[["render",mw]]),vw={},yw={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},bw=[c("path",{d:"m9 18 6-6-6-6"},null,-1)];function xw(e,t){return v(),k("svg",yw,bw)}const mp=nt(vw,[["render",xw]]),_w={class:"embla__container"},ww={key:0,class:"embla__controls"},kw={key:0,class:"embla__buttons"},Sw={key:1,class:"embla__dots"},Cw=["onClick"],gp={__name:"Slider",props:{autoplay:{type:Boolean,default:!1},pagination:{type:Boolean,default:!1},showArrows:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},duration:{type:Number,default:25}},emits:["change"],setup(e,{emit:t}){const n=t,s=e,[r,o]=xc({duration:s.duration,loop:s.loop}),i=L([]),a=L(0),l=L(!1),u=L(!0);let d=null;Ke(()=>{o.value&&(i.value=o.value.slideNodes(),o.value.on("select",x),m(),f())}),Ee(()=>s.autoplay,C=>{C?f():h()});function f(){s.autoplay&&i.value.length>1&&(d=setInterval(()=>{var C;(C=o.value)==null||C.scrollNext()},3e3))}function h(){d&&clearInterval(d)}function p(C){var A;(A=o.value)==null||A.scrollTo(C)}function m(){o.value&&(l.value=o.value.canScrollPrev(),u.value=o.value.canScrollNext())}function x(){a.value=o.value.selectedScrollSnap(),m(),n("change",{currentIndex:a.value,activeSlide:i.value[a.value],totalSlides:i.value.length})}const y=()=>{s.autoplay&&h()},_=()=>{s.autoplay&&f()};return(C,A)=>(v(),k("div",{class:"embla",ref_key:"emblaRef",ref:r,onMouseenter:y,onMouseleave:_},[c("div",_w,[bt(C.$slots,"default",Xo(wi({selectedIndex:a.value,scrollTo:p})))]),i.value&&i.value.length>1?(v(),k("div",ww,[e.showArrows?(v(),k("div",kw,[Ot(c("button",{class:"embla__button embla__button--prev",onClick:A[0]||(A[0]=E=>{var $;return($=b(o))==null?void 0:$.scrollPrev()})},[U(gw)],512),[[uo,l.value]]),Ot(c("button",{class:"embla__button embla__button--next",onClick:A[1]||(A[1]=E=>{var $;return($=b(o))==null?void 0:$.scrollNext()})},[U(mp)],512),[[uo,u.value]])])):B("",!0),e.pagination?(v(),k("div",Sw,[(v(!0),k(be,null,Ie(i.value,(E,$)=>(v(),k("button",{key:$,class:se(["embla__dot",{"is-selected":$===a.value}]),onClick:T=>p($)},null,10,Cw))),128))])):B("",!0)])):B("",!0)],544))}},$w={},Tw={class:"embla__slide"};function Aw(e,t){return v(),k("div",Tw,[bt(e.$slots,"default")])}const vp=nt($w,[["render",Aw]]),Ew={class:"flex flex-col px-2.5 pt-2.5 pb-3 h-full rounded-2xl border border-gray-200 duration-500 group hover:border-primary"},Iw=["href"],Pw=["src"],Ow={key:1,class:"w-full flex items-center justify-center h-full min-h-[118px]"},Rw=["src"],Mw=["href","innerHTML"],Lw=["innerHTML"],Dw={__name:"CardPreview",props:["item","logo"],setup(e){const n="https://widget.easyaichat.app"+"/link.png";function s(r,o={}){["product","page"].includes(r)&&Dt.linkClick({type:r,...o})}return(r,o)=>(v(),k("div",Ew,[c("a",{target:"_blank",href:e.item.source,onClick:o[2]||(o[2]=i=>s("page",{url:e.item.source})),class:"flex overflow-hidden flex-1 justify-center items-center rounded-xl border border-gray-200 max-h-48"},[e.item.image?(v(),k("img",{key:0,src:e.item.image,class:"object-cover w-full h-full",onError:o[0]||(o[0]=i=>(i.target.src=n,i.target.className="max-w-7"))},null,40,Pw)):(v(),k("div",Ow,[c("img",{src:e.logo,class:"object-cover w-9 h-9 rounded-full",onError:o[1]||(o[1]=i=>i.target.src=n)},null,40,Rw)]))],8,Iw),e.item.title?(v(),k("a",{key:0,target:"_blank",href:e.item.source,onClick:o[3]||(o[3]=i=>s("page",{url:e.item.source})),class:"font-semibold text-gray-700 mt-2 text-sm group-hover:text-primary line-clamp-1 duration-500 break-words min-h-[20px]",innerHTML:e.item.title},null,8,Mw)):B("",!0),e.item.description||e.item.source?(v(),k("p",{key:1,class:"text-sm text-gray-500 mt-1 line-clamp-2 break-words min-h-[40px]",innerHTML:e.item.description||e.item.source},null,8,Lw)):B("",!0)]))}},Nw={class:"rounded-lg flex p-2 group border border-gray-200 hover:border-primary duration-500 w-[96%] max-w-xl"},jw={class:"w-[138px] h-[90px] flex-shrink-0 mr-2"},Fw=["href"],zw=["src"],qw={key:1,class:"min-h-[84px] w-full flex items-center justify-center"},Bw=["src"],Uw={class:"overflow-hidden space-y-1"},Vw=["href","innerHTML"],Hw=["innerHTML"],Ww={__name:"CardPreviewHorizontal",props:["item","logo"],setup(e){function t(n,s={}){["product","page"].includes(n)&&Dt.linkClick({type:n,...s})}return(n,s)=>(v(),k("div",Nw,[c("div",jw,[c("a",{target:"_blank",href:e.item.source,class:se(["flex overflow-hidden justify-center items-start h-full border border-gray-100 rounded",!e.item.image&&"h-full"]),onClick:s[2]||(s[2]=r=>t("page",{url:e.item.source}))},[e.item.image?(v(),k("img",{key:0,src:e.item.image,class:"object-contain w-full h-full",onError:s[0]||(s[0]=r=>(r.target.src=e.logo,r.target.className="max-w-8"))},null,40,zw)):(v(),k("div",qw,[c("img",{src:e.logo,class:"object-cover overflow-hidden w-8 h-8 rounded-full",onError:s[1]||(s[1]=r=>r.target.src=e.logo)},null,40,Bw)]))],10,Fw)]),c("div",Uw,[e.item.title?(v(),k("a",{key:0,target:"_blank",href:e.item.source,onClick:s[3]||(s[3]=r=>t("page",{url:e.item.source})),class:"text-sm font-semibold text-gray-700 duration-500 group-hover:text-primary line-clamp-2",innerHTML:e.item.title},null,8,Vw)):B("",!0),e.item.description||e.item.source?(v(),k("p",{key:1,class:"text-sm text-gray-500 line-clamp-2 break-words leading-[120%]",innerHTML:e.item.description||e.item.source},null,8,Hw)):B("",!0)])]))}};function Gw(){var r;const e=((r=D.bot)==null?void 0:r.config.apiHost)||D.apiDomain,t=ut.create({baseURL:`${e}/api/bots/${D.handle}/forms`});return{submit:async({formData:o,type:i})=>{const a=D.forms&&D.forms[i]&&D.forms[i].id;if(!a||!o)throw new Error("Missing data: formId or formData is required");const{submission_data:l,id:u}=await t.post(`/${a}/submission`,o).then(d=>d.data);return l?{success:!0,data:l,submissionId:u}:{success:!1,data:null,submissionId:null}},getForms:async()=>{const o=JSON.parse(JSON.stringify(D.bot.widgets??[]));if(o.length==0)return;const i=o.reduce((a,l)=>l.active?{...a,[l.type]:l}:a,{});D.forms=i}}}const Kw={class:"messages-group w-full"},Qw={class:"relative flex size-8 overflow-hidden rounded-full shrink-0 bg-white message-avatar"},Jw=["src","alt"],Xw={key:0,class:"rounded-2xl bg-white w-full overflow-hidden max-w-[540px]"},Zw={class:"flex items-center justify-between pl-4 pr-2.5 h-12 bg-primary"},Yw={class:"font-semibold text-base text-white"},ek=c("div",{class:"font-medium"},"Gi",-1),tk={key:1,class:"flex items-center justify-center mr-1"},nk={key:0,"aria-label":"form-submitted",class:"flex items-center space-x-1 text-sm text-primary bg-white rounded-md px-2 py-1"},sk=c("div",{class:"font-medium"}," gi",-1),rk={class:"pl-4 pr-3 py-2 border border-primary border-b-2 border-b-primary rounded-b-2xl"},ok={key:0,class:"w-full"},ik={class:"text-sm text-gray-700 border-b border-b-gray-200 last:border-b-0"},ak={class:"text-gray-500 p-2 pl-0 min-w-[114px] content-start"},lk={class:"py-1"},ck={key:0,class:"flex items-center px-2 py-1.5 rounded-md"},uk={class:"font-medium text-gray-700 whitespace-pre-wrap"},dk={key:1,class:"px-2"},fk={key:1,class:"w-full"},hk={class:"text-sm text-gray-700 border-b border-b-gray-200 last:border-b-0"},pk={class:"text-gray-500 p-2 pl-0 min-w-[114px] content-start"},mk={class:"py-1"},gk={class:"font-medium text-gray-700 whitespace-pre-wrap"},vk={key:1},yk={key:0,class:"px-2"},bk=[c("div",{class:"text-sm font-normal text-blue-400 underline underline-offset-2 text-left"}," Nhp thng tin ",-1)],yp={__name:"CardFormContact",props:{message:{type:Object}},setup(e){const t=e,{widgets:n}=Js(),{getStorage:s}=Bs(),r=L(!1),o=L({}),i=pe(()=>{var h,p;return n.value.contact.is_finish||n.value.contact.submission_data||((p=(h=t.message.content)==null?void 0:h.submission)==null?void 0:p.submission_data)}),a=()=>{D.isOpenFormContact=!0},l=()=>{var h,p;n.value.contact.is_finish=0,n.value.contact.submission_data=null,o.value=((p=(h=t.message.content)==null?void 0:h.submission)==null?void 0:p.submission_data)??{}};Ee(()=>{var h;return(h=n.value.contact)==null?void 0:h.fields},h=>{var p,m;i.value||(m=(p=t.message.content)==null?void 0:p.submission)!=null&&m.submission_data||(o.value||(o.value={}),h==null||h.forEach(x=>{x.value&&(o.value[x.name]=x.value)}))},{deep:!0});const u=pe(()=>{var h,p;return((p=(h=t.message.content)==null?void 0:h.submission)==null?void 0:p.submission_data)??null});Ee(()=>n.value.contact.submission_data,h=>{o.value=h??{}});const d=pe(()=>Object.values(o.value).filter(h=>h).length>1),f=async()=>{if(r.value)return;r.value=!0;const h=s("easychatgpt_conversations",D.handle),p={status:"submitted",message_id:t.message.id,conversation_id:h,submission_data:o.value},{data:m,status:x}=await ze.submission.submitWidget({widgetId:n.value.contact.id,formData:p});x===200&&(D.isOpenFormContact=!1,n.value.contact.is_finish=1,o.value=m.submission_data),r.value=!1};return Ke(()=>{l(),n.value.contact.message_id=t.message.id}),(h,p)=>(v(),k("div",Kw,[c("span",Qw,[b(D).bot&&b(D).bot.config.ui.logo?(v(),k("img",{key:0,src:b(D).bot.config.ui.logo,alt:b(D).bot.config.ui.name,class:"w-full h-full object-cover"},null,8,Jw)):B("",!0)]),b(n).contact?(v(),k("div",Xw,[c("div",Zw,[c("div",Yw,V(b(n).contact.name),1),!i.value&&d.value?(v(),k("button",{key:0,onClick:p[0]||(p[0]=m=>f()),class:"flex items-center space-x-1 text-sm text-primary bg-white rounded-md px-2 py-1"},[ek,r.value?(v(),re(b(n_),{key:0,size:"14","stroke-width":"2",class:"animation-rotate"})):(v(),re(b(rp),{key:1,size:"14"}))])):(v(),k("div",tk,[i.value?(v(),k("div",nk,[sk,U(b(Hx),{size:"16","stroke-width":"2"})])):(v(),re(b(p_),{key:1,size:"20",class:"text-white"}))]))]),c("div",rk,[u.value?(v(),k("table",ok,[(v(!0),k(be,null,Ie(b(n).contact.fields,m=>(v(),k("tr",ik,[c("td",ak,V(m.label),1),c("td",lk,[u.value[m.name]?(v(),k("div",ck,[c("span",uk,V(u.value[m.name]),1)])):(v(),k("div",dk,"-"))])]))),256))])):(v(),k("table",fk,[(v(!0),k(be,null,Ie(b(n).contact.fields,(m,x)=>(v(),k("tr",hk,[c("td",pk,V(m.label),1),c("td",mk,[o.value[m.name]?(v(),k("div",{key:0,onClick:p[1]||(p[1]=y=>!i.value&&a()),class:se(["flex items-center px-2 py-1.5 rounded-md",!i.value&&"hover:bg-gray-100 cursor-pointer"])},[c("span",gk,V(o.value[m.name]),1),i.value?B("",!0):(v(),re(b(d_),{key:0,size:"14",class:"text-gray-500 ml-auto flex-shrink-0"}))],2)):(v(),k("div",vk,[i.value?(v(),k("div",yk,"-")):(v(),k("button",{key:1,class:"text-gray-700 font-medium px-2 py-1.5 hover:bg-gray-100 w-full rounded-lg",onClick:p[2]||(p[2]=y=>a())},bk))]))])]))),256))]))])])):B("",!0)]))}},xk={key:0,class:"w-full"},_k={key:1,class:"w-[95%] flex items-end space-x-2"},wk={class:"flex overflow-hidden relative flex-shrink-0 bg-white rounded-full size-8 message-avatar"},kk=["src","alt"],Sk={class:"rounded-2xl overflow-hidden w-full max-w-[420px] p-3 pt-4",style:{"box-shadow":"rgba(99, 99, 99, 0.2) 0px 2px 8px 0px"}},Ck=["src"],$k={key:1,class:"w-full h-[calc(100vh-180px)] md:h-[calc(700px-180px)] shadow-form rounded-xl overflow-hidden"},Tk=["src"],Ak=nt({__name:"CardIframe",props:["item","handle"],setup(e){const t=e,n=L(180),s=L(!1),r=u=>new URLSearchParams(window.location.search).get(u),o=u=>{var d,f,h;try{const p=u.data;p&&typeof p=="object"&&p.type==="resize-iframe"&&p.height&&((d=p.message_id)==null?void 0:d.toString())===((h=(f=t.item)==null?void 0:f.id)==null?void 0:h.toString())&&(n.value=p.height)}catch(p){console.error("Error handling iframe message:",p)}},i=u=>{try{const d=u.data;d&&typeof d=="object"&&d.type==="submit-metric"&&d.submission_id&&Dt.widgetContact({handle:t.handle,submission_id:d.submission_id})}catch(d){console.error("Error handling iframe message:",d)}},a=u=>{o(u),i(u)},l=()=>{window.addEventListener("message",a)};return Ke(()=>{s.value=!!r("preview")}),hs(()=>{window.removeEventListener("message",a)}),(u,d)=>{var f;return(f=e.item.content.iframe.src)!=null&&f.includes("widget.easyaichat.app")?(v(),k("div",xk,[[b(Qn),"stagingeasyaichatapp"].includes(b(D).handle)?(v(),re(yp,{key:0,message:e.item},null,8,["message"])):(v(),k("div",_k,[c("span",wk,[b(D).bot&&b(D).bot.config.ui.logo?(v(),k("img",{key:0,src:b(D).bot.config.ui.logo,alt:b(D).bot.config.ui.name,class:"object-cover w-full h-full"},null,8,kk)):B("",!0)]),c("div",Sk,[c("iframe",{src:b(Xb)(e.item.content.iframe.src,{message_id:e.item.id,conversation_id:b(Bi)(e.handle),submission:e.item.content.submission?encodeURIComponent(JSON.stringify(e.item.content.submission)):null,preview:s.value}),style:kt({height:n.value+"px"}),onLoad:l,frameborder:"0",class:"w-full duration-200 transition-height"},null,44,Ck)])]))])):(v(),k("div",$k,[c("iframe",{src:e.item.content.iframe.src,frameborder:"0",class:"w-full h-full"},null,8,Tk)]))}}},[["__scopeId","data-v-b0c0cffe"]]),Ek={class:"flex overflow-hidden relative bg-white rounded-full size-8 flex-shrink-0 message-avatar"},Ik=["src","alt"],Pk={__name:"ProductList",props:{products:{type:Array,default:()=>[]}},emits:["open-flow-checkout","send-message"],setup(e,{emit:t}){const n=e,s=t,{bot:r,handle:o}=Ct(me.state),i=L(!1),a=[xs,Qn],l=pe(()=>n.products.map((y,_)=>y.sku?y:{...y,sku:y.product_sku||y.product_id||y.source})),u=L(!1);Ke(()=>{const y=Yl(window.location.href);(y==null?void 0:y.easy_ai_test_production)==="rangdong"&&(u.value=!0)});const d=Rt(()=>Promise.resolve().then(()=>XR)),f=Rt(()=>Promise.resolve().then(()=>_M)),h=Rt(()=>Promise.resolve().then(()=>jM)),p=Rt(()=>Promise.resolve().then(()=>tL)),m=Rt(()=>Promise.resolve().then(()=>$L)),x=pe(()=>a.includes(o.value)?{vertical:d,horizontal:f}:o.value===Sn&&u.value?{vertical:m,horizontal:m}:{vertical:h,horizontal:p});return(y,_)=>{var C;return l.value.length>1?(v(),k("div",{key:0,class:se(["grid grid-cols-2 border-l border-gray-200 ecg-slide-up",i.value&&"pointer-events-none opacity-95"])},[(v(!0),k(be,null,Ie(l.value,(A,E)=>(v(),re(Gt(x.value.vertical),{type:"vertical",item:A,key:`product-${E}-${A.product_sku||""}`,onLoading:_[0]||(_[0]=$=>i.value=$),onOpenFlowCheckout:_[1]||(_[1]=$=>s("open-flow-checkout")),onSendMessage:_[2]||(_[2]=$=>s("send-message",$)),class:"border-r border-b [&:nth-child(1)]:border-t [&:nth-child(2)]:border-t border-gray-200"},null,40,["item"]))),128))],2)):(v(),k("div",{key:1,class:se([i.value&&"pointer-events-none opacity-95","flex items-end space-x-1 w-full max-w-[600px]"])},[c("span",Ek,[b(r)&&b(r).config.ui.logo?(v(),k("img",{key:0,src:b(r).config.ui.logo,alt:b(r).config.ui.name,class:"object-cover w-full h-full"},null,8,Ik)):B("",!0)]),(v(),re(Gt(x.value.horizontal),{type:"horizontal",item:l.value[0],key:(C=l.value[0])==null?void 0:C.product_sku,onLoading:_[3]||(_[3]=A=>i.value=A),onOpenFlowCheckout:_[4]||(_[4]=A=>s("open-flow-checkout")),onSendMessage:_[5]||(_[5]=A=>s("send-message",A))},null,40,["item"]))],2))}}},bp=e=>{if(e===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(2))+" "+n[s]},Ok=(e,t)=>{if(t.includes("*"))return!0;const n=`.${e.name.split(".").pop().toLowerCase()}`;return t.includes(n)},dt=st({files:[],processedFiles:[],acceptTypes:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif,.xls,.xlsx,.csv",maxFileSize:2*1024*1024,maxFiles:10,uploading:!1,errors:[]});function da(){const{files:e,acceptTypes:t,maxFileSize:n,maxFiles:s,uploading:r,errors:o,processedFiles:i}=Ct(dt),a=pe(()=>dt.files.reduce((y,_)=>y+_.size,0)),l=pe(()=>dt.files.length);return{files:e,processedFiles:i,acceptTypes:t,maxFileSize:n,maxFiles:s,uploading:r,errors:o,totalSize:a,fileCount:l,validateFiles:y=>{if(dt.errors=[],dt.files.length+y.length>dt.maxFiles)return dt.errors.push(`Ch c php ti ln ti a ${dt.maxFiles} ${dt.maxFiles==1?"file":"files"}`),!1;const _=Array.from(y).filter(A=>A.size>dt.maxFileSize?(dt.errors.push(`File "${A.name}" vt qu kch thc ti a (${bp(dt.maxFileSize)})`),!1):Ok(A,dt.acceptTypes)?dt.files.some($=>$.filename===A.name&&$.size===A.size)?(dt.errors.push(`File "${A.name}"  tn ti`),!1):!0:(dt.errors.push(`File "${A.name}" khng thuc loi c chp nhn`),!1));if(_.length===0)return!1;const C=_.map(A=>({file:A,filename:A.name,size:A.size,mime_type:A.type}));return dt.files=[...dt.files,...C],!0},removeFile:y=>{const _=dt.processedFiles.findIndex(C=>C.file_id===y);return _===-1?!1:(dt.processedFiles.splice(_,1),dt.files.splice(_,1),!0)},clearFiles:()=>{dt.files=[],dt.errors=[]},updateConfig:({accept:y,maxSize:_,maxFiles:C})=>{y!==void 0&&(dt.acceptTypes=y),_!==void 0&&(dt.maxFileSize=_),C!==void 0&&(dt.maxFiles=C)},clearErrors:()=>{dt.errors=[]},getFileIconName:y=>y.type.startsWith("image/")?"image":y.type==="application/pdf"?"file-text":y.type.includes("word")||y.type.includes("doc")?"file-type":"file",isImageFile:y=>y.startsWith("image/"),formatFileSize:bp}}const Rk=["title"],Mk={class:"flex-shrink-0 flex items-center justify-center w-11 h-11 bg-white rounded-lg mr-1.5"},Lk={key:0,xmlns:"http://www.w3.org/2000/svg",width:"46",height:"46",viewBox:"0 0 32 32"},Dk=[gl('<defs><linearGradient id="vscodeIconsFileTypeExcel0" x1="4.494" x2="13.832" y1="-2092.086" y2="-2075.914" gradientTransform="translate(0 2100)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#18884f"></stop><stop offset=".5" stop-color="#117e43"></stop><stop offset="1" stop-color="#0b6631"></stop></linearGradient></defs><path fill="#185c37" d="M19.581 15.35L8.512 13.4v14.409A1.19 1.19 0 0 0 9.705 29h19.1A1.19 1.19 0 0 0 30 27.809V22.5Z"></path><path fill="#21a366" d="M19.581 3H9.705a1.19 1.19 0 0 0-1.193 1.191V9.5L19.581 16l5.861 1.95L30 16V9.5Z"></path><path fill="#107c41" d="M8.512 9.5h11.069V16H8.512Z"></path><path d="M16.434 8.2H8.512v16.25h7.922a1.2 1.2 0 0 0 1.194-1.191V9.391A1.2 1.2 0 0 0 16.434 8.2" opacity="0.1"></path><path d="M15.783 8.85H8.512V25.1h7.271a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191" opacity="0.2"></path><path d="M15.783 8.85H8.512V23.8h7.271a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191" opacity="0.2"></path><path d="M15.132 8.85h-6.62V23.8h6.62a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191" opacity="0.2"></path><path fill="url(#vscodeIconsFileTypeExcel0)" d="M3.194 8.85h11.938a1.193 1.193 0 0 1 1.194 1.191v11.918a1.193 1.193 0 0 1-1.194 1.191H3.194A1.19 1.19 0 0 1 2 21.959V10.041A1.19 1.19 0 0 1 3.194 8.85"></path><path fill="#fff" d="m5.7 19.873l2.511-3.884l-2.3-3.862h1.847L9.013 14.6c.116.234.2.408.238.524h.017q.123-.281.26-.546l1.342-2.447h1.7l-2.359 3.84l2.419 3.905h-1.809l-1.45-2.711A2.4 2.4 0 0 1 9.2 16.8h-.024a1.7 1.7 0 0 1-.168.351l-1.493 2.722Z"></path><path fill="#33c481" d="M28.806 3h-9.225v6.5H30V4.191A1.19 1.19 0 0 0 28.806 3"></path><path fill="#107c41" d="M19.581 16H30v6.5H19.581Z"></path>',12)],Nk={class:"flex-1 min-w-0"},jk={class:"text-xs font-medium text-gray-900 truncate block"},Fk={class:"flex items-center text-xs text-gray-500 font-medium"},zk=c("span",{class:"mx-1"},"",-1),qk={class:"uppercase"},xp={__name:"CardFileDocs",props:{file:{type:Object,default:()=>{}}},setup(e){const t=e,{formatFileSize:n}=da();function s(i){return i.split(".").pop().toLowerCase()}const r=pe(()=>{switch(s(t.file.filename)){case"xlsx":return{icon:null,color:""};case"pdf":return{icon:ia,color:"text-red-600"};case"csv":return{icon:Qx,color:"text-green-600"};case"docx":return{icon:Jx,color:"text-blue-600"};case"txt":return{icon:ia,color:"text-gray-600"};case"md":return{icon:Bx,color:"text-purple-600"};default:return{icon:ia,color:"text-gray-600"}}}),o=async()=>{if(t.file.url)try{const i=await fetch(t.file.url);if(!i.ok)throw new Error("Failed to fetch file");const a=await i.blob(),l=window.URL.createObjectURL(a),u=document.createElement("a");u.href=l,u.download=t.file.filename||"download",document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(l)}catch(i){console.error("Download failed:",i)}};return(i,a)=>(v(),k("div",{title:e.file.name,class:"flex items-center h-full p-1.5 bg-white group"},[c("div",Mk,[r.value.icon?(v(),re(Gt(r.value.icon),{key:1,size:"32",class:se(r.value.color)},null,8,["class"])):(v(),k("svg",Lk,Dk))]),c("div",Nk,[c("p",jk,V(e.file.filename),1),c("div",Fk,[c("span",null,V(b(n)(e.file.size)),1),zk,c("span",qk,V(s(e.file.filename)),1)])]),e.file.url?(v(),k("button",{key:0,onClick:o,class:"flex-shrink-0 p-1.5 hover:bg-gray-100 rounded-lg transition-colors",title:"Ti xung"},[U(b(Xh),{size:"16",class:"text-gray-600"})])):B("",!0)],8,Rk))}},Bk={class:"space-y-1"},Uk=["src"],Vk={__name:"CardVideo",props:{message:{type:Object,required:!0}},emits:["open-gallery"],setup(e,{emit:t}){const s=ws(e.message.content),r=Array.isArray(s)?s:[s],o=L([]),i=a=>a?a.includes("#")?a:`${a}#t=0.5`:"";return Ke(()=>{o.value.forEach(a=>{a&&a.load()})}),(a,l)=>(v(),k("div",Bk,[(v(!0),k(be,null,Ie(b(r),(u,d)=>(v(),k("div",{class:"relative",key:d},[c("video",{ref_for:!0,ref:f=>o.value[d]=f,controls:"",playsinline:"",preload:"metadata",class:"w-full h-auto transition-all rounded"},[c("source",{src:i(u.url),type:"video/mp4"},null,8,Uk),Fe(" Your browser does not support the video tag. ")],512)]))),128))]))}},Hk={class:"space-y-2"},Wk={controls:""},Gk=["src"],Kk=["src"],Qk={__name:"CardAudio",props:{message:{type:Object}},setup(e){const n=e.message.content;return(s,r)=>(v(),k("div",Hk,[(v(!0),k(be,null,Ie(b(n),o=>(v(),k("div",{key:o.file_id},[c("audio",Wk,[c("source",{src:o.url,type:"audio/ogg"},null,8,Gk),c("source",{src:o.url,type:"audio/mpeg"},null,8,Kk),Fe(" Your browser does not support the audio tag. ")])]))),128))]))}},Jk={key:0,class:"space-y-1"},Xk=["src","alt","onClick"],Zk={__name:"CardImages",props:{message:{type:Object,required:!0}},emits:["open-gallery"],setup(e,{emit:t}){const n=e,s=t,r=ws(n.message.content),o=Array.isArray(r)?r:[r];return(i,a)=>b(o).length>0?(v(),k("div",Jk,[(v(!0),k(be,null,Ie(b(o),(l,u)=>(v(),k("img",{key:u,src:l.url,alt:l.url,onClick:d=>s("open-gallery",l.file_id),class:"w-full object-contain lg:hover:opacity-80 rounded overflow-hidden cursor-zoom-in border border-gray-50"},null,8,Xk))),128))])):B("",!0)}},Yk={__name:"CardAttachment",props:{message:{type:Object},files:{type:Array,default:()=>[]}},setup(e){const t=e;let n=null;const s=o=>{const i=t.files.findIndex(a=>a.file_id===o);i!==-1&&(n=ax(t.files,i,()=>{n=null}))},r=o=>o.sender_type==="user";return Kt(()=>{n&&(n.remove(),n=null)}),(o,i)=>(v(),k("div",{class:se(["max-w-[86%] space-y-4",r(e.message)&&"ml-auto"])},[e.message.content_type==="image"||e.message.content_type==="gif"?(v(),re(Zk,{key:0,message:e.message,onOpenGallery:s},null,8,["message"])):B("",!0),e.message.content_type==="video"?(v(),re(Vk,{key:1,message:e.message,onOpenGallery:s},null,8,["message"])):B("",!0),e.message.content_type==="audio"?(v(),re(Qk,{key:2,message:e.message},null,8,["message"])):B("",!0),e.message.content_type==="file"?(v(),k("div",{key:3,class:se(r(e.message)&&"flex flex-col items-end w-full space-y-2")},[(v(!0),k(be,null,Ie(e.message.content,(a,l)=>(v(),re(xp,{class:"relative border border-gray-200 overflow-hidden rounded-xl w-[240px] sm:w-[268px] h-[60px]",key:l,file:a},null,8,["file"]))),128))],2)):B("",!0)],2))}},e2=["href"],t2={class:"flex-1 flex flex-col min-w-0"},n2={key:0,class:"font-semibold text-primary text-[15px] leading-[150%] mb-1.5 pl-1"},s2={key:1,class:"flex items-start gap-1.5 text-gray-700"},r2={class:"text-sm line-clamp-3"},o2={key:2,class:"flex items-center gap-1.5 text-gray-900 mt-1"},i2={class:"text-sm truncate"},a2={class:"size-6 flex items-center duration-300 group-hover:translate-x-1 bg-gray-50 justify-center group-hover:bg-primary group-hover:text-white ml-auto flex-shrink-0 rounded-full"},l2={__name:"CardStore",props:{store:{type:Object,required:!0}},setup(e){const t=e,n=pe(()=>t.store.google_maps_url?t.store.google_maps_url:t.store.address?`https://www.google.com/maps/search/${encodeURIComponent(t.store.address)}`:"#");function s(r){return!r||r.length===0?"":r.join(" - ")}return(r,o)=>(v(),k("a",{target:"_blank",href:n.value,rel:"noopener noreferrer",class:"flex items-center p-3 hover:bg-white duration-200 group cursor-pointer"},[c("div",t2,[e.store.title?(v(),k("h3",n2,V(e.store.title),1)):B("",!0),e.store.address?(v(),k("div",s2,[U(b(r_),{size:16,class:"flex-shrink-0 mt-1"}),c("span",r2,V(e.store.address),1)])):B("",!0),e.store.phone_numbers&&e.store.phone_numbers.length>0?(v(),k("div",o2,[U(b(dc),{size:16,class:"flex-shrink-0"}),c("span",i2,V(s(e.store.phone_numbers)),1)])):B("",!0)]),c("div",a2,[U(b(Io),{size:"16"})])],8,e2))}},c2={class:"relative w-[calc(100%-20px)]"},u2={class:"relative pl-[40px]"},d2={class:"absolute bottom-0 left-0"},f2={class:"relative flex flex-shrink-0 overflow-hidden bg-white rounded-full size-8 message-avatar"},h2=["src","alt"],p2={class:"border rounded-xl divide-y overflow-hidden"},m2={__name:"ListStores",props:{stores:{type:Array,required:!0,default:()=>[]},logo:{type:String,default:""},botName:{type:String,default:""}},setup(e){return(t,n)=>(v(),k("div",c2,[c("div",u2,[c("div",d2,[c("span",f2,[c("img",{src:e.logo,alt:e.botName,class:"object-cover w-full h-full"},null,8,h2)])]),c("div",p2,[(v(!0),k(be,null,Ie(e.stores,(s,r)=>(v(),re(l2,{key:r,store:s},null,8,["store"]))),128))])])]))}},g2=e=>(In("data-v-867baebd"),e=e(),Pn(),e),v2={class:"relative"},y2={key:0,class:"relative"},b2=["type","id","value","disabled"],x2=["for"],_2={key:0,class:"text-gray-500 text-xs"},w2={key:1,class:"relative"},k2=["id","value","disabled"],S2={value:"",disabled:""},C2=["value"],$2=["for"],T2={key:0,class:"text-gray-500 text-xs"},A2=g2(()=>c("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[c("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[c("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1)),E2={key:2,class:"relative"},I2=["id","value","disabled","rows"],P2=["for"],O2={key:0,class:"text-gray-500 text-xs"},R2={key:3,class:"relative"},M2=["for"],L2={class:"flex items-center cursor-pointer relative mt-1"},D2=["type","id","checked","disabled"],N2={class:"absolute text-white opacity-0 peer-checked:opacity-100 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none"},j2=["innerHTML"],F2={class:"text-xs text-red-500 flex items-center gap-1 pt-0.5 pl-1"},z2=["innerHTML"],q2={class:"text-xs text-gray-500 pl-1"},B2=["innerHTML"],_p=nt({__name:"FormFieldV2",props:{field:{type:Object,required:!0},modelValue:{type:[String,Number,Boolean]},error:{type:String,default:""},disabled:{type:Boolean,default:!1},locale:{type:String,default:"vi",validator:e=>["vi","en"].includes(e)}},emits:["update:modelValue","validate"],setup(e,{emit:t}){const n=e,s=t,r=L(""),o=L(!1),i=L(""),a=pe(()=>{var E;return((E=n.field.validate)==null?void 0:E.includes("required"))||!1}),l=pe(()=>!!n.modelValue),u=pe(()=>!!(r.value||n.error)),d=pe(()=>r.value||n.error),f=pe(()=>[{"has-value":l.value,"pr-8":l.value&&!u.value,"bg-gray-50 cursor-not-allowed":n.disabled},"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"]),h=pe(()=>({"label-focused":o.value||l.value})),p={vi:{required:E=>`${E} l bt buc`,email:E=>`${E} khng hp l`,phone:E=>`${E} khng hp l`,min:(E,$)=>`${E} phi c t nht ${$} k t`,max:(E,$)=>`${E} khng c vt qu ${$} k t`},en:{required:E=>`${E} is required`,email:E=>`Invalid ${E}`,phone:E=>`Invalid ${E}`,min:(E,$)=>`${E} must be at least ${$} characters`,max:(E,$)=>`${E} must not exceed ${$} characters`}},m=()=>{o.value=!0},x=()=>{o.value=!1,C()},y=E=>{if(n.disabled)return;let $=E.target.value;i.value=$,$?C($):r.value="",s("update:modelValue",$)},_=E=>{if(n.disabled)return;const $=E.target.checked;s("update:modelValue",$),A($)},C=(E=n.modelValue)=>{var R;r.value="";const $=((R=n.field.validate)==null?void 0:R.split("|"))||[],T=String(E||"").trim();if($.includes("nullable")&&!T)return s("validate",n.field.name,!0),!0;const I=n.field.name;for(const q of $){if(q==="nullable")continue;const[G,K]=q.split(":");if(G==="required"&&!T)return r.value=n.field.error||p[n.locale].required(n.field.label),s("validate",n.field.name,!1),!1;if(!(!T&&G!=="required")){if(I==="email"&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T))return r.value=n.field.error||p[n.locale].email(n.field.label),s("validate",n.field.name,!1),!1;if(I==="phone"&&!/^(\+84|0)[3|5|7|8|9][0-9]{8}$/.test(T.replace(/[\s()-]/g,"")))return r.value=n.field.error||p[n.locale].phone(n.field.label),s("validate",n.field.name,!1),!1;if(G==="min"&&T.length<parseInt(K))return r.value=n.field.error||p[n.locale].min(n.field.label,K),s("validate",n.field.name,!1),!1;if(G==="max"&&T.length>parseInt(K))return r.value=n.field.error||p[n.locale].max(n.field.label,K),s("validate",n.field.name,!1),!1}}return s("validate",n.field.name,!0),!0},A=(E=n.modelValue)=>{var T;r.value="";const $=((T=n.field.validate)==null?void 0:T.split("|"))||[];for(const I of $){const[R]=I.split(":");if(R==="required"&&!E)return r.value=n.field.error||p[n.locale].required(n.field.label),s("validate",n.field.name,!1),!1}return s("validate",n.field.name,!0),!0};return(E,$)=>(v(),k("div",v2,[["text","email","tel"].includes(e.field.type)?(v(),k("div",y2,[c("input",{type:e.field.type,id:e.field.name,value:e.modelValue,onInput:y,onBlur:x,onFocus:m,autocomplete:"off",disabled:e.disabled,class:se(["w-full px-3 border border-input rounded-xl focus:outline-none h-[46px] text-base lg:text-sm",f.value])},null,42,b2),c("label",{for:e.field.name,class:se(["absolute left-4 font-normal transition-all duration-200 pointer-events-none text-sm top-1/2 -translate-y-1/2 text-gray-500",h.value])},[Fe(V(e.field.label)+" ",1),a.value?(v(),k("span",_2,"*")):B("",!0)],10,x2)])):e.field.type==="select"?(v(),k("div",w2,[c("select",{id:e.field.name,value:e.modelValue,onChange:y,onBlur:x,onFocus:m,disabled:e.disabled,class:se(["custom-select w-full px-3 border border-input rounded-xl focus:outline-none h-[46px] text-sm appearance-none",f.value])},[c("option",S2,V(e.modelValue||o.value?e.field.label:""),1),(v(!0),k(be,null,Ie(e.field.options,(T,I)=>(v(),k("option",{key:I,value:T},V(T),9,C2))),128))],42,k2),c("label",{for:e.field.name,class:se(["absolute left-4 font-normal transition-all duration-200 pointer-events-none text-base lg:text-sm top-1/2 -translate-y-1/2 text-gray-500",h.value])},[Fe(V(e.field.label)+" ",1),a.value?(v(),k("span",T2,"*")):B("",!0)],10,$2),A2])):e.field.type==="textarea"?(v(),k("div",E2,[c("textarea",{id:e.field.name,value:e.modelValue,onInput:y,onBlur:x,onFocus:m,disabled:e.disabled,class:se(["w-full resize-none block px-3 py-2 border border-input rounded-xl focus:outline-none transition-colors duration-200 text-base lg:text-sm",f.value]),rows:e.field.rows??4},null,42,I2),c("label",{for:e.field.name,class:se(["absolute left-4 font-normal transition-all duration-200 pointer-events-none text-sm top-5 -translate-y-1/2 text-gray-500",h.value])},[Fe(V(e.field.label)+" ",1),a.value?(v(),k("span",O2,"*")):B("",!0)],10,P2)])):e.field.type==="checkbox"?(v(),k("div",R2,[c("label",{for:e.field.name,class:se(["flex items-start",{"cursor-not-allowed opacity-70":e.disabled}])},[c("div",L2,[c("input",{type:e.field.type,id:e.field.name,checked:e.modelValue,onChange:_,disabled:e.disabled,class:se(["peer h-[18px] w-[18px] cursor-pointer transition-all appearance-none rounded border border-slate-300 checked:bg-primary checked:border-primary outline-none ring-0 focus:ring-0 focus:outline-none",{"cursor-not-allowed opacity-70":e.disabled}])},null,42,D2),c("span",N2,[U(b(Ux),{"stroke-width":3,size:14})])]),c("div",{class:"ml-1.5 text-gray-700 prose prose-sm leading-[140%] select-text cursor-pointer",innerHTML:e.field.label},null,8,j2)],10,M2)])):B("",!0),Ot(c("p",F2,[U(b(Qh),{size:"14","stroke-width":"1.5"}),c("div",{innerHTML:d.value},null,8,z2)],512),[[uo,i.value&&u.value&&e.field.type!=="checkbox"]]),Ot(c("p",q2,[c("div",{innerHTML:e.field.hint},null,8,B2)],512),[[uo,e.field.hint]])]))}},[["__scopeId","data-v-867baebd"]]);function _c(e,t){const n=typeof e=="string"&&!t?`${e}Context`:t,s=Symbol(n);return[r=>{const o=yr(s,r);if(o||o===null)return o;throw new Error(`Injection \`${s.toString()}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`)},r=>(cl(s,r),r)]}function wp(e,t,n){const s=n.originalEvent.target,r=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),s.dispatchEvent(r)}function U2(e){return lu()?(hg(e),!0):!1}function V2(e){let t=!1,n;const s=dg(!0);return(...r)=>(t||(n=s.run(()=>e(...r)),t=!0),n)}function wc(e){return typeof e=="function"?e():b(e)}const No=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const H2=e=>typeof e<"u",W2=Object.prototype.toString,G2=e=>W2.call(e)==="[object Object]",K2=()=>{};function fa(e){var t;const n=wc(e);return(t=n==null?void 0:n.$el)!=null?t:n}const kp=No?window:void 0;function Q2(...e){let t,n,s,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,s,r]=e,t=kp):[t,n,s,r]=e,!t)return K2;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const o=[],i=()=>{o.forEach(d=>d()),o.length=0},a=(d,f,h,p)=>(d.addEventListener(f,h,p),()=>d.removeEventListener(f,h,p)),l=Ee(()=>[fa(t),wc(r)],([d,f])=>{if(i(),!d)return;const h=G2(f)?{...f}:f;o.push(...n.flatMap(p=>s.map(m=>a(d,p,m,h))))},{immediate:!0,flush:"post"}),u=()=>{l(),i()};return U2(u),u}function J2(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function X2(...e){let t,n,s={};e.length===3?(t=e[0],n=e[1],s=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],s=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=kp,eventName:o="keydown",passive:i=!1,dedupe:a=!1}=s,l=J2(t);return Q2(r,o,u=>{u.repeat&&wc(a)||l(u)&&n(u)},i)}function Z2(){const e=L(!1),t=wn();return t&&Ke(()=>{e.value=!0},t),e}function Y2(e){return JSON.parse(JSON.stringify(e))}function eS(e,t,n,s={}){var r,o,i;const{clone:a=!1,passive:l=!1,eventName:u,deep:d=!1,defaultValue:f,shouldEmit:h}=s,p=wn(),m=n||(p==null?void 0:p.emit)||((r=p==null?void 0:p.$emit)==null?void 0:r.bind(p))||((i=(o=p==null?void 0:p.proxy)==null?void 0:o.$emit)==null?void 0:i.bind(p==null?void 0:p.proxy));let x=u;x=x||`update:${t.toString()}`;const y=A=>a?typeof a=="function"?a(A):Y2(A):A,_=()=>H2(e[t])?y(e[t]):f,C=A=>{h?h(A)&&m(x,A):m(x,A)};if(l){const A=_(),E=L(A);let $=!1;return Ee(()=>e[t],T=>{$||($=!0,E.value=y(T),gt(()=>$=!1))}),Ee(E,T=>{!$&&(T!==e[t]||d)&&C(T)},{deep:d}),E}else return pe({get(){return _()},set(A){C(A)}})}function kc(e){return e?e.flatMap(t=>t.type===be?kc(t.children):[t]):[]}const[tS]=_c("ConfigProvider");function ha(e){const t=wn(),n=t==null?void 0:t.type.emits,s={};return n!=null&&n.length||console.warn(`No emitted event found. Please check component: ${t==null?void 0:t.type.__name}`),n==null||n.forEach(r=>{s[Qo(sn(r))]=(...o)=>e(r,...o)}),s}function nS(e){const t=wn(),n=Object.keys((t==null?void 0:t.type.props)??{}).reduce((r,o)=>{const i=(t==null?void 0:t.type.props[o]).default;return i!==void 0&&(r[o]=i),r},{}),s=Bg(e);return pe(()=>{const r={},o=(t==null?void 0:t.vnode.props)??{};return Object.keys(o).forEach(i=>{r[sn(i)]=o[i]}),Object.keys({...n,...r}).reduce((i,a)=>(s.value[a]!==void 0&&(i[a]=s.value[a]),i),{})})}function sS(e,t){const n=nS(e),s=t?ha(t):{};return pe(()=>({...n.value,...s}))}function ks(){const e=wn(),t=L(),n=pe(()=>{var i,a;return["#text","#comment"].includes((i=t.value)==null?void 0:i.$el.nodeName)?(a=t.value)==null?void 0:a.$el.nextElementSibling:fa(t)}),s=Object.assign({},e.exposed),r={};for(const i in e.props)Object.defineProperty(r,i,{enumerable:!0,configurable:!0,get:()=>e.props[i]});if(Object.keys(s).length>0)for(const i in s)Object.defineProperty(r,i,{enumerable:!0,configurable:!0,get:()=>s[i]});Object.defineProperty(r,"$el",{enumerable:!0,configurable:!0,get:()=>e.vnode.el}),e.exposed=r;function o(i){t.value=i,!(i instanceof Element||!i)&&(Object.defineProperty(r,"$el",{enumerable:!0,configurable:!0,get:()=>i.$el}),e.exposed=r)}return{forwardRef:o,currentRef:t,currentElement:n}}var rS=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Rr=new WeakMap,pa=new WeakMap,ma={},Sc=0,Sp=function(e){return e&&(e.host||Sp(e.parentNode))},oS=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=Sp(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},iS=function(e,t,n,s){var r=oS(t,Array.isArray(e)?e:[e]);ma[n]||(ma[n]=new WeakMap);var o=ma[n],i=[],a=new Set,l=new Set(r),u=function(f){!f||a.has(f)||(a.add(f),u(f.parentNode))};r.forEach(u);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(h){if(a.has(h))d(h);else try{var p=h.getAttribute(s),m=p!==null&&p!=="false",x=(Rr.get(h)||0)+1,y=(o.get(h)||0)+1;Rr.set(h,x),o.set(h,y),i.push(h),x===1&&m&&pa.set(h,!0),y===1&&h.setAttribute(n,"true"),m||h.setAttribute(s,"true")}catch(_){console.error("aria-hidden: cannot operate on ",h,_)}})};return d(t),a.clear(),Sc++,function(){i.forEach(function(f){var h=Rr.get(f)-1,p=o.get(f)-1;Rr.set(f,h),o.set(f,p),h||(pa.has(f)||f.removeAttribute(s),pa.delete(f)),p||f.removeAttribute(n)}),Sc--,Sc||(Rr=new WeakMap,Rr=new WeakMap,pa=new WeakMap,ma={})}},aS=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),r=rS(e);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live]"))),iS(s,r,n,"aria-hidden")):function(){return null}};function lS(e){let t;Ee(()=>fa(e),n=>{n?t=aS(n):t&&t()}),Kt(()=>{t&&t()})}let cS=0;function Cp(e,t="radix"){const{useId:n}=tS({useId:void 0});return n&&typeof n=="function"?`${t}-${n()}`:`${t}-${++cS}`}function uS(e,t){const n=L(e);function s(r){return t[n.value][r]??n.value}return{state:n,dispatch:r=>{n.value=s(r)}}}const dS=Lt({name:"PrimitiveSlot",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>{var s,r;if(!n.default)return null;const o=kc(n.default()),i=o.findIndex(d=>d.type!==on);if(i===-1)return o;const a=o[i];(s=a.props)==null||delete s.ref;const l=a.props?an(t,a.props):t;t.class&&(r=a.props)!=null&&r.class&&delete a.props.class;const u=On(a,l);for(const d in l)d.startsWith("on")&&(u.props||(u.props={}),u.props[d]=l[d]);return o.length===1?u:(o[i]=u,o)}}}),ga=Lt({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(e,{attrs:t,slots:n}){const s=e.asChild?"template":e.as;return typeof s=="string"&&["area","img","input"].includes(s)?()=>Ds(s,t):s!=="template"?()=>Ds(e.as,t,{default:n.default}):()=>Ds(dS,t,{default:n.default})}});function fS(e,t){const n=L({}),s=L("none"),r=e.value?"mounted":"unmounted",{state:o,dispatch:i}=uS(r,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),a=h=>{var p;if(No){const m=new CustomEvent(h,{bubbles:!1,cancelable:!1});(p=t.value)==null||p.dispatchEvent(m)}};Ee(e,async(h,p)=>{var m;const x=p!==h;if(await gt(),x){const y=s.value,_=va(t.value);h?(i("MOUNT"),a("enter"),_==="none"&&a("after-enter")):_==="none"||((m=n.value)==null?void 0:m.display)==="none"?(i("UNMOUNT"),a("leave"),a("after-leave")):p&&y!==_?(i("ANIMATION_OUT"),a("leave")):(i("UNMOUNT"),a("after-leave"))}},{immediate:!0});const l=h=>{const p=va(t.value),m=p.includes(h.animationName),x=o.value==="mounted"?"enter":"leave";h.target===t.value&&m&&(a(`after-${x}`),i("ANIMATION_END")),h.target===t.value&&p==="none"&&i("ANIMATION_END")},u=h=>{h.target===t.value&&(s.value=va(t.value))},d=Ee(t,(h,p)=>{h?(n.value=getComputedStyle(h),h.addEventListener("animationstart",u),h.addEventListener("animationcancel",l),h.addEventListener("animationend",l)):(i("ANIMATION_END"),p==null||p.removeEventListener("animationstart",u),p==null||p.removeEventListener("animationcancel",l),p==null||p.removeEventListener("animationend",l))},{immediate:!0}),f=Ee(o,()=>{const h=va(t.value);s.value=o.value==="mounted"?h:"none"});return Kt(()=>{d(),f()}),{isPresent:pe(()=>["mounted","unmountSuspended"].includes(o.value))}}function va(e){return e&&getComputedStyle(e).animationName||"none"}const hS=Lt({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(e,{slots:t,expose:n}){var s;const{present:r,forceMount:o}=Ct(e),i=L(),{isPresent:a}=fS(r,i);n({present:a});let l=t.default({present:a});l=kc(l||[]);const u=wn();if(l&&(l==null?void 0:l.length)>1){const d=(s=u==null?void 0:u.parent)!=null&&s.type.name?`<${u.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${d}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(f=>`  - ${f}`).join(`
`)].join(`
`))}return()=>o.value||r.value||a.value?Ds(t.default({present:a})[0],{ref:d=>{const f=fa(d);return typeof(f==null?void 0:f.hasAttribute)>"u"||(f!=null&&f.hasAttribute("data-radix-popper-content-wrapper")?i.value=f.firstElementChild:i.value=f),f}}):null}}),[Mr,pS]=_c("DialogRoot"),mS=Lt({__name:"DialogRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:!1},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(e,{emit:t}){const n=e,s=eS(n,"open",t,{defaultValue:n.defaultOpen,passive:n.open===void 0}),r=L(),o=L(),{modal:i}=Ct(n);return pS({open:s,modal:i,openModal:()=>{s.value=!0},onOpenChange:a=>{s.value=a},onOpenToggle:()=>{s.value=!s.value},contentId:"",titleId:"",descriptionId:"",triggerElement:r,contentElement:o}),(a,l)=>bt(a.$slots,"default",{open:b(s)})}}),gS=Lt({__name:"Teleport",props:{to:{default:"body"},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(e){const t=Z2();return(n,s)=>b(t)||n.forceMount?(v(),re(Uv,{key:0,to:n.to,disabled:n.disabled},[bt(n.$slots,"default")],8,["to","disabled"])):B("",!0)}}),Ss=Lt({__name:"DialogPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(e){const t=e;return(n,s)=>(v(),re(b(gS),Xo(wi(t)),{default:xe(()=>[bt(n.$slots,"default")]),_:3},16))}}),vS="dismissableLayer.pointerDownOutside",yS="dismissableLayer.focusOutside";function $p(e,t){const n=t.closest("[data-dismissable-layer]"),s=e.dataset.dismissableLayer===""?e:e.querySelector("[data-dismissable-layer]"),r=Array.from(e.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&s===n||r.indexOf(s)<r.indexOf(n))}function bS(e,t){var n;const s=((n=t==null?void 0:t.value)==null?void 0:n.ownerDocument)??(globalThis==null?void 0:globalThis.document),r=L(!1),o=L(()=>{});return ds(i=>{if(!No)return;const a=async u=>{const d=u.target;if(t!=null&&t.value){if($p(t.value,d)){r.value=!1;return}if(u.target&&!r.value){let f=function(){wp(vS,e,h)};const h={originalEvent:u};u.pointerType==="touch"?(s.removeEventListener("click",o.value),o.value=f,s.addEventListener("click",o.value,{once:!0})):f()}else s.removeEventListener("click",o.value);r.value=!1}},l=window.setTimeout(()=>{s.addEventListener("pointerdown",a)},0);i(()=>{window.clearTimeout(l),s.removeEventListener("pointerdown",a),s.removeEventListener("click",o.value)})}),{onPointerDownCapture:()=>r.value=!0}}function xS(e,t){var n;const s=((n=t==null?void 0:t.value)==null?void 0:n.ownerDocument)??(globalThis==null?void 0:globalThis.document),r=L(!1);return ds(o=>{if(!No)return;const i=async a=>{t!=null&&t.value&&(await gt(),!(!t.value||$p(t.value,a.target))&&a.target&&!r.value&&wp(yS,e,{originalEvent:a}))};s.addEventListener("focusin",i),o(()=>s.removeEventListener("focusin",i))}),{onFocusCapture:()=>r.value=!0,onBlurCapture:()=>r.value=!1}}const es=st({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_S=Lt({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(e,{emit:t}){const n=e,s=t,{forwardRef:r,currentElement:o}=ks(),i=pe(()=>{var m;return((m=o.value)==null?void 0:m.ownerDocument)??globalThis.document}),a=pe(()=>es.layersRoot),l=pe(()=>o.value?Array.from(a.value).indexOf(o.value):-1),u=pe(()=>es.layersWithOutsidePointerEventsDisabled.size>0),d=pe(()=>{const m=Array.from(a.value),[x]=[...es.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(x);return l.value>=y}),f=bS(async m=>{const x=[...es.branches].some(y=>y.contains(m.target));!d.value||x||(s("pointerDownOutside",m),s("interactOutside",m),await gt(),m.defaultPrevented||s("dismiss"))},o),h=xS(m=>{[...es.branches].some(x=>x.contains(m.target))||(s("focusOutside",m),s("interactOutside",m),m.defaultPrevented||s("dismiss"))},o);X2("Escape",m=>{l.value===a.value.size-1&&(s("escapeKeyDown",m),m.defaultPrevented||s("dismiss"))});let p;return ds(m=>{o.value&&(n.disableOutsidePointerEvents&&(es.layersWithOutsidePointerEventsDisabled.size===0&&(p=i.value.body.style.pointerEvents,i.value.body.style.pointerEvents="none"),es.layersWithOutsidePointerEventsDisabled.add(o.value)),a.value.add(o.value),m(()=>{n.disableOutsidePointerEvents&&es.layersWithOutsidePointerEventsDisabled.size===1&&(i.value.body.style.pointerEvents=p)}))}),ds(m=>{m(()=>{o.value&&(a.value.delete(o.value),es.layersWithOutsidePointerEventsDisabled.delete(o.value))})}),(m,x)=>(v(),re(b(ga),{ref:b(r),"as-child":m.asChild,as:m.as,"data-dismissable-layer":"",style:kt({pointerEvents:u.value?d.value?"auto":"none":void 0}),onFocusCapture:b(h).onFocusCapture,onBlurCapture:b(h).onBlurCapture,onPointerdownCapture:b(f).onPointerDownCapture},{default:xe(()=>[bt(m.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),Cc="focusScope.autoFocusOnMount",$c="focusScope.autoFocusOnUnmount",Tp={bubbles:!1,cancelable:!0};function wS(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(Cs(s,{select:t}),document.activeElement!==n)return!0}function kS(e){const t=Ap(e),n=Ep(t,e),s=Ep(t.reverse(),e);return[n,s]}function Ap(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Ep(e,t){for(const n of e)if(!SS(n,{upTo:t}))return n}function SS(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function CS(e){return e instanceof HTMLInputElement&&"select"in e}function Cs(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&CS(e)&&t&&e.select()}}const $S=V2(()=>L([]));function TS(){const e=$S();return{add(t){const n=e.value[0];t!==n&&(n==null||n.pause()),e.value=Ip(e.value,t),e.value.unshift(t)},remove(t){var n;e.value=Ip(e.value,t),(n=e.value[0])==null||n.resume()}}}function Ip(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function AS(e){return e.filter(t=>t.tagName!=="A")}const ES=Lt({__name:"FocusScope",props:{loop:{type:Boolean,default:!1},trapped:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:t}){const n=e,s=t,{currentRef:r,currentElement:o}=ks(),i=L(null),a=TS(),l=st({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});ds(d=>{if(!No)return;const f=o.value;if(!n.trapped)return;function h(y){if(l.paused||!f)return;const _=y.target;f.contains(_)?i.value=_:Cs(i.value,{select:!0})}function p(y){if(l.paused||!f)return;const _=y.relatedTarget;_!==null&&(f.contains(_)||Cs(i.value,{select:!0}))}function m(y){f.contains(i.value)||Cs(f)}document.addEventListener("focusin",h),document.addEventListener("focusout",p);const x=new MutationObserver(m);f&&x.observe(f,{childList:!0,subtree:!0}),d(()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",p),x.disconnect()})}),ds(async d=>{const f=o.value;if(await gt(),!f)return;a.add(l);const h=document.activeElement;if(!f.contains(h)){const p=new CustomEvent(Cc,Tp);f.addEventListener(Cc,m=>s("mountAutoFocus",m)),f.dispatchEvent(p),p.defaultPrevented||(wS(AS(Ap(f)),{select:!0}),document.activeElement===h&&Cs(f))}d(()=>{f.removeEventListener(Cc,x=>s("mountAutoFocus",x));const p=new CustomEvent($c,Tp),m=x=>{s("unmountAutoFocus",x)};f.addEventListener($c,m),f.dispatchEvent(p),setTimeout(()=>{p.defaultPrevented||Cs(h??document.body,{select:!0}),f.removeEventListener($c,m),a.remove(l)},0)})});function u(d){if(!n.loop&&!n.trapped||l.paused)return;const f=d.key==="Tab"&&!d.altKey&&!d.ctrlKey&&!d.metaKey,h=document.activeElement;if(f&&h){const p=d.currentTarget,[m,x]=kS(p);m&&x?!d.shiftKey&&h===x?(d.preventDefault(),n.loop&&Cs(m,{select:!0})):d.shiftKey&&h===m&&(d.preventDefault(),n.loop&&Cs(x,{select:!0})):h===p&&d.preventDefault()}}return(d,f)=>(v(),re(b(ga),{ref_key:"currentRef",ref:r,tabindex:"-1","as-child":d.asChild,as:d.as,onKeydown:u},{default:xe(()=>[bt(d.$slots,"default")]),_:3},8,["as-child","as"]))}});function IS(e){return e?"open":"closed"}const Pp=Lt({__name:"DialogContentImpl",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,s=t,r=Mr(),{forwardRef:o,currentElement:i}=ks();return r.titleId||(r.titleId=Cp(void 0,"radix-vue-dialog-title")),r.descriptionId||(r.descriptionId=Cp(void 0,"radix-vue-dialog-description")),Ke(()=>{r.contentElement=i,document.activeElement!==document.body&&(r.triggerElement.value=document.activeElement)}),(a,l)=>(v(),re(b(ES),{"as-child":"",loop:"",trapped:n.trapFocus,onMountAutoFocus:l[5]||(l[5]=u=>s("openAutoFocus",u)),onUnmountAutoFocus:l[6]||(l[6]=u=>s("closeAutoFocus",u))},{default:xe(()=>[U(b(_S),an({id:b(r).contentId,ref:b(o),as:a.as,"as-child":a.asChild,"disable-outside-pointer-events":a.disableOutsidePointerEvents,role:"dialog","aria-describedby":b(r).descriptionId,"aria-labelledby":b(r).titleId,"data-state":b(IS)(b(r).open.value)},a.$attrs,{onDismiss:l[0]||(l[0]=u=>b(r).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=u=>s("escapeKeyDown",u)),onFocusOutside:l[2]||(l[2]=u=>s("focusOutside",u)),onInteractOutside:l[3]||(l[3]=u=>s("interactOutside",u)),onPointerDownOutside:l[4]||(l[4]=u=>s("pointerDownOutside",u))}),{default:xe(()=>[bt(a.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),PS=Lt({__name:"DialogContentModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,s=t,r=Mr(),o=ha(s),{forwardRef:i,currentElement:a}=ks();return lS(a),(l,u)=>(v(),re(Pp,an({...n,...b(o)},{ref:b(i),"trap-focus":b(r).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:u[0]||(u[0]=d=>{var f;d.defaultPrevented||(d.preventDefault(),(f=b(r).triggerElement.value)==null||f.focus())}),onPointerDownOutside:u[1]||(u[1]=d=>{const f=d.detail.originalEvent,h=f.button===0&&f.ctrlKey===!0;(f.button===2||h)&&d.preventDefault()}),onFocusOutside:u[2]||(u[2]=d=>{d.preventDefault()})}),{default:xe(()=>[bt(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),OS=Lt({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,s=ha(t);ks();const r=Mr(),o=L(!1),i=L(!1);return(a,l)=>(v(),re(Pp,an({...n,...b(s)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:l[0]||(l[0]=u=>{var d;u.defaultPrevented||(o.value||(d=b(r).triggerElement.value)==null||d.focus(),u.preventDefault()),o.value=!1,i.value=!1}),onInteractOutside:l[1]||(l[1]=u=>{var d;u.defaultPrevented||(o.value=!0,u.detail.originalEvent.type==="pointerdown"&&(i.value=!0));const f=u.target;(d=b(r).triggerElement.value)!=null&&d.contains(f)&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&i.value&&u.preventDefault()})}),{default:xe(()=>[bt(a.$slots,"default")]),_:3},16))}}),RS=Lt({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,s=t,r=Mr(),o=ha(s),{forwardRef:i}=ks();return(a,l)=>(v(),re(b(hS),{present:a.forceMount||b(r).open.value},{default:xe(()=>[b(r).modal.value?(v(),re(PS,an({key:0,ref:b(i)},{...n,...b(o),...a.$attrs}),{default:xe(()=>[bt(a.$slots,"default")]),_:3},16)):(v(),re(OS,an({key:1,ref:b(i)},{...n,...b(o),...a.$attrs}),{default:xe(()=>[bt(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),ya=Lt({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(e){const t=e,n=Mr();return ks(),(s,r)=>(v(),re(b(ga),an(t,{id:b(n).titleId}),{default:xe(()=>[bt(s.$slots,"default")]),_:3},16,["id"]))}}),ba=Lt({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(e){const t=e;ks();const n=Mr();return(s,r)=>(v(),re(b(ga),an(t,{id:b(n).descriptionId}),{default:xe(()=>[bt(s.$slots,"default")]),_:3},16,["id"]))}});function MS(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}MS(),function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('[vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32,.72,0,1)}[vaul-drawer][vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[vaul-drawer][vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[vaul-drawer][vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[vaul-drawer][vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}.vaul-dragging .vaul-scrollable [vault-drawer-direction=top],.vaul-dragging .vaul-scrollable [vault-drawer-direction=bottom]{overflow-y:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=left],.vaul-dragging .vaul-scrollable [vault-drawer-direction=right]{overflow-x:hidden!important}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=top],[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height, 0),0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=left],[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height, 0),0,0)}[vaul-overlay]{opacity:0;transition:opacity .5s cubic-bezier(.32,.72,0,1)}[vaul-overlay][vaul-drawer-visible=true]{opacity:1}[vaul-drawer]:after{content:"";position:absolute;background:inherit;background-color:inherit}[vaul-drawer][vaul-drawer-direction=top]:after{top:initial;bottom:100%;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=bottom]:after{top:100%;bottom:initial;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=left]:after{left:initial;right:100%;top:0;bottom:0;width:200%}[vaul-drawer][vaul-drawer-direction=right]:after{left:100%;right:initial;top:0;bottom:0;width:200%}[vaul-overlay][vaul-snap-points=true]:not([vaul-snap-points-overlay=true]):not([data-state=closed]){opacity:0}[vaul-overlay][vaul-snap-points-overlay=true]:not([vaul-drawer-visible=false]){opacity:1}@keyframes fake-animation{}@media (hover: hover) and (pointer: fine){[vaul-drawer]{-webkit-user-select:none;user-select:none}}')),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}}();const LS=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const DS=e=>typeof e<"u";function NS(e){return JSON.parse(JSON.stringify(e))}function Op(e,t,n,s={}){var r,o,i;const{clone:a=!1,passive:l=!1,eventName:u,deep:d=!1,defaultValue:f,shouldEmit:h}=s,p=wn(),m=n||(p==null?void 0:p.emit)||((r=p==null?void 0:p.$emit)==null?void 0:r.bind(p))||((i=(o=p==null?void 0:p.proxy)==null?void 0:o.$emit)==null?void 0:i.bind(p==null?void 0:p.proxy));let x=u;t||(t="modelValue"),x=x||`update:${t.toString()}`;const y=A=>a?typeof a=="function"?a(A):NS(A):A,_=()=>DS(e[t])?y(e[t]):f,C=A=>{h?h(A)&&m(x,A):m(x,A)};if(l){const A=_(),E=L(A);let $=!1;return Ee(()=>e[t],T=>{$||($=!0,E.value=y(T),gt(()=>$=!1))}),Ee(E,T=>{!$&&(T!==e[t]||d)&&C(T)},{deep:d}),E}else return pe({get(){return _()},set(A){C(A)}})}const[Rp,jS]=_c("DrawerRoot"),Mp=new WeakMap;function yt(e,t,n=!1){if(!e||!(e instanceof HTMLElement)||!t)return;const s={};Object.entries(t).forEach(([r,o])=>{if(r.startsWith("--")){e.style.setProperty(r,o);return}s[r]=e.style[r],e.style[r]=o}),!n&&Mp.set(e,s)}function xa(e,t){if(!e||!(e instanceof HTMLElement))return;const n=Mp.get(e);n&&(t?e.style[t]=n[t]:Object.entries(n).forEach(([s,r])=>{e.style[s]=r}))}function _a(e,t){const n=window.getComputedStyle(e),s=n.transform||n.webkitTransform||n.mozTransform;let r=s.match(/^matrix3d\((.+)\)$/);return r?Number.parseFloat(r[1].split(", ")[Tt(t)?13:12]):(r=s.match(/^matrix\((.+)\)$/),r?Number.parseFloat(r[1].split(", ")[Tt(t)?5:4]):null)}function FS(e){return 8*(Math.log(e+1)-2)}function Tt(e){switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}}const lt={DURATION:.5,EASE:[.32,.72,0,1]},Lp=.4;function zS({activeSnapPoint:e,snapPoints:t,drawerRef:n,overlayRef:s,fadeFromIndex:r,onSnapPointChange:o,direction:i}){const a=L(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);function l(){a.value={innerWidth:window.innerWidth,innerHeight:window.innerHeight}}Ke(()=>{typeof window<"u"&&window.addEventListener("resize",l)}),hs(()=>{typeof window<"u"&&window.removeEventListener("resize",l)});const u=pe(()=>(t.value&&e.value===t.value[t.value.length-1])??null),d=pe(()=>t.value&&t.value.length>0&&((r==null?void 0:r.value)||(r==null?void 0:r.value)===0)&&!Number.isNaN(r==null?void 0:r.value)&&t.value[(r==null?void 0:r.value)??-1]===e.value||!t.value),f=pe(()=>{var C;return((C=t.value)==null?void 0:C.findIndex(A=>A===e.value))??null}),h=pe(()=>{var C;return((C=t.value)==null?void 0:C.map(A=>{const E=typeof A=="string";let $=0;if(E&&($=Number.parseInt(A,10)),Tt(i.value)){const I=E?$:a.value?A*a.value.innerHeight:0;return a.value?i.value==="bottom"?a.value.innerHeight-I:-a.value.innerHeight+I:I}const T=E?$:a.value?A*a.value.innerWidth:0;return a.value?i.value==="right"?a.value.innerWidth-T:-a.value.innerWidth+T:T}))??[]}),p=pe(()=>{var C;return f.value!==null?(C=h.value)==null?void 0:C[f.value]:null}),m=C=>{var A,E,$,T;const I=((A=h.value)==null?void 0:A.findIndex(R=>R===C))??null;gt(()=>{var R;o(I,h.value),yt((R=n.value)==null?void 0:R.$el,{transition:`transform ${lt.DURATION}s cubic-bezier(${lt.EASE.join(",")})`,transform:Tt(i.value)?`translate3d(0, ${C}px, 0)`:`translate3d(${C}px, 0, 0)`})}),h.value&&I!==h.value.length-1&&I!==(r==null?void 0:r.value)?yt((E=s.value)==null?void 0:E.$el,{transition:`opacity ${lt.DURATION}s cubic-bezier(${lt.EASE.join(",")})`,opacity:"0"}):yt(($=s.value)==null?void 0:$.$el,{transition:`opacity ${lt.DURATION}s cubic-bezier(${lt.EASE.join(",")})`,opacity:"1"}),e.value=I!==null?((T=t.value)==null?void 0:T[I])??null:null};Ee([e,h,t],()=>{var C;if(e.value){const A=((C=t.value)==null?void 0:C.findIndex(E=>E===e.value))??-1;h.value&&A!==-1&&typeof h.value[A]=="number"&&m(h.value[A])}},{immediate:!0});function x({draggedDistance:C,closeDrawer:A,velocity:E,dismissible:$}){var T,I,R;if(r.value===void 0)return;const q=i.value==="bottom"||i.value==="right"?(p.value??0)-C:(p.value??0)+C,G=f.value===r.value-1,K=f.value===0,H=C>0;if(G&&yt((T=s.value)==null?void 0:T.$el,{transition:`opacity ${lt.DURATION}s cubic-bezier(${lt.EASE.join(",")})`}),E>2&&!H){$?A():m(h.value[0]);return}if(E>2&&H&&h&&t.value){m(h.value[t.value.length-1]);return}const ee=(I=h.value)==null?void 0:I.reduce((W,Q)=>typeof W!="number"||typeof Q!="number"?W:Math.abs(Q-q)<Math.abs(W-q)?Q:W),ce=Tt(i.value)?window.innerHeight:window.innerWidth;if(E>Lp&&Math.abs(C)<ce*.4){const W=H?1:-1;if(W>0&&u){m(h.value[(((R=t.value)==null?void 0:R.length)??0)-1]);return}if(K&&W<0&&$&&A(),f.value===null)return;m(h.value[f.value+W]);return}m(ee)}function y({draggedDistance:C}){var A;if(p.value===null)return;const E=i.value==="bottom"||i.value==="right"?p.value-C:p.value+C;(i.value==="bottom"||i.value==="right")&&E<h.value[h.value.length-1]||(i.value==="top"||i.value==="left")&&E>h.value[h.value.length-1]||yt((A=n.value)==null?void 0:A.$el,{transform:Tt(i.value)?`translate3d(0, ${E}px, 0)`:`translate3d(${E}px, 0, 0)`})}function _(C,A){if(!t.value||typeof f.value!="number"||!h.value||r.value===void 0)return null;const E=f.value===r.value-1;if(f.value>=r.value&&A)return 0;if(E&&!A)return 1;if(!d.value&&!E)return null;const $=E?f.value+1:f.value-1,T=E?h.value[$]-h.value[$-1]:h.value[$+1]-h.value[$],I=C/Math.abs(T);return E?1-I:I}return{isLastSnapPoint:u,shouldFade:d,getPercentageDragged:_,activeSnapPointIndex:f,onRelease:x,onDrag:y,snapPointsOffset:h}}let jo=null;function qS(e){const{isOpen:t,modal:n,nested:s,hasBeenOpened:r}=e,o=L(typeof window<"u"?window.location.href:""),i=L(0);function a(){if(jo===null&&t.value){jo={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height};const{scrollX:u,innerHeight:d}=window;document.body.style.position="fixed",document.body.style.top=`-${i.value}px`,document.body.style.left=`-${u}px`,document.body.style.right="0px",document.body.style.height="auto",setTimeout(()=>{requestAnimationFrame(()=>{const f=d-window.innerHeight;f&&i.value>=d&&(document.body.style.top=`-${i.value+f}px`)})},300)}}function l(){if(jo!==null){const u=-Number.parseInt(document.body.style.top,10),d=-Number.parseInt(document.body.style.left,10);Object.assign(document.body.style,jo),requestAnimationFrame(()=>{if(o.value!==window.location.href){o.value=window.location.href;return}window.scrollTo(d,u)}),jo=null}}return Ke(()=>{function u(){i.value=window.scrollY}u(),window.addEventListener("scroll",u),Kt(()=>{window.removeEventListener("scroll",u)})}),Ee([t,r,o],()=>{s.value||!r.value||(t.value?(!window.matchMedia("(display-mode: standalone)").matches&&a(),n.value||setTimeout(()=>{l()},500)):l())}),{restorePositionSetting:l}}const BS=.25,US=100,Dp=8,er=16,VS=26,Np="vaul-dragging";function HS(e,t){return e&&e.value?e:t}function WS(e){const{emitDrag:t,emitRelease:n,emitClose:s,emitOpenChange:r,open:o,dismissible:i,nested:a,modal:l,shouldScaleBackground:u,scrollLockTimeout:d,closeThreshold:f,activeSnapPoint:h,fadeFromIndex:p,direction:m}=e,x=L(o.value??!1),y=L(!1),_=L(!1),C=L(!1),A=L(!1),E=L(null),$=L(null),T=L(null),I=L(null),R=L(null),q=L(!0),G=L(null),K=L(0),H=L(!1);L(0);const ee=L(null);L(0);const ce=pe(()=>{var P;return((P=ee.value)==null?void 0:P.$el.getBoundingClientRect().height)||0}),W=HS(e.snapPoints,L(void 0)),{activeSnapPointIndex:Q,onRelease:J,snapPointsOffset:ne,onDrag:ke,shouldFade:qe,getPercentageDragged:Ce}=zS({snapPoints:W,activeSnapPoint:h,drawerRef:ee,fadeFromIndex:p,overlayRef:E,onSnapPointChange:Re,direction:m});function Re(P,N){W.value&&P===N.length-1&&($.value=new Date)}const{restorePositionSetting:Be}=qS({isOpen:x,modal:l,nested:a,hasBeenOpened:y});function Ne(){return(window.innerWidth-VS)/window.innerWidth}function X(P,N){var Z;if(!P)return!1;let le=P;const ie=(Z=window.getSelection())==null?void 0:Z.toString(),he=ee.value?_a(ee.value.$el,m.value):null,ae=new Date;if(le.hasAttribute("data-vaul-no-drag")||le.closest("[data-vaul-no-drag]"))return!1;if(m.value==="right"||m.value==="left")return!0;if($.value&&ae.getTime()-$.value.getTime()<500)return!1;if(he!==null&&(m.value==="bottom"?he>0:he<0))return!0;if(ie&&ie.length>0)return!1;if(R.value&&ae.getTime()-R.value.getTime()<d.value&&he===0||N)return R.value=ae,!1;for(;le;){if(le.scrollHeight>le.clientHeight){if(le.scrollTop!==0)return R.value=new Date,!1;if(le.getAttribute("role")==="dialog")return!0}le=le.parentNode}return!0}function de(P){!i.value&&!W.value||ee.value&&!ee.value.$el.contains(P.target)||(C.value=!0,T.value=new Date,P.target.setPointerCapture(P.pointerId),K.value=Tt(m.value)?P.clientY:P.clientX)}function Se(P){var N,Z,le,ie,he,ae;if(ee.value&&C.value){const te=m.value==="bottom"||m.value==="right"?1:-1,oe=(K.value-(Tt(m.value)?P.clientY:P.clientX))*te,ye=oe>0,ge=W.value&&!i.value&&!ye;if(ge&&Q.value===0)return;const De=Math.abs(oe),ue=document.querySelector("[vaul-drawer-wrapper]");let We=De/ce.value;const ct=Ce(De,ye);if(ct!==null&&(We=ct),ge&&We>=1||!q.value&&!X(P.target,ye))return;if((N=ee==null?void 0:ee.value)==null||N.$el.classList.add(Np),q.value=!0,yt((Z=ee.value)==null?void 0:Z.$el,{transition:"none"}),yt((le=E.value)==null?void 0:le.$el,{transition:"none"}),W.value&&ke({draggedDistance:oe}),ye&&!W.value){const _t=FS(oe),Wt=Math.min(_t*-1,0)*te;yt((ie=ee.value)==null?void 0:ie.$el,{transform:Tt(m.value)?`translate3d(0, ${Wt}px, 0)`:`translate3d(${Wt}px, 0, 0)`});return}const mt=1-We;if((qe.value||p.value&&Q.value===p.value-1)&&(t(We),yt((he=E.value)==null?void 0:he.$el,{opacity:`${mt}`,transition:"none"},!0)),ue&&E.value&&u.value){const _t=Math.min(Ne()+We*(1-Ne()),1),Wt=8-We*8,At=Math.max(0,14-We*14);yt(ue,{borderRadius:`${Wt}px`,transform:Tt(m.value)?`scale(${_t}) translate3d(0, ${At}px, 0)`:`scale(${_t}) translate3d(${At}px, 0, 0)`,transition:"none"},!0)}if(!W.value){const _t=De*te;yt((ae=ee.value)==null?void 0:ae.$el,{transform:Tt(m.value)?`translate3d(0, ${_t}px, 0)`:`translate3d(${_t}px, 0, 0)`})}}}function _e(){var P;if(!ee.value)return;const N=document.querySelector("[vaul-drawer-wrapper]"),Z=_a(ee.value.$el,m.value);yt(ee.value.$el,{transform:"translate3d(0, 0, 0)",transition:`transform ${lt.DURATION}s cubic-bezier(${lt.EASE.join(",")})`}),yt((P=E.value)==null?void 0:P.$el,{transition:`opacity ${lt.DURATION}s cubic-bezier(${lt.EASE.join(",")})`,opacity:"1"}),u.value&&Z&&Z>0&&x.value&&yt(N,{borderRadius:`${Dp}px`,overflow:"hidden",...Tt(m.value)?{transform:`scale(${Ne()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Ne()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${lt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${lt.EASE.join(",")})`},!0)}function $e(){var P;ee.value&&(s(),yt(ee.value.$el,{transform:Tt(m.value)?`translate3d(0, ${m.value==="bottom"?"100%":"-100%"}, 0)`:`translate3d(${m.value==="right"?"100%":"-100%"}, 0, 0)`,transition:`transform ${lt.DURATION}s cubic-bezier(${lt.EASE.join(",")})`}),yt((P=E.value)==null?void 0:P.$el,{opacity:"0",transition:`opacity ${lt.DURATION}s cubic-bezier(${lt.EASE.join(",")})`}),Te(!1),window.setTimeout(()=>{_.value=!1,x.value=!1},300),window.setTimeout(()=>{W.value&&(h.value=W.value[0])},lt.DURATION*1e3))}ds(()=>{if(!x.value&&u.value&&LS){const P=setTimeout(()=>{xa(document.body)},200);return()=>clearTimeout(P)}}),Kt(()=>{Te(!1),Be()});function Ae(P){if(!C.value||!ee.value)return;ee.value.$el.classList.remove(Np),q.value=!1,C.value=!1,I.value=new Date;const N=_a(ee.value.$el,m.value);if(!X(P.target,!1)||!N||Number.isNaN(N)||T.value===null)return;const Z=I.value.getTime()-T.value.getTime(),le=K.value-(Tt(m.value)?P.clientY:P.clientX),ie=Math.abs(le)/Z;if(ie>.05&&(A.value=!0,window.setTimeout(()=>{A.value=!1},200)),W.value){const ae=m.value==="bottom"||m.value==="right"?1:-1;J({draggedDistance:le*ae,closeDrawer:$e,velocity:ie,dismissible:i.value}),n(!0);return}if(m.value==="bottom"||m.value==="right"?le>0:le<0){_e(),n(!0);return}if(ie>Lp){$e(),n(!1);return}const he=Math.min(ee.value.$el.getBoundingClientRect().height??0,window.innerHeight);if(N>=he*f.value){$e(),n(!1);return}n(!0),_e()}Ee(x,P=>{P&&($.value=new Date,Te(!0)),r(P)},{immediate:!0}),Ee(o,P=>{P?(x.value=P,y.value=!0):$e()},{immediate:!0});function Te(P){const N=document.querySelector("[vaul-drawer-wrapper]");!N||!u.value||(P?(yt(document.body,{background:document.body.style.backgroundColor||document.body.style.background}),yt(document.body,{background:"black"},!0),yt(N,{borderRadius:`${Dp}px`,overflow:"hidden",...Tt(m.value)?{transform:`scale(${Ne()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Ne()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${lt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${lt.EASE.join(",")})`})):(xa(N,"overflow"),xa(N,"transform"),xa(N,"borderRadius"),yt(N,{transitionProperty:"transform, border-radius",transitionDuration:`${lt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${lt.EASE.join(",")})`})))}function O(P){var N,Z;const le=P?(window.innerWidth-er)/window.innerWidth:1,ie=P?-er:0;G.value&&window.clearTimeout(G.value),yt((N=ee.value)==null?void 0:N.$el,{transition:`transform ${lt.DURATION}s cubic-bezier(${lt.EASE.join(",")})`,transform:`scale(${le}) translate3d(0, ${ie}px, 0)`}),!P&&(Z=ee.value)!=null&&Z.$el&&(G.value=window.setTimeout(()=>{var he,ae;const te=_a((he=ee.value)==null?void 0:he.$el,m.value);yt((ae=ee.value)==null?void 0:ae.$el,{transition:"none",transform:Tt(m.value)?`translate3d(0, ${te}px, 0)`:`translate3d(${te}px, 0, 0)`})},500))}function F(P){var N;if(P<0)return;const Z=Tt(m.value)?window.innerHeight:window.innerWidth,le=(Z-er)/Z,ie=le+P*(1-le),he=-er+P*er;yt((N=ee.value)==null?void 0:N.$el,{transform:Tt(m.value)?`scale(${ie}) translate3d(0, ${he}px, 0)`:`scale(${ie}) translate3d(${he}px, 0, 0)`,transition:"none"})}function z(P){var N;const Z=Tt(m.value)?window.innerHeight:window.innerWidth,le=P?(Z-er)/Z:1,ie=P?-er:0;P&&yt((N=ee.value)==null?void 0:N.$el,{transition:`transform ${lt.DURATION}s cubic-bezier(${lt.EASE.join(",")})`,transform:Tt(m.value)?`scale(${le}) translate3d(0, ${ie}px, 0)`:`scale(${le}) translate3d(${ie}px, 0, 0)`})}return{open:o,isOpen:x,modal:l,keyboardIsOpen:H,hasBeenOpened:y,isVisible:_,drawerRef:ee,drawerHeightRef:ce,overlayRef:E,isDragging:C,dragStartTime:T,isAllowedToDrag:q,snapPoints:W,activeSnapPoint:h,pointerStart:K,dismissible:i,snapPointsOffset:ne,direction:m,shouldFade:qe,fadeFromIndex:p,shouldScaleBackground:u,onPress:de,onDrag:Se,onRelease:Ae,closeDrawer:$e,onNestedDrag:F,onNestedRelease:z,onNestedOpenChange:O,emitClose:s,emitDrag:t,emitRelease:n,emitOpenChange:r,nested:a}}const Lr=Lt({__name:"DrawerRoot",props:{activeSnapPoint:{default:void 0},closeThreshold:{default:BS},shouldScaleBackground:{type:Boolean,default:void 0},scrollLockTimeout:{default:US},fixed:{type:Boolean,default:void 0},dismissible:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:void 0},nested:{type:Boolean,default:!1},direction:{default:"bottom"},snapPoints:{default:void 0},fadeFromIndex:{default:void 0}},emits:["drag","release","close","update:open","update:activeSnapPoint","animationEnd"],setup(e,{expose:t,emit:n}){const s=e,r=n;ed();const o=pe(()=>s.fadeFromIndex??(s.snapPoints&&s.snapPoints.length-1)),i=Op(s,"open",r,{defaultValue:s.defaultOpen,passive:s.open===void 0}),a=Op(s,"activeSnapPoint",r,{passive:s.activeSnapPoint===void 0}),l={emitDrag:m=>r("drag",m),emitRelease:m=>r("release",m),emitClose:()=>r("close"),emitOpenChange:m=>{r("update:open",m),setTimeout(()=>{r("animationEnd",m)},lt.DURATION*1e3)}},{closeDrawer:u,hasBeenOpened:d,modal:f,isOpen:h}=jS(WS({...l,...Ct(s),activeSnapPoint:a,fadeFromIndex:o,open:i}));function p(m){if(i.value!==void 0){l.emitOpenChange(m);return}m?(d.value=!0,h.value=m):u()}return t({open:h}),(m,x)=>(v(),re(b(mS),{open:b(h),modal:b(f),"onUpdate:open":p},{default:xe(()=>[bt(m.$slots,"default",{open:b(h)})]),_:3},8,["open","modal"]))}}),Tc=Lt({__name:"DrawerRootNested",props:{activeSnapPoint:{},closeThreshold:{},shouldScaleBackground:{type:Boolean},scrollLockTimeout:{},fixed:{type:Boolean},dismissible:{type:Boolean},modal:{type:Boolean},open:{type:Boolean},defaultOpen:{type:Boolean},nested:{type:Boolean},direction:{},snapPoints:{},fadeFromIndex:{}},emits:["drag","release","close","update:open","update:activeSnapPoint","animationEnd"],setup(e,{emit:t}){const n=e,s=t,{onNestedDrag:r,onNestedOpenChange:o,onNestedRelease:i}=Rp();function a(){o(!1)}function l(f){r(f)}function u(f){f&&o(f),s("update:open",f)}const d=sS(n,s);return(f,h)=>(v(),re(Lr,an(b(d),{nested:"",onClose:a,onDrag:l,onRelease:b(i),"onUpdate:open":u}),{default:xe(()=>[bt(f.$slots,"default")]),_:3},16,["onRelease"]))}}),$s=Lt({__name:"DrawerContent",setup(e){const{open:t,isOpen:n,isVisible:s,snapPointsOffset:r,drawerRef:o,onPress:i,onDrag:a,onRelease:l,modal:u,emitOpenChange:d,dismissible:f,keyboardIsOpen:h,closeDrawer:p,direction:m}=Rp(),x=pe(()=>r.value&&r.value.length>0?`${r.value[0]}px`:"0");function y(_){if(!u.value||_.defaultPrevented){_.preventDefault();return}h.value&&(h.value=!1),_.preventDefault(),f.value&&d(!1),!(!f.value||t.value!==void 0)&&p()}return Ee(n,_=>{_&&setTimeout(()=>{s.value=!0},1)},{immediate:!0}),(_,C)=>(v(),re(b(RS),{ref_key:"drawerRef",ref:o,"vaul-drawer":"","vaul-drawer-direction":b(m),"vaul-drawer-visible":b(s)?"true":"false",style:kt({"--snap-point-height":x.value}),onPointerdown:b(i),onPointermove:b(a),onPointerup:b(l),onPointerDownOutside:y,onEscapeKeyDown:C[0]||(C[0]=A=>{b(f)||A.preventDefault()})},{default:xe(()=>[bt(_.$slots,"default")]),_:3},8,["vaul-drawer-direction","vaul-drawer-visible","style","onPointerdown","onPointermove","onPointerup"]))}}),GS={class:"drawer-form",tabindex:"-1"},KS={class:"relative pt-[40px] bg-white rounded-t-2xl overflow-hidden"},QS=c("div",{tabindex:"-1",class:"w-10 h-[5px] rounded-full absolute bg-gray-300 left-1/2 -translate-x-1/2 top-4 cursor-grab"},null,-1),jp={__name:"FormDrawer",props:vr(["target"],{open:{},openModifiers:{},success:{},successModifiers:{}}),emits:["update:open","update:success"],setup(e){const t=ed(),n=Ls(e,"open"),s=Ls(e,"success"),r=L(!1),o=async i=>{await gt(),r.value=!i};return(i,a)=>(v(),k("div",GS,[U(b(Lr),{open:n.value,modal:!1,"should-scale-background":!1,"onUpdate:open":o},{default:xe(()=>[U(b(Ss),{to:e.target},{default:xe(()=>[c("div",{onClick:a[0]||(a[0]=l=>n.value=!1),class:se(["drawer-overlay-custom",{"drawer-overlay-custom--open":n.value}])},null,2),U(b($s),{"aria-describedby":"dialog-description",class:"absolute inset-x-0 bottom-0 z-50 w-full outline-none border-none",tabindex:"-1"},{default:xe(()=>[U(b(ya),{class:"sr-only"},{default:xe(()=>[Fe("DrawerTitle")]),_:1}),U(b(ba),{class:"sr-only"},{default:xe(()=>[Fe("DrawerDescription")]),_:1}),bt(i.$slots,"fields")]),_:3})]),_:3},8,["to"])]),_:3},8,["open"]),b(t).success&&r.value?(v(),re(b(Lr),{key:0,modal:!1,"should-scale-background":!1,open:s.value},{default:xe(()=>[U(b(Ss),{to:e.target},{default:xe(()=>[c("div",{onClick:a[1]||(a[1]=l=>s.value=!1),class:se(["drawer-overlay-custom",{"drawer-overlay-custom--open":s.value}])},null,2),U(b($s),{class:"absolute inset-x-0 bottom-0 z-50 w-full outline-none border-none",tabindex:"-1"},{default:xe(()=>[U(b(ya),{class:"sr-only"},{default:xe(()=>[Fe("DrawerTitle")]),_:1}),U(b(ba),{class:"sr-only"},{default:xe(()=>[Fe("DrawerDescription")]),_:1}),c("div",KS,[QS,bt(i.$slots,"success")])]),_:3})]),_:3},8,["to"])]),_:3},8,["open"])):B("",!0)]))}},JS={tabindex:"-1",class:"relative pb-4 pt-3 bg-white rounded-t-2xl overflow-hidden"},XS=c("div",{class:"flex justify-center"},[c("div",{tabindex:"-1",class:"w-10 h-[4px] rounded-full bg-gray-500 cursor-grab"})],-1),ZS={key:0,class:"py-2 relative"},YS={class:"font-medium text-[18px] text-center tracking-wide text-gray-900"},eC={class:"px-5"},tC={class:"flex items-center space-x-3"},nC=c("button",{type:"submit",tabindex:"-1",class:"flex items-center justify-center h-12 bg-primary text-white border border-gray-200 w-full rounded-lg"}," Gi yu cu ",-1),sC={class:"pb-6 pt-2"},rC={class:"text-[32px] flex items-center justify-center rounded-full"},oC=c("div",{class:"text-center mt-3 pl-2"},[c("div",{class:"font-medium text-gray-600 text-[18px]"}," Cm n bn  lin h. "),c("div",{class:"text-[14px] text-gray-500 mt-1"}," Chng ti s phn hi li trong thi gian sm nht. ")],-1),iC={__name:"FormContact",props:{form:{type:Object},message:{type:Object},chatViewRef:{type:Object}},setup(e){const{widgets:t}=Js(),{getStorage:n}=Bs();L([]);const s=L(!1),r=async()=>{if(s.value)return;s.value=!0;const o=n("easychatgpt_conversations",D.handle),i=t.value.contact.fields.reduce((d,f)=>({...d,[f.name]:f.value}),{});if(!o)return;const a={status:"submitted",message_id:t.value.contact.message_id,conversation_id:o,submission_data:i},{data:l,status:u}=await ze.submission.submitWidget({widgetId:t.value.contact.id,formData:a});u===200&&(D.isOpenFormContact=!1,D.isSuccessFormContact=!0,t.value.contact.is_finish=1,t.value.contact.submission_data=l.submission_data,t.value.contact.fields.forEach(d=>{d.value=""})),s.value=!1};return(o,i)=>(v(),re(jp,{target:e.chatViewRef,open:b(D).isOpenFormContact,"onUpdate:open":i[3]||(i[3]=a=>b(D).isOpenFormContact=a),success:b(D).isSuccessFormContact,"onUpdate:success":i[4]||(i[4]=a=>b(D).isSuccessFormContact=a)},{fields:xe(()=>{var a;return[c("div",JS,[XS,(a=b(t).contact)!=null&&a.name?(v(),k("div",ZS,[c("div",YS,V(b(t).contact.name),1)])):B("",!0),c("div",eC,[c("form",{onSubmit:i[1]||(i[1]=cn(l=>r(),["prevent"])),class:"space-y-4",tabindex:"-1"},[(v(!0),k(be,null,Ie(b(t).contact.fields,(l,u)=>(v(),re(_p,{class:"px-0",field:l,key:u,modelValue:l.value,"onUpdate:modelValue":d=>l.value=d},null,8,["field","modelValue","onUpdate:modelValue"]))),128)),c("div",tC,[c("button",{onClick:i[0]||(i[0]=l=>b(D).isOpenFormContact=!1),type:"button",tabindex:"-1",class:"flex items-center justify-center h-12 bg-white hover:bg-gray-100 border border-gray-200 w-full rounded-lg text-gray-600"}," Quay li "),nC])],32)])])]}),success:xe(()=>[c("div",null,[c("div",sC,[c("div",rC,[U(b(cc),{"stroke-width":"1",size:"50",class:"text-gray-500"})]),oC]),c("button",{onClick:i[2]||(i[2]=a=>b(D).isSuccessFormContact=!1),class:"p-3 w-full text-sm font-medium text-primary flex items-center justify-center border-t border-t-gray-200 outline-none focus:outline-none"}," Tip Tc ")])]),_:1},8,["target","open","success"]))}};function wa(){var s;const{getStorage:e}=Bs(),t=((s=D.bot)==null?void 0:s.config.apiHost)||D.apiDomain;return{update:async({formData:r,status:o})=>{var u;const i=e("easychatgpt_conversations",D.handle),a=D.forms&&D.forms.order&&D.forms.order.id;if(!a||!i)throw new Error("Missing data: formId or conversationId is required");let{submission_data:l}=await ut.post(`${t}/api/bots/${D.handle}/widgets/${a}/submission`,{status:o,conversation_id:i,submission_data:r}).then(d=>d.data);return l?(D.isOpenForm=!0,D.selectedForm=l,(!l.items||((u=l.items)==null?void 0:u.length)===0)&&(D.isOpenForm=!1,D.totalFormItems=0),localStorage.setItem(D.localStorageFormOrder,JSON.stringify(l)),{success:!0,data:l}):{success:!1,data:null}}}}const Fp=e=>(In("data-v-cf69952f"),e=e(),Pn(),e),aC={class:"ecg-quantity"},lC=["disabled"],cC=[Fp(()=>c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-minus"},[c("path",{d:"M5 12h14"})],-1))],uC=["min","max","step","disabled"],dC=["disabled"],fC=[Fp(()=>c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-plus"},[c("path",{d:"M5 12h14"}),c("path",{d:"M12 5v14"})],-1))],zp=nt({__name:"FieldQuantity",props:vr({min:{type:Number,default:1},max:{type:Number,default:99},disabled:{type:Boolean,default:!1},step:{type:Number,default:1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Number.isNaN||window.isNaN,n=/^-?(?:\d+|\d+\.\d+|\.\d+)(?:[eE][-+]?\d+)?$/,s=/\.\d*(?:0|9){10}\d*$/,r=(x,y=1e11)=>s.test(String(x))?Math.round(x*y)/y:x,o=e,i=Ls(e,"modelValue"),a=L(null),l=pe(()=>t(i.value)||i.value<o.max),u=pe(()=>t(i.value)||i.value>o.min);function d(){if(!u.value)return;let x=i.value;t(x)&&(x=o.min||1),m(r(x-o.step))}function f(){if(!l.value)return;let x=i.value;t(x)&&(x=o.min||1),m(r(x+o.step))}function h(x){m(x.target.value)}function p(x){const y=x.clipboardData||window.clipboardData;y&&!n.test(y.getData("text"))&&x.preventDefault()}function m(x){let y=typeof x!="number"?parseFloat(x):x;t(y)?(y=o.min||1,a.value.value=y):o.min<=o.max&&(y=Math.min(o.max,Math.max(o.min,y))),i.value=y}return(x,y)=>(v(),k("div",aC,[c("button",{type:"button",class:"ecg-quantity__button ecg-quantity__button--minus",disabled:e.disabled||!u.value,onClick:cn(d,["prevent"])},cC,8,lC),Ot(c("input",{ref_key:"input",ref:a,type:"number",class:"ecg-quantity__input","onUpdate:modelValue":y[0]||(y[0]=_=>i.value=_),min:e.min,max:e.max,step:e.step,autocomplete:"off",disabled:e.disabled||!u.value&&!l.value,onChange:h,onPaste:p,tabindex:"-1"},null,40,uC),[[ln,i.value]]),c("button",{type:"button",class:"ecg-quantity__button ecg-quantity__button--plus",disabled:e.disabled||!l.value,onClick:cn(f,["prevent"])},fC,8,dC)]))}},[["__scopeId","data-v-cf69952f"]]),hC={class:"flex space-x-2 w-full"},pC=["src","alt"],mC=["src","alt"],gC={class:"flex-1"},vC={class:"flex"},yC={class:"flex-1 mr-1 text-gray-900 text-sm font-medium line-clamp-2"},bC={class:"text-sm font-ligh text-red-500 font-medium"},xC={__name:"CardProductOrder",props:["item"],setup(e){const t=e,n=kv(),s=L(!1),r=pe(()=>{var d;return((d=D.bot)==null?void 0:d.config.ui.logo)||D.appDomain+"/link.png"}),o=L(t.item.quantity),i=pe(()=>Number(t.item.price)*o.value),a=async d=>{let f=D.selectedForm;f&&(f.items.forEach(h=>{h.sku===t.item.sku&&(h.quantity=d)}),f={...f,items:f.items}),wa().update({formData:f,status:"draft"})},l=async()=>{let d=D.selectedForm;if(d){const f=d.items.filter(h=>{var p,m;return((p=h.sku)==null?void 0:p.toString())!==((m=t.item.sku)==null?void 0:m.toString())});d={...d,items:f}}await wa().update({formData:d,status:"draft"}),n.contentFormRef&&(n.contentFormRef.style.height="auto")},u=L(null);return Ee(o,d=>{clearTimeout(u.value),a(Number(d))}),(d,f)=>(v(),k("div",hC,[c("div",{class:se(["w-[90px] flex-shrink-0 h-fit rounded overflow-hidden",(s.value||!e.item.image)&&"aspect-[3/2] flex items-center justify-center border border-gray-100 rounded"])},[e.item.image?(v(),k("img",{key:0,src:e.item.image,alt:e.item.title,class:"w-full h-full object-contain",onError:f[0]||(f[0]=h=>(h.target.src=r.value,h.target.className="max-w-[24px]",s.value=!0))},null,40,pC)):(v(),k("img",{key:1,src:r.value,alt:e.item.title,class:"max-w-[24px] w-full h-full object-contain"},null,8,mC))],2),c("div",gC,[c("div",vC,[c("h3",yC,V(e.item.title),1)]),c("div",null,[c("div",bC,V(b(Qe)(i.value)),1),U(zp,{modelValue:o.value,"onUpdate:modelValue":f[1]||(f[1]=h=>o.value=h),class:"mt-1.5"},null,8,["modelValue"])])]),c("div",null,[c("button",{onClick:f[2]||(f[2]=h=>l()),class:"text-gray-400 hover:text-red-400 size-[24px] hover:bg-red-50 flex items-center justify-center rounded"},[U(b(op),{size:"16"})])])]))}},_C={},wC={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"-0.5 -0.5 16 16","stroke-linecap":"round","stroke-linejoin":"round",stroke:"currentColor",height:"16",width:"16",class:"text-gray-500"},kC=[c("path",{d:"M2.5 13.125h10M3.5412500000000002 8.241875A1.42375 1.42375 0 0 0 3.125 9.248125V11.25h2.014375c0.3775 0 0.739375 -0.15 1.00625 -0.41750000000000004l5.9375 -5.940625000000001a1.42375 1.42375 0 0 0 0 -2.0125l-0.5862499999999999 -0.5874999999999999a1.4231250000000002 1.4231250000000002 0 0 0 -2.01375 0.000625z","stroke-width":"1"},null,-1)];function SC(e,t){return v(),k("svg",wC,kC)}const CC=nt(_C,[["render",SC]]);function $C(e,t){const n=t.split(":")[0],s=t.split(":")[1]??null;switch(n){case"array":return Array.isArray(e);case"required":return!!e;case"email":const r=/^[\w.!?#$%&'=~|{}`+*^][\w\-.!?#$%&'=~|{}`+*^]*@((xn--)?[\w]+([-][\w]+)*\.)+[a-z]{2,}$/i,o=e&&!e.includes("@gnail")&&!e.includes("@gmai.");return e&&r.test(e)&&o;case"date":return new Date(e)!=="Invalid Date"&&!isNaN(new Date(e));case"string":return typeof e=="string";case"phone":return/^(84|19|0[2|3|5|7|8|9])\d{8}$/g.test(e);case"in":const l=s.split(",");return Array.isArray(e)?e.every(u=>l.includes(u.toString())):e&&l.includes(e.toString());case"integer":return!isNaN(e);case"min":return e.length>=parseInt(s);case"max":return e.length<=parseInt(s);default:return!0}}function qp(e,t){let n={};for(const s of Object.entries(e))Bp(s[1],t[s[0]])||(n[s[0]]="");return n}function Bp(e,t){if(t===void 0)return!0;let n=!0;for(const s of t.split("|"))if(!$C(e,s)){n=!1;break}return n}const TC={class:"ecg-form-wrapper"},AC=["type"],EC=["type"],IC=["value"],PC=["value"],OC={key:3,class:"flex items-center space-x-4"},RC={class:"ecg-form-radio"},MC=["id","name","value"],LC=c("div",{class:"checkmark"},null,-1),DC=["for"],NC={key:4,class:"text-xs text-red-500 pl-1 absolute left-0 bottom-0 translate-y-full"},$n={__name:"FormField",props:vr({field:{type:Object,required:!0},classField:{type:[String,Boolean]}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=Ls(e,"modelValue"),s=L(""),r=pe(()=>{var o;return(o=t.field.validate)==null?void 0:o.includes("required")});return Ee(()=>n.value,o=>{let i=`${t.field.label?t.field.label:""} khng hp l.`;r.value&&!o&&(i=`${t.field.label?t.field.label:""} l bt buc.`);const a=Bp(o,t.field.validate);s.value=a===!0?"":i}),(o,i)=>(v(),k("div",TC,[e.field.type==="tel"||e.field.type==="text"||e.field.type==="email"||e.field.type==="number"?Ot((v(),k("input",an({key:0,type:e.field.type},{...e.field,placeholder:e.field.label+`${r.value?" *":""}`,autocomplete:"off",required:e.field.validate==="required"},{class:["ecg-form-field",e.classField],tabindex:"-1","onUpdate:modelValue":i[0]||(i[0]=a=>n.value=a)}),null,16,AC)),[[A0,n.value]]):e.field.type==="textarea"?Ot((v(),k("textarea",an({key:1,type:e.field.type},{...e.field,rows:e.field.rows??3,placeholder:e.field.label+`${r.value?" *":""}`,autocomplete:"off",required:e.field.validate==="required"},{class:["ecg-form-field",e.classField],tabindex:"-1","onUpdate:modelValue":i[1]||(i[1]=a=>n.value=a)}),null,16,EC)),[[ln,n.value]]):e.field.type==="select"?Ot((v(),k("select",{key:n.value,"onUpdate:modelValue":i[2]||(i[2]=a=>n.value=a),class:se(["ecg-form-field",[n.value?"has-value":"none-value",e.classField]]),tabindex:"-1"},[c("option",{disabled:"",value:n.value===void 0?void 0:""},V(e.field.label),9,IC),(v(!0),k(be,null,Ie(e.field.options,a=>(v(),k("option",{value:e.field.keyValue?a[e.field.keyValue]:a},V(e.field.keyLabel?a[e.field.keyLabel]:a),9,PC))),256))],2)),[[Gd,n.value]]):e.field.type==="checkbox"?(v(),k("div",OC,[(v(!0),k(be,null,Ie(e.field.options,(a,l)=>(v(),k("div",RC,[Ot(c("input",{type:"radio","onUpdate:modelValue":i[3]||(i[3]=u=>n.value=u),id:`${e.field.name}-${l}`,name:e.field.name,value:a},null,8,MC),[[Wd,n.value]]),LC,c("label",{for:`${e.field.name}-${l}`},V(a),9,DC)]))),256))])):B("",!0),s.value?(v(),k("div",NC,V(s.value),1)):B("",!0)]))}},jC={tabindex:"-1",class:"relative pb-4 pt-3 bg-white rounded-t-2xl overflow-hidden outline-none"},FC=c("div",{class:"flex justify-center"},[c("div",{tabindex:"-1",class:"w-10 h-[4px] rounded-full bg-gray-500 cursor-grab"})],-1),zC={class:"pt-2 pb-3 relative"},qC=c("div",{class:"h-[0.5px] w-full bg-gray-100 absolute bottom-0 inset-x-0"},null,-1),BC={class:"px-5 pt-5"},UC={key:0},VC={class:"flex items-center space-x-2"},HC={class:"flex items-center space-x-2"},WC=c("button",{type:"submit",class:"flex items-center justify-center h-11 bg-primary text-white border border-gray-200 w-full rounded-lg"}," Lu thay i ",-1),GC={key:1},KC={class:"max-h-[208px] overflow-y-auto"},QC={class:"mt-5"},JC={key:0,"aria-label":"add-information",class:"py-0.5 flex items-center justify-center"},XC=c("div",{class:"font-medium text-sm text-gray-500 ml-1"}," Thm a ch ",-1),ZC={key:1,class:"flex items-start justify-between"},YC={class:"text-sm text-gray-500 line-clamp-2"},e$={"aria-label":"edit-info"},t$={class:"mt-5 px-1"},n$={class:"flex items-center justify-between"},s$={class:"text-gray-500 mr-2 text-sm"},r$={class:"text-right text-[16px] font-medium"},o$={class:"text-red-500 text-sm"},i$={class:"bg-white z-20 mt-4"},a$=c("div",{class:"text-gray-500 text-[10px] mt-1.5 text-center"}," Nhn vin s gi t vn gi, khuyn mi chnh xc sau khi t hng ",-1),l$={class:"pb-6 pt-2"},c$={class:"text-[32px] flex items-center justify-center rounded-full"},u$=c("div",{class:"text-center mt-3 pl-2"},[c("div",{class:"font-medium text-gray-600 text-[18px]"}," t hng thnh cng "),c("div",{class:"text-[14px] text-gray-500 mt-1"}," Chng ti s lin h vi qu khch  xc nhn n hng ")],-1),d$={__name:"FormOrder",props:{chatViewRef:{type:Object}},setup(e){var f;const t=((f=D.bot)==null?void 0:f.config.apiHost)||D.apiDomain,n=L(!1),s=L(null),r=pe(()=>{var h,p;return!!((p=(h=D.forms)==null?void 0:h.order)!=null&&p.fields.find(m=>m.name==="gender"||m.label==="Danh xng"))});Ee(()=>D.forms.order,h=>{h&&D.forms.order.fields.forEach(p=>{p.value=""})}),Ee(()=>D.isOpenForm,h=>{h&&(n.value=!1)});const o=pe(()=>{const{gender:h,full_name:p,phone:m,email:x,address:y}=D.selectedForm;return[h?h+" "+p:p,m,x,y].filter(C=>!!C).join(" | ")}),i=pe(()=>{var p;let h=!1;return D.selectedForm?((p=D.forms.order)==null||p.fields.forEach(m=>{D.selectedForm[m.name]&&(h=!0)}),!h):!1}),a=pe(()=>{var p,m;let h=0;return(m=(p=D.selectedForm)==null?void 0:p.items)==null||m.forEach(x=>{h=h+Number(x.price)*x.quantity}),h}),l=async h=>{await gt();const p=h.offsetHeight;s.value.style.height=p?`${p}px`:"auto"},u=async()=>{var x,y;const h=Bi(D.handle);if(!h)return;let p=JSON.parse(localStorage.getItem(D.localStorageFormOrder));p={submission_data:{items:p.items||[]},status:"draft",conversation_id:h},(y=(x=D.forms)==null?void 0:x.order)==null||y.fields.forEach(_=>{p.submission_data[_.name]=_.value});const{submission_data:m}=await ut.post(`${t}/api/bots/${D.handle}/widgets/${D.forms.order.id}/submission`,p).then(_=>_.data);m&&(localStorage.setItem(D.localStorageFormOrder,JSON.stringify(m)),D.selectedForm=m,n.value=!1)},d=async()=>{var y;const h=Bi(D.handle);if(!h)return;let p=JSON.parse(localStorage.getItem(D.localStorageFormOrder));if(p={status:"submitted",conversation_id:h,submission_data:{...p}},await ut.post(`${t}/api/bots/${D.handle}/widgets/${(y=D.forms.order)==null?void 0:y.id}/submission`,p).then(_=>_.data)&&(localStorage.removeItem(D.localStorageFormOrder),D.selectedForm=null,D.isOpenForm=!1,D.isSuccessForm=!0,D.totalFormItems=0,D.forms.order.fields))for(var x in D.forms.order.fields)D.forms.order.fields[x].value=""};return(h,p)=>(v(),re(jp,{target:e.chatViewRef,open:b(D).isOpenForm,"onUpdate:open":p[7]||(p[7]=m=>b(D).isOpenForm=m),success:b(D).isSuccessForm,"onUpdate:success":p[8]||(p[8]=m=>b(D).isSuccessForm=m)},{fields:xe(()=>[c("div",jC,[FC,c("div",zC,[U(mn,{appear:"",mode:"out-in",name:"scale-fade"},{default:xe(()=>[(v(),k("div",{key:n.value,class:"font-medium text-[18px] text-center tracking-wide text-gray-900"},V(n.value?"Thng tin khch hng":"Gi hng"),1))]),_:1}),qC]),c("div",BC,[c("div",{class:"duration-300",ref_key:"contentFormRef",ref:s},[U(mn,{appear:"",name:"scale-fade",mode:"out-in",onBeforeEnter:l,onBeforeLeave:l},{default:xe(()=>{var m,x,y;return[(v(),k("div",{key:n.value},[n.value?(v(),k("div",UC,[c("form",{onSubmit:p[3]||(p[3]=cn(_=>u(),["prevent"])),class:"space-y-[18px]"},[r.value?(v(),k(be,{key:0},[c("div",VC,[U($n,{classField:"form-field-custom",field:b(D).forms.order.fields[0],modelValue:b(D).forms.order.fields[0].value,"onUpdate:modelValue":p[0]||(p[0]=_=>b(D).forms.order.fields[0].value=_)},null,8,["field","modelValue"]),U($n,{class:"flex-1",field:b(D).forms.order.fields[1],modelValue:b(D).forms.order.fields[1].value,"onUpdate:modelValue":p[1]||(p[1]=_=>b(D).forms.order.fields[1].value=_)},null,8,["field","modelValue"])]),(v(!0),k(be,null,Ie(b(D).forms.order.fields,(_,C)=>(v(),k("div",null,[C>1?(v(),re($n,{field:_,key:C,modelValue:_.value,"onUpdate:modelValue":A=>_.value=A},null,8,["field","modelValue","onUpdate:modelValue"])):B("",!0)]))),256))],64)):(v(!0),k(be,{key:1},Ie(b(D).forms.order.fields,(_,C)=>(v(),re($n,{field:_,key:C,modelValue:_.value,"onUpdate:modelValue":A=>_.value=A},null,8,["field","modelValue","onUpdate:modelValue"]))),128)),c("div",HC,[c("button",{type:"button",onClick:p[2]||(p[2]=_=>[n.value=!1]),class:"flex items-center justify-center h-11 bg-white hover:bg-gray-100 border border-gray-200 w-full rounded-lg text-gray-600"}," Quay li "),WC])],32)])):(v(),k("div",GC,[c("div",KC,[(v(),k("div",{class:"space-y-5",key:(x=(m=b(D).selectedForm)==null?void 0:m.items)==null?void 0:x.length},[(v(!0),k(be,null,Ie(((y=b(D).selectedForm)==null?void 0:y.items)||[],(_,C)=>(v(),re(xC,{key:C,item:_,contentFormRef:s.value},null,8,["item","contentFormRef"]))),128))]))]),c("div",QC,[c("div",{onClick:p[4]||(p[4]=_=>n.value=!0),class:"relative p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 duration-100"},[i.value||!b(D).selectedForm?(v(),k("div",JC,[U(b(Wx),{size:"16",class:"text-gray-500"}),XC])):(v(),k("div",ZC,[c("div",YC,V(o.value),1),c("button",e$,[U(CC)])]))])]),c("div",t$,[c("div",n$,[c("div",s$," Gi tham kho ("+V(b(D).totalFormItems)+" sn phm) ",1),c("div",r$,[c("div",o$,V(b(Qe)(a.value)),1)])])]),c("div",i$,[c("div",null,[c("button",{onClick:p[5]||(p[5]=_=>d()),class:se([i.value?"cursor-not-allowed opacity-90 bg-gray-100 border-gray-200 text-gray-500":"bg-primary border-primary text-white hover:opacity-80 ","flex items-center justify-center h-11 border w-full rounded-lg text-[16px]"])}," t hng ",2)]),a$])]))]))]}),_:1})],512)])])]),success:xe(()=>[c("div",null,[c("div",l$,[c("div",c$,[U(b(Jt),{"stroke-width":"1",size:"50",class:"text-gray-500"})]),u$]),c("button",{onClick:p[6]||(p[6]=m=>b(D).isSuccessForm=!1),class:"p-3 w-full text-sm text-primary flex items-center justify-center bg-white border-t border-t-gray-200"}," Tip tc mua sm ")])]),_:1},8,["target","open","success"]))}},Up={__name:"Drawer",props:vr({slotNames:{type:Array,default:()=>[]},chatViewRef:{type:Object,default:()=>null},isNestedOpen:{type:Boolean,default:!1}},{open:{},openModifiers:{}}),emits:["update:open"],setup(e){const t=e,n=Ls(e,"open"),s=L(0),r=L(0),o=L(0),i=L(""),a=L(null);Ee(()=>t.isNestedOpen,p=>{p||(a.value.$el.style.transform="unset")});const l=pe(()=>t.slotNames.find(p=>p.active));Ee(l,()=>{s.value=s.value+1});const u=p=>{i.value.style.height=`${r.value}px`},d=p=>{o.value=p.offsetHeight,i.value.style.height=`${p.offsetHeight}px`},f=p=>{i.value&&i.value.style&&(i.value.style.height="auto")},h=p=>{r.value=p.offsetHeight};return(p,m)=>(v(),re(b(Lr),{open:n.value,"onUpdate:open":m[1]||(m[1]=x=>n.value=x),modal:!1,"should-scale-background":!1},{default:xe(()=>[U(b(Ss),{to:e.chatViewRef},{default:xe(()=>[c("div",{onClick:m[0]||(m[0]=x=>n.value=!1),class:se(["drawer-overlay-custom",{"drawer-overlay-custom--open":n.value}])},null,2),U(b($s),{ref_key:"drawerContentWrapperRef",ref:a,class:"flex overflow-hidden absolute right-0 bottom-0 left-0 z-50 flex-col bg-white rounded-t-2xl outline-none"},{default:xe(()=>[U(b(ya),{class:"sr-only"},{default:xe(()=>[Fe("DrawerTitle")]),_:1}),U(b(ba),{class:"sr-only"},{default:xe(()=>[Fe("DrawerDescription")]),_:1}),c("div",{ref_key:"drawerContentRef",ref:i,class:"content-drawer"},[U(mn,{onBeforeEnter:u,onEnter:d,onAfterEnter:f,onLeave:h,mode:"out-in",name:"scale-fade"},{default:xe(()=>[(v(),k("div",{key:s.value},[(v(!0),k(be,null,Ie(e.slotNames,(x,y)=>(v(),k(be,{key:y+x.active},[x.active?bt(p.$slots,x.name,{key:0}):B("",!0)],64))),128))]))]),_:3})],512)]),_:3},512)]),_:3},8,["to"])]),_:3},8,["open"]))}},f$=[c("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"#f1f5f9"},null,-1),c("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentColor"},null,-1)],Ht={__name:"IconSpinner",props:{color:{type:String,default:"text-primary"}},setup(e){return(t,n)=>(v(),k("svg",{"aria-hidden":"true",role:"status",class:se(["inline animate-spin",[e.color]]),viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f$,2))}},h$={class:"flex space-x-3 w-full"},p$={class:"w-[96px] h-[96px] flex-shrink-0 rounded-md overflow-hidden border border-gray-100 flex items-center justify-center"},m$=["src"],g$=["src","alt"],v$={class:"flex-1"},y$={class:"flex flex-1 mr-1 mb-1 w-full text-sm font-medium text-gray-900"},b$={key:0,class:"px-2 py-0.5 mb-1 text-xs text-gray-500 bg-gray-50 rounded w-fit"},x$={class:"flex items-center space-x-1"},_$={class:"text-sm font-semibold text-red-500"},w$={key:0,class:"text-xs text-gray-500"},k$={__name:"CardOrder",props:["item"],setup(e){var u,d;const t=e,n=L(!1),s=((d=(u=D.bot)==null?void 0:u.config)==null?void 0:d.ui.logo)||`${D.appDomain}/link.png`,r=L(null),o=L(t.item.quantity),i=L(!1);Ee(o,()=>{clearTimeout(r.value),r.value=setTimeout(()=>{a()},380)});async function a(){const{data:f}=await ze.cart.update(t.item.id,{quantity:o.value});f.success&&(D.cart=f.data,ECG.sync.emit("cart",{source:"easy-ai-chat",data:f.data}))}async function l(){try{if(i.value)return;i.value=!0;const{data:f}=await ze.cart.remove(t.item.id);f.success&&(D.cart=f.data,ECG.sync.emit("cart",{source:"easy-ai-chat",data:f.data}))}catch{}finally{i.value=!1}}return(f,h)=>{var p;return v(),k("div",h$,[c("div",p$,[n.value?(v(),k("img",{key:0,src:b(s),alt:"image error",class:"w-[32px] h-[32px] object-cover"},null,8,m$)):(v(),k("img",{key:1,src:e.item.image,alt:e.item.name,class:"object-contain w-full h-full",onError:h[0]||(h[0]=m=>n.value=!0)},null,40,g$))]),c("div",v$,[c("h3",y$,V(e.item.name),1),(p=e.item.properties)!=null&&p.title?(v(),k("div",b$,V(e.item.properties.title),1)):B("",!0),c("div",null,[c("div",x$,[c("div",_$,V(b(Qe)(e.item.price)),1),e.item.compare_at_price>e.item.price?(v(),k("del",w$,V(b(Qe)(e.item.compare_at_price)),1)):B("",!0)]),U(zp,{modelValue:o.value,"onUpdate:modelValue":h[1]||(h[1]=m=>o.value=m),class:"mt-1.5"},null,8,["modelValue"])])]),c("div",null,[c("button",{onClick:h[2]||(h[2]=m=>l()),class:se([i.value?"bg-red-50 ":"hover:text-red-400 hover:bg-red-50 ","text-gray-400 size-[24px] flex items-center justify-center rounded-full"])},[i.value?(v(),re(Ht,{key:0,class:"max-w-[16px] h-[16px] !text-red-500"})):(v(),re(b(op),{key:1,size:"16"}))],2)])])}}},S$={},C$={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},$$=[c("path",{d:"m15 18-6-6 6-6"},null,-1)];function T$(e,t){return v(),k("svg",C$,$$)}const Vp=nt(S$,[["render",T$]]),A$={},E$={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},I$=[c("circle",{cx:"12",cy:"12",r:"10"},null,-1),c("path",{d:"M12 16v-4"},null,-1),c("path",{d:"M12 8h.01"},null,-1)];function P$(e,t){return v(),k("svg",E$,I$)}const ka=nt(A$,[["render",P$]]),Fo=e=>(In("data-v-cbe62a30"),e=e(),Pn(),e),O$={class:"relative pb-4 pt-5 bg-white rounded-t-2xl overflow-hidden outline-none"},R$=Fo(()=>c("div",{class:"relative text-center mb-4"},[c("div",{class:"font-semibold text-gray-900 text-lg"},"ng nhp")],-1)),M$={key:0,class:"text-red-500 flex items-center mt-2 space-x-1"},L$={class:"text-xs"},D$=Fo(()=>c("p",{class:"text-sm text-gray-900"}," M xc thc (OTP) s c gi n s in thoi ny  xc minh s in thoi ny l ca bn ",-1)),N$={type:"submit",class:"flex items-center justify-center h-12 w-full rounded-lg text-base bg-primary text-white hover:opacity-80 font-medium"},j$=Fo(()=>c("div",null,"Tip tc",-1)),F$={key:0,class:"absolute left-1/2 -translate-x-1/2 top-1/3"},z$={class:"px-5 py-4 bg-red-50 rounded-xl relative fade-in"},q$=Fo(()=>c("div",{class:"text-center text-sm font-medium text-red-500"},[c("div",null,"C li xy ra.")],-1)),B$=[Fo(()=>c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"max-w-[14px]"},[c("path",{d:"M18 6 6 18"}),c("path",{d:"m6 6 12 12"})],-1))],Hp=nt({__name:"AuthLogin",emits:["success","error"],setup(e,{emit:t}){const n=t,s=st({identifier:"",type:"phone"}),r={identifier:"required|phone"},o=L(!1),i=L(!1),a=L(null),l=L(null);Ee(()=>s.identifier,d=>{d&&(o.value=!1,l.value=null,a.value=null)});const u=async()=>{var d,f;try{const h=qp(s,r);if(o.value=Object.keys(h).length>0,o.value||i.value)return;i.value=!0;const{data:p}=await ze.auth.login(s);p&&p.success?n("success",{form:s}):(o.value=!0,p.message==="otp_service_under_maintenance"?l.value="OTP ang bo tr. Vui lng quay li sau.":l.value="S in thoi khng hp l. Vui lng th li.")}catch(h){console.log(h),a.value=(f=(d=h.response)==null?void 0:d.data)==null?void 0:f.message,n("error",{form:s})}finally{i.value=!1}};return(d,f)=>(v(),k("div",O$,[R$,c("form",{onSubmit:f[1]||(f[1]=cn(h=>u(),["prevent"])),class:"px-6 space-y-4"},[c("div",null,[Ot(c("input",{type:"tel","onUpdate:modelValue":f[0]||(f[0]=h=>s.identifier=h),placeholder:"Nhp s in thoi",class:"ecg-form-field !h-12"},null,512),[[ln,s.identifier]]),o.value?(v(),k("div",M$,[U(ka),c("div",L$,V(l.value??"Thng tin bt buc. Vui lng nhp chnh xc."),1)])):B("",!0)]),D$,c("button",N$,[i.value?(v(),re(Ht,{key:0,class:"mr-1 w-4 h-4"})):B("",!0),j$])],32),a.value?(v(),k("div",F$,[c("div",z$,[q$,c("button",{onClick:f[2]||(f[2]=h=>a.value=null),class:"size-5 text-red-500 rounded-full absolute -top-1 -right-1 bg-red-100 hover:bg-red-200 flex items-center justify-center z-10"},B$)])])):B("",!0)]))}},[["__scopeId","data-v-cbe62a30"]]),Ac=e=>(In("data-v-ca9c6389"),e=e(),Pn(),e),U$={class:"relative pb-4 pt-4 bg-white rounded-t-2xl overflow-hidden outline-none"},V$=Ac(()=>c("div",{class:"relative text-center mb-4"},[c("div",{class:"font-semibold text-gray-900 text-lg"}," Nhp m xc minh ")],-1)),H$={class:"px-6 space-y-4"},W$={class:"text-sm text-gray-900"},G$=Ac(()=>c("br",null,null,-1)),K$={key:0,class:"ecg-fieldset-error text-red-500 flex items-center mt-2 space-x-1"},Q$={class:"text-xs font-medium"},J$={type:"submit",form:"ecg-form-verify-otp",class:"flex items-center justify-center h-12 w-full rounded-lg text-base bg-primary text-white hover:opacity-80 font-medium !mt-6"},X$=Ac(()=>c("div",null,"Xc minh",-1)),Wp=nt({__name:"AuthVerifyOtp",props:["identifier"],emits:["success","error"],setup(e,{emit:t}){const n=e,s=t,r=st({identifier:n.identifier,code:""}),o=L(!1),i=L(!1),a=L(null);L(null),L(null);const l=async()=>{var d,f;try{const{data:h}=await ze.auth.getUser();h.success&&(D.user=h.data)}catch(h){((f=(d=h.response.data)==null?void 0:d.raw)==null?void 0:f.message)==="error_token_is_expired"&&(D.user=null,D.token=null,pt.remove(Ln))}},u=async()=>{try{if(o.value=r.code.length<6,o.value||i.value)return;i.value=!0;const{data:d}=await ze.auth.verifyOtp(r);d.success&&(pt.set(Ln,d.data.access_token,"14d"),ECG.sync.emit("login",{source:"easy-ai-chat",data:d.data}),l(),s("success",{form:r}),r.code="",r.identifier="",ze.cart.getList())}catch{o.value=!0,a.value="M xc thc khng hp l. Vui lng kim tra li"}finally{i.value=!1}};return(d,f)=>(v(),k("div",U$,[V$,c("div",H$,[c("div",null,[c("p",W$,[Fe(" Nhp m xc minh gm 6 s va c gi n "),G$,Fe(" ST "),c("strong",null,V(r.identifier),1),Fe(" ca bn. ")])]),c("div",null,[c("form",{onSubmit:f[1]||(f[1]=cn(h=>u(),["prevent"])),id:"ecg-form-verify-otp"},[Ot(c("input",{type:"number","onUpdate:modelValue":f[0]||(f[0]=h=>r.code=h),placeholder:"Nhp m xc thc",class:"ecg-form-field !h-12"},null,512),[[ln,r.code]])],32),o.value?(v(),k("div",K$,[U(ka),c("div",Q$,V(a.value),1)])):B("",!0)]),c("button",J$,[i.value?(v(),re(Ht,{key:0,class:"mr-1 w-4 h-4"})):B("",!0),X$])])]))}},[["__scopeId","data-v-ca9c6389"]]),Z$={},Y$={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-ticket-percent"},eT=[c("path",{d:"M2 9a3 3 0 1 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 1 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"},null,-1),c("path",{d:"M9 9h.01"},null,-1),c("path",{d:"m15 9-6 6"},null,-1),c("path",{d:"M15 15h.01"},null,-1)];function tT(e,t){return v(),k("svg",Y$,eT)}const Sa=nt(Z$,[["render",tT]]),nT={},sT={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},rT=[c("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)];function oT(e,t){return v(),k("svg",sT,rT)}const Ca=nt(nT,[["render",oT]]),iT={class:"flex items-center rounded h-[110px] w-full"},aT=["src","alt"],lT={key:2,class:"absolute inset-0 bg-primary opacity-10"},cT={key:0,class:"absolute inset-0 bg-primary opacity-10"},uT={class:"flex flex-col relative z-10 h-full"},dT={class:"flex items-start"},fT={class:"font-medium text-sm text-gray-900 flex-1"},hT={class:"mt-auto flex md:items-center md:flex-row flex-col md:space-y-0 space-y-1"},pT={class:"text-xs text-gray-500 tracking-tight"},mT={__name:"CardCoupon",props:{isActive:{type:Boolean,default:!1},coupon:{type:Object,default:!1},loading:{type:Boolean,default:!1}},emits:["remove","apply",",onViewDetail"],setup(e,{emit:t}){const n=t;return(s,r)=>(v(),k("div",iT,[c("div",{class:se(["p-2 rounded-lg border border-r-0 w-[110px] h-full flex-shrink-0 flex items-center justify-center relative",e.isActive?"border-primary":"border-gray-200"])},[e.coupon.image?(v(),k("img",{key:0,src:e.coupon.image,alt:e.coupon.title,class:"w-full h-full object-cover rounded-lg relative z-10"},null,8,aT)):(v(),re(Sa,{key:1,class:"text-gray-500 scale-125 relative z-10"})),e.isActive?(v(),k("div",lT)):B("",!0)],2),c("div",{class:se(["border-r border-dashed h-[100px] flex-shrink-0",e.isActive?"border-primary":"border-gray-200"])},null,2),c("div",{class:se(["flex-1 p-3 border border-l-0 rounded-lg h-full relative overflow-hidden",e.isActive?"border-primary":"border-gray-200"])},[e.isActive?(v(),k("div",cT)):B("",!0),c("div",uT,[c("div",dT,[c("div",fT,V(e.coupon.title),1),c("button",{class:"w-6 h-6 flex items-center justify-center rounded-md text-primary",onClick:r[0]||(r[0]=o=>n("onViewDetail",e.coupon))},[U(ka)])]),c("div",hT,[c("div",pT," HSD: "+V(e.coupon.started_at)+"-"+V(e.coupon.ended_at),1),c("button",{onClick:r[1]||(r[1]=o=>e.isActive?n("remove",e.coupon.code):n("apply",e.coupon.code)),class:"px-[8px] w-full md:w-fit py-[6px] text-xs text-white bg-primary rounded-md font-medium flex items-center justify-center ml-auto"},[e.loading?(v(),re(Ht,{key:0,class:"w-3 mr-1"})):B("",!0),Fe(" "+V(e.isActive?"B chn":"p dng"),1)])])])],2)]))}},gT={},vT={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},yT=[c("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"},null,-1),c("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"},null,-1)];function bT(e,t){return v(),k("svg",vT,yT)}const xT=nt(gT,[["render",bT]]);function _T(e=2e3){const t=L(!1),n=L(null),s=async i=>{if(navigator.clipboard)try{return await navigator.clipboard.writeText(i),o(),!0}catch(a){return console.error("Failed to copy:",a),r(i)}else return r(i)},r=i=>{try{const a=document.createElement("textarea");a.value=i,a.style.position="fixed",a.style.left="-999999px",a.style.top="-999999px",document.body.appendChild(a),a.focus(),a.select();const l=document.execCommand("copy");return document.body.removeChild(a),l?(o(),!0):!1}catch(a){return console.error("Fallback: Failed to copy:",a),!1}},o=()=>{t.value=!0,n.value&&clearTimeout(n.value),n.value=setTimeout(()=>{t.value=!1},e)};return hs(()=>{n.value&&clearTimeout(n.value)}),{copied:t,copy:s}}const wT={class:"flex flex-col bg-white rounded-t-3xl h-full pt-5"},kT=c("div",{class:"w-[38px] h-[6px] rounded-full bg-gray-400 cursor-grab mx-auto mb-5"},null,-1),ST={class:"font-semibold text-gray-900 text-xl text-center px-4 mb-6"},CT={class:"relative group"},$T={class:"flex items-center text-sm px-4 py-3 bg-gray-50 relative z-10"},TT=c("div",{class:"w-[33%] text-gray-500"},"M",-1),AT={class:"flex-1 flex items-center"},ET={class:"text-gray-700 mr-2"},IT=[c("div",{class:"text-sm text-green-700 px-4 h-11 flex items-center justify-center rounded-lg bg-green-100 whitespace-nowrap"}," Sao chp m thnh cng ",-1)],PT={class:"flex text-sm px-4 py-3 bg-white"},OT=c("div",{class:"w-[33%] text-gray-500"},"Hn s dng",-1),RT={class:"flex-1 text-gray-700"},MT={class:"px-4 py-3 bg-gray-50"},LT=c("div",{class:"text-sm mb-3 text-gray-500"},"iu kin",-1),DT=["innerHTML"],NT={class:"py-3 px-4 bg-white"},jT={__name:"CouponDetail",props:{coupon:{type:Object},active:{type:Boolean,default:!1}},emits:["apply","remove"],setup(e,{emit:t}){const n=t,{copied:s,copy:r}=_T();return(o,i)=>(v(),k("div",wT,[kT,c("div",ST,V(e.coupon.title),1),c("div",CT,[c("div",$T,[TT,c("div",AT,[c("div",ET,V(e.coupon.code),1),c("button",{onClick:i[0]||(i[0]=a=>b(r)(e.coupon.code)),class:"h-[24px] w-[24px] flex items-center justify-center text-blue-600 bg-blue-50 rounded-full overflow-hidden"},[U(xT)])])]),c("div",{class:se([b(s)?"translate-y-full ":"translate-y-0","absolute left-1/2 -translate-x-1/2 bottom-0 duration-200"])},IT,2)]),c("div",PT,[OT,c("div",RT,V(e.coupon.started_at)+" - "+V(e.coupon.ended_at),1)]),c("div",MT,[LT,c("div",{class:"max-h-[132px] overflow-y-auto prose coupon-detail-desc",innerHTML:e.coupon.description},null,8,DT)]),c("div",NT,[c("button",{onClick:i[1]||(i[1]=a=>e.active?n("remove",e.coupon.code):n("apply",e.coupon.code)),class:"flex items-center justify-center h-12 w-full rounded-lg text-base bg-primary text-white hover:opacity-80 font-medium"},V(e.active?"B chn":"p dng"),1)])]))}},FT={class:"flex space-x-2 w-full"},zT={class:"w-[86px] h-[86px] flex-shrink-0 rounded-xl overflow-hidden border border-gray-100 flex items-center justify-center"},qT=["src"],BT=["src","alt"],UT={class:"flex-1"},VT={class:"text-gray-700 font-medium text-sm line-clamp-2 mb-2"},HT={class:"flex items-center space-x-4"},WT={class:"text-sm text-red-500 font-medium"},GT={key:0,class:"text-sm text-gray-500 0 font-light ml-2"},KT={class:"text-sm text-gray-500 ml-auto"},$a={__name:"CardProductCheckout",props:["item"],setup(e){var s,r;const t=((r=(s=D.bot)==null?void 0:s.config)==null?void 0:r.ui.logo)||`${D.appDomain}/link.png`,n=L(!1);return(o,i)=>(v(),k("div",FT,[c("div",zT,[n.value?(v(),k("img",{key:0,src:b(t),alt:"image error",class:"w-[28px] h-[28px]"},null,8,qT)):(v(),k("img",{key:1,src:e.item.image,alt:e.item.name,class:"w-full h-full object-contain",onError:i[0]||(i[0]=a=>n.value=!0)},null,40,BT))]),c("div",UT,[c("h3",VT,V(e.item.name),1),c("div",HT,[c("div",null,[c("span",WT,V(b(Qe)(Number(e.item.price))),1),e.item.compare_at_price>e.item.price?(v(),k("del",GT,V(b(Qe)(Number(e.item.compare_at_price))),1)):B("",!0)]),c("div",KT," x"+V(e.item.quantity),1)])])]))}},QT={class:"flex items-center rounded h-[60px]"},JT=["src","alt"],XT={key:2,class:"absolute inset-0 bg-primary opacity-10"},ZT={key:0,class:"absolute inset-0 bg-primary opacity-10"},YT={class:"flex items-center relative"},eA={class:"font-medium text-sm text-gray-900 flex-1 line-clamp-1"},tA={__name:"CardCouponActive",props:{isActive:{type:Boolean,default:!1},coupon:{type:Object,default:!1},loading:{type:Boolean,default:!1}},emits:["remove","apply",",onViewDetail"],setup(e,{emit:t}){const n=t;return(s,r)=>(v(),k("div",QT,[c("div",{class:se(["p-2 rounded-lg border border-r-0 w-[60px] h-full flex-shrink-0 flex items-center justify-center relative",e.isActive?"border-primary":"border-gray-200"])},[e.coupon.image?(v(),k("img",{key:0,src:e.coupon.image,alt:e.coupon.title,class:"w-full h-full object-cover rounded-lg relative z-10"},null,8,JT)):(v(),re(Sa,{key:1,class:"text-primary scale-125 relative z-10 w-4"})),e.isActive?(v(),k("div",XT)):B("",!0)],2),c("div",{class:se(["border-r border-dashed h-[48px] flex-shrink-0",e.isActive?"border-primary":"border-gray-200"])},null,2),c("div",{class:se(["flex-1 p-3 border border-l-0 rounded-lg h-full relative overflow-hidden",e.isActive?"border-primary":"border-gray-200"])},[e.isActive?(v(),k("div",ZT)):B("",!0),c("div",YT,[c("div",eA,V(e.coupon.title),1),c("button",{class:"w-8 h-8 flex items-center justify-center rounded-md text-primary mr-1 cursor-pointer",onClick:r[0]||(r[0]=o=>n("onViewDetail",e.coupon))},[U(ka)]),c("button",{onClick:r[1]||(r[1]=o=>n("remove",e.coupon.code)),class:"px-[12px] w-fit py-[6px] text-xs text-white bg-primary rounded-md font-medium flex items-center justify-center ml-auto"},[e.loading?(v(),re(Ht,{key:0,class:"w-3 mr-1"})):B("",!0),Fe(" B chn ")])])],2)]))}},nA={class:"py-4"},sA={class:"mb-2 space-y-3"},rA=c("div",{class:"w-[36px] h-[6px] rounded-full bg-gray-500 cursor-grab mx-auto"},null,-1),oA={key:0,class:"font-medium text-xl text-center text-gray-900"},iA={key:0,class:"px-5"},aA={class:"max-h-[320px] pt-4 overflow-y-auto scroll-hidden relative"},lA={class:"space-y-5"},cA={class:"pt-3 px-1"},uA={class:"flex items-center justify-between"},dA={class:"text-gray-500 mr-2 text-sm"},fA={class:"text-right text-base"},hA={class:"text-gray-900 text-sm"},pA={key:0,class:"flex items-center justify-between"},mA=c("div",{class:"text-gray-500 mr-2 text-sm"}," Khuyn mi ",-1),gA={class:"text-right text-base"},vA={class:"text-green-500 text-sm"},yA={class:"flex items-center justify-between mt-2"},bA=c("div",{class:"text-gray-500 mr-2 text-sm"},[c("span",{class:"font-medium text-gray-900"},"Tng cng"),c("span",{class:"text-xs ml-1"},"( bao gm VAT)")],-1),xA={class:"text-right text-[16px] font-medium"},_A={class:"text-red-500 text-sm"},wA={class:"bg-white z-20 mt-4"},kA={key:1,class:"px-5 pt-4"},SA=c("div",{class:"flex flex-col items-center justify-center space-y-2 py-2"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500"},[c("circle",{cx:"8",cy:"21",r:"1"}),c("circle",{cx:"19",cy:"21",r:"1"}),c("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"})]),c("div",{class:"text-lg font-semibold text-gray-700"}," Gi hng trng "),c("div",{class:"text-sm text-gray-700"}," Cha c sn phm no trong gi hng ca bn. ")],-1),CA=c("div",{class:"mb-5 space-y-3 relative"},[c("div",{class:"w-[36px] h-[6px] rounded-full bg-gray-500 cursor-grab mx-auto"}),c("div",{class:"font-medium text-xl text-center text-gray-900"}," Xc nhn n hng ")],-1),$A={class:"px-6 space-y-4 max-h-[520px] overflow-y-scroll scroll-hidden"},TA={key:0,class:"border border-gray-200 rounded-xl"},AA={class:"flex items-center justify-between px-3 py-2 border-b"},EA=c("div",{class:"font-semibold text-gray-700"}," Thng tin ngi nhn ",-1),IA={class:"px-3 py-4"},PA={class:"space-y-1"},OA={class:"text-sm text-gray-700 font-medium"},RA={key:0,class:"text-sm text-gray-700 font-medium"},MA={class:"text-sm text-gray-700"},LA=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},[c("circle",{cx:"12",cy:"12",r:"10"}),c("path",{d:"M8 12h8"}),c("path",{d:"M12 8v8"})],-1),c("div",null,"Thm a ch",-1)],DA={class:"w-full"},NA=c("label",{for:"order-email",class:"block text-sm font-medium text-gray-700 mb-1 pl-1"}," Email ",-1),jA={class:"w-full"},FA=c("label",{for:"order-notes",class:"block text-sm font-medium text-gray-700 mb-1 pl-1"}," Ghi ch ",-1),zA={class:"border border-gray-200 rounded-xl"},qA=c("div",{class:"flex items-center justify-between px-3 py-2 border-b"},[c("div",{class:"font-semibold text-gray-700"}," Hnh thc thanh ton ")],-1),BA={class:"py-4 px-3"},UA={class:"flex space-x-2"},VA=c("div",{class:"text-sm text-gray-600"}," Thanh ton tin mt (COD) ",-1),HA={class:"border border-gray-200 rounded-xl"},WA={class:"flex items-center justify-between mb-2.5 px-3 py-2 border-b border-b-gray-200"},GA=c("div",{class:"flex items-center space-x-1"},[c("div",{class:"font-semibold text-gray-700"}," Tm tt n hng ")],-1),KA={class:"space-y-3 pt-1 pb-3 px-3"},QA={key:0,class:"px-3 pb-3 pt-1"},JA={class:"px-3 pb-3 pt-1"},XA={class:"flex items-center justify-between"},ZA={class:"text-gray-500 mr-2 text-sm"},YA={class:"text-right text-base"},e5={class:"text-gray-700 text-sm"},t5={key:0,class:"flex items-center justify-between"},n5=c("div",{class:"text-gray-500 mr-2 text-sm"}," Khuyn mi ",-1),s5={class:"text-right text-base"},r5={class:"text-green-500 text-sm"},o5={class:"flex items-center justify-between"},i5=c("div",{class:"text-gray-500 mr-2 text-sm"}," Ph vn chuyn ",-1),a5={class:"text-right text-base"},l5={class:"text-gray-700 text-sm"},c5={class:"flex items-center justify-between mt-2"},u5=c("div",{class:"text-gray-500 mr-2 text-sm"},[c("span",{class:"font-medium text-gray-900"},"Tng cng"),Fe(" ( bao gm VAT) ")],-1),d5={class:"text-right text-[16px] font-medium"},f5={class:"text-red-500 text-sm"},h5=c("span",{class:"text-sm text-gray-900"},"Khuyn mi",-1),p5={class:"flex items-center ml-auto"},m5=c("span",{class:"text-sm text-gray-400 tracking-tight"},"Chn m",-1),g5=c("span",null,"t mua",-1),v5=c("div",{class:"w-[36px] h-[6px] rounded-full bg-gray-500 cursor-grab mx-auto"},null,-1),y5={class:"text-[20px] font-semibold text-gray-900 h-12 flex items-center justify-center"},b5={class:"space-y-3 h-[calc(100%-56px)] overflow-y-auto px-6 relative"},x5={key:0,class:"h-full flex flex-col justify-between"},_5={key:0,class:"absolute top-[46%] -translate-y-1/2 right-[3px] z-10"},w5={key:0,class:"absolute top-[46%] -translate-y-1/2 right-[3px] z-10"},k5={class:"flex items-center justify-between bg-white space-x-2 sticky bottom-0 inset-x-0 py-3"},S5={form:"form-submit-new-address",type:"submit",class:"py-[10px] bg-primary text-white rounded-lg flex-1 flex items-center justify-center"},C5=c("span",null,"Lu thay i",-1),$5={key:1,class:"flex flex-col justify-between h-full space-y-3"},T5={class:"space-y-1 px-4 pt-3 pb-2"},A5={class:"flex items-center justify-between"},E5={class:"text-sm"},I5={key:0,class:"text-xs text-green-500"},P5={class:"text-sm"},O5=c("span",{class:"text-gray-500 mr-1"}," in thoi: ",-1),R5={class:"text-gray-900"},M5={class:"text-sm"},L5=c("span",{class:"text-gray-500 mr-1"}," a ch: ",-1),D5={class:"text-gray-900"},N5={class:"border-t px-4 py-2"},j5=["onClick"],F5={class:"flex items-center justify-between bg-white sticky bottom-0 inset-x-0 py-3 space-x-2"},z5={class:"flex flex-col px-4 pb-3 pt-6 bg-white h-full"},q5=c("div",{class:"font-semibold text-gray-900 text-xl text-center mb-4"}," Khuyn mi ",-1),B5={class:"mb-4"},U5={class:"flex items-center space-x-2"},V5={class:"relative flex-1"},H5=c("span",null,"p dng",-1),W5={key:0,class:"text-xs text-red-500 mt-1"},G5={class:"flex-1 relative"},K5={class:"space-y-4 overflow-y-auto scroll-hidden absolute inset-0 h-full"},Q5={class:"sticky bottom-0 z-10 pt-3"},J5={key:0,class:"px-6 pt-5 pb-4 bg-white rounded-t-2xl"},X5={class:"relative max-h-[520px] overflow-y-scroll scroll-hidden space-y-4"},Z5=c("div",{class:"sticky top-0 z-10 bg-white pb-1"},[c("div",{class:"w-9 h-[6px] rounded-full bg-gray-500 mx-auto cursor-grab mb-3"}),c("div",{class:"text-center mt-1 font-medium text-gray-900 text-lg"}," t hng thnh cng ")],-1),Y5={key:0,class:"rounded-xl border border-gray-200"},e3=c("div",{class:"py-2 px-4 text-base font-medium text-gray-900 border-b border-b-gray-200"}," Thng tin ngi nhn ",-1),t3={class:"p-4 space-y-2"},n3={class:"flex space-x-3"},s3={key:0,class:"text-sm text-gray-700 w-[120px] flex-shrink-0"},r3={class:"text-sm text-gray-700 font-medium"},o3={key:0,class:"flex space-x-3"},i3=c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," S in thoi ",-1),a3={class:"text-sm text-gray-700 font-medium"},l3={class:"flex space-x-3"},c3=c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," a ch nhn hng ",-1),u3={class:"text-sm text-gray-700 font-medium"},d3={class:"rounded-xl border border-gray-200"},f3=c("div",{class:"py-2 px-4 text-base font-medium text-gray-900 border-b border-b-gray-200"}," Thng tin n hng ",-1),h3={class:"p-4 space-y-2"},p3={class:"flex space-x-3"},m3=c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," M n hng ",-1),g3={class:"text-sm text-gray-700 font-medium"},v3=c("div",{class:"flex space-x-3"},[c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," Phng thc thanh ton "),c("div",{class:"text-sm text-gray-700 font-medium"}," Thanh ton tin mt khi nhn hng (COD) ")],-1),y3={key:0,class:"flex space-x-3"},b3=c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," Ghi ch n ",-1),x3={class:"text-sm text-gray-700 font-medium"},_3={key:0,class:"font-semibold text-gray-700 mb-3"},w3={key:1,class:"space-y-3 mb-4 border-b border-b-gray-200 pb-4"},k3={class:"flex items-center justify-between"},S3=c("div",{class:"text-gray-500 mr-2 text-sm"}," Tng tin hng ",-1),C3={class:"text-right text-[16px] font-medium"},$3={class:"text-gray-700 text-sm"},T3={key:0,class:"flex items-center justify-between"},A3=c("div",{class:"text-gray-500 mr-2 text-sm"}," Ph vn chuyn ",-1),E3={class:"text-right text-base"},I3={class:"text-gray-700 text-sm"},P3={key:1,class:"flex items-center justify-between"},O3=c("div",{class:"text-gray-500 mr-2 text-sm"}," Khuyn mi ",-1),R3={class:"text-right text-[16px] font-medium"},M3={class:"text-green-500 text-sm"},L3={class:"flex items-center justify-between mt-2"},D3=c("div",{class:"text-gray-500 mr-2 text-sm"},[c("span",{class:"font-medium text-gray-900"},"Tng cng"),Fe(" ( bao gm VAT) ")],-1),N3={class:"text-red-500 text-base font-semibold"},j3={class:"sticky bottom-0 pt-2 bg-white"},F3={__name:"FlowCheckout",props:vr(["chatViewRef"],{open:{},openModifiers:{}}),emits:["update:open"],setup(e){const t=Ls(e,"open"),n=L([]),s=L(null),r=L(null),o=L(0),i=L(!1),a=st({first_name:"",last_name:"",phone:"",note:"",address:"",province_name:"",province_code:"",district_name:"",district_code:"",ward_name:"",ward_code:"",type:"home",is_default:!1,postal_code:""}),l={phone:"required|phone"},u=L(!1),d=L(!1),f=L(""),h=L(""),p=pe(()=>D.user&&!i.value?[{name:"cart",active:o.value===0},{name:"checkout",active:o.value===1},{name:"success",active:o.value===2}]:[{name:"cart",active:o.value===0},{name:"phone",active:o.value===1},{name:"otp",active:o.value===2},{name:"checkout",active:o.value===3},{name:"success",active:o.value===4},{name:"orders",active:o.value===5},{name:"order-detail",active:o.value===6}]);Ee(t,z=>{o.value=0,z&&(i.value=!D.user)});const m=L(null),x=L(!1),y=L(!1),_=async()=>{const{data:z}=await ze.cart.getList();z.success&&(D.cart=z.data)},C=z=>{if(p.value.length-1===o.value)return;const P=p.value.findIndex(N=>N.name===z);if(P!==-1){o.value=P;return}o.value=o.value+1},A=z=>{if(o.value===0)return;const P=p.value.findIndex(N=>N.name===z);if(P!==-1){o.value=P;return}o.value=o.value-1},E=L(null),$=L(null),T=async()=>{var z,P,N;try{const Z=Bi(D.handle);if(!((z=D.forms.order)!=null&&z.id)||!Z)return;const le={male:"Nam",female:"N"},ie=(N=(P=D.cart)==null?void 0:P.items)==null?void 0:N.map(ae=>({...ae,sku:ae.product_sku,title:ae.title??ae.name})),he={status:"submitted",conversation_id:Z,submission_data:{title:le[D.user.gender]??"Khc",full_name:s.value.name,phone:s.value.phone,email:s.value.email??h.value,address:`${s.value.address} ${s.value.ward_name}, ${s.value.district_name}, ${s.value.province_name}`,note:f.value,items:ie}};await ze.submission.add({formId:D.forms.order.id,formData:he})}catch(Z){console.log(Z)}},I=async()=>{try{if(x.value)return;$.value=null,x.value=!0;const{data:z}=await ze.order.checkout({cart_token:D.cart.token,note:f.value,email:h.value,shipping_address_id:s.value.id});z.success&&(m.value=z.data,C(),_(),T())}catch{}finally{x.value=!1,h.value="",f.value=""}},R=async()=>{if(!pt.get(Ln))return;const{data:P}=await ze.address.getList();P.success&&(n.value=P.data||[],s.value=n.value.find(N=>!!N.is_default)??n.value[0])},q=st({district:!1,ward:!1}),G=L([]),K=L([]),H=L([]),ee=async()=>{const{data:z}=await ze.location.provinces();z.success&&z.data&&(G.value=Object.values(z.data))},ce=async z=>{q.district=!0;const{data:P}=await ze.location.districts(z);P.success&&P.data&&(K.value=Object.values(P.data)),q.district=!1},W=async z=>{q.ward=!0;const{data:P}=await ze.location.wards(z);P.success&&P.data&&(H.value=Object.values(P.data)),q.ward=!1};Ee(()=>a.province_code,z=>{var P,N;a.district_code="",K.value=[],a.ward_code="",H.value=[],z&&(a.province_name=(N=(P=G.value)==null?void 0:P.find(Z=>Z.code.toString()===z.toString()))==null?void 0:N.name,ce(z))}),Ee(()=>a.district_code,z=>{var P;a.ward_code="",H.value=[],z&&(a.district_name=(P=K.value.find(N=>N.code===z))==null?void 0:P.name,W(z))}),Ee(()=>a.ward_code,z=>{var P;z&&(a.ward_name=(P=H.value.find(N=>N.code===z))==null?void 0:P.name)});const Q=()=>{for(const z in a)switch(z){case"is_default":a[z]=!0;break;case"type":a[z]="home";break;default:a[z]="";break}},J=()=>{d.value=!1,u.value=!1,Q()},ne=async()=>{try{const z=qp(a,l);if(y.value)return;y.value=!0,a.phone=a.phone.toString();const{data:P}=await ze.address.create(a);P.success&&(s.value=P.data,n.value.push(P.data),d.value=!1,u.value=!1,Q())}catch(z){console.log("error: ",z)}finally{y.value=!1}},ke=async(z={})=>{try{if(Object.keys(z).length===0)return;const{province_code:P,province_name:N,district_code:Z,district_name:le,ward_code:ie,ward_name:he,name:ae,phone:te,email:oe,address:ye}=z,ge={name:ae??"",phone:te??"",email:oe??"",address1:ye,province:N,province_code:P,district:le,district_code:Z,ward:he,ward_code:ie},{data:De}=await ze.order.checkShipping({address:ge});De.success&&(D.cart=De.data)}catch{}};Ee(s,z=>{z&&ke(z)},{immediate:!0});const qe=z=>{C(),E.value=z.form.identifier},Ce=z=>{C(),R(),_()},Re=L("");L("");const Be=L(!1),Ne=L(!1),X=L(null),de=L([]),Se=L(!1),_e=st({}),$e=pe(()=>{var z,P;return(P=(z=D.cart)==null?void 0:z.coupon)==null?void 0:P.code}),Ae=pe(()=>de.value.find(z=>z.code===$e.value)),Te=async()=>{const{data:z}=await ze.cart.coupons();z.success&&(de.value=z.data)},O=async(z,P="card")=>{const N=P==="text"?"text":z;try{if(!z||_e[N])return;_e[N]=!0,Se.value=!1,Ne.value=!1;const{data:Z}=await ze.cart.applyCoupon({code:z});Z.data&&(D.cart=Z.data),Z.success?P==="text"&&(Se.value=!1):Se.value=!0}catch(Z){console.log("Error coupon: ",Z)}finally{_e[N]=!1,Re.value=""}},F=async z=>{try{if(!z||_e[z])return;_e[z]=!0,Se.value=!1,Ne.value=!1;const{data:P}=await ze.cart.removeCoupon({code:z});console.log("removeCoupon = ",P),P.data&&(D.cart=P.data)}catch(P){console.log("Error coupon: ",P)}finally{_e[z]=!1,Re.value=""}};return Ee(()=>D.user,z=>{z?(R(),Te(),ee()):(n.value=[],s.value=null)},{immediate:!0}),(z,P)=>(v(),re(Up,{chatViewRef:e.chatViewRef,open:t.value,"onUpdate:open":P[41]||(P[41]=N=>t.value=N),slotNames:p.value,isNestedOpen:u.value||Be.value||Ne.value},{cart:xe(()=>{var N,Z,le,ie;return[c("div",nA,[c("div",sA,[rA,((Z=(N=b(D).cart)==null?void 0:N.items)==null?void 0:Z.length)>0?(v(),k("div",oA," Gi hng ")):B("",!0)]),((ie=(le=b(D).cart)==null?void 0:le.items)==null?void 0:ie.length)>0?(v(),k("div",iA,[c("div",aA,[c("div",lA,[(v(!0),k(be,null,Ie(b(D).cart.items,(he,ae)=>(v(),re(k$,{key:ae,item:he},null,8,["item"]))),128))])]),c("div",cA,[c("div",uA,[c("div",dA,V(b(D).cart.total_items)+" sn phm ",1),c("div",fA,[c("div",hA,V(b(Qe)(b(D).cart.subtotal_price)),1)])]),b(D).cart.total_discounts?(v(),k("div",pA,[mA,c("div",gA,[c("div",vA,V(b(Qe)(b(D).cart.total_discounts)),1)])])):B("",!0),c("div",yA,[bA,c("div",xA,[c("div",_A,V(b(Qe)(b(D).cart.total_price-(b(D).cart.shipping_price||0))),1)])])]),c("div",wA,[c("div",null,[c("button",{onClick:P[0]||(P[0]=he=>(C(),b(D).user&&ke())),class:se(["flex items-center justify-center h-12 border w-full rounded-xl text-base ","bg-primary text-white hover:opacity-80 font-medium"])}," t hng ")])])])):(v(),k("div",kA,[SA,c("button",{onClick:P[1]||(P[1]=he=>t.value=!1),class:se(["flex items-center justify-center h-12 border w-full rounded-lg text-base mt-3","bg-primary text-white hover:opacity-80 font-medium"])}," Tip tc mua sm ")]))])]}),phone:xe(()=>[U(Hp,{onSuccess:P[2]||(P[2]=N=>qe(N))})]),otp:xe(()=>[U(Wp,{onSuccess:P[3]||(P[3]=N=>Ce(N)),identifier:E.value},null,8,["identifier"])]),checkout:xe(()=>[c("div",{ref_key:"checkoutRef",ref:r,class:"py-4 relative"},[CA,c("button",{onClick:P[4]||(P[4]=N=>A("cart")),class:"size-10 flex items-center justify-center rounded-full hover:bg-gray-100 text-gray-900 absolute left-4 top-5"},[U(Vp)]),c("div",$A,[s.value?(v(),k("div",TA,[c("div",AA,[EA,c("button",{onClick:P[5]||(P[5]=N=>u.value=!0),class:"text-sm px-2 py-1 bg-gray-50 hover:bg-gray-100 rounded-md text-gray-500"}," Thay i ")]),c("div",IA,[c("div",PA,[c("div",OA,[c("div",null,V((s.value.first_name?`${s.value.first_name} `:"")+(s.value.last_name?s.value.last_name:"")),1)]),s.value.phone?(v(),k("div",RA,[c("div",null,V(s.value.phone),1)])):B("",!0),c("div",MA,[c("div",null,V(`${s.value.address} ${s.value.ward_name}, ${s.value.district_name}, ${s.value.province_name}`),1)])])])])):(v(),k("div",{key:1,onClick:P[6]||(P[6]=N=>(u.value=!0,d.value=!0)),class:"h-[70px] border border-dashed border-gray-300 flex items-center justify-center rounded-xl text-gray-700 cursor-pointer hover:bg-gray-50"},LA)),c("div",DA,[NA,U($n,{modelValue:h.value,"onUpdate:modelValue":P[7]||(P[7]=N=>h.value=N),field:{id:"order-email",name:"email",type:"email",label:"Email"}},null,8,["modelValue"])]),c("div",jA,[FA,Ot(c("textarea",{id:"order-notes","onUpdate:modelValue":P[8]||(P[8]=N=>f.value=N),placeholder:"Nhp ghi ch cho n hng",rows:"2",class:"w-full text-sm rounded-lg border border-gray-200 p-3 text-gray-700 focus:outline-none resize-none"},null,512),[[ln,f.value]])]),c("div",zA,[qA,c("div",BA,[c("div",UA,[U(b(Zx),{size:"18"}),VA])])]),c("div",HA,[c("div",null,[c("div",WA,[GA,c("button",{onClick:P[9]||(P[9]=N=>A("cart")),class:"text-sm px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded-md text-gray-500"}," Thay i ")]),c("div",KA,[(v(!0),k(be,null,Ie(b(D).cart.items,N=>(v(),re($a,{key:N.product_sku,item:N},null,8,["item"]))),128))])]),Ae.value?(v(),k("div",QA,[U(tA,{coupon:Ae.value,"is-active":!0,onOnViewDetail:P[10]||(P[10]=N=>(Ne.value=!0,X.value=N)),onRemove:P[11]||(P[11]=N=>F(N)),loading:_e[Ae.value.code]},null,8,["coupon","loading"])])):B("",!0),c("div",JA,[c("div",XA,[c("div",ZA,V(b(D).cart.total_items)+" sn phm ",1),c("div",YA,[c("div",e5,V(b(Qe)(b(D).cart.subtotal_price)),1)])]),b(D).cart.total_discounts?(v(),k("div",t5,[n5,c("div",s5,[c("div",r5,V(b(Qe)(b(D).cart.total_discounts)),1)])])):B("",!0),c("div",o5,[i5,c("div",a5,[c("div",l5,V(b(Qe)(b(D).cart.shipping_price)),1)])]),c("div",c5,[u5,c("div",d5,[c("div",f5,V(b(Qe)(b(D).cart.total_price)),1)])])])]),c("div",{class:se(["sticky bottom-0 bg-white border-t border-t-gray-100 z-10",de.value&&de.value.length>0?"pt-0":"pt-4"])},[de.value&&de.value.length>0?(v(),k("div",{key:0,onClick:P[12]||(P[12]=N=>Be.value=!0),class:"flex items-center px-1 py-2.5 cursor-pointer"},[U(Sa,{class:"mr-1 text-primary"}),h5,c("div",p5,[m5,U(mp,{class:"text-gray-400 w-4"})])])):B("",!0),c("button",{onClick:P[13]||(P[13]=N=>I()),class:se(["flex items-center justify-center h-12 w-full rounded-lg text-base bg-primary text-white hover:opacity-80 font-medium",x.value&&"opacity-80"])},[x.value?(v(),re(Ht,{key:0,class:"w-[16px] h-[16px] mr-2"})):B("",!0),g5],2)],2)])],512),U(b(Tc),{key:"DrawerRootNested-Address",open:u.value,"onUpdate:open":P[25]||(P[25]=N=>u.value=N),modal:!1},{default:xe(()=>[U(b(Ss),{to:e.chatViewRef},{default:xe(()=>[c("div",{onClick:P[14]||(P[14]=N=>u.value=!1),class:se(["drawer-overlay-custom !z-50",{"drawer-overlay-custom--open":u.value}])},null,2),U(b($s),{class:"bg-white pt-4 flex flex-col rounded-t-3xl absolute bottom-0 left-0 right-0 outline-none z-50 overflow-hidden h-[540px]"},{default:xe(()=>[v5,c("div",y5,V(d.value?"Thm a ch":" S a ch "),1),c("div",b5,[d.value?(v(),k("div",x5,[c("form",{id:"form-submit-new-address",onSubmit:P[21]||(P[21]=cn(N=>ne(),["prevent"])),class:"space-y-[18px]"},[U($n,{modelValue:a.last_name,"onUpdate:modelValue":P[15]||(P[15]=N=>a.last_name=N),field:{name:"last_name",type:"text",label:"H v tn",validate:"required"}},null,8,["modelValue"]),U($n,{modelValue:a.phone,"onUpdate:modelValue":P[16]||(P[16]=N=>a.phone=N),field:{name:"phone",type:"number",label:"S in thoi",validate:"required"}},null,8,["modelValue"]),U($n,{modelValue:a.province_code,"onUpdate:modelValue":P[17]||(P[17]=N=>a.province_code=N),field:{name:"province_code",type:"select",label:"Tnh/Thnh ph",validate:"required",keyValue:"code",keyLabel:"name",options:G.value}},null,8,["modelValue","field"]),c("div",{class:se(["relative",q.district&&"pointer-events-none opacity-80 bg-gray-50"])},[U($n,{classField:q.district&&"loading",modelValue:a.district_code,"onUpdate:modelValue":P[18]||(P[18]=N=>a.district_code=N),field:{name:"district_code",type:"select",label:"Qun/Huyn",validate:"required",keyValue:"code",keyLabel:"name",options:K.value}},null,8,["classField","modelValue","field"]),q.district?(v(),k("div",_5,[U(Ht,{color:"text-gray-700",class:"w-[14px] h-[14px]"})])):B("",!0)],2),c("div",{class:se(["relative",q.ward&&"pointer-events-none opacity-80 bg-gray-50"])},[U($n,{classField:q.ward&&"loading",modelValue:a.ward_code,"onUpdate:modelValue":P[19]||(P[19]=N=>a.ward_code=N),field:{name:"ward_code",type:"select",label:"Phng/X",validate:"required",keyValue:"code",keyLabel:"name",options:H.value}},null,8,["classField","modelValue","field"]),q.ward?(v(),k("div",w5,[U(Ht,{color:"text-gray-700",class:"w-[14px] h-[14px]"})])):B("",!0)],2),U($n,{modelValue:a.address,"onUpdate:modelValue":P[20]||(P[20]=N=>a.address=N),field:{name:"address",type:"textarea",label:"a ch",validate:"required",rows:2}},null,8,["modelValue"])],32),c("div",k5,[c("button",{onClick:P[22]||(P[22]=N=>J()),class:"py-[10px] bg-gray-100 hover:bg-gray-200 rounded-lg flex-1"}," Quay li "),c("button",S5,[y.value?(v(),re(Ht,{key:0,class:"mr-1 w-4 h-4"})):B("",!0),C5])])])):(v(),k("div",$5,[(v(!0),k(be,null,Ie(n.value,N=>{var Z,le;return v(),k("div",{key:N.id,class:"border border-gray-200 rounded-xl bg-white"},[c("div",T5,[c("div",A5,[c("div",E5,V(N.first_name?`${N.first_name} `:"")+" "+V(N.last_name?N.last_name:""),1),N.is_default?(v(),k("div",I5," Mc nh ")):B("",!0)]),c("div",P5,[O5,c("span",R5,V(N.phone),1)]),c("div",M5,[L5,c("span",D5,V(`${N.address} ${N.ward_name}, ${N.district_name}, ${N.province_name}`),1)])]),c("div",N5,[c("button",{onClick:ie=>(s.value=N,u.value=!1),class:se(["px-3 py-2 rounded-xl text-sm",((Z=s.value)==null?void 0:Z.id)===N.id?"bg-primary text-white cursor-default":"hover:bg-gray-50 text-gray-500 border border-gray-200 "])},V(((le=s.value)==null?void 0:le.id)===N.id?"ang s dng":"Giao n a ch ny"),11,j5)])])}),128)),c("div",F5,[c("button",{class:"px-3 py-[10px] bg-gray-100 rounded-lg flex-1",onClick:P[23]||(P[23]=N=>u.value=!1)}," Quay li "),c("button",{onClick:P[24]||(P[24]=N=>d.value=!0),class:"px-3 py-[10px] bg-primary text-white rounded-lg flex-1"}," Thm mi ")])]))])]),_:1})]),_:1},8,["to"])]),_:1},8,["open"]),U(b(Tc),{open:Be.value,"onUpdate:open":P[35]||(P[35]=N=>Be.value=N),modal:!1},{default:xe(()=>[U(b(Ss),{to:e.chatViewRef},{default:xe(()=>[c("div",{onClick:P[26]||(P[26]=N=>Be.value=!1),class:se(["drawer-overlay-custom",{"drawer-overlay-custom--open":Be.value}])},null,2),U(b($s),{class:"absolute bottom-0 left-0 right-0 outline-none z-[50] overflow-hidden h-full"},{default:xe(()=>[c("div",z5,[c("button",{onClick:P[27]||(P[27]=N=>Be.value=!1),class:"size-10 flex items-center justify-center rounded-full hover:bg-gray-100 text-gray-900 absolute right-[12px] top-[14px]"},[U(Ca)]),q5,c("div",B5,[c("div",U5,[c("div",V5,[Ot(c("input",{type:"text","onUpdate:modelValue":P[28]||(P[28]=N=>Re.value=N),placeholder:"Nhp m khuyn mi",class:"block w-full h-10 border border-gray-200 rounded-lg text-base pr-6 pl-10 focus:outline-none"},null,512),[[ln,Re.value]]),U(Sa,{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),Re.value?(v(),k("button",{key:0,onClick:P[29]||(P[29]=N=>Re.value=""),class:"absolute right-2 top-1/2 -translate-y-1/2 z-10 w-4 h-4 flex items-center justify-center bg-gray-400 rounded-full cursor-pointer"},[U(Ca,{class:"w-3 text-white"})])):B("",!0)]),c("button",{onClick:P[30]||(P[30]=N=>O(Re.value,"text")),class:se([[Re.value?"bg-primary text-white":"bg-gray-100 text-gray-300 border border-gray-200 cursor-not-allowed",_e[Re.value]&&"opacity-60 cursor-not-allowed"],"h-10 text-sm font-medium rounded-lg hover:opacity-80 px-4 flex items-center"])},[_e.text?(v(),re(Ht,{key:0,class:"w-4 mr-1"})):B("",!0),H5],2)]),Se.value?(v(),k("div",W5," M khng hp l hoc bn khng nm trong chng trnh p dng ! ")):B("",!0)]),c("div",G5,[c("div",K5,[(v(!0),k(be,null,Ie(de.value,N=>(v(),re(mT,{key:N.id,coupon:N,loading:_e[N.code],"is-active":N.code===$e.value,onOnViewDetail:P[31]||(P[31]=Z=>(Ne.value=!0,X.value=Z)),onRemove:P[32]||(P[32]=Z=>F(Z)),onApply:P[33]||(P[33]=Z=>O(Z))},null,8,["coupon","loading","is-active"]))),128))])]),c("div",Q5,[c("button",{onClick:P[34]||(P[34]=N=>Be.value=!1),class:"flex items-center justify-center h-12 w-full rounded-lg text-base bg-primary text-white hover:opacity-80 font-medium"}," Xong ")])])]),_:1})]),_:1},8,["to"])]),_:1},8,["open"]),U(b(Tc),{open:Ne.value,"onUpdate:open":P[39]||(P[39]=N=>Ne.value=N),modal:!1},{default:xe(()=>[U(b(Ss),{to:e.chatViewRef},{default:xe(()=>[c("div",{onClick:P[36]||(P[36]=N=>Ne.value=!1),class:se(["drawer-overlay-custom !z-50",{"drawer-overlay-custom--open":Ne.value}])},null,2),U(b($s),{class:"absolute bottom-0 left-0 right-0 outline-none z-[50] overflow-hidden h-fit"},{default:xe(()=>[U(jT,{coupon:X.value,active:X.value&&X.value.code===$e.value,onRemove:P[37]||(P[37]=N=>F(N)),onApply:P[38]||(P[38]=N=>O(N))},null,8,["coupon","active"])]),_:1})]),_:1},8,["to"])]),_:1},8,["open"])]),success:xe(()=>{var N,Z,le,ie;return[m.value?(v(),k("div",J5,[c("div",X5,[Z5,m.value.shipping_address?(v(),k("div",Y5,[e3,c("div",t3,[c("div",n3,[(N=m.value.shipping_address)!=null&&N.name||(Z=s.value)!=null&&Z.last_name?(v(),k("div",s3," H v tn ")):B("",!0),c("div",r3,V(m.value.shipping_address.name??((le=s.value)==null?void 0:le.last_name)),1)]),(ie=m.value.shipping_address)!=null&&ie.phone?(v(),k("div",o3,[i3,c("div",a3,V(m.value.shipping_address.phone),1)])):B("",!0),c("div",l3,[c3,c("div",u3,V(m.value.shipping_address.address1),1)])])])):B("",!0),c("div",d3,[f3,c("div",h3,[c("div",p3,[m3,c("div",g3," #"+V(m.value.order_number),1)]),v3,m.value.note?(v(),k("div",y3,[b3,c("div",x3,V(m.value.note),1)])):B("",!0)])]),c("div",null,[m.value.items&&m.value.items.length>0?(v(),k("div",_3," Sn phm  t ")):B("",!0),m.value.items&&m.value.items.length>0?(v(),k("div",w3,[(v(!0),k(be,null,Ie(m.value.items,he=>(v(),re($a,{key:he.product_sku,item:he},null,8,["item"]))),128))])):B("",!0),c("div",null,[c("div",k3,[S3,c("div",C3,[c("div",$3,V(b(Qe)(m.value.subtotal_price)),1)])]),m.value.shipping_price?(v(),k("div",T3,[A3,c("div",E3,[c("div",I3,V(b(Qe)(m.value.shipping_price)),1)])])):B("",!0),m.value.total_discounts?(v(),k("div",P3,[O3,c("div",R3,[c("div",M3,V(b(Qe)(m.value.total_discounts)),1)])])):B("",!0),c("div",L3,[D3,c("div",N3,V(b(Qe)(m.value.total_price)),1)])])])]),c("div",j3,[c("button",{onClick:P[40]||(P[40]=he=>t.value=!1),class:"flex items-center justify-center h-12 w-full rounded-lg text-base bg-primary text-white hover:opacity-80 font-medium"}," Tip tc mua sm ")])])):B("",!0)]}),_:1},8,["chatViewRef","open","slotNames","isNestedOpen"]))}},z3=["src"],q3={__name:"ChatBanner",props:{banners:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:t}){const n="https://widget.easyaichat.app",s=e,r=t,o=L(!0),i=L(null),a=()=>{var u;((u=i.value)==null?void 0:u.offsetWidth)<480?o.value=!0:o.value=!1},l=pe(()=>s.banners.filter(u=>u.image_url));return Ke(()=>{n!==window.location.origin&&a()}),(u,d)=>l.value.length>0?(v(),k("div",{key:0,ref_key:"chatBannerRef",ref:i,class:se(["chat-banners",o.value?"block":"hidden"])},[U(gp,{autoplay:!0,pagination:!0},{default:xe(()=>[(v(!0),k(be,null,Ie(l.value,(f,h)=>(v(),re(vp,{key:h,class:"w-full h-[150px]"},{default:xe(()=>[(v(),re(Gt(f.link?"a":"div"),{href:f.link,target:"_blank",class:"block w-full h-full"},{default:xe(()=>[c("img",{src:f.image_url,alt:"ecg-banner",class:"object-cover w-full h-full"},null,8,z3)]),_:2},1032,["href"]))]),_:2},1024))),128))]),_:1}),c("button",{onClick:d[0]||(d[0]=f=>r("close")),class:"close-banner-btn"},[U(Ca,{class:"w-3"})])],2)):B("",!0)}},B3={class:"relative bg-white mx-auto mt-3 mb-2 w-fit max-w-[300px]"},U3={class:"flex justify-end items-end flex-col gap-1"},V3={class:"flex-shrink-0 px-1.5 py-0.5 text-blue-500 bg-blue-50 w-fit rounded-xl flex items-center gap-1"},H3=c("span",{class:"text-xs"},"Tin nhn thoi",-1),W3={class:"text-sm text-white px-4 py-2.5 bg-primary rounded-xl"},G3={__name:"ChatVoiceCardUser",props:{messageText:{type:String,default:""}},setup(e){return(t,n)=>(v(),k("div",B3,[c("div",U3,[c("div",V3,[U(b(ep),{size:"14"}),H3]),c("div",W3,V(e.messageText),1)])]))}},K3={key:0,class:"reply-suggestions-wrapper"},Q3={class:"suggestions-container"},J3=["onClick"],X3=nt({__name:"MessageReplySuggestions",props:{message:{type:Object,default:()=>{}},conversationId:{type:String,default:""}},emits:["sendMessage"],setup(e,{expose:t,emit:n}){const s=e,r=n,o=L(!1),i=L([]),a="https://console.easyaichat.app",l=async()=>{if(!(!s.conversationId||!s.message.id||o.value)){o.value=!0;try{const d=new FormData;d.append("conversation_id",s.conversationId),d.append("message_id",s.message.id);const f=await fetch(a+"/api/chat/follow-up-questions",{method:"POST",body:d});if(!f.ok)throw new Error(`Li ${f.status}: ${f.statusText}`);const h=await f.json();h&&h.follow_up_questions&&(i.value=h.follow_up_questions)}catch(d){console.error("Li khi ly danh sch gi :",d)}finally{o.value=!1}}},u=d=>{r("sendMessage",d)};return Ke(()=>{l()}),t({suggestions:i}),(d,f)=>i.value.length>0?(v(),k("div",K3,[c("div",Q3,[(v(!0),k(be,null,Ie(i.value,(h,p)=>(v(),k("div",{key:p,class:"suggestion-bubble",onClick:m=>u(h.detail)},V(h.brief),9,J3))),128))])])):B("",!0)}},[["__scopeId","data-v-12d2a3fe"]]),Z3={viewBox:"0 0 24 24"},Y3=["id"],eE=["stop-color"],tE=["stop-color"],nE=["fill"],sE={__name:"IconAI",props:{fromColor:{type:String,default:"#2a83e9"},toColor:{type:String,default:"#0ea5e9"},id:{type:String,default:""}},setup(e){const t=e,n=pe(()=>t.id||`star-gradient-${Math.random().toString(36).substring(2,9)}`);return(s,r)=>(v(),k("svg",Z3,[c("defs",null,[c("linearGradient",{id:n.value,x1:"0%",y1:"0%",x2:"100%",y2:"0%"},[c("stop",{offset:"0%","stop-color":e.fromColor},null,8,eE),c("stop",{offset:"100%","stop-color":e.toColor},null,8,tE)],8,Y3)]),c("path",{fill:`url(#${n.value})`,"fill-rule":"evenodd",d:"M9 4.5a.75.75 0 01.721.544l.813 2.846a3.75 3.75 0 002.576 2.576l2.846.813a.75.75 0 010 1.442l-2.846.813a3.75 3.75 0 00-2.576 2.576l-.813 2.846a.75.75 0 01-1.442 0l-.813-2.846a3.75 3.75 0 00-2.576-2.576l-2.846-.813a.75.75 0 010-1.442l2.846-.813A3.75 3.75 0 007.466 7.89l.813-2.846A.75.75 0 019 4.5zM18 1.5a.75.75 0 01.728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 010 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 01-1.456 0l-.258-1.036a2.625 2.625 0 00-1.91-1.91l-1.036-.258a.75.75 0 010-1.456l1.036-.258a2.625 2.625 0 001.91-1.91l.258-1.036A.75.75 0 0118 1.5zM16.5 15a.75.75 0 01.712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 010 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 01-1.422 0l-.395-1.183a1.5 1.5 0 00-.948-.948l-1.183-.395a.75.75 0 010-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0116.5 15z","clip-rule":"evenodd"},null,8,nE)]))}},rE={class:"shine-wrapper max-h-[20px]"},oE={class:"inline-flex items-center shine-effect"},zo=nt({__name:"AITitle",props:{title:{type:String,default:"AI  xut"},size:{type:String,default:"sm"}},setup(e){const t=e,n=pe(()=>{switch(t.size){case"sm":return"text-xs";case"md":return"text-sm";case"lg":return"text-base";default:return"text-xs"}});return(s,r)=>(v(),k("div",rE,[c("div",oE,[U(sE,{class:se(["mr-1",[e.size==="lg"?"w-6":e.size==="md"?"w-[18px]":"w-4"]]),style:{"max-width":"24px"}},null,8,["class"]),c("div",{class:se([n.value,"font-semibold leading-[120%]"]),style:{background:"linear-gradient(to right, #2a83e9, #0ea5e9)","background-clip":"text","-webkit-background-clip":"text","-webkit-text-fill-color":"transparent"}},V(e.title),3)])]))}},[["__scopeId","data-v-4d267dc9"]]),iE={class:"ai-suggestion-wrapper"},aE={key:0,class:"ai-suggestion-container pb-1 pt-2 pl-4 pr-[10px] border-t border-gray-50 shadow-[0_-2px_4px_-1px_rgba(0,0,0,0.05)] rounded-t-xl bg-white",style:{"will-change":"max-height, opacity"}},lE=["title"],cE={key:0,class:"w-[48px] max-h-[48px] h-auto rounded overflow-hidden mr-2 flex-shrink-0"},uE=["src","alt"],dE={key:1,class:"size-[48px] flex items-center justify-center"},fE=["src","alt"],hE={class:"relative flex-1"},pE={class:"text-sm leading-[140%] line-clamp-2 text-gray-900"},mE={key:0,class:"flex flex-wrap"},gE=["onClick","innerHTML"],vE="ecg-quick-replies",yE=nt({__name:"WidgetFeatureAIProductInsight",props:{widget:{type:Object,default:()=>({})}},emits:["sendMessage"],setup(e,{expose:t,emit:n}){var H,ee,ce,W;const s=e,r=n,{bot:o,handle:i}=Ct(me.state),a=(ee=(H=o.value.config)==null?void 0:H.ui)==null?void 0:ee.logo,l=(W=(ce=o.value.config)==null?void 0:ce.ui)==null?void 0:W.name,u=L(null),d=L(null),f=L(null),h=L(!1),p=L(!1),m=L([]),x=L(!1),y=L(null),_=(Q,J=[],ne)=>{var Ce;const ke=((Ce=s.widget)==null?void 0:Ce.dynamic_prompts)??Sr[i.value]??Sr.default;let qe=$h(ke,{title:Q,logo:a,brand:l})[ne];return J.length>0&&qe.length>J.length?J.map(Re=>qe.find(Be=>Be.id===Re)).filter(Boolean):qe},C=()=>{let Q=pt.get(vE);return(!Q||Q==="undefined")&&(Q={}),Q},A=()=>{const Q=C(),J=b1(f.value.name);return Q[J]??[]},E=Q=>{Xs().send({message:Q.message}),m.value=m.value.filter(J=>J.id!==Q.id),m.value.length===0&&(h.value=!1),r("sendMessage",Q.message)},$=()=>{var J;const Q=((J=f.value.image)==null?void 0:J.contentUrl)??f.value.image;return Array.isArray(Q)?Q[0]:Q},T=({selector:Q,position:J,widget:ne,style:ke}={})=>{u.value&&(u.value.remove(),u.value=null),typeof window<"u"&&window.EAC&&!u.value?u.value=window.EAC.injectWidget(Q,ne,{position:J,style:ke}):u.value=nc(Q,ne,{position:J,style:ke})},I=({selector:Q,position:J,widget:ne,style:ke,props:qe}={})=>{d.value&&(d.value.remove(),d.value=null),typeof window<"u"&&window.EAC&&!d.value?d.value=window.EAC.injectWidget(Q,ne,{position:J,style:ke,props:qe}):d.value=nc(Q,ne,{position:J,style:ke,props:qe})},R=()=>{const Q=Vt("Product");if(!Q)return;let J=Q.sku?"product":"category";if(i.value===Cr&&(J="product"),J==="product"&&i.value===Sn&&(T({selector:".gallery-product",position:"bottom",widget:s.widget,style:{margin:"12px 0",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"12px",overflow:"hidden"}}),I({selector:"[data-target='panel-main-item']",position:"before",widget:{type:"ai_summary_page_content"},style:{margin:"16px 0"},props:{isShowHighlight:!1}})),J==="product"&&i.value===Cr){const ne=Yn()?{selector:"#form1 a#ca",position:"before",widget:s.widget,style:{width:"98%",margin:"0 auto",margin:"12px 0",border:"1px solid #e5e7eb",padding:"12px"}}:{selector:"#form1 ul.tu",position:"before",widget:s.widget,style:{width:"100%",maxWidth:"824px",marginBottom:"12px",border:"1px solid #e5e7eb",padding:"12px"}};T(ne)}},q=()=>{f.value=Vt("Product");const Q=Tr();if(f.value){i.value===Cr&&(f.value.name=Q.title);const J=A();y.value=$()??zl();let ne=f.value.sku?"product":"category";i.value===Cr&&(ne="product"),m.value=_(f.value.name,J,ne),setTimeout(()=>{h.value=!0},200)}else{const J=y1({handle:i.value});if(J){f.value={name:Q.title};const ne=A();y.value=zl();const ke=J==="product"?"product":"category";m.value=_(f.value.name,ne,ke),setTimeout(()=>{h.value=!0},200)}}},G=()=>{m.value=[],h.value=!1,f.value=null,x.value=!1,y.value=null,u.value&&(u.value.remove(),u.value=null)},K=()=>{h.value=!h.value,h.value?p.value=!1:(p.value=!1,setTimeout(()=>{p.value=!0},200))};return Ke(()=>{$o(()=>{qi.SPA.includes(i.value)&&G(),setTimeout(()=>{q(),qi.SPA.includes(i.value)&&R()},1500),u.value&&qi.SPA.includes(i.value)&&(u.value.remove(),u.value=null)},!0),qi.SSR.includes(i.value)&&R()}),t({tags:m,showToggleButton:p}),(Q,J)=>(v(),k("div",iE,[U(mn,{name:"expand-ai-suggestion"},{default:xe(()=>[f.value&&h.value?(v(),k("div",aE,[c("div",{title:f.value.name,class:"flex items-start"},[y.value&&!x.value?(v(),k("div",cE,[c("img",{src:y.value,alt:f.value.name,onError:J[0]||(J[0]=()=>{x.value=!0}),class:"object-contain w-full h-full"},null,40,uE)])):(v(),k("div",dE,[c("img",{src:b(a),alt:b(l),class:"w-[24px] h-[24px] object-cover rounded-full overflow-hidden"},null,8,fE)])),c("div",hE,[U(zo,{title:"AI  xut",class:"mb-1"}),c("div",pE,V(f.value.name),1)]),c("button",{onClick:K,class:"flex-shrink-0 p-1 ml-2 text-gray-500 transition-colors hover:text-gray-700"},[U(b(Kh),{class:"w-4 h-4"})])],8,lE),m.value.length>0?(v(),k("div",mE,[(v(!0),k(be,null,Ie(m.value,ne=>(v(),k("button",{key:ne.name,onClick:ke=>E(ne),class:"prose suggestion-tag",innerHTML:ne.name},null,8,gE))),128))])):B("",!0)])):B("",!0)]),_:1}),f.value&&!h.value&&p.value?(v(),k("button",{key:0,onClick:J[1]||(J[1]=ne=>K()),class:"flex absolute bottom-0 right-3 z-30 ml-auto gap-1 items-center py-2 pl-2.5 pr-3 bg-white rounded-3xl rounded-br-md border border-blue-200 hover:bg-blue-50 cursor-pointer ai-suggestion-toggle"},[U(zo,{title:"AI  xut"})])):B("",!0)]))}},[["__scopeId","data-v-96d6e779"]]),bE={class:"relative py-4 bg-white rounded-t-2xl overflow-hidden outline-none"},xE=c("div",{class:"relative text-center mb-2"},[c("div",{class:"w-[36px] h-[6px] rounded-full bg-gray-500 cursor-grab mx-auto mb-2"}),c("div",{class:"font-semibold text-gray-700 text-lg"}," Thng tin c nhn ")],-1),_E={class:"px-3 divide-y divide-gray-100"},wE={class:"flex px-4 py-3"},kE=c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500 mr-3"},[c("circle",{cx:"12",cy:"8",r:"5"}),c("path",{d:"M20 21a8 8 0 0 0-16 0"})],-1),SE=c("div",{class:"text-sm text-gray-400"},"H v tn",-1),CE={class:"text-base text-gray-700"},$E={class:"flex px-4 py-3"},TE=gl('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500 mr-3"><path d="M8 2v4"></path><path d="M16 2v4"></path><rect width="18" height="18" x="3" y="4" rx="2"></rect><path d="M3 10h18"></path></svg>',1),AE=c("div",{class:"text-sm text-gray-400"},"Ngy sinh",-1),EE={class:"text-base text-gray-700"},IE={class:"flex px-4 py-3"},PE=gl('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-gray-500 mr-3 scale-125"><g clip-path="url(#clip0_2871_105064)"><path d="M16.8719 1.81324C16.871 1.80435 16.8693 1.79573 16.8681 1.78696C16.8665 1.77555 16.8651 1.76411 16.8629 1.75278C16.8608 1.74255 16.858 1.7326 16.8555 1.72253C16.8531 1.71284 16.8509 1.70311 16.848 1.6935C16.845 1.68362 16.8413 1.67408 16.8378 1.66439C16.8344 1.65482 16.8313 1.64516 16.8274 1.63574C16.8236 1.62674 16.8192 1.61812 16.8151 1.60931C16.8105 1.59962 16.8062 1.58985 16.8011 1.58035C16.7966 1.57192 16.7915 1.56395 16.7866 1.55575C16.781 1.54644 16.7758 1.53698 16.7697 1.5279C16.7637 1.51905 16.7571 1.5107 16.7508 1.50219C16.7449 1.49437 16.7395 1.48636 16.7332 1.47873C16.7214 1.46427 16.7087 1.45046 16.6956 1.43711C16.6943 1.43578 16.6932 1.43433 16.6919 1.43303C16.6904 1.4315 16.6887 1.43028 16.6872 1.42876C16.6741 1.41587 16.6605 1.40343 16.6462 1.39172C16.6388 1.38565 16.6311 1.38039 16.6235 1.37474C16.6147 1.36818 16.6061 1.36139 16.597 1.35529C16.5882 1.34941 16.5791 1.3443 16.5701 1.33892C16.5616 1.33385 16.5533 1.32851 16.5445 1.32378C16.5355 1.31897 16.5263 1.31493 16.5171 1.31058C16.5078 1.30615 16.4985 1.3015 16.489 1.29753C16.4803 1.29395 16.4715 1.29109 16.4627 1.28792C16.4522 1.28411 16.4418 1.28014 16.4311 1.27686C16.4226 1.27434 16.414 1.27247 16.4055 1.2703C16.3943 1.26744 16.3832 1.26431 16.3718 1.26206C16.3623 1.26019 16.3528 1.25916 16.3433 1.25771C16.3326 1.25611 16.3221 1.25416 16.3113 1.25309C16.2955 1.25157 16.2797 1.25107 16.2638 1.25069C16.2592 1.25061 16.2547 1.25 16.25 1.25H13.125C12.9592 1.25 12.8003 1.31585 12.6831 1.43306C12.5658 1.55027 12.5 1.70924 12.5 1.875C12.5 2.04076 12.5658 2.19973 12.6831 2.31694C12.8003 2.43415 12.9592 2.5 13.125 2.5H14.7411L12.8322 4.40887C12.2025 3.86831 11.455 3.48283 10.6494 3.28336C9.84389 3.0839 9.00282 3.07599 8.19368 3.26028C7.38453 3.44458 6.62984 3.81593 5.99014 4.34457C5.35043 4.8732 4.84352 5.54441 4.51007 6.30433C4.17662 7.06426 4.0259 7.89175 4.07001 8.72045C4.11412 9.54914 4.35183 10.356 4.76407 11.0762C5.1763 11.7964 5.7516 12.41 6.44381 12.8678C7.13601 13.3255 7.92586 13.6147 8.75 13.712V15.3125H6.875C6.70924 15.3125 6.55027 15.3783 6.43306 15.4956C6.31585 15.6128 6.25 15.7717 6.25 15.9375C6.25 16.1033 6.31585 16.2622 6.43306 16.3794C6.55027 16.4967 6.70924 16.5625 6.875 16.5625H8.75V18.125C8.75 18.2908 8.81585 18.4497 8.93306 18.5669C9.05027 18.6842 9.20924 18.75 9.375 18.75C9.54076 18.75 9.69973 18.6842 9.81694 18.5669C9.93415 18.4497 10 18.2908 10 18.125V16.5625H11.875C12.0408 16.5625 12.1997 16.4967 12.3169 16.3794C12.4342 16.2622 12.5 16.1033 12.5 15.9375C12.5 15.7717 12.4342 15.6128 12.3169 15.4956C12.1997 15.3783 12.0408 15.3125 11.875 15.3125H10V13.712C10.9189 13.604 11.7937 13.2576 12.5374 12.7072C13.2812 12.1568 13.8681 11.4215 14.24 10.5743C14.6119 9.72705 14.7558 8.79731 14.6575 7.87729C14.5591 6.95727 14.222 6.07895 13.6794 5.32944L15.625 3.38391V5C15.625 5.16576 15.6908 5.32473 15.8081 5.44194C15.9253 5.55915 16.0842 5.625 16.25 5.625C16.4158 5.625 16.5747 5.55915 16.6919 5.44194C16.8092 5.32473 16.875 5.16576 16.875 5V1.87519C16.875 1.85451 16.8739 1.83384 16.8719 1.81324ZM9.375 12.5C8.57151 12.5 7.78607 12.2617 7.118 11.8153C6.44992 11.369 5.92922 10.7345 5.62174 9.99215C5.31426 9.24983 5.23381 8.43299 5.39056 7.64495C5.54731 6.8569 5.93423 6.13303 6.50238 5.56488C7.07053 4.99673 7.7944 4.60981 8.58245 4.45306C9.37049 4.29631 10.1873 4.37676 10.9297 4.68424C11.672 4.99172 12.3065 5.51242 12.7528 6.1805C13.1992 6.84857 13.4375 7.63401 13.4375 8.4375C13.4363 9.51457 13.0079 10.5472 12.2463 11.3088C11.4847 12.0704 10.4521 12.4988 9.375 12.5Z" fill="currentColor"></path></g><defs><clipPath id="clip0_2871_105064"><rect width="20" height="20" fill="white"></rect></clipPath></defs></svg>',1),OE=c("div",{class:"text-sm text-gray-400"},"Gii tnh",-1),RE={class:"text-base text-gray-700"},ME={class:"flex px-4 py-3"},LE=c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500 mr-3"},[c("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})],-1),DE=c("div",{class:"text-sm text-gray-400"},"S in thoi",-1),NE={class:"text-base text-gray-700"},jE={class:"flex px-4 py-3"},FE=c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-3 text-gray-500"},[c("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),c("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})],-1),zE=c("div",{class:"text-sm text-gray-400"},"a ch email",-1),qE={class:"text-base text-gray-700"},BE={__name:"AuthAccount",setup(e){const t={male:"Nam",female:"N"};return(n,s)=>(v(),k("div",bE,[xE,c("div",_E,[c("div",wE,[kE,c("div",null,[SE,c("div",CE,V(b(D).user.name),1)])]),c("div",$E,[TE,c("div",null,[AE,c("div",EE,V(b(D).user.birthday),1)])]),c("div",IE,[PE,c("div",null,[OE,c("div",RE,V(t[b(D).user.gender]??"Khc"),1)])]),c("div",ME,[LE,c("div",null,[DE,c("div",NE,V(b(D).user.phone),1)])]),c("div",jE,[FE,c("div",null,[zE,c("div",qE,V(b(D).user.email??"---"),1)])])])]))}},Ze=e=>(In("data-v-d8858f82"),e=e(),Pn(),e),UE={class:"flow-auth-checkout relative"},VE=[Ze(()=>c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.75","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-user-round"},[c("circle",{cx:"12",cy:"8",r:"5"}),c("path",{d:"M20 21a8 8 0 0 0-16 0"})],-1)),Ze(()=>c("div",null,"Ti khon",-1))],HE=[Ze(()=>c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.75","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-shopping-bag"},[c("path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"}),c("path",{d:"M3 6h18"}),c("path",{d:"M16 10a4 4 0 0 1-8 0"})],-1)),Ze(()=>c("div",null,"n hng",-1))],WE=[Ze(()=>c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.75","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-log-out"},[c("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),c("polyline",{points:"16 17 21 12 16 7"}),c("line",{x1:"21",x2:"9",y1:"12",y2:"12"})],-1)),Ze(()=>c("div",null,"ng xut",-1))],GE={class:"px-6 py-6 bg-white rounded-t-2xl overflow-hidden"},KE=Ze(()=>c("div",{class:"text-center font-medium text-gray-600 text-xl"}," Xc thc thnh cng  ",-1)),QE=Ze(()=>c("div",{class:"my-6"},[c("p",{class:"text-sm text-gray-900 marker:text-xs"}," Tn hng cc li ch b sung v tri nghim phong ph hn cho ti khon "),c("ul",{class:"pl-8 list-disc mt-3 space-y-2"},[c("li",{class:"text-sm text-gray-900"}," Mua hng vi u i c bit  "),c("li",{class:"text-sm text-gray-900"}," Lu li trng thi gi hng ca bn.  "),c("li",{class:"text-sm text-gray-900"}," Kim trng thi n hng.  "),c("li",{class:"text-sm text-gray-900"},"...")])],-1)),JE={class:"bg-white mt-4"},XE={class:"px-6 pb-6 pt-3 bg-white rounded-t-2xl relative"},ZE=Ze(()=>c("div",{class:"flex justify-center mb-2"},[c("div",{class:"w-[36px] h-[6px] rounded-full bg-gray-500 cursor-grab mx-auto"})],-1)),YE=Ze(()=>c("div",{class:"font-medium text-[20px] text-center tracking-wide text-gray-900 mb-3"}," n hng ca ti ",-1)),e4={class:"relative h-[520px] overflow-y-scroll scroll-hidden space-y-6"},t4=[Ze(()=>c("div",{class:"h-[48px] rounded-xl bg-gray-100"},null,-1)),Ze(()=>c("div",{class:"flex-1 rounded-xl bg-gray-100"},null,-1)),Ze(()=>c("div",{class:"h-[60px] rounded-xl bg-gray-100"},null,-1))],n4={class:"rounded-xl bg-white border border-gray-200 overflow-hidden"},s4={class:"py-3 pl-4 pr-3.5 flex items-center justify-between border-b border-b-gray-200"},r4={class:"space-x-1"},o4=Ze(()=>c("span",{class:"text-sm text-gray-500"},"n hng:",-1)),i4={class:"text-sm text-gray-700 font-semibold"},a4={key:0,class:"flex items-center justify-center h-[26px] px-3 text-xs font-medium rounded-md capitalize bg-blue-50 text-blue-600"},l4={class:"w-full max-w-full overflow-x-auto scroll-hidden flex space-x-4 py-3 pr-4"},c4={class:"w-[94px] h-[94px] mx-auto flex items-center justify-center rounded-lg bg-white overflow-hidden"},u4=["src"],d4=["src","alt","onError"],f4={class:"px-1 mt-2"},h4={class:"text-xs line-clamp-2 font-medium"},p4={class:"h-6 min-w-6 px-0.5 font-medium text-gray-500 flex items-center justify-center text-[10px] bg-gray-200 absolute top-0 right-0 rounded-bl-xl"},m4={class:"py-3 px-4 border-t border-t-gray-200 flex items-center justify-between"},g4={class:"text-sm text-gray-700"},v4={class:"text-sm"},y4=Ze(()=>c("span",{class:"mr-1 text-gray-500"},"Tng tin:",-1)),b4={class:"text-red-500 test-sm font-semibold"},x4=["onClick"],_4={key:0,class:"h-[380px] flex items-center justify-center"},w4=[Ze(()=>c("div",null,[c("div",{class:"flex flex-col items-center justify-center space-y-2"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-700"},[c("circle",{cx:"8",cy:"21",r:"1"}),c("circle",{cx:"19",cy:"21",r:"1"}),c("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"})]),c("div",{class:"text-lg font-semibold text-gray-700"}," Khng tm thy n hng ")])],-1))],k4={class:"relative py-6 bg-white rounded-t-2xl overflow-hidden outline-none"},S4={class:"flex items-center pl-4 pr-6"},C4={key:0,class:"h-[40px] w-full rounded-xl bg-gray-100 ml-3"},$4=Ze(()=>c("div",{class:"font-semibold text-gray-900 text-lg tracking-tight"}," n hng chi tit ",-1)),T4={key:0,class:"flex items-center justify-center h-[26px] px-3 text-xs font-medium bg-blue-50 text-blue-600 rounded-md ml-auto"},A4={class:"relative max-h-[480px] overflow-y-scroll scroll-hidden space-y-4 px-6 mt-4"},E4=[Ze(()=>c("div",{class:"h-[42px] rounded-xl bg-gray-100"},null,-1)),Ze(()=>c("div",{class:"flex-1 rounded-xl bg-gray-100"},null,-1)),Ze(()=>c("div",{class:"h-[52px] rounded-xl bg-gray-100"},null,-1))],I4={class:"rounded-xl border border-gray-200"},P4=Ze(()=>c("div",{class:"py-3 px-4 text-base font-medium text-gray-900 border-b border-b-gray-200"}," Thng tin ngi nhn ",-1)),O4={class:"py-3 px-4 space-y-2"},R4={key:0,class:"flex space-x-3"},M4=Ze(()=>c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," H v tn ",-1)),L4={class:"text-sm text-gray-700 font-medium"},D4={class:"flex space-x-3"},N4=Ze(()=>c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," S in thoi ",-1)),j4={class:"text-sm text-gray-700 font-medium"},F4={class:"flex space-x-3"},z4=Ze(()=>c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," a ch nhn hng ",-1)),q4={class:"text-sm text-gray-700 font-medium"},B4={class:"rounded-xl border border-gray-200"},U4=Ze(()=>c("div",{class:"py-3 px-4 text-base font-medium text-gray-900 border-b border-b-gray-200"}," Thng tin n hng ",-1)),V4={class:"py-3 px-4 space-y-2"},H4={class:"flex space-x-3"},W4=Ze(()=>c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," Ngy t hng ",-1)),G4={class:"text-sm text-gray-700 font-medium"},K4={class:"flex space-x-3"},Q4=Ze(()=>c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," M n hng ",-1)),J4={class:"text-sm text-gray-700 font-medium"},X4=Ze(()=>c("div",{class:"flex space-x-3"},[c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," Phng thc thanh ton "),c("div",{class:"text-sm text-gray-700 font-medium"}," Thanh ton tin mt khi nhn hng (COD) ")],-1)),Z4={key:0,class:"flex space-x-3"},Y4=Ze(()=>c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," Ghi ch ",-1)),e6={class:"text-sm text-gray-700 font-medium"},t6=Ze(()=>c("div",{class:"font-semibold text-gray-700 mb-3"}," Sn phm  t ",-1)),n6={class:"space-y-3 mb-4 border-b border-b-gray-200 pb-4"},s6={class:"flex items-center justify-between"},r6=Ze(()=>c("div",{class:"text-gray-500 mr-2 text-sm"}," Tng tin hng ",-1)),o6={class:"text-right text-[16px] font-medium"},i6={class:"text-gray-700 text-sm"},a6={key:0,class:"flex items-center justify-between"},l6=Ze(()=>c("div",{class:"text-gray-500 mr-2 text-sm"}," Khuyn mi ",-1)),c6={class:"text-right text-[16px] font-medium"},u6={class:"text-green-500 text-sm"},d6={key:1,class:"flex items-center justify-between"},f6=Ze(()=>c("div",{class:"text-gray-500 mr-2 text-sm"}," Ph vn chuyn ",-1)),h6={class:"text-right text-base"},p6={class:"text-gray-700 text-sm"},m6={class:"flex items-center justify-between mt-2"},g6=Ze(()=>c("div",{class:"text-gray-500 mr-2 text-sm"},[c("span",{class:"font-medium text-gray-900"},"Tng cng"),c("span",{class:"text-xs ml-1"},"( bao gm VAT)")],-1)),v6={class:"text-red-500 text-base font-semibold"},y6=nt({__name:"FlowAuth",props:vr(["chatViewRef"],{open:{},openModifiers:{}}),emits:["update:open"],setup(e){var A,E;const t=Ls(e,"open"),n=L("phone"),s=L(!1),r=((E=(A=D.bot)==null?void 0:A.config)==null?void 0:E.ui.logo)||`${D.appDomain}/link.png`,o=pe(()=>[{name:"phone",active:n.value==="phone"},{name:"otp",active:n.value==="otp"},{name:"success",active:n.value==="success"},{name:"orders",active:n.value==="orders"},{name:"order-detail",active:n.value==="order-detail"},{name:"account",active:n.value==="account"}]),i=$=>{o.value.find(I=>I.name===$)&&(n.value=$)},a=L(null),l=$=>{i("otp"),a.value=$.form.identifier},u=$=>{i("success")},d=async()=>{try{const $=await ze.auth.logout();D.user=null,D.token=null,s.value=!1,pt.remove(Ln);const{data:T}=await ze.cart.getList();T.success&&(D.cart=T.data,ECG.sync.emit("logout",{source:"easy-ai-chat",data:T.data}))}catch{}},f=L([]),h=L(null),p=L({}),m=L(!1),x=L(!1),y=async()=>{try{const{data:$}=await ze.order.getStatuses();if($.success){const T=$.data||[];p.value=T.reduce((I,R)=>(I[R.code]=R.name,I),{})}}catch($){console.log("error: ",$)}},_=async()=>{try{m.value=!0,y();const{data:$}=await ze.order.getList({paginate:!1});$.success&&(f.value=$.data.orders)}catch($){const T=$.response.data.raw;T.success&&(f.value=T.data.orders)}finally{m.value=!1}},C=async $=>{try{if(!$||x.value)return;i("order-detail"),x.value=!0;const{data:T}=await ze.order.getOne($);T.success&&(h.value=T.data)}catch{}finally{x.value=!1}};return Ee(s,$=>{$&&_()}),($,T)=>(v(),k(be,null,[c("div",UE,[b(D).user?(v(),k("button",{key:0,onClick:T[0]||(T[0]=I=>s.value=!s.value),class:"size-8 flex items-center justify-center rounded-lg cursor-pointer bg-white/10 hover:bg-white/20"},[U(b(ip),{size:"14"})])):(v(),k("button",{key:1,onClick:T[1]||(T[1]=I=>(t.value=!0,n.value="phone")),class:"size-8 flex items-center justify-center rounded-lg cursor-pointer bg-white/10 hover:bg-white/20"},[U(b(ip),{size:"14"})])),c("div",{class:se(["ecg-account-menu",s.value&&"open"])},[c("button",{onClick:T[2]||(T[2]=I=>(s.value=!1,t.value=!0,n.value="account")),class:"ecg-account-menu-item"},VE),c("button",{onClick:T[3]||(T[3]=I=>(s.value=!1,t.value=!0,n.value="orders")),class:"ecg-account-menu-item"},HE),c("button",{class:"ecg-account-menu-item",onClick:T[4]||(T[4]=I=>d())},WE)],2)]),U(Up,{chatViewRef:e.chatViewRef,open:t.value,"onUpdate:open":T[7]||(T[7]=I=>t.value=I),slotNames:o.value},{phone:xe(()=>[U(Hp,{onSuccess:l})]),otp:xe(()=>[U(Wp,{identifier:a.value,onSuccess:u},null,8,["identifier"])]),success:xe(()=>[c("div",GE,[KE,QE,c("div",JE,[c("button",{onClick:T[5]||(T[5]=I=>t.value=!1),class:"flex items-center justify-center h-12 w-full rounded-lg text-base bg-primary text-white hover:opacity-80 font-medium"}," Tip tc mua sm ")])])]),orders:xe(()=>[c("div",XE,[ZE,YE,c("div",e4,[m.value?(v(),k(be,{key:0},Ie(3,(I,R)=>c("div",{key:R,class:"rounded-xl animate-pulse bg-white overflow-hidden h-[316px] flex flex-col space-y-3 p-3 border border-gray-100"},t4)),64)):(v(),k(be,{key:1},[(v(!0),k(be,null,Ie(f.value,I=>(v(),k("div",n4,[c("div",s4,[c("div",r4,[o4,c("span",i4,"#"+V(I.order_number),1)]),p.value[I.status]?(v(),k("div",a4,V(p.value[I.status]),1)):B("",!0)]),c("div",l4,[(v(!0),k(be,null,Ie(I.items,R=>(v(),k("div",{class:se([I.items.length>2?"ml-4 last:ml-0":"ml-4","w-[120px] flex-shrink-0 px-2 pt-6 pb-3 bg-gray-100 rounded-xl relative overflow-hidden"])},[c("div",c4,[R.fe_is_image_error?(v(),k("img",{key:0,src:b(r),alt:"image error",class:"w-[28px] h-[28px]"},null,8,u4)):(v(),k("img",{key:1,src:R.image,alt:R.name,class:"w-full h-full object-cover",onError:q=>R.fe_is_image_error=!0},null,40,d4))]),c("div",f4,[c("div",h4,V(R.name),1)]),c("div",p4," x"+V(R.quantity),1)],2))),256))]),c("div",m4,[c("div",null,[c("div",g4,V(I.total_items)+" sn phm ",1),c("div",v4,[y4,c("span",b4,V(b(Qe)(I.total_price)),1)])]),c("button",{onClick:R=>C(I.id),class:"px-4 h-9 hover:bg-gray-200 text-gray-700 rounded-xl flex items-center justify-center text-sm font-medium border"}," Xem chi tit ",8,x4)])]))),256)),f.value.length===0?(v(),k("div",_4,w4)):B("",!0)],64))])])]),"order-detail":xe(()=>[c("div",k4,[c("div",S4,[x.value?(v(),k("div",C4)):(v(),k(be,{key:1},[c("button",{onClick:T[6]||(T[6]=I=>i("orders")),class:"size-10 flex items-center justify-center rounded-full hover:bg-gray-100 text-gray-900 mr-0.5"},[U(Vp)]),$4,p.value[h.value.status]?(v(),k("div",T4,V(p.value[h.value.status]),1)):B("",!0)],64))]),c("div",A4,[x.value||!h.value?(v(),k(be,{key:0},Ie(3,(I,R)=>c("div",{key:R,class:"rounded-xl animate-pulse bg-white overflow-hidden h-[280px] flex flex-col space-y-3 p-3 border border-gray-200"},E4)),64)):(v(),k(be,{key:1},[c("div",I4,[P4,c("div",O4,[h.value.shipping_address.name?(v(),k("div",R4,[M4,c("div",L4,V(h.value.shipping_address.name),1)])):B("",!0),c("div",D4,[N4,c("div",j4,V(h.value.shipping_address.phone),1)]),c("div",F4,[z4,c("div",q4,V(`${h.value.shipping_address.address1}`),1)])])]),c("div",B4,[U4,c("div",V4,[c("div",H4,[W4,c("div",G4,V(b(Dl)(h.value.created_at)),1)]),c("div",K4,[Q4,c("div",J4," #"+V(h.value.order_number),1)]),X4,h.value.note?(v(),k("div",Z4,[Y4,c("div",e6,V(h.value.note??"---"),1)])):B("",!0)])]),c("div",null,[t6,c("div",n6,[(v(!0),k(be,null,Ie(h.value.items,I=>(v(),re($a,{key:I.sku,item:I},null,8,["item"]))),128))]),c("div",null,[c("div",s6,[r6,c("div",o6,[c("div",i6,V(b(Qe)(h.value.subtotal_price)),1)])]),h.value.total_discounts?(v(),k("div",a6,[l6,c("div",c6,[c("div",u6,V(b(Qe)(h.value.total_discounts)),1)])])):B("",!0),h.value.shipping_price?(v(),k("div",d6,[f6,c("div",h6,[c("div",p6,V(b(Qe)(h.value.shipping_price)),1)])])):B("",!0),c("div",m6,[g6,c("div",v6,V(b(Qe)(h.value.total_price)),1)])])])],64))])])]),account:xe(()=>[U(BE)]),_:1},8,["chatViewRef","open","slotNames"])],64))}},[["__scopeId","data-v-d8858f82"]]),b6={key:0,class:"relative"},x6={key:0,class:"absolute top-0 inset-x-0 -translate-y-[110%]"},_6={class:"bg-red-50 w-[100%] rounded-2xl relative py-3 pl-4 pr-10 flex items-start border border-red-300"},w6={class:"space-y-2"},k6={class:"text-red-600 whitespace-pre-line flex items-start"},S6={class:"pt-0.5"},C6={class:"text-sm"},$6={key:1,class:"custom-scrollbar",style:{"will-change":"max-height, opacity"}},T6={class:"flex space-x-3 w-fit pt-3 pb-1"},A6=["onClick"],E6={key:0,class:"group relative w-full h-full"},I6=["src"],P6=nt({__name:"FilePreview",props:{disabled:{type:Boolean,default:!1},showEmptyState:{type:Boolean,default:!0}},setup(e){const t=e,{removeFile:n,processedFiles:s,isImageFile:r,errors:o}=da();Ee(o,a=>{if(a&&a.length>0){const l=setTimeout(()=>{o.value=[],clearTimeout(l)},5e3)}});const i=a=>{t.disabled||n(a)};return(a,l)=>b(s).length>0||b(o).length>0?(v(),k("div",b6,[b(o).length>0?(v(),k("div",x6,[c("div",_6,[c("div",w6,[(v(!0),k(be,null,Ie(b(o),u=>(v(),k("div",k6,[c("div",S6,[U(b(Gx),{size:"20","stroke-width":"1.5",class:"flex-shrink-0 mr-2"})]),c("p",C6,V(u),1)]))),256))]),c("button",{onClick:l[0]||(l[0]=u=>o.value=[]),class:"size-7 flex-shrink-0 rounded-3xl flex items-center justify-center absolute top-2 right-1.5"},[U(b(Zs),{size:"18",class:"text-red-500"})])])])):B("",!0),b(s).length>0?(v(),k("div",$6,[c("div",T6,[(v(!0),k(be,null,Ie(b(s),u=>(v(),k("div",{key:u.file_id,class:"eac-card-file"},[c("button",{type:"button",class:"eac-remove-file",onClick:d=>i(u.file_id)},[U(b(Zs),{size:"12","stroke-width":"2"})],8,A6),c("div",{class:se(["relative border border-gray-200 overflow-hidden rounded-xl",{"w-[240px] sm:w-[268px] h-[60px]":!b(r)(u.mime_type),"w-[60px] h-[60px]":b(r)(u.mime_type),"shadow-sm":b(r)(u.mime_type)}])},[b(r)(u.mime_type)?(v(),k("div",E6,[c("img",{src:u.url,alt:"preview",class:"w-full h-full object-cover"},null,8,I6)])):(v(),re(xp,{key:1,file:u},null,8,["file"]))],2)]))),128))])])):B("",!0)])):B("",!0)}},[["__scopeId","data-v-9bcfc1e2"]]),O6={class:"w-fit"},R6=["accept","multiple"],M6=["disabled"],L6={__name:"FileTrigger",props:{accept:{type:String,default:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif,.xls,.xlsx,.csv"},maxSize:{type:Number,default:2*1024*1024,validator:e=>e>0},maxFiles:{type:Number,default:10,validator:e=>e>0},disabled:{type:Boolean,default:!1},handle:{type:String,default:""}},setup(e){const t="https://console.easyaichat.app",n=e,{uploading:s,processedFiles:r,acceptTypes:o,maxFiles:i,validateFiles:a,updateConfig:l}=da();(()=>{l({accept:n.accept,maxSize:n.maxSize,maxFiles:n.maxFiles})})();const d=L(null),f=()=>{n.disabled||d.value.click()};async function h(x){const y=new FormData;y.append("file",x),y.append("handle",n.handle);try{const _=await fetch(t+"/api/chat/upload",{method:"POST",body:y});if(!_.ok)throw new Error(`Li ${_.status}: ${_.statusText}`);return await _.json()}catch(_){return console.error(`Li khi upload file ${x.name}:`,_),null}}async function p(x){try{s.value=!0;const y=Array.from(x).map(h),C=(await Promise.all(y)).map(A=>A.file);r.value=[...r.value,...C]}catch(y){console.log("Errors: ",y)}finally{setTimeout(()=>{s.value=!1},500)}}const m=x=>{if(n.disabled)return;const y=x.target.files;if(!y.length)return;a(y)&&p(y),x.target.value=""};return(x,y)=>(v(),k("div",O6,[c("input",{ref_key:"fileInput",ref:d,type:"file",class:"hidden",accept:b(o),multiple:b(i)>1,onChange:m},null,40,R6),c("button",{type:"button",class:"size-9 flex items-center justify-center rounded-xl sm:hover:bg-gray-100 cursor-pointer text-gray-500",onClick:f,disabled:e.disabled},[U(b(c_),{size:"18"})],8,M6)]))}},ve=st({isOpen:!1,isRecording:!1,isProcessing:!1,isStartSpeechToText:!1,showPermissionDenied:!1,permissionStatus:"prompt",recognition:null,recordedTranscript:"",recordTime:0,recordingTimer:null,recordingStartTime:null,maxRecordingTime:60,restartTimeout:null});function Ec(){const{isOpen:e,isRecording:t,isProcessing:n,isStartSpeechToText:s,showPermissionDenied:r,permissionStatus:o,recordedTranscript:i,recordTime:a}=Ct(ve),l=pe(()=>{switch(ve.permissionStatus){case"prompt":return{type:"info",title:"Cn quyn truy cp mic",message:"Nhn vo nt mic v cho php trnh duyt truy cp  bt u ni chuyn vi ti."};case"granted":return null;case"denied":return{type:"error",title:"Khng th truy cp mic",message:"Bn cn cp quyn mic trong ci t trnh duyt. Nhn vo biu tng  kha bn cnh URL v bt quyn mic."};case"not_supported":return{type:"error",title:"Trnh duyt khng h tr Mic",message:"Rt tic, trnh duyt hin ti cha h tr nhn din ging ni. Vui lng dng Chrome, Edge hoc Safari phin bn mi nht  tr chuyn."};default:return null}}),u=()=>{ve.isOpen=!ve.isOpen},d=()=>{ve.isOpen=!0},f=()=>{ve.isOpen=!1},h=G=>{ve.isProcessing=G},p=()=>{const G="webkitSpeechRecognition"in window||"SpeechRecognition"in window;return G||(ve.permissionStatus="not_supported"),G},m=async()=>{try{return!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia?(ve.permissionStatus="not_supported",{granted:!1,reason:"not_supported"}):((await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(K=>K.stop()),ve.permissionStatus="granted",{granted:!0})}catch(G){return G.name==="NotAllowedError"||G.name==="PermissionDeniedError"?(ve.permissionStatus="denied",{granted:!1,reason:"denied"}):G.name==="NotFoundError"?(ve.permissionStatus="denied",{granted:!1,reason:"not_found"}):(ve.permissionStatus="denied",{granted:!1,reason:"error"})}},x=()=>{ve.showPermissionDenied=!0,ve.permissionStatus="denied"},y=()=>{ve.showPermissionDenied=!1},_=()=>{ve.recordTime=0,ve.recordingStartTime=Date.now(),ve.recordingTimer=setInterval(()=>{ve.recordTime=Math.floor((Date.now()-ve.recordingStartTime)/1e3),ve.recordTime>=ve.maxRecordingTime&&T()},1e3)},C=()=>{ve.recordingTimer&&(clearInterval(ve.recordingTimer),ve.recordingTimer=null,ve.recordingStartTime&&(ve.recordTime=Math.floor((Date.now()-ve.recordingStartTime)/1e3)))},A=()=>{ve.restartTimeout&&(clearTimeout(ve.restartTimeout),ve.restartTimeout=null)},E=()=>{try{if(!p())return ve.permissionStatus="not_supported",!1;const G=window.SpeechRecognition||window.webkitSpeechRecognition;return ve.recognition=new G,ve.recognition.continuous=!0,ve.recognition.interimResults=!0,ve.recognition.lang="vi-VN",ve.recognition.maxAlternatives=1,ve.recognition.onstart=()=>{ve.isRecording=!0,ve.permissionStatus="granted"},ve.recognition.onend=()=>{ve.isStartSpeechToText&&ve.recognition&&(A(),ve.restartTimeout=setTimeout(()=>{if(ve.isStartSpeechToText&&ve.recognition)try{ve.recognition.start()}catch{}},300))},ve.recognition.onresult=K=>{let H="";for(let ee=0;ee<K.results.length;ee++)H+=K.results[ee][0].transcript;ve.recordedTranscript=H},ve.recognition.onerror=K=>{K.error==="no-speech"&&ve.isStartSpeechToText?(A(),ve.restartTimeout=setTimeout(()=>{if(ve.isStartSpeechToText&&ve.recognition)try{ve.recognition.start()}catch{}},300)):(K.error==="not-allowed"||K.error==="service-not-allowed")&&(ve.isStartSpeechToText=!1,ve.permissionStatus="denied",x())},!0}catch{return ve.permissionStatus="not_supported",!1}},$=async()=>{try{if(!p())return ve.permissionStatus="not_supported",!1;const G=await m();return G.granted?(ve.recordedTranscript="",!ve.recognition&&!E()?!1:ve.recognition?(ve.recognition.start(),ve.isRecording=!0,ve.isStartSpeechToText=!0,ve.permissionStatus="granted",_(),!0):!1):(G.reason==="not_supported"?ve.permissionStatus="not_supported":(ve.permissionStatus="denied",x()),!1)}catch{return ve.permissionStatus="denied",!1}},T=()=>{if(A(),ve.isStartSpeechToText=!1,ve.recognition)try{return ve.isRecording&&ve.recognition.stop(),ve.isRecording=!1,C(),!0}catch{return!1}return!1};return{isOpen:e,isRecording:t,isProcessing:n,isStartSpeechToText:s,showPermissionDenied:r,permissionStatus:o,permissionMessage:l,recordedTranscript:i,recordTime:a,toggleChatVoice:u,openChatVoice:d,closeChatVoice:f,setProcessing:h,isSpeechRecognitionSupported:p,checkMicrophonePermission:m,showPermissionDeniedMessage:x,hidePermissionDeniedMessage:y,startSpeechRecognition:$,stopSpeechRecognition:T,resetTranscript:()=>{ve.recordedTranscript="",ve.recordTime=0},saveTranscript:()=>ve.recordedTranscript&&ve.recordedTranscript.trim()!==""?{type:"voice",content:ve.recordedTranscript,timestamp:new Date().toISOString(),duration:ve.recordTime}:null,releaseMediaResources:()=>{try{if(A(),ve.isStartSpeechToText=!1,ve.recognition){try{ve.isRecording&&ve.recognition.stop()}catch{}ve.recognition=null}return ve.recordedTranscript="",ve.recordTime=0,ve.isRecording=!1,ve.recordingTimer&&(clearInterval(ve.recordingTimer),ve.recordingTimer=null),!0}catch{return!1}}}}const D6={class:"max-h-screen overflow-y-auto scroll-hidden"},N6={class:"flex justify-between items-start mb-4 outline-none ring-0",tabindex:"0"},j6={class:"flex items-center gap-2"},F6={class:"size-8 rounded-full overflow-hidden",style:{"max-width":"32px"}},z6=["src","alt"],q6={key:0,class:"font-semibold text-primary"},B6={class:"mb-5 px-1 select-text"},U6=["innerHTML"],V6=["innerHTML"],H6={class:"space-y-4"},W6={class:"mt-6"},G6=["disabled"],K6={key:1,class:"px-3 flex justify-center items-center bg-primary h-[46px] text-white rounded-xl text-center text-base"},Q6=c("div",null," gi thnh cng",-1),J6={__name:"WidgetFormRenderPreSend",props:{bot:{type:Object,required:!0},widget:{type:Object,required:!0},chatViewRef:{type:Object,required:!0}},setup(e){const t=e,{isOpenLeadForm:n}=Ct(me.state),s=L(!Yn()),r=L(!1),o=L(!1),i=st({}),a=L({}),l=L(!1),u=pe(()=>Object.keys(a.value).length>0?!1:t.widget.fields.filter(p=>{var m;return(m=p.validate)==null?void 0:m.includes("required")}).map(p=>p.name).every(p=>{const m=i[p];return typeof m=="boolean"?m===!0:m&&m.toString().trim()!==""})),d=(h,p)=>{p?delete a.value[h]:a.value[h]=""},f=async()=>{if(l.value=!0,!(Object.keys(a.value).length>0))try{r.value=!0;const p={};t.widget.fields.forEach(y=>{p[y.name]=i[y.name]}),p.user_id=kr(),p.page_url=window.location.href;const{data:m}=await ze.submission.submitWidget({widgetId:t.widget.id,formData:{status:"submitted",submission_data:p}}),x={};t.widget.fields.forEach(y=>{["name","phone","email"].includes(y.name)&&(x[y.name]=i[y.name]||"")}),me.actions.updateChatState({visitor:x,isOpen:!0}),Dt.widgetContact({widget_id:t.widget.id,widget_type:t.widget.type,form_data:(m==null?void 0:m.submission_data)||{}}),o.value=!0,setTimeout(()=>{n.value=!1},1500)}catch(p){console.log("Error: ",p)}finally{r.value=!1}};return(h,p)=>(v(),re(b(Lr),{modal:!s.value,dismissible:!1,open:b(n),"onUpdate:open":p[1]||(p[1]=m=>St(n)?n.value=m:null),shouldScaleBackground:!1},{default:xe(()=>[U(b(Ss),{to:e.chatViewRef},{default:xe(()=>[c("div",{class:se(["drawer-overlay-custom backdrop-blur-sm",[b(n)&&"drawer-overlay-custom--open"]])},null,2),U(b($s),{"aria-describedby":"widget lead form",class:"absolute p-5 bg-white rounded-3xl bottom-8 lg:bottom-5 z-50 inset-x-4 lg:inset-x-5 outline-none overflow-hidden"},{default:xe(()=>[U(b(ya),{"aria-describedby":"widget lead form title",class:"hidden"}),U(b(ba),{"aria-describedby":"widget lead form desc",class:"hidden"}),c("div",D6,[c("div",N6,[c("div",j6,[c("div",F6,[c("img",{src:e.bot.config.ui.logo,alt:e.bot.config.ui.name,class:"w-full"},null,8,z6)]),e.bot.config.ui.name?(v(),k("div",q6,V(e.bot.config.ui.name),1)):B("",!0)]),B("",!0)]),c("div",null,[c("div",B6,[c("div",{class:"text-gray-800 text-lg font-medium leading-[120%]",innerHTML:e.widget.formHeaderTitle||"Vui lng  li thng tin"},null,8,U6),e.widget.formHeaderSubTitle?(v(),k("p",{key:0,innerHTML:e.widget.formHeaderSubTitle,class:"text-base text-gray-700 mt-2 leading-[140%]"},null,8,V6)):B("",!0)]),c("form",{onSubmit:cn(f,["prevent"])},[c("div",H6,[(v(!0),k(be,null,Ie(t.widget.fields,m=>(v(),re(_p,{key:m.name,modelValue:i[m.name],"onUpdate:modelValue":x=>i[m.name]=x,field:m,error:a.value[m.name],disabled:o.value,onValidate:d},null,8,["modelValue","onUpdate:modelValue","field","error","disabled"]))),128))]),c("div",W6,[o.value?B("",!0):(v(),k("button",{key:0,type:"submit",class:se(["w-full font-medium bg-primary text-white text-base h-[46px] rounded-xl focus:outline-none ring-0 flex justify-center items-center",[u.value?"":"opacity-70 cursor-not-allowed"]]),disabled:r.value||!u.value},V(r.value?"ang gi...":e.widget.buttonText||"Gi"),11,G6)),o.value?(v(),k("div",K6,[Q6,U(b(rp),{size:"16",class:"ml-2"})])):B("",!0)])],32)])])]),_:1})]),_:1},8,["to"])]),_:1},8,["modal","open"]))}},X6={key:0,class:"flex-shrink-0 px-1.5 py-[3px] text-blue-500 bg-blue-50 w-fit rounded-xl flex items-center gap-1.5 translate-y-1.5"},Z6=c("span",{class:"text-xs"},"ang pht trc tip",-1),Y6={key:1,class:"flex items-center gap-1.5 bg-blue-50 rounded-full pl-1 pr-2.5 py-1 w-fit translate-y-1.5"},e8={class:"text-[11px] leading-3 font-medium tracking-tight tabular-nums text-right text-blue-400"},t8=16,n8={__name:"ChatVoiceCard",props:{audioSrc:{type:String,required:!0},isLastAudio:{type:Boolean,default:!1},assistantProcessing:{type:Boolean,default:!1},voiceProcessing:{type:Boolean,default:!1}},setup(e){const t=e,n=L(null),s=L(!1),r=L(0),o=L(0),i=L([]),a=pe(()=>o.value?r.value/o.value:0),l=pe(()=>{if(!o.value&&!r.value)return"00:00";const m=s.value||r.value>.5?r.value:o.value;return d(m)}),u=()=>Array.from({length:t8},()=>Math.floor(Math.random()*70)+30),d=m=>{if(!m||isNaN(m))return"00:00";const x=Math.floor(m/60),y=Math.floor(m%60);return`${x.toString().padStart(2,"0")}:${y.toString().padStart(2,"0")}`},f=()=>{n.value&&(s.value?n.value.pause():n.value.play())},h=m=>{if(!n.value||!o.value)return;const x=m.currentTarget.getBoundingClientRect(),y=m.clientX-x.left,_=Math.max(0,Math.min(1,y/x.width));n.value.currentTime=_*o.value,r.value=n.value.currentTime},p=()=>{n.value&&(n.value.pause(),n.value=null),t.audioSrc&&(n.value=new Audio(t.audioSrc),s.value=!1,r.value=0,o.value=0,n.value.addEventListener("loadedmetadata",()=>{o.value=n.value.duration}),n.value.addEventListener("timeupdate",()=>{n.value&&(r.value=n.value.currentTime)}),n.value.addEventListener("play",()=>s.value=!0),n.value.addEventListener("pause",()=>s.value=!1),n.value.addEventListener("ended",()=>{s.value=!1,r.value=0}))};return Ee(()=>t.audioSrc,()=>{p()}),Ke(()=>{i.value=u(),p()}),Kt(()=>{n.value&&(n.value.pause(),n.value.src="",n.value=null)}),(m,x)=>e.isLastAudio&&e.voiceProcessing&&!e.assistantProcessing?(v(),k("div",X6,[U(b(lc),{size:"16"}),Z6])):(v(),k("div",Y6,[c("button",{onClick:f,class:se([s.value?"bg-blue-500":"bg-blue-400","flex-shrink-0 size-5 flex items-center justify-center text-white rounded-full hover:bg-blue-500 active:scale-95 transition-all duration-200 focus:outline-none"])},[s.value?(v(),re(b(u_),{key:0,size:10,fill:"currentColor"})):(v(),re(b(np),{key:1,size:10,fill:"currentColor",class:"ml-0.5"}))],2),c("div",{class:"flex items-center gap-0.5 h-3.5 cursor-pointer group",onClick:h,title:"Click to seek"},[(v(!0),k(be,null,Ie(i.value,(y,_)=>(v(),k("div",{key:_,class:se(["w-[3px] rounded-full transition-colors duration-100 ease-linear group-hover:opacity-80",_/i.value.length<a.value?"bg-blue-400":"bg-blue-200"]),style:kt({height:`${y}%`})},null,6))),128))]),c("div",e8,V(l.value),1)]))}},s8={class:"relative ecg-widget-header"},r8={class:"flex items-center justify-between p-3 text-white bg-primary"},o8={class:"flex items-center gap-2"},i8={key:1,class:"flex items-center justify-center overflow-hidden bg-white rounded-full size-8 shrink-0"},a8=["src","alt"],l8={class:"text-base font-medium tracking-tight"},c8={class:"flex gap-1.5"},u8={key:0,class:"text-[10px] leading-[12px] h-3 min-w-3 tracking-tighter text-center font-semibold rounded-full absolute bg-white text-primary top-0 right-0"},d8={key:0,class:"text-[10px] leading-[12px] h-3 min-w-3 tracking-tighter text-center font-semibold rounded-full absolute bg-white text-primary top-0 right-0"},f8={class:"flex flex-col flex-grow px-2 pt-4 space-y-4 duration-100 lg:px-4 chat-content-item"},h8={class:"space-y-3"},p8=["src","alt"],m8={key:1},g8={class:"messages-group"},v8={key:0,class:"relative flex flex-shrink-0 overflow-hidden bg-white rounded-full size-8 message-avatar"},y8=["src","alt"],b8={key:1,class:"relative flex flex-shrink-0 overflow-hidden bg-white rounded-full size-8 message-avatar"},x8={key:2,class:"ml-auto"},_8={key:3,class:"relative w-full"},w8=["onClick"],k8={key:1,class:"relative pl-[40px]"},S8={key:0,class:"absolute bottom-0 left-0"},C8={class:"relative flex flex-shrink-0 overflow-hidden bg-white rounded-full size-8 message-avatar"},$8=["src","alt"],T8={key:7,class:"w-full"},A8={key:0,class:"!items-center justify-center messages-group pb-2"},E8={class:"relative flex flex-shrink-0 overflow-hidden bg-white rounded-full size-8 message-avatar"},I8=["src","alt"],P8={class:"messages"},O8={key:0,class:"flex flex-col items-end pt-4 space-y-2"},R8=["onClick","innerHTML"],M8={class:"relative"},L8={class:"relative z-30 bg-white"},D8={class:"w-full px-3 pt-1"},N8={class:"border border-gray-200 rounded-3xl"},j8={key:0,class:"p-2 pb-1"},F8={class:"flex items-center gap-1"},z8={class:"flex-shrink-0"},q8=["innerHTML"],B8={class:"relative flex w-full"},U8={key:0,class:"flex absolute top-1/2 -translate-y-1/2 left-1.5 z-10 items-center quick-prompts"},V8={key:0,class:"overflow-hidden quick-prompts-popover"},H8=["onClick"],W8={class:"absolute z-10 flex items-center duration-200 top-1/2 -translate-y-1/2 right-1"},Gp={__name:"ChatView",props:{showMenu:{type:Boolean,default:!1}},setup(e){const t=Rt({loader:()=>Promise.resolve().then(()=>Em),delay:1e3}),n=Rt({loader:()=>Promise.resolve().then(()=>e7),delay:1e3}),s=Rt({loader:()=>Promise.resolve().then(()=>n7),delay:1e3}),{bot:r,handle:o}=Ct(D),{messages:i,conversationId:a,assistantProcessing:l,storageConversations:u,fetchMessages:d,refreshConversation:f,clickQuickPrompt:h,send:p,currentMessage:m}=Xs({handle:o.value}),{messagesContainerRef:x,scrollToBottom:y,voiceAudio:_}=Dh({handle:o.value}),{files:C,processedFiles:A}=da(),{isOpen:E,isStartSpeechToText:$,closeChatVoice:T,releaseMediaResources:I}=Ec(),{widgets:R}=Js(),q=L(!1),G=L(!1),K=L(null),H=L(null),ee=L(null),ce=L(null),W=L(!1),Q=L(!0),J=L(null);cl("chatViewRef",K);const ne=["file","gif","image","video","audio","sticker","business_card"],ke=pe(()=>{const te=[];return i.value.forEach(oe=>{if(ne.includes(oe.content_type))try{oe.content.forEach((ge,De)=>{te.push({...ge,messageId:oe.id,messageIndex:De})})}catch(ye){console.warn("Failed to parse message content:",ye)}}),te}),qe=pe(()=>!i.value.find(oe=>oe.sender_type==="user")),Ce=pe(()=>{var oe,ye,ge;let te=((ge=(ye=(oe=r.value)==null?void 0:oe.config)==null?void 0:ye.quickPrompt)==null?void 0:ge.messages)||[];return te=Object.values(te),te.map(De=>De.content)});function Re(te){const oe=["maps.google.com","google.com/maps","goo.gl/maps","maps.app.goo.gl","g.page/r"];return te.content_type==="text"?oe.some(ye=>{var ge;return(ge=te==null?void 0:te.content)==null?void 0:ge.includes(ye)}):!1}const Be=pe(()=>{const oe=Zb(i.value,"assistant").filter(ge=>!Re(ge)),ye=Yb(oe);return Ws(ye)});Ee(a,te=>{te?D.localStorageFormOrder=`${jl}-${a.value}`:(localStorage.removeItem(D.localStorageFormOrder),D.selectedForm=null,D.totalFormItems=0)},{immediate:!0});const Ne=te=>{if(te.key===" "&&te.stopPropagation(),!(te.key==="Enter"&&te.shiftKey)&&te.key==="Enter"&&!te.shiftKey){if(te.preventDefault(),G.value)return;!l.value&&m.value.trim().length>1&&$e()}},X=te=>{if(!ee.value)return;ee.value.style.height="auto";const ye=Math.min(ee.value.scrollHeight,120);ee.value.style.height=`${ye}px`},de=te=>{te.stopPropagation(),X()},Se=te=>{te.stopPropagation()},_e=te=>{te.stopPropagation()},$e=async()=>{E.value&&(T(),I());const te=m.value,oe=A.value;m.value="",p({message:te,files:oe}),C.value=[],A.value=[],ee.value&&(ee.value.style.height="44px"),gt(()=>{y()})},Ae=te=>te.sender_type==="user";function Te(){if(!r.value)return;const te=r.value.config.initialMessage.messages??[];if(te.length>0)for(let oe=0;oe<te.length;oe++)i.value[oe].is_welcome_message=!0}const O=async()=>{var te,oe;try{const ye=pt.get(Ln);if(!ye)return;const{data:ge}=await ze.auth.getUser();ge.success&&(D.user=ge.data,D.token=ye)}catch(ye){((oe=(te=ye.response.data)==null?void 0:te.raw)==null?void 0:oe.message)==="error_token_is_expired"&&(D.user=null,D.token=null,pt.remove(Ln))}},F=async()=>{const{data:te}=await ze.cart.getList();te.success&&(D.cart=te.data)},z=async()=>{o.value===Sn&&await Promise.all([F(),O()]),d({onSuccess:async()=>{Te()}})},P=async te=>{const{source:oe}=te||{};oe==="rangdongstore"&&F()},N=async()=>{try{await ze.auth.logout(),D.user=null,D.token=null,pt.remove(Ln),F()}catch{}},Z=(te={})=>{const{source:oe,data:ye}=te;oe==="rangdongstore"&&(pt.set(Ln,ye.access_token,"14d"),O(),F())};Ke(async()=>{await z(),Gw().getForms(),u.value[o.value]||localStorage.removeItem(`${jl}-${o.value}`),J.value=window.location.origin,o.value===Sn&&window.ECG&&(ECG.sync.on("login",Z),ECG.sync.on("logout",N),ECG.sync.on("cart",P)),gt(async()=>{X(),await Ll(500)})});const le=()=>{E.value&&(T(),I())},ie=async(te="")=>{await gt(),m.value=te,ee.value&&(ee.value.style.height="44px"),console.log("Voice input cancelled")},he=te=>{te&&te.trim()&&(m.value=te,gt(()=>{ee.value&&(ee.value.focus(),X())}))},ae=async te=>{(E.value||$.value)&&(T(),I());const oe=te||"Khng c ni dung thoi",ye=o.value==="g8homevn";if(ye)try{console.log("[ChatView] Unlocking audio for voice message..."),await _.unlockAudio()}catch(ge){console.error("[ChatView] Failed to unlock audio:",ge)}p({message:oe,mode:ye?"voice":void 0,audio_url:ye?!0:void 0}),m.value="",ee.value&&(ee.value.style.height="44px")};return Ee(i,async()=>{y()}),(te,oe)=>{var ye,ge,De;return v(),k("div",{id:"chat-view",ref_key:"chatViewRef",ref:K,class:"flex flex-col overflow-hidden bg-white"},[b(r)?(v(),k(be,{key:0},[c("div",s8,[c("div",r8,[c("div",o8,[e.showMenu?(v(),k("button",{key:0,onClick:oe[0]||(oe[0]=ue=>te.$emit("close")),class:"p-1.5 rounded-lg hover:bg-white/10 text-white","aria-label":"Quay li"},[U(b(Eo),{size:20})])):B("",!0),b(r).config.ui.logo&&!e.showMenu?(v(),k("div",i8,[c("img",{src:b(r).config.ui.logo,alt:b(r).config.ui.name,loading:"lazy",class:"object-cover w-full h-full"},null,8,a8)])):B("",!0),c("h2",l8,V(b(r).config.ui.name),1)]),c("div",c8,[b(o)===b(Sn)?(v(),k(be,{key:0},[U(y6,{chatViewRef:K.value},null,8,["chatViewRef"]),c("button",{onClick:oe[1]||(oe[1]=ue=>b(D).cart?W.value=!0:null),class:se(["relative flex items-center justify-center flex-shrink-0 p-2 rounded-lg size-8 bg-white/10 hover:bg-white/20",b(D).cart?"cursor-pointer":"cursor-not-allowed"])},[U(b(Jt),{size:"14"}),b(D).cart&&b(D).cart.total_items?(v(),k("span",u8,V(b(D).cart&&b(D).cart.total_items),1)):B("",!0)],2)],64)):b(D).forms&&b(D).forms.order&&![b(xs),b(Qn),b(Jn),b(Xn),b(Zn),b(Nn)].includes(b(o))?(v(),k("button",{key:1,class:se([b(D).totalFormItems===0?"cursor-not-allowed":"cursor-pointer ","relative flex items-center justify-center rounded-md size-8 bg-white/10 hover:bg-white/20"]),onClick:oe[2]||(oe[2]=ue=>b(D).totalFormItems>0?b(D).isOpenForm=!0:null)},[U(b(Jt),{size:"14"}),b(D).totalFormItems>0?(v(),k("span",d8,V(b(D).totalFormItems),1)):B("",!0)],2)):B("",!0),c("div",{class:se(["flex items-center justify-center rounded-lg size-8 bg-white/10 hover:bg-white/20",b(l)?"cursor-wait":"cursor-pointer"]),onClick:oe[3]||(oe[3]=ue=>b(f)())},[U(b(h_),{size:"14"})],2),bt(te.$slots,"actions")])])]),c("div",{class:"messages-wrapper",ref_key:"messagesContainerRef",ref:x,onWheel:Se,onTouchmove:_e},[Q.value&&((De=(ge=(ye=b(r))==null?void 0:ye.config)==null?void 0:ge.banners)==null?void 0:De.length)>0?(v(),re(q3,{key:0,banners:b(r).config.banners,onClose:oe[4]||(oe[4]=ue=>Q.value=!1),class:"chat-content-item"},null,8,["banners"])):B("",!0),c("div",f8,[c("div",h8,[(v(!0),k(be,null,Ie(Be.value,(ue,We)=>{var ct,mt,_t,Wt,At,Tn,Et,zt,ts,zr,ns,en,nr,xn;return v(),k(be,{key:ue.id},[ue.is_welcome_message?(v(),k("div",{key:0,class:se(["messages-group",b(r).config.initialMessage.messages.length-1===We&&"!mt-2"])},[c("span",{class:se(["relative flex flex-shrink-0 overflow-hidden bg-white rounded-full size-8 message-avatar",b(r).config.initialMessage.messages.length-1===We?"opacity-100":"opacity-0"])},[b(r).config.ui.logo?(v(),k("img",{key:0,src:b(r).config.ui.logo,alt:b(r).config.ui.name,class:"object-cover w-full h-full"},null,8,p8)):B("",!0)],2),c("div",{class:se(["messages",{"is-user":Ae(ue)}])},[(v(!0),k(be,null,Ie(b(Ch)(ue.content),(tn,Un)=>(v(),re(ap,{key:Un,message:{...ue,content:tn},chatViewRef:K.value,isUser:Ae(ue)},null,8,["message","chatViewRef","isUser"]))),128))],2)],2)):ue.content_type!=="follow_up"?(v(),k("div",m8,[c("div",g8,[!Ae(ue)&&(ue.content_type==="text"||ne.includes(ue.content_type))?(v(),k(be,{key:0},[ue.is_last_assistant_message?(v(),k("span",v8,[b(r).config.ui.logo?(v(),k("img",{key:0,src:b(r).config.ui.logo,alt:b(r).config.ui.name,class:"object-cover w-full h-full"},null,8,y8)):B("",!0)])):(v(),k("span",b8))],64)):B("",!0),ue.content_type==="text"&&!ue.audio_url?(v(),k("div",{key:1,class:se(["messages",{"is-user":Ae(ue)}])},[(v(!0),k(be,null,Ie(b(Ch)(ue.content),(tn,Un)=>(v(),k("div",{key:Un},[U(ap,{message:{...ue,content:tn},chatViewRef:K.value,isUser:Ae(ue)},null,8,["message","chatViewRef","isUser"])]))),128))],2)):ue.sender_type==="user"&&ue.audio_url?(v(),k("div",x8,[U(G3,{"message-text":ue.content},null,8,["message-text"])])):ue.content_type==="cards"&&b(ws)(ue.content).elements.length>0?(v(),k("div",_8,[b(ws)(ue.content).elements.length>1?(v(),re(gp,{key:0,class:"w-full max-w-3xl pr-2"},{default:xe(({selectedIndex:tn,scrollTo:Un})=>[(v(!0),k(be,null,Ie(ue.content.elements,(sr,Vn)=>(v(),re(vp,{key:Vn,class:"w-[65%]"},{default:xe(()=>{var rr,Ea,Ia;return[c("div",{class:se([[tn===Vn?"opacity-100":"opacity-30"],"relative h-full duration-700"])},[c("div",{onClick:Im=>Un(Vn),class:se(["absolute inset-0 z-10 cursor-pointer",tn==Vn&&"hidden"])},null,10,w8),U(Dw,{item:sr,logo:(Ia=(Ea=(rr=b(r))==null?void 0:rr.config)==null?void 0:Ea.ui)==null?void 0:Ia.logo},null,8,["item","logo"])],2)]}),_:2},1024))),128))]),_:2},1024)):(v(),k("div",k8,[ue.is_last_assistant_message?(v(),k("div",S8,[c("span",C8,[b(r).config.ui.logo?(v(),k("img",{key:0,src:b(r).config.ui.logo,alt:b(r).config.ui.name,class:"object-cover w-full h-full"},null,8,$8)):B("",!0)])])):B("",!0),U(Ww,{item:ue.content.elements[0],logo:(_t=(mt=(ct=b(r))==null?void 0:ct.config)==null?void 0:mt.ui)==null?void 0:_t.logo},null,8,["item","logo"])]))])):ue.content_type==="iframe"?(v(),re(Ak,{key:4,item:ue,handle:b(o)},null,8,["item","handle"])):ue.content&&ue.content_type==="product_cards"&&((At=(Wt=b(ws)(ue.content))==null?void 0:Wt.elements)==null?void 0:At.length)>0?(v(),re(Pk,{key:5,products:b(ws)(ue.content).elements,onSendMessage:oe[5]||(oe[5]=tn=>b(p)({message:tn})),onOpenFlowCheckout:oe[6]||(oe[6]=tn=>W.value=!0)},null,8,["products"])):ue.content&&ue.content_type==="address"&&((Et=(Tn=b(ws)(ue.content))==null?void 0:Tn.elements)==null?void 0:Et.length)>0?(v(),re(m2,{key:6,stores:(zt=b(ws)(ue.content))==null?void 0:zt.elements,logo:(ns=(zr=(ts=b(r))==null?void 0:ts.config)==null?void 0:zr.ui)==null?void 0:ns.logo,botName:(xn=(nr=(en=b(r))==null?void 0:en.config)==null?void 0:nr.ui)==null?void 0:xn.name},null,8,["stores","logo","botName"])):ue.content_type==="form"?(v(),k("div",T8,[U(yp,{message:ue},null,8,["message"])])):ue.content_type==="audio"&&ue.audio_url?(v(),re(n8,{key:8,audioSrc:ue.audio_url,isLastAudio:ue.is_last_audio,assistantProcessing:b(l),voiceProcessing:b(_).isPlaying.value},null,8,["audioSrc","isLastAudio","assistantProcessing","voiceProcessing"])):[...ne,"attachment"].includes(ue.content_type)?(v(),re(Yk,{key:9,message:ue,files:ke.value},null,8,["message","files"])):B("",!0)])])):B("",!0)],64)}),128)),b(l)&&b(r).is_bot_working_hours?(v(),k("div",A8,[c("div",E8,[b(r).config.ui.logo?(v(),k("img",{key:0,src:b(r).config.ui.logo,alt:b(r).config.ui.name,class:"object-cover w-full h-full"},null,8,I8)):B("",!0)]),c("div",P8,[U(b(t))])])):B("",!0)])]),c("div",{class:se(["px-4 duration-200",[H.value&&H.value.showToggleButton?"pb-8":"pb-0"]])},[qe.value&&!b(l)?(v(),k("div",O8,[(v(!0),k(be,null,Ie(Ce.value,(ue,We)=>(v(),k("div",{key:We,class:"quick-prompt-tag active",onClick:ct=>{b(p)({message:b(Ir)(ue)?ue.message:ue}),b(h)(b(Ir)(ue)?ue.message:ue)},innerHTML:b(Ir)(ue)?ue.name:ue},null,8,R8))),128))])):B("",!0),b(R).follow_up_questions&&!b(l)&&Be.value.length>0&&!qe.value&&!Ae(Be.value[Be.value.length-1])&&Be.value[Be.value.length-1].is_last_assistant_message?(v(),re(X3,{key:1,message:Be.value[Be.value.length-1],conversationId:b(a),ref_key:"replySuggestionsRef",ref:ce,onSendMessage:oe[7]||(oe[7]=ue=>[b(p)({message:ue})])},null,8,["message","conversationId"])):B("",!0)],2)],544),c("div",M8,[(b(R).ai_product_insight||b(Sr)[b(o)])&&![b(Fl)].includes(b(o))?(v(),re(yE,{key:0,ref_key:"aiSuggestionRef",ref:H,widget:b(R).ai_product_insight,onSendMessage:b(y)},null,8,["widget","onSendMessage"])):B("",!0),c("div",L8,[c("div",D8,[c("div",N8,[U(mn,{name:"expand",mode:"out-in"},{default:xe(()=>[b(zn).state.message?(v(),k("div",j8,[c("div",{class:se(["px-3 py-2 rounded-md border animate-[slideIn_0.3s_ease-out_forwards]",b(zn).state.type==="success"?"bg-green-50/80 border-green-200 text-green-500":b(zn).state.type==="warning"?"bg-orange-50/80 border-orange-200 text-orange-500":"bg-red-50/80 border-red-200 text-red-500"])},[c("div",F8,[c("div",z8,[b(zn).state.type==="success"?(v(),re(b(Vx),{key:0,class:"text-green-500 size-4"})):b(zn).state.type==="warning"?(v(),re(b(t_),{key:1,class:"text-orange-500 size-4"})):(v(),re(b(m_),{key:2,class:"text-red-500 size-4"}))]),c("div",{class:"text-sm leading-[120%] font-normal",innerHTML:b(zn).state.message},null,8,q8)])],2)])):B("",!0)]),_:1}),U(mn,{name:"expand",mode:"out-in"},{default:xe(()=>[U(P6,{class:"px-3"})]),_:1}),c("div",B8,[Ce.value.length>0?(v(),k("div",U8,[c("button",{type:"button",onClick:oe[8]||(oe[8]=ue=>q.value=!q.value),class:se(["flex items-center justify-center transition-colors rounded-full size-8 overflow-hidden hover:bg-gray-50",q.value?"bg-gray-50":"bg-white"]),title:"Quick prompts"},[U(b(o_),{size:"18",class:"text-gray-500"})],2),q.value?(v(),k("div",V8,[(v(!0),k(be,null,Ie(Ce.value,(ue,We)=>(v(),k("div",{key:We,class:"quick-prompt-item",onClick:()=>{b(p)({message:b(Ir)(ue)?ue.message:ue}),q.value=!1,b(h)(b(Ir)(ue)?ue.message:ue)}},V(b(Ir)(ue)?ue.name:ue),9,H8))),128))])):B("",!0)])):B("",!0),Ot(c("textarea",{id:"eac-chat-input",class:"resize-none rounded-3xl input",placeholder:"Nhp tin nhn...","onUpdate:modelValue":oe[9]||(oe[9]=ue=>St(m)?m.value=ue:null),onKeydown:Ne,onFocus:oe[10]||(oe[10]=ue=>le()),onInput:de,onCompositionstart:oe[11]||(oe[11]=ue=>G.value=!0),onCompositionend:oe[12]||(oe[12]=ue=>G.value=!1),ref_key:"textareaRef",ref:ee,rows:"1"},null,544),[[ln,b(m)]]),c("div",W8,[b(R).voice_chat||b(r).is_test_user?(v(),re(b(s),{key:0,assistantProcessing:b(l),voiceProcessing:b(_).isPlaying.value,class:se(["duration-200",[b(m).length>0?"scale-0":"scale-100"]])},null,8,["assistantProcessing","voiceProcessing","class"])):B("",!0),b(Sn)===b(o)?(v(),re(L6,{key:1,handle:b(o),maxFiles:1,accept:".xlsx"},null,8,["handle"])):B("",!0),c("button",{type:"button",onClick:oe[13]||(oe[13]=ue=>b(l)||b(m).length<=1?null:$e()),class:se([[b(m).length>1||b(i).length>0&&b(l)?"bg-primary text-white sm:hover:opacity-80":"bg-gray-100 text-gray-400 cursor-default",b(l)&&"flicker-effect cursor-wait"],"flex items-center justify-center ml-2 duration-200 rounded-full size-9"])},[U(b(sp),{size:"16"})],2)])]),b(R).voice_chat?(v(),re(b(n),{key:0,onCancelTranscription:oe[14]||(oe[14]=ue=>ie()),onEditTranscription:oe[15]||(oe[15]=ue=>he(ue)),onTranscriptionComplete:oe[16]||(oe[16]=ue=>ae(ue))})):B("",!0)])])])]),b(o)===b(Sn)?(v(),re(F3,{key:0,chatViewRef:K.value,open:W.value,"onUpdate:open":oe[17]||(oe[17]=ue=>W.value=ue)},null,8,["chatViewRef","open"])):(v(),re(d$,{key:1,chatViewRef:K.value},null,8,["chatViewRef"])),U(iC,{chatViewRef:K.value},null,8,["chatViewRef"]),K.value&&b(R).widget_form_render_pre_send?(v(),re(J6,{key:2,bot:b(r),widget:b(R).widget_form_render_pre_send,chatViewRef:K.value},null,8,["bot","widget","chatViewRef"])):B("",!0)],64)):B("",!0)],512)}}},G8=Object.freeze(Object.defineProperty({__proto__:null,default:Gp},Symbol.toStringTag,{value:"Module"})),K8={key:0,class:"text-white font-medium bg-red-500 h-[22px] min-w-[22px] px-0.5 absolute -top-1.5 -right-2.5 z-10 text-sm rounded-full flex items-center justify-center"},Q8=["src","alt"],J8={__name:"ChatButton",props:{isOpen:{type:Boolean,default:!1},chatPosition:{type:String,default:"right"}},emits:["toggle"],setup(e,{emit:t}){const n=t,{bot:s,handle:r,chatState:o}=Ct(me.state),i=pe(()=>o.value.unreadMessageCount),a=()=>{n("toggle")};return(l,u)=>{var d,f,h;return v(),k("div",{class:se(["duration-300 relative w-fit border-[3px] rounded-full",[e.isOpen?"translate-y-[150%] opacity-0 invisible":"delay-300",{left:"mr-auto",right:"ml-auto"}[e.chatPosition],i.value>0?" border-white ring-2 ring-red-500":"border-transparent"]])},[i.value>0?(v(),k("div",K8,[c("span",null,V(i.value),1)])):B("",!0),c("button",{"aria-label":"chat-button",class:se(["flex relative justify-center items-center cursor-pointer chat-button disabled:pointer-events-none disabled:opacity-50 group",[[b(Qn),b(xs)].includes(b(r))?"rounded-2xl bg-transparent shadow":"rounded-full bg-primary shadow",(d=b(s).config.ui)!=null&&d.iconImage&&((h=(f=b(s).config.ui)==null?void 0:f.iconImage)!=null&&h.includes(".gif"))?"bg-transparent shadow-none":"overflow-hidden"]]),onClick:a},[b(s).config.ui.iconImage?(v(),k("img",{key:0,src:b(s).config.ui.iconImage,alt:b(s).config.ui.name,class:"object-cover w-full h-full"},null,8,Q8)):(v(),re(b(Yh),{key:1,size:"48",class:"block text-white max-w-[56%]"}))],2)],2)}}},X8=["innerHTML"],Z8=nt({__name:"VerticalSlideUp",props:{messages:{type:Array,default:()=>[]},stopIndex:{type:Number,default:0}},setup(e){const t=e,n=L(null),s=L(null),r=L([]),o=st({verticalSlideList:null,verticalSlideItemHeight:0,indexVertical:0,maxIndexVertical:0,heightSlideItemActive:null,heightSlideItemPreActive:null,isStopVertical:!1,slideInterval:null,hasStarted:!1}),i=L(null),a=()=>{gt(()=>{!n.value||!s.value||t.messages.length===0||(o.verticalSlideList=r.value,o.maxIndexVertical=t.messages.length,h(),n.value&&s.value&&(o.hasStarted=!0,o.slideInterval=setInterval(d,2500)))})},l=()=>{o.isStopVertical=!0},u=()=>{o.isStopVertical=!1},d=()=>{if(!(o.isStopVertical||!o.hasStarted)){if(!n.value||!s.value){clearInterval(o.slideInterval);return}i.value||(o.indexVertical=0,i.value=t.messages[0]),f(),o.verticalSlideItemHeight+=o.heightSlideItemPreActive||0,n.value&&(n.value.style.height=o.heightSlideItemActive>0?`${o.heightSlideItemActive}px`:"42px"),s.value&&(o.verticalSlideItemHeight>=s.value.offsetHeight?(o.verticalSlideItemHeight=0,o.indexVertical=0,i.value=t.messages[o.indexVertical],s.value.style.transform=`translateY(${o.verticalSlideItemHeight}px)`):(i.value=t.messages[o.indexVertical],s.value.style.transform=`translateY(-${o.verticalSlideItemHeight}px)`))}},f=()=>{var m,x,y,_,C,A;o.indexVertical>=o.maxIndexVertical&&(o.indexVertical=0),i.value=t.messages[o.indexVertical+1],o.heightSlideItemPreActive=((x=(m=o.verticalSlideList)==null?void 0:m[o.indexVertical])==null?void 0:x.offsetHeight)||0,o.heightSlideItemActive=((_=(y=o.verticalSlideList)==null?void 0:y[o.indexVertical+1])==null?void 0:_.offsetHeight)||((A=(C=o.verticalSlideList)==null?void 0:C[0])==null?void 0:A.offsetHeight)||42,o.indexVertical+=1},h=()=>{var m;!n.value||!o.verticalSlideList||(o.heightSlideItemActive=((m=o.verticalSlideList[o.indexVertical])==null?void 0:m.offsetHeight)||42,o.verticalSlideItemHeight=0,n.value&&(n.value.style.height=o.heightSlideItemActive>0?`${o.heightSlideItemActive}px`:"42px"))},p=()=>{o.slideInterval&&(clearInterval(o.slideInterval),o.slideInterval=null)};return Ee(()=>t.messages,m=>{m&&m.length>0&&(p(),o.indexVertical=0,o.hasStarted=!1,o.verticalSlideItemHeight=0,a())},{deep:!0}),Ke(()=>{a()}),Kt(()=>{p()}),(m,x)=>(v(),k("div",{ref_key:"verticalCustomSlide",ref:n,class:"vertical-custom-slide duration-500"},[c("div",{ref_key:"verticalMove",ref:s,class:"duration-1000 vertical-move",onMouseover:l,onMouseleave:u},[(v(!0),k(be,null,Ie(e.messages,(y,_)=>(v(),k("div",{key:y+_,ref_for:!0,ref_key:"verticalSlideItem",ref:r,class:se(["flex-1 text-sm text-gray-700 duration-1000 vertical-slide-item",i.value===y||!i.value?"opacity-100":"opacity-0"]),innerHTML:y},null,10,X8))),128))],544)],512))}},[["__scopeId","data-v-62f66be8"]]),Y8=st({quickPrompts:[],welcomeMessages:[],welcomeMessagesDefault:[],quickPromptsDefault:[],keyQuickPrompt:1}),Kp=(e=[])=>(e=Object.values(e),e.map(t=>t.content)),eI={category:["Xin cho Anh/Ch! Em l tr l o ca {brand}.","  Anh/Ch ang xem <br/> <strong>{title}</strong>.","Em rt sn lng h tr Anh/Ch "],product:["Xin cho Anh/Ch! Em l tr l o ca {brand}."," Anh/Ch ang xem <br/> <strong>{title}</strong>.","Em rt sn lng h tr Anh/Ch "]},Qp={};function tI(){const{quickPrompts:e,welcomeMessages:t,welcomeMessagesDefault:n,quickPromptsDefault:s,keyQuickPrompt:r}=Ct(Y8),{widgets:o}=Js();function i(){var f;if(!Sr[me.state.handle]&&!o.value.ai_product_insight){t.value=n.value,e.value=s.value;return}const u=Vt("Product"),d=Tr();if(d.title&&u&&(u.name=d.title),u){let{sku:h,name:p}=u,m=h?"product":"category";me.state.handle===Cr&&(m="product");let x=[];Qp[me.state.handle]?x=Qp[me.state.handle][m]:x=eI[m];const y=x.map(A=>A.replace("{title}",p).replace("{brand}",D.bot.config.ui.name));t.value=y;const _=((f=o.value.ai_product_insight)==null?void 0:f.dynamic_prompts)??Sr[me.state.handle]??Sr.default;let C=$h(_,{title:p,logo:me.state.bot.config.ui.logo,brand:me.state.bot.config.ui.name})[m];e.value=C,r.value=r.value+1}else t.value=n.value,e.value=s.value}let a=null;const l=u=>{!(u!=null&&u.initialMessage)||!(u!=null&&u.quickPrompt)||(n.value=Kp(u.initialMessage.messages),s.value=Kp(u.quickPrompt.messages),clearTimeout(a),a=setTimeout(()=>{i()},500))};return Ee(()=>me.state.bot,u=>{u!=null&&u.config&&n.value.length===0&&l(u.config)},{immediate:!0}),Ee(()=>{var u;return(u=me.state.bot)==null?void 0:u.config},(u,d)=>{!u||!d||u!==d&&l(u)}),$o(()=>{setTimeout(()=>{i()},500)}),{quickPrompts:e,welcomeMessages:t,keyQuickPrompt:r}}const nI=["srcset"],sI=["src","alt","width","height"],Jp=nt({__name:"Picture",props:{desktopSrc:{type:String,required:!0},mobileSrc:{type:String,default:null},alt:{type:String,default:"Image"},width:{type:[String,Number],default:null},height:{type:[String,Number],default:null},classImg:{type:String,default:""}},setup(e){const t=e,n=o=>{const i="https://app.easychatgpt.io",a="https://console.easyaichat.app";return o.includes(i)?o.replace(i,a):o},s=pe(()=>t.mobileSrc||t.desktopSrc),r=pe(()=>t.desktopSrc);return(o,i)=>(v(),k("picture",null,[c("source",{srcset:n(s.value),media:"(max-width: 525px)"},null,8,nI),c("img",{src:n(r.value),alt:e.alt,class:se(e.classImg),width:e.width,height:e.height},null,10,sI)]))}},[["__scopeId","data-v-a2e952ab"]]),rI={key:0},oI={key:0},iI={class:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-[9999999999]"},aI={class:"w-[76vw] md:w-[420px] relative"},lI={class:"absolute -top-9 -right-1"},cI="EAC_CLOSE_WIDGET_POPUP_BANNER",uI={__name:"ShapePopupBanner",props:{item:{type:Object,default:()=>{}}},setup(e){const t=e,n=L(!1),s=L(!1),r=L(null),o=L(null),i=pe(()=>{var d;return(d=t.item.banners)==null?void 0:d.find(f=>f.active)}),a=d=>d.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase(),l=(d,f="")=>{Object.keys(d).forEach(h=>{let p=d[h];const m=`--${f}${a(h)}`;typeof p=="object"&&!Array.isArray(p)&&p!==null?l(p,`${f}${a(h)}-`):(r.value.style.setProperty(m,p),m.includes("-horizontal")?o.value.style.setProperty(m,"0px"):o.value.style.setProperty(m,p))})};Ke(()=>{i.value&&(n.value=!0,l(i.value,"ui-"))});const u=()=>{n.value=!1,s.value=!0,pt.set(cI,1,"1d")};return(d,f)=>i.value?(v(),k("div",rI,[c("div",{ref_key:"shapePopupBannerRef",ref:r,class:se(["fixed z-[9999999] eac-popup-banner",[`position-${i.value.alignment.position}`,s.value?"translate-x-0":i.value.alignment.position==="left"?"-translate-x-[150%]":"translate-x-[150%]",n.value?"opacity-0":"duration-300"]])},[(v(),re(Gt(i.value.link?"a":"div"),{href:i.value.link,target:"_blank",class:"w-[70px] rounded-md block cursor-pointer overflow-hidden",onClick:f[0]||(f[0]=h=>s.value=!1)},{default:xe(()=>[U(Jp,{desktopSrc:i.value.image_desktop,mobileSrc:i.value.image_mobile,alt:"eac banner popup",classImg:"w-full h-full object-contain"},null,8,["desktopSrc","mobileSrc"])]),_:1},8,["href"])),c("button",{onClick:f[1]||(f[1]=h=>s.value=!1),class:"md:group-hover:opacity-100 duration-200 absolute left-0 -top-[20px] z-10 text-gray-500 size-[18px] rounded-full bg-white border border-gray-100 flex items-center justify-center"},[U(b(Zs),{size:"12","stroke-width":"1.5"})])],2),c("button",{onClick:f[2]||(f[2]=h=>s.value=!0),ref_key:"buttonBannerTrigger",ref:o,"aria-label":"eac-button-banner-trigger",class:se(["fixed z-[9999999] eac-popup-banner button-trigger bg-primary w-5 h-10 flex items-center justify-center -translate-y-full shadow",[`position-${i.value.alignment.position}`,s.value?i.value.alignment.position==="left"?"-translate-x-[100%]":"translate-x-[100%]":"translate-x-0",i.value.alignment.position==="left"?"rounded-r-lg":"rounded-l-lg",n.value?"opacity-0":"duration-300"]])},[U(b(Io),{"stroke-width":"2.5",class:se(["text-white",i.value.alignment.position==="right"?"rotate-180":"rotate-0"])},null,8,["class"])],2),U(mn,{name:"fade"},{default:xe(()=>[n.value?(v(),k("div",oI,[c("div",{onClick:f[3]||(f[3]=h=>u()),class:"fixed inset-0 z-[9999999998] bg-black opacity-20"}),c("div",iI,[c("div",aI,[c("div",lI,[c("button",{"aria-label":"eac-button-close-banner",onClick:f[4]||(f[4]=h=>n.value=!1),class:"size-7 z-50 bg-white shadow text-gray-500 cursor-pointer rounded-full flex items-center justify-center"},[U(b(Zs),{size:"18","stroke-width":"2"})])]),(v(),re(Gt(i.value.link?"a":"div"),{href:i.value.link,target:"_blank",class:"block",onClick:f[5]||(f[5]=h=>u())},{default:xe(()=>[U(Jp,{desktopSrc:i.value.image_desktop,mobileSrc:i.value.image_mobile,alt:"eac banner popup",classImg:"w-full h-full"},null,8,["desktopSrc","mobileSrc"])]),_:1},8,["href"]))])])])):B("",!0)]),_:1})])):B("",!0)}},dI={},fI={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",version:"1.1",fill:"currentColor"},hI=[c("path",{d:"M28 0H4C1.8 0 0 1.8 0 4v18c0 2.2 1.8 4 4 4h6v5.25c0 0.6 0.7 1 1.2 0.6L19 26h9c2.2 0 4-1.8 4-4V4c0-2.2-1.8-4-4-4zM20 8.3c0.9 0 1.7 0.75 1.7 1.7s-0.75 1.7-1.7 1.7-1.7-0.75-1.7-1.7 0.75-1.7 1.7-1.7zM12 8.3c0.9 0 1.7 0.75 1.7 1.7s-0.75 1.7-1.7 1.7-1.7-0.75-1.7-1.7 0.75-1.7 1.7-1.7zM22.2 17.1c-1.6 1.8-4.2 2.9-6.2 2.9s-4.7-1-6.3-2.9c-0.4-0.4-0.3-1 0.1-1.4 0.4-0.4 1-0.3 1.4 0.1 1.2 1.4 2.9 2.2 4.7 2.2 1.8 0 3.6-0.8 4.7-2.2 0.4-0.4 1-0.5 1.4-0.1 0.4 0.4 0.5 1 0.1 1.4z"},null,-1)];function pI(e,t){return v(),k("svg",fI,hI)}const mI=nt(dI,[["render",pI]]),Ic=e=>(In("data-v-78bd0ff0"),e=e(),Pn(),e),gI={class:"px-5 pt-8"},vI={key:0,class:"flex flex-col items-center pb-6 sm:pt-3 sm:min-h-[220px] relative"},yI={class:"mb-3"},bI=Ic(()=>c("h3",{class:"text-[18px] font-medium text-gray-900 mb-2"}," Cm n bn  phn hi ",-1)),xI=Ic(()=>c("p",{class:"text-center text-sm text-gray-600 px-2"},[Fe(" Chng ti s xem xt v ci thin dch v "),c("br"),Fe(" da trn gp  ca bn ")],-1)),_I={class:"mt-3"},wI={class:"flex items-center justify-center space-x-1"},kI={key:1,"data-name":"eac-widget-form-survey",class:"h-fit sm:max-h-[76vh] overflow-y-auto scroll-hidden"},SI={class:"overflow-y-auto flex-1"},CI={class:"mb-3 relative"},$I={class:"size-[42px] rounded-full overflow-hidden mx-auto mb-2"},TI=["src","alt"],AI=["innerHTML"],EI={class:"text-xs text-gray-500 text-center mt-1"},II=["innerHTML"],PI={class:"space-y-4"},OI={class:"flex items-center justify-center space-x-2"},RI=["onClick"],MI={class:"text-sm font-medium mt-1 text-[#FAAD14] text-center"},LI={key:0,class:"flex justify-center flex-wrap gap-1.5 mb-4"},DI=["onClick"],NI={class:"text-xs text-gray-500 text-right"},jI={class:"pt-4 sticky bottom-0 bg-white"},FI=[Ic(()=>c("div",null,"Gi phn hi",-1))],zI=nt({__name:"WidgetWebsiteSurvey",props:{bot:{type:Object,default:null},preview:{type:Boolean,default:!1},widget:{type:Object,default:null}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,r=L(!1),o=L(!1),i=st({rating:5,detailed_feedback:"",feedback_issues:[],page_url:""}),a={"rangdongstorevn-zll":["Tc  website","ng nhp ti khon","Tm kim sn phm","Cho hng vo gi hng","Gi sn phm","Dch v khch hng","Khc"],"easychatgptio-ujc":["Tc  website","ng nhp ti khon","To AI chatbot","Hun luyn AI chatbot","Gi sn phm","Dch v khch hng","Khc"],"easychatgptio-qqh":["Tc  website","ng nhp ti khon","To AI chatbot","Hun luyn AI chatbot","Gi sn phm","Dch v khch hng","Khc"],"jamstackvietnamcom-zux":["Tc  website","Tm kim dch v","Gi dch v","Dch v khch hng","Khc"],easyaiagentsapp:["Kh nng tch hp","Giao din ngi dng"," chnh xc ca bn ghi (transcript)","Cht lng bn tm tt","Khc"],default:["Giao din website","Thao tc t hng","Dch v khch hng","Gi sn phm","Ti khon ngi dng","Khc"]},l={easyaiagentsapp:{title:"nh gi tri nghim <br /> Tr l Tm tt cuc hp",description:"Phn hi ca bn rt quan trng gip chng ti <br /> ci thin sn phm."},default:{title:"nh gi tri nghim website",description:" Phn hi ca bn rt quan trng gip chng ti <br /> ci thin trang web."}},u=pe(()=>{var _;return a[(_=n.bot)==null?void 0:_.handle]??a.default}),d=pe(()=>{var _;return l[(_=n.bot)==null?void 0:_.handle]??l.default}),f=["Rt t","T","Bnh thng","Tt","Rt tt"],h=_=>{i.rating=_},p=async()=>{try{if(o.value)return;o.value=!0,i.page_url=window.location.href;const _={status:"submitted",conversation_id:null,message_id:null,submission_data:i};console.log(_);const C=await ze.submission.submitWidget({widgetId:n.widget.id,formData:_});if(C.data&&C.status===200){r.value=!0,i.feedback_issues=[],i.detailed_feedback="";let A=setTimeout(()=>{s("close"),clearTimeout(A)},3e3)}}catch(_){console.log("Error Submission: ",_)}finally{o.value=!1}},m=()=>{r.value=!0,i.feedback_issues=[],i.detailed_feedback="";let _=setTimeout(()=>{s("close"),clearTimeout(_)},3e3)},x=()=>{i.detailed_feedback.length>300&&(i.detailed_feedback=i.detailed_feedback.slice(0,300))},y=_=>{const C=i.feedback_issues.indexOf(_);C===-1?i.feedback_issues.push(_):i.feedback_issues.splice(C,1)};return(_,C)=>(v(),k("div",gI,[r.value?(v(),k("div",vI,[c("div",yI,[U(b(cc),{size:"42","stroke-width":"1",class:"text-gray-600"})]),bI,xI,c("div",_I,[c("div",wI,[(v(),k(be,null,Ie(5,A=>U(b(la),{size:32,"stroke-width":"1",fill:i.rating>=A?"#FAAD14":"none",color:i.rating>=A?"#FAAD14":"#d1d5db",class:se(["star-icon",i.rating>=A?"star-active":""])},null,8,["fill","color","class"])),64))])])])):(v(),k("div",kI,[c("div",SI,[c("div",CI,[c("div",$I,[c("img",{src:e.bot.config.ui.logo,alt:e.bot.config.ui.name,class:"w-full h-full object-cover"},null,8,TI)]),c("h2",{class:"text-[20px] font-medium text-gray-900 text-center",innerHTML:d.value.title},null,8,AI),c("div",EI,[c("span",{innerHTML:d.value.description},null,8,II)])]),c("div",PI,[c("div",null,[c("div",OI,[(v(),k(be,null,Ie(5,A=>c("div",{key:A,class:"star-wrapper",onClick:E=>h(A)},[U(b(la),{size:40,"stroke-width":"1",fill:i.rating>=A?"#FAAD14":"none",stroke:"#FAAD14",color:i.rating>=A?"#FAAD14":"#d1d5db",class:se(["star-icon",i.rating>=A?"star-active":"star-inactive"])},null,8,["fill","color","class"])],8,RI)),64))]),c("div",MI,V(f[i.rating-1]),1)]),c("div",null,[i.rating<=3?(v(),k("div",LI,[(v(!0),k(be,null,Ie(u.value,A=>(v(),k("div",{onClick:E=>y(A),class:se(["px-2 py-1 text-xs text-gray-700 border rounded tracking-tight cursor-pointer",i.feedback_issues.includes(A)?"bg-gray-200 border-gray-300 ":"border-gray-200 hover:bg-gray-50"])},V(A),11,DI))),256))])):B("",!0),Ot(c("textarea",{"onUpdate:modelValue":C[0]||(C[0]=A=>i.detailed_feedback=A),placeholder:"M t chi tit (ti a 300 k t)",rows:3,onInput:x,class:"text-base placeholder:text-xs sm:text-xs text-gray-700 block w-full rounded-md border border-gray-200 px-3 py-2 resize-none focus:outline-none"},null,544),[[ln,i.detailed_feedback]]),c("div",NI,V(i.detailed_feedback.length)+" / 300 ",1)])])]),c("div",jI,[c("button",{onClick:C[1]||(C[1]=A=>e.preview?m():p()),class:"w-full h-10 text-sm font-medium px-4 flex items-center justify-center bg-primary text-white rounded-lg"},FI)])]))]))}},[["__scopeId","data-v-78bd0ff0"]]),Ts=e=>(In("data-v-6d7ef95c"),e=e(),Pn(),e),qI={class:"px-5 pt-8"},BI={key:0,class:"flex flex-col items-center pb-6 sm:pt-4 sm:min-h-[240px] relative"},UI={class:"mb-3"},VI=Ts(()=>c("h3",{class:"text-[20px] font-medium text-gray-900 mb-2"}," Cm n bn  phn hi ",-1)),HI=Ts(()=>c("p",{class:"text-center text-sm text-gray-600 px-2"},[Fe(" Chng ti s xem xt v ci thin dch v "),c("br"),Fe(" da trn gp  ca bn ")],-1)),WI={class:"mt-3"},GI={class:"flex items-center justify-center space-x-1"},KI={key:1,"data-name":"eac-widget-form-survey",class:"h-fit sm:max-h-[76vh] overflow-y-auto scroll-hidden"},QI={class:"mb-3 relative"},JI={class:"size-[40px] rounded-full overflow-hidden mx-auto mb-2"},XI=["src","alt"],ZI=Ts(()=>c("h2",{class:"text-base font-medium text-gray-900 text-center"}," nh gi tri nghim mua hng ",-1)),YI=Ts(()=>c("div",{class:"text-xs text-gray-500 text-center mt-1"},[Fe(" Phn hi ca bn rt quan trng gip chng ti "),c("br"),Fe(" ci thin trang web. ")],-1)),eP={class:"space-y-4"},tP={class:"space-y-1"},nP={class:"flex items-center justify-center space-x-2"},sP=["onClick"],rP={class:"text-sm font-medium text-[#FAAD14] text-center"},oP={key:0,class:"space-y-1"},iP=Ts(()=>c("div",{class:"text-sm text-gray-900"}," Bn thch iu g khi t hng ",-1)),aP={class:"flex flex-wrap gap-1"},lP=["onClick"],cP={key:1,class:"space - y - 1"},uP=Ts(()=>c("div",{class:"text-sm text-gray-900"}," Bn gp kh khn g khi t hng ",-1)),dP={class:"flex flex-wrap gap-1"},fP=["onClick"],hP={class:"space-y-1"},pP=Ts(()=>c("div",{class:"text-sm text-gray-900"}," Bn mong i g t n hng ny ",-1)),mP={class:"flex flex-wrap gap-1"},gP=["onClick"],vP={class:"text-xs text-gray-500 text-right"},yP={class:"pt-3 sticky bottom-0 bg-white"},bP=[Ts(()=>c("div",null,"Gi phn hi",-1))],xP="survey_order",_P=nt({__name:"WidgetOrderSurvey",props:{bot:{type:Object,default:null},preview:{type:Boolean,default:!1},widget:{type:Object,default:null}},emits:["open","close"],setup(e,{emit:t}){const n=`${xP}_submitted_ids`,s=e,r=t,o=L(!1),i=L(!1),a=L(""),l=st({order_id:null,rating:5,positive_feedbacks:[],negative_feedbacks:[],expectations:[],suggestion:""}),u=["Rt t","T","Bnh thng","Tt","Rt tt"],d=E=>{const $=pt.get(n)||[],T=Array.isArray($)?[...$,E]:[E];pt.set(n,T,"30d")},f=E=>{l.rating=E},h=async()=>{try{if(i.value)return;i.value=!0;const E={status:"submitted",conversation_id:null,submission_data:l},$=await ze.submission.submitWidget({widgetId:s.widget.id,formData:E});$.data&&$.status===200&&(o.value=!0,d(a.value),setTimeout(()=>{r("close")},3e3))}catch(E){console.log("Error Submission: ",E)}finally{i.value=!1}},p=()=>{o.value=!0;let E=setTimeout(()=>{r("close"),clearTimeout(E)},3e3)},m=()=>{l.suggestion.length>300&&(l.suggestion=l.suggestion.slice(0,300))},x=(E,$)=>{const T=l[$].indexOf(E);T===-1?l[$].push(E):l[$].splice(T,1)},y=()=>{l.order_id=a.value,setTimeout(()=>{r("open")},3500)},_=()=>{const E=pt.get(n)||[];(Array.isArray(E)?E:[]).includes(a.value)||y()};function C(E){let $=E;try{E.includes("://")?$=new URL(E).pathname:$=E.replace(/^(https?:\/\/)?[^\/]+/,"")}catch{$=E.replace(/^(https?:\/\/)?[^\/]+/,"")}return[/^\/dat-hang-thanh-cong(\?.*)?$/,/^\/dat-hang\/thanh-cong(\/[a-zA-Z0-9-_]+)?(\?.*)?$/,/^\/don-hang\/thanh-cong(\/[a-zA-Z0-9-_]+)?(\?.*)?$/,/^\/thanh-toan\/thanh-cong(\/[a-zA-Z0-9-_]+)?(\?.*)?$/,/^\/giao-dich\/thanh-cong(\/[a-zA-Z0-9-_]+)?(\?.*)?$/,/^\/gio-hang-hoan-tat(\?.*)?$/,/^\/dat-hang-hoan-tat(\?.*)?$/,/^\/thanh-toan-hoan-tat(\?.*)?$/,/^\/don-hang-hoan-tat(\?.*)?$/,/^\/checkout\/success(\?.*)?$/,/^\/checkout\/confirm(\?.*)?$/,/^\/checkout\/confirmation(\?.*)?$/,/^\/checkout\/complete(\?.*)?$/,/^\/order\/success(\?.*)?$/,/^\/order\/confirm(\?.*)?$/,/^\/order\/complete(\?.*)?$/,/^\/order-confirmed(\?.*)?$/,/^\/order-placed(\?.*)?$/,/^\/order-received(\?.*)?$/,/^\/payment\/success(\?.*)?$/,/^\/payment\/confirm(\?.*)?$/,/^\/payment-completed(\?.*)?$/,/^\/purchase\/success(\?.*)?$/,/^\/purchase-complete(\?.*)?$/,/^\/transaction\/complete(\?.*)?$/,/^\/thank-you(\?.*)?$/,/^\/thanks(\?.*)?$/,/^\/confirmation\/[a-zA-Z0-9-_]+$/,/^\/order\/confirmed\/[a-zA-Z0-9-_]+$/,/^\/transaction\/[a-zA-Z0-9-_]+\/success$/,/^\/receipt\/[a-zA-Z0-9-_]+$/,/^\/invoice\/[a-zA-Z0-9-_]+$/].some(I=>I.test($))}function A(E){let $=E,T;try{if(E.includes("://")){const R=new URL(E);$=R.pathname,T=R.searchParams}else{$=E.replace(/^(https?:\/\/)?[^\/]+/,"");const R=E.split("?")[1];R&&(T=new URLSearchParams(R))}}catch{$=E.replace(/^(https?:\/\/)?[^\/]+/,"");const q=E.split("?")[1];q&&(T=new URLSearchParams(q))}if(T){const R=["orderId","orderID","order_id","orderNumber","order_number","orderNumberId","transactionId","transaction_id","transId","trans_id","id","code","reference","ref","confirmation","confirmationNumber","confirmation_number"];for(const q of R)if(T.has(q))return T.get(q)}const I=[/\/order\/([a-zA-Z0-9-_]+)$/,/\/transaction\/([a-zA-Z0-9-_]+)\/success$/,/\/confirmation\/([a-zA-Z0-9-_]+)$/,/\/receipt\/([a-zA-Z0-9-_]+)$/,/\/invoice\/([a-zA-Z0-9-_]+)$/,/\/dat-hang\/thanh-cong\/([a-zA-Z0-9-_]+)$/,/\/([a-zA-Z0-9-_]{8,})$/];for(const R of I){const q=$.match(R);if(q&&q[1])return q[1]}return null}return Ke(()=>{$o(()=>{const E=window.location.href;C(E)?(a.value=A(E),_()):r("close")},!0)}),(E,$)=>(v(),k("div",qI,[o.value?(v(),k("div",BI,[c("div",UI,[U(b(cc),{size:"42","stroke-width":"1",class:"text-gray-600"})]),VI,HI,c("div",WI,[c("div",GI,[(v(),k(be,null,Ie(5,T=>U(b(la),{size:32,"stroke-width":"1",fill:l.rating>=T?"#FAAD14":"none",color:l.rating>=T?"#FAAD14":"#d1d5db",class:se(["star-icon",l.rating>=T?"star-active":""])},null,8,["fill","color","class"])),64))])])])):(v(),k("div",KI,[c("div",null,[c("div",QI,[c("div",JI,[c("img",{src:e.bot.config.ui.logo,alt:e.bot.config.ui.name,class:"w-full h-full object-cover"},null,8,XI)]),ZI,YI]),c("div",eP,[c("div",tP,[c("div",nP,[(v(),k(be,null,Ie(5,T=>c("div",{key:T,class:"star-wrapper",onClick:I=>f(T)},[U(b(la),{size:32,"stroke-width":"1",fill:l.rating>=T?"#FAAD14":"none",stroke:"#FAAD14",color:l.rating>=T?"#FAAD14":"#d1d5db",class:se(["star-icon",l.rating>=T?"star-active":"star-inactive"])},null,8,["fill","color","class"])],8,sP)),64))]),c("div",rP,V(u[l.rating-1]),1)]),l.rating>3?(v(),k("div",oP,[iP,c("div",aP,[(v(),k(be,null,Ie(["Gi sn phm","Nhiu u i","Thanh ton d dng"],T=>c("div",{onClick:I=>x(T,"positive_feedbacks"),class:se(["px-2 py-1 text-xs text-gray-700 border rounded tracking-tight cursor-pointer",l.positive_feedbacks.includes(T)?"bg-gray-200 border-gray-300 ":"border-gray-200 hover:bg-gray-50"])},V(T),11,lP)),64))])])):(v(),k("div",cP,[uP,c("div",dP,[(v(),k(be,null,Ie(["Tc  ti trang","Tm sn phm","Thao tc mua hng","M khuyn mi","Phng thc thanh ton","a ch giao nhn"],T=>c("div",{onClick:I=>x(T,"negative_feedbacks"),class:se(["px-2 py-1 text-xs text-gray-700 border rounded tracking-tight cursor-pointer",l.negative_feedbacks.includes(T)?"bg-gray-200 border-gray-300 ":"border-gray-200 hover:bg-gray-50"])},V(T),11,fP)),64))])])),c("div",hP,[pP,c("div",mP,[(v(),k(be,null,Ie(["Giao nhanh","Sn phm ng m t","ng gi p"],T=>c("div",{onClick:I=>x(T,"expectations"),class:se(["px-2 py-1 text-xs text-gray-700 border rounded tracking-tight cursor-pointer",l.expectations.includes(T)?"bg-gray-200 border-gray-300 ":"border-gray-200 hover:bg-gray-50"])},V(T),11,gP)),64))])]),c("div",null,[Ot(c("textarea",{"onUpdate:modelValue":$[0]||($[0]=T=>l.suggestion=T),placeholder:" xut dnh cho chng ti (ti a 300 k t) ",onInput:m,rows:"3",class:"placeholder:text-xs text-gray-700 block w-full rounded-md border border-gray-200 px-3 py-2 resize-none focus:outline-none"},null,544),[[ln,l.suggestion]]),c("div",vP,V(l.suggestion.length)+" / 300 ",1)])])]),c("div",yP,[c("button",{onClick:$[1]||($[1]=T=>e.preview?p():h()),class:"w-full h-10 text-sm font-medium px-4 flex items-center justify-center bg-primary text-white rounded-lg"},bP)])]))]))}},[["__scopeId","data-v-6d7ef95c"]]),wP="data:image/webp;base64,UklGRvgDAABXRUJQVlA4WAoAAAAQAAAAOwAAEQAAQUxQSMwBAAABoGttm2Hb+qqretv2jnaKC/CObMW2vUNmtjPbtu1zQtvW7MIbLK8riIgJkJO2bZNTrXY6sFFyytXgNExUXptyzYET9ZWr55cUME65qS3GaQp4vuihRQUFESYqs7XDGs2CSEGx8Cz/ARHWSnltyKX1pAj8z2HdpATEyLV2Mq6mnFGnu4QElDgvNfhACUgFf0yRMmeqz7hMmvUPRQJKvLRyavwxJQAPTwdKctZUh7FO0rBX4AFKvGwoK6dGTygSED3cH1tXknU2MxWZzDorqd6EJ+AjED23cllJTjoIHiAE+Hxjr7oqazJrrc2Mytbvs+krCAHAwx7JqqyV5kERAYIHPj86r0+nuqqwXpf+C49/BfgAEAvCFClT+caq+wsoEkD0EeDfz19cPXHw0MlrL774DyD6CJAKeNBN1qiSuTT/dygiZaP3kUpH7yNlYwE/TpdyVd5KrTb+A94nyk0x+LIhxES5yQf4Y10TGasqO6nDqq+A4GOiqikFH4BPVraSnKrTOKn++DN/AKQQQkxlYwwhJIBfjg53kjOq5sxJaj1656s/qfKvTzcOaSbJGdWgcVaSug5asv/G+y9/+v3nbz95eXH73AEdJMk5oyoCVlA4IAYCAACwDgCdASo8ABIAAAAAJaACCox7+9fgx+pv+Z6VXX3th+lGI+/bvyV/ku6AfjNvDX9y/oHsm/yXVSfQA/SD0Wv2j+AD9dP2V9kDNAP5L+AHeobMXIa/HLuwG5X1aitby68ZHfMN+77a06NqiSSCRPXJ8GYPRLjS8dduTWvXc4AA/cxh18Lu74M0nsFfyT/YGmU0OAG2HVuI9UrHmM45///N7pWCjLj5buK6ZswGiNhhc68QeVef///+adqnZAo5QJwdCt/fQfKzPAFJ/rkhRZenmh+RD/4K2PDPAVOINMumh8rmX1KY5iQy62mez84gUANh5c6qF55FujawvR3CfSts1cMUh/82bqWqNPbV3UD2FQaEio0CNf8Jelo7TTmx5nVDbRbEvJjTZXrjCxQUYUvMkFuWJFguu56e8bZM8L8gUN/MND1a3ebjagL4l/GILo3aIDqVu3lgMuzKBSI/8P8YadjdJl7o6HxMHqXuNGlLyHg1rap7LC1MIfQnDGPubsDQrP0r+HkMahwMh9c42o/aWs//rh//aG8FrLGbUYdyGMp+b+Mm4SiADQ4KRKIANDgpFDPRqOPYg0cNWB7QcAM+sxtvobpeaAnhzzdTaSa6vwTLVgwsD/68///Nrv+Dz/nYD/0ef/3pUY6zzxt7x8EZf/xlUSQSuYVwd9MwIzizXTULdOKAAA==",kP={key:0,href:"https://easyaichat.app",target:"_blank",class:"text-[10px] text-gray-500 font-medium flex items-center space-x-1 px-2 pb-0.5"},SP=[c("span",null,"Powered by",-1),c("div",{class:"flex items-center space-x-1"},[c("div",{class:"inline-flex items-center"},[c("img",{src:wP,alt:"easy-ai-chat-logo",class:"h-[6px]"})]),c("span",{class:"font-bold tracking-tight"},"Easy AI Chat")],-1)],Xp={__name:"PoweredByEAC",setup(e){const t=pe(()=>{const n=me.state.handle;return![xs,Qn,Nn,"nexpovn","g8homevn"].includes(n)});return(n,s)=>t.value?(v(),k("a",kP,SP)):B("",!0)}},CP={class:"flex justify-center py-2"},Zp={__name:"TemplateWidgetSlide",props:{position:{type:String,default:"right",validator:e=>["left","right"].includes(e)},autoslide:{type:Boolean,default:!1},duration:{type:Number,default:0},handle:{type:String,default:""}},setup(e){const t=e,n=L(!1),s=L(!1),r=()=>{n.value=!n.value},o=()=>{n.value=!1},i=()=>{n.value=!0},a={easyaiagentsapp:["/meetings/recaps","/meetings/","/easyaiagentsapp/widget"]},l=()=>{t.autoslide&&setTimeout(()=>{n.value=!0},t.duration)};return Ke(()=>{l(),$o(()=>{a[t.handle]?a[t.handle].some(d=>window.location.pathname.includes(d))?s.value=!0:s.value=!1:(s.value=!0,l())},!0)}),(u,d)=>(v(),k(be,null,[s.value?bt(u.$slots,"trigger",Xo(an({key:0},{isOpen:n.value,position:e.position,toggleSlide:r,closeSlide:o,openSlide:i}))):B("",!0),U(mn,{name:"fade"},{default:xe(()=>[n.value?(v(),k("div",{key:0,onClick:o,class:"sm:hidden z-[9999999901] fixed inset-0 bg-black bg-opacity-30"})):B("",!0)]),_:1}),s.value?(v(),k("div",{key:1,class:se(["fixed z-[9999999902] w-screen h-fit max-sm:rounded-t-3xl sm:w-[325px] bg-white overflow-hidden transition-transform duration-500 ease-in-out",e.position==="left"?"left-0 sm:rounded-r-2xl":"right-0 sm:rounded-l-2xl","max-sm:bottom-0 sm:top-[48%] sm:-translate-y-1/2",n.value?"sm:delay-150":"",n.value?{left:"transform max-sm:translate-y-0 sm:translate-x-0",right:"transform max-sm:translate-y-0 sm:-translate-x-0"}[e.position]:{left:"max-sm:translate-y-full  sm:-translate-x-full",right:"max-sm:translate-y-full  sm:translate-x-full"}[e.position]]),style:{"box-shadow":"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"}},[c("button",{onClick:o,class:"absolute z-10 right-2 top-3 bg-white text-gray-600 size-8 flex items-center justify-center sm:hover:bg-gray-100 rounded-md"},[U(b(Zs),{size:"18","stroke-width":"2"})]),c("div",null,[bt(u.$slots,"widget",Xo(wi({isOpen:n.value,closeSlide:o,openSlide:i})))]),c("div",CP,[U(Xp)])],2)):B("",!0)],64))}},$P={key:0},TP={key:0},AP=c("div",{class:"absolute inset-0 bg-gray-500/60"},null,-1),EP={key:0,class:"overflow-hidden size-5 sm:size-6 rounded-full shrink-0"},IP=["src","alt"],PP={class:"text-sm font-medium text-primary leading-[120%]"},OP={key:1},RP=["onClick"],MP=["onClick","innerHTML"],LP=["onClick","innerHTML"],DP=["onClick"],NP={class:"pb-1 text-base text-white whitespace-nowrap rotate-90"},jP={class:"flex items-center space-x-2.5"},FP=c("div",{class:"tracking-wider"},"nh gi",-1),Yp={__name:"ChatWidget",props:{isPreview:{type:Boolean,default:!1},isOpenInit:{type:Boolean,default:!1}},setup(e){var Re,Be,Ne;const t=Rt(()=>Promise.resolve().then(()=>p7)),n=Rt(()=>Promise.resolve().then(()=>tm)),s=Rt(()=>Promise.resolve().then(()=>O7)),r=Rt(()=>Promise.resolve().then(()=>N7)),o=e,{widgets:i,widgetSettingType:a}=Js(),{bot:l,handle:u,chatState:d}=Ct(me.state),f=L(!1),h=L(!1),p=L(null),m=L(null),x=L(!1),y=L(!1),{getStorage:_}=Bs(),{isOpen:C,toggleChatbot:A}=Ao({openInit:o.isOpenInit,milliseconds:(Ne=(Be=(Re=l.value)==null?void 0:Re.config)==null?void 0:Be.ui)==null?void 0:Ne.automaticallyExpand}),{clickQuickPrompt:E,send:$,isLiveChatEnabled:T}=Xs(),{quickPrompts:I,welcomeMessages:R,keyQuickPrompt:q}=tI(),G=()=>{const X=Vt("Product");X&&X.sku&&(x.value=!0,y.value=!1)},K=pe(()=>x.value?y.value:!0),H=()=>{x.value&&(y.value=!0)},ee=()=>{x.value&&(y.value=!1)};Ke(async()=>{p.value=window.location.hostname;const X=_("easychatgpt_conversations",u.value);X&&(D.localStorageFormOrder=`${jl}-${X}`),J(),setTimeout(()=>{f.value=!0},1e3)}),Ee(()=>D.localStorageFormOrder,X=>{X&&(D.selectedForm=JSON.parse(localStorage.getItem(X)))});const ce=pe(()=>{var X,de,Se,_e;return((_e=(Se=(de=(X=l.value)==null?void 0:X.config)==null?void 0:de.ui)==null?void 0:Se.alignment)==null?void 0:_e.position)||"right"});Ee(C,X=>{X?f.value=!1:setTimeout(()=>{f.value=!0},800),G()}),Ee(u,X=>{X&&[xs,Qn].includes(X)&&G()},{immediate:!0});function W(X){C.value=!0,f.value=!1,$({message:X})}function Q(){h.value=!1,pt.set(Nl,1,"1d")}function J(){pt.get(Nl)!=="1"?(h.value=!0,pt.remove(Nl)):h.value=!1}const ne=X=>X!==null&&typeof X=="object",ke=pe(()=>{var X;return(X=l.value.widgets)==null?void 0:X.find(de=>de.type.includes("website_survey")&&de.active&&!de.is_deleted)}),qe=pe(()=>m1.includes(u.value)&&!o.isPreview),Ce=pe(()=>[xs,Qn].includes(u.value));return(X,de)=>{var Se,_e,$e,Ae;return b(l)?(v(),k("div",$P,[qe.value?B("",!0):(v(),k("div",{key:0,class:se(["chat-widget",[`position-${b(l).config.ui.alignment.position}`,`btn-size-desktop-${((Se=b(l).config.ui.bubble_chat)==null?void 0:Se.offset.desktop.size)??"medium"}`,`btn-size-mobile-${((_e=b(l).config.ui.bubble_chat)==null?void 0:_e.offset.mobile.size)??"medium"}`]]),style:kt([{display:"none"},{"--size-desktop-custom":(($e=b(l).config.ui.bubble_chat)==null?void 0:$e.offset.desktop.custom)??"var(--size-medium)","--size-mobile-custom":((Ae=b(l).config.ui.bubble_chat)==null?void 0:Ae.offset.mobile.custom)??"var(--size-medium)","--z-index-chatview":9999999999,"--z-index-bubblechat":999999990}])},[c("div",{class:se(["z-[var(--z-index-chatview)] overflow-hidden ecg-chat-view sm:rounded-3xl box-shadow-md w-screen sm:w-[425px] grow sm:h-[725px] sm:max-h-[calc(100vh-3rem)] max-sm:border-t-0 max-sm:border-x-0 fixed max-sm:right-0 sm:right-4 duration-500",[[b(C)?"max-sm:top-0 delay-300":"opacity-0 invisible translate-y-[150%]",Ce.value?"h-[calc(100dvh-52px)] max-sm:top-[52px]":"h-dvh rounded-none max-sm:top-0"]]])},[U(b(t),{ref_key:"chatViewRef",ref:m,class:"h-full w-full",onCloseChat:de[0]||(de[0]=Te=>b(A)())},null,512)],2),c("div",{class:se([[!b(C)&&"z-[var(--z-index-bubblechat)]"],"chat-button-group fixed bottom-[var(--ui-alignment-offset-vertical)] space-y-2"]),onMouseenter:H,onMouseleave:ee},[!b(d).unreadMessageCount&&h.value&&!b(C)&&K.value?(v(),k("div",TP,[c("div",{class:se(["flex-col space-y-2 sm:space-y-3 group",[{left:"items-start",right:"items-end"}[ce.value],[b(bo),b(Zn)].includes(b(u))||e.isPreview?"flex":"hidden sm:flex"]])},[f.value?(v(),k("div",{key:0,class:se(["pr-0.5 duration-500 group-hover:block inner-close",[[b(bo),b(Zn)].includes(b(u))?"sm:hidden":"hidden"]])},[c("button",{onClick:de[1]||(de[1]=Te=>Q()),class:"flex overflow-hidden relative justify-center items-center w-5 h-5 rounded-full duration-500 hover:opacity-70"},[U(Ca,{class:"relative z-10 w-3 text-white"}),AP])],2)):B("",!0),(v(),k("div",{key:b(q),class:se([f.value?"translate-y-0 opacity-100 visible":"translate-y-[60%] opacity-0 invisible","px-3 pt-3 cursor-pointer pb-1 box-shadow-md bg-white rounded-xl relative w-[180px] sm:w-[200px] duration-1000 delay-75"]),onClick:de[2]||(de[2]=Te=>C.value=!0)},[b(l).config.ui?(v(),k("div",{key:0,class:se(["items-center space-x-1 sm:space-x-2 mb-1 sm:mb-1.5",[b(bo),b(Zn)].includes(b(u))||e.isPreview?"flex":"hidden sm:flex "])},[b(l).config.ui.logo?(v(),k("div",EP,[c("img",{src:b(l).config.ui.logo,alt:b(l).config.ui.name,class:"object-cover w-full h-full"},null,8,IP)])):B("",!0),c("div",PP,V(b(l).config.ui.name),1)],2)):B("",!0),b(R)&&b(R).length>0?(v(),k("div",OP,[(v(),re(Z8,{messages:b(R),key:b(R)},null,8,["messages"]))])):B("",!0)],2))],2)])):B("",!0),!b(d).unreadMessageCount&&h.value&&!b(C)&&b(I).length>0&&K.value?(v(!0),k(be,{key:1},Ie(b(I),(Te,O)=>(v(),k("div",{key:O,class:se(["duration-500",[b(C)?"translate-y-1/2 opacity-0 invisible":"translate-y-0 opacity-100 visible",[b(bo)].includes(b(u))||e.isPreview?"block":"hidden sm:block"]]),onClick:F=>b(E)(Te)},[(v(),k("div",{key:b(q),class:se(["flex-col space-y-3 duration-1000 group",[ce.value==="left"?"items-start":"items-end",[b(bo)].includes(b(u))||e.isPreview?"flex":"hidden sm:flex"]])},[c("div",{class:se([[f.value?"translate-x-0 opacity-100 visible":"translate-y-full opacity-0 invisible",`delay-${O*200+300}ms`],"duration-1000"])},[ne(Te)?(v(),k("div",{key:0,onClick:F=>W(Te.message),class:"quick-prompt-tag",innerHTML:Te.name},null,8,MP)):(v(),k("div",{key:1,onClick:F=>W(Te),class:"quick-prompt-tag",innerHTML:Te},null,8,LP))],2)],2))],10,RP))),128)):B("",!0),U(mn,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 translate-y-4 scale-50","enter-to-class":"opacity-100 translate-y-0 scale-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0 scale-100","leave-to-class":"opacity-0 translate-y-4 scale-50"},{default:xe(()=>[b(d).unreadMessageCount>0&&b(T)?(v(),re(b(r),{key:0,onToggle:de[3]||(de[3]=Te=>b(A)()),style:kt({transformOrigin:ce.value==="right"?"bottom right":"bottom left"})},null,8,["style"])):B("",!0)]),_:1}),U(J8,{isOpen:b(C),chatPosition:ce.value,onToggle:de[4]||(de[4]=Te=>b(A)())},null,8,["isOpen","chatPosition"])],34)],6)),b(i).ai_ask?(v(),re(b(n),{key:1,widget:b(i).ai_ask},null,8,["widget"])):B("",!0),b(i).product_card_summary&&b(a)!=="auto_detect_card_product"&&![b(Cr)].includes(b(u))?(v(),re(b(s),{key:2,bot:b(l)},null,8,["bot"])):B("",!0),b(i).popup_banner&&![b(xs),b(Qn)].includes(b(u))?(v(),re(uI,{key:3,item:b(i).popup_banner},null,8,["item"])):B("",!0),ke.value&&!["www.dienmayxanh.com","www.thegioididong.com","www.nhathuocankhang.com"].includes(p.value)?(v(),re(b(Zp),{key:4,position:"right",handle:b(u)},{trigger:xe(({isOpen:Te,position:O,toggleSlide:F})=>[c("button",{onClick:F,class:se(["fixed z-40 w-[34px] h-[125px] sm:w-[36px]  bg-primary hover:opacity-90 text-white flex items-center justify-center duration-200",O==="left"&&"left-0 rounded-r-lg",O==="right"&&"right-0 rounded-l-lg",Te?O==="right"?"translate-x-full":"-translate-x-full":"translate-x-0 delay-300"]),style:"top: 30%;"},[c("div",NP,[c("div",jP,[FP,U(mI,{class:"size-[18px] -rotate-90 text-white"})])])],10,DP)]),widget:xe(({closeSlide:Te})=>[U(b(zI),{bot:b(l),preview:e.isPreview,widget:ke.value,onClose:Te},null,8,["bot","preview","widget","onClose"])]),_:1},8,["handle"])):B("",!0),b(i).order_survey&&!["www.dienmayxanh.com","www.thegioididong.com","www.nhathuocankhang.com"].includes(p.value)?(v(),re(b(Zp),{key:5,position:"right"},{widget:xe(({openSlide:Te,closeSlide:O})=>[U(b(_P),{bot:b(l),widget:b(i).order_survey,preview:e.isPreview,onOpen:Te,onClose:O},null,8,["bot","widget","preview","onOpen","onClose"])]),_:1})):B("",!0)])):B("",!0)}}},em="https://widget.easyaichat.app",Pc="easychatgpt-widget";window.EasyAIChat={_config:null,_initialized:!1,init(e){if(this._initialized)return;this._config=e;const t=()=>{let n=document.getElementById(Pc);if(n!=null&&n.hasAttribute("data-ecg-initialized")){this._initialized=!0;return}n||(n=document.createElement("div"),n.id=Pc,document.body.appendChild(n));const s=document.createElement("div"),r=n.attachShadow({mode:"open"});r.appendChild(s),ho(Yp,this._config).mount(s);const o=document.createElement("link");o.rel="stylesheet",o.href=`${em}/dist/widget/main.css?v=${Date.now()}`,o.onload=()=>{n.setAttribute("data-ecg-initialized","true"),this._initialized=!0},r.appendChild(o),me.actions.setHandle(e.handle),me.actions.fetchBotInit(e.handle,{},{website:!0}),Xs({handle:e.handle})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t):t()},injectWidget:nc,injectChat(e,{type:t="view"}={}){const n=document.querySelector(e);if(!n){console.error(`Target element not found: ${e}`);return}let s;n.shadowRoot?(s=n.shadowRoot,s.innerHTML=""):s=n.attachShadow({mode:"open"});const r=document.createElement("div");r.setAttribute("id","chat-app"),s.appendChild(r),ho(t==="view"?Gp:Yp,this._config).mount(r);const i=document.createElement("link");i.rel="stylesheet",i.href=`${em}/dist/widget/main.css`,s.appendChild(i);const a=document.getElementById(Pc);a&&n.setAttribute("style",a.getAttribute("style"))},send(e){Ao().isOpen.value=!0,Xs().send({message:e})},sync:{event:{login:"eac-sync-login",logout:"eac-sync-logout",cart:"eac-sync-cart",namespace:"eac-sync"},emit(e,t){if(!e)return;const n=this.event[e]||`${this.event.namespace}-${e}`;window.dispatchEvent(new CustomEvent(n,{detail:t,bubbles:!0,composed:!0}))},on(e,t){if(!e||typeof t!="function")return;const n=this.event[e]||`${this.event.namespace}-${e}`,s=r=>t(r.detail,r);return window.addEventListener(n,s),()=>window.removeEventListener(n,s)},offAll(e){if(!e)return;const t=this.event[e]||`${this.event.namespace}-${e}`;window.removeEventListener(t,null)}}},window.EAC=window.EasyAIChat,window.ECG=window.EasyAIChat,window.EasyChatGPT=window.EasyAIChat;const zP={class:"bg-white"},qP=["onClick"],BP={class:"flex-1 text-sm"},UP={key:0,class:"flex flex-col px-1 mt-2"},VP={class:"pl-1"},HP={class:"px-3 py-2 mt-1 text-sm bg-blue-50 rounded-lg"},WP={key:0,class:"ask-ai-result"},GP={key:1,class:"ask-ai-result"},KP=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"WidgetFeatureAIProductInsightEmbed",props:{widget:{type:Object,default:()=>({})}},setup(e){const t=e,n=L(null),s=L({}),r=L([]);let o=L(null);const i=[{id:1,name:" Tm tt u im",message:" Tm tt u im ca {title}"},{id:2,name:" So snh mu tng ng",message:" So snh cc mu tng ng ca {title}"}],a=pe(()=>{var p,m;return((m=(p=t.widget)==null?void 0:p.dynamic_prompts)==null?void 0:m.product)??i}),l=p=>{p=`${p}`;const m=p.split(" ");r.value=[];let x=0;o.value=setInterval(()=>{x<m.length?(r.value.push(m[x]),x++):clearInterval(o.value)},60)},u=()=>{clearInterval(o.value),r.value=[]},d=async()=>{try{const p=window.location.href;if(s.value[p]){l(s.value[p]);return}const{data:m}=await ze.summary.getSummary({handle:me.state.handle,source:p});m!=null&&m.highlight&&(s.value[p]=m.highlight,l(s.value[p]))}catch(p){console.log("Failed to get summary:",p)}},f=()=>{const p=Tr(),m=Vt("Product");p.title&&(m.name=p.title),m?(n.value=m,d()):n.value=null};Ke(()=>{u(),f()});const h=p=>{const m=p.replace(/{title}/g,n.value.name).replace(/{product}/g,n.value.name);EAC.send(m)};return(p,m)=>(v(),k("div",zP,[(v(!0),k(be,null,Ie(a.value,(x,y)=>(v(),k("div",{key:y,class:"flex justify-between items-center py-2 pr-2 pl-3 text-gray-800 rounded-lg cursor-pointer hover:bg-gray-100",onClick:_=>h(x.message)},[c("div",BP,V(x.name),1),U(b(Io),{size:"16",class:"text-gray-600"})],8,qP))),128)),r.value?(v(),k("div",UP,[c("div",VP,[U(zo,{title:"AI nh gi",size:"md"})]),c("div",HP,[r.value.length?(v(),k("div",WP,[(v(),k("span",{key:r.value.length},V(r.value.join(" ")),1))])):(v(),k("div",GP,"AI ang x l ..."))])])):B("",!0)]))}}},Symbol.toStringTag,{value:"Module"})),QP={key:0,class:"p-4 sm:px-4 sm:py-5 w-full border border-blue-100 rounded-2xl bg-blue-50/60"},JP={key:0,class:"flex flex-col"},XP={class:"mb-2 flex items-center gap-1"},ZP={class:"text-sm pl-1"},YP={key:0},eO={key:0,class:"mb-1.5"},tO={key:1},nO={class:"space-y-1"},sO=c("span",{class:"size-1 rounded-full bg-gray-700 flex-shrink-0 mr-2 translate-y-2"},null,-1),rO={key:1,class:"ask-ai-result"},oO=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"WidgetSummaryPageContent",props:{widget:{type:Object,default:()=>({})},isShowHighlight:{type:Boolean,default:!0},isShowFeatures:{type:Boolean,default:!0}},setup(e){const t=e,n=L({}),s=pe(()=>{const p=t.isShowHighlight&&r.value.highlight,m=t.isShowFeatures&&r.value.features.length;return p||m}),r=L({highlight:"",features:[]});let o=L(null),i=L("highlight"),a=L(0);const l=p=>{r.value={highlight:"",features:[]},i.value="highlight",a.value=0,p.highlight?u(p.highlight,p):p.features&&p.features.length&&(i.value="features",d(p))},u=(p,m)=>{const x=p.split(" ");let y=0;const _=[],C=setInterval(()=>{y<x.length?(_.push(x[y]),r.value.highlight=_.join(" "),y++):(clearInterval(C),m.features&&m.features.length&&setTimeout(()=>{i.value="features",d(m)},200))},40);o.value=C},d=p=>{if(a.value>=p.features.length)return;const x=p.features[a.value].split(" ");let y=0;const _=[],C=setInterval(()=>{if(y<x.length){_.push(x[y]);const A=[...r.value.features];A[a.value]=_.join(" "),r.value.features=A,y++}else clearInterval(C),a.value++,a.value<p.features.length&&setTimeout(()=>{d(p)},100)},40);o.value=C},f=()=>{clearInterval(o.value),r.value={highlight:"",features:[]},i.value="highlight",a.value=0},h=async()=>{try{const p=me.state.handle,m=window.location.href;if(n.value[m]){l(n.value[m]);return}const{data:x}=await ze.summary.getSummary({handle:p,source:m});x&&(x.highlight||x.features&&x.features.length)&&(n.value[m]=x,l(x))}catch(p){console.log("Failed to get summary:",p)}};return Ke(()=>{f(),h()}),(p,m)=>s.value?(v(),k("div",QP,[s.value?(v(),k("div",JP,[c("div",XP,[U(zo,{title:"AI tm tt",size:"md"})]),c("div",ZP,[r.value.highlight||r.value.features.length?(v(),k("div",YP,[e.isShowHighlight&&r.value.highlight?(v(),k("div",eO,[c("span",null,V(r.value.highlight),1)])):B("",!0),e.isShowFeatures&&r.value.features.length?(v(),k("div",tO,[c("ul",nO,[(v(!0),k(be,null,Ie(r.value.features,(x,y)=>(v(),k("li",{key:y,class:"flex items-start"},[sO,c("span",null,V(x),1)]))),128))])])):B("",!0)])):(v(),k("div",rO,"AI ang x l ..."))])])):B("",!0)])):B("",!0)}}},Symbol.toStringTag,{value:"Module"})),iO={class:"flex items-center gap-1.5 relative"},aO={class:"flex items-center pl-1.5 text-sm text-gray-700 touch-manipulation cursor-pointer"},lO={class:"transition-all duration-300 w-[130px] opacity-100"},cO=["aria-label"],tm=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"WidgetAskAI",props:{widget:{type:Object,required:!0}},setup(e){const t=L(!1),n=L(null),s=L(null),r=L(""),o=L(""),i=L(!1),a=L(!1),l=L(!1),u=L(null),d=L(null),f=L([]),h=st({top:"0px",left:"0px",transform:"translate(-50%, 100%)",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"}),p=e;Ee(t,W=>{W?gt(()=>{s.value&&(s.value.focus(),gt($))}):(r.value="",o.value="",a.value=!1,l.value=!1,clearTimeout(u.value),d.value=null,T())});const m=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768,x=()=>{const W=window.getSelection();if(!W.rangeCount||W.isCollapsed)return null;const J=W.getRangeAt(0).getBoundingClientRect();return J.width===0&&J.height===0?null:{x:J.left+J.width/2,y:J.bottom}},y=(W,Q)=>{const J=window.pageXOffset,ne=window.pageYOffset,ke=window.innerWidth,qe=window.innerHeight,Ce=i.value?16:10,Re=50,Be=i.value?200:280;let Ne=W,X=Q,de="-50%",Se="0%";const _e=qe-Q,$e=Q;if(_e<Re+Ce&&$e>Re+Ce?(X=Q-Ce,Se="-100%"):(X=Q+Ce,Se="0%"),i.value)Ne=ke/2,de="-50%";else{const Ae=Be/2;W-Ae<Ce?Ne=Ce+Ae:W+Ae>ke-Ce?Ne=ke-Ce-Ae:Ne=W}h.top=`${X+ne}px`,h.left=`${Ne+J}px`,h.transform=`translate(${de}, ${Se})`,gt(()=>{if(!n.value)return;const Ae=n.value.getBoundingClientRect();let Te=Ne+J,O=X+ne;Ae.left<Ce?(Te=Ce+J,h.transform=`translate(0%, ${Se})`):Ae.right>ke-Ce&&(Te=ke-Ce-Ae.width+J,h.transform=`translate(0%, ${Se})`),(Ae.bottom>qe-Ce||Ae.top<Ce)&&($e>_e&&$e>Re+Ce?(O=X+ne-Ae.height-Ce*2,h.transform=`translate(${de.includes("0%")?"0%":"-50%"}, 0%)`):(O=Ce+ne,h.transform=`translate(${de.includes("0%")?"0%":"-50%"}, 0%)`)),h.left=`${Te}px`,h.top=`${O}px`,i.value&&Ae.width>ke-Ce*2&&(n.value.style.maxWidth=`${ke-Ce*2}px`)})},_=(W,Q,J)=>{r.value=J;const ne=window.getSelection();ne.rangeCount&&!ne.isCollapsed&&(d.value=ne.getRangeAt(0).cloneRange()),y(W,Q),t.value=!0},C=()=>{t.value=!1,n.value&&(n.value.style.maxWidth=""),T()},A=W=>{setTimeout(()=>{var J,ne;((J=n.value)==null?void 0:J.contains(document.activeElement))||((ne=n.value)==null?void 0:ne.contains(W.relatedTarget))||(a.value=!1,i.value||(l.value=!1,C()))},150)},E=W=>{var ke;W==null||W.stopPropagation(),W==null||W.preventDefault(),l.value=!0;const Q=o.value.trim(),J=r.value.trim().replace(/\s+/g," ");let ne="";Q&&J?ne=`<blockquote><p>${J}</p></blockquote><p>${Q}</p>`:Q?ne=`<p>${Q}</p>`:J&&(ne=`<blockquote><p>${J}</p></blockquote>`),ne&&((ke=window.EAC)!=null&&ke.send)&&window.EAC.send(ne),setTimeout(C,150)},$=()=>{if(!d.value)return;T();const W=d.value.getClientRects();for(let Q=0;Q<W.length;Q++){const J=W[Q],ne=document.createElement("span");ne.style.position="absolute",ne.style.backgroundColor="rgba(0, 123, 255, 0.15)",ne.style.pointerEvents="none",ne.style.left=`${J.left+window.pageXOffset}px`,ne.style.top=`${J.top+window.pageYOffset}px`,ne.style.width=`${J.width}px`,ne.style.height=`${J.height}px`,ne.style.zIndex="999999",document.body.appendChild(ne),f.value.push(ne)}},T=()=>{f.value.forEach(W=>W.remove()),f.value=[]},I=()=>{clearTimeout(u.value),u.value=setTimeout(()=>{const W=window.getSelection(),Q=W==null?void 0:W.toString().trim();if(Q&&Q.length>0&&!W.isCollapsed){const J=x();J&&_(J.x,J.y,Q)}else!a.value&&!l.value&&C()},200)},R=W=>{t.value&&n.value&&!n.value.contains(W.target)&&C()},q=()=>{t.value&&C()},G=(W,Q)=>{if(!Q||!W)return!1;const J=Q.replace(/\*\*\//g,"(.*/)?").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,".").replace(/\./g,"\\.");return new RegExp(`^${J}$`).test(W)},K=(W,Q="")=>{const J=Q.split(`
`).map(ke=>ke.trim()).filter(ke=>ke.length>0);let ne=J.length===0;return J.length>0&&(ne=J.some(ke=>G(W,ke))),ne},H=()=>{clearTimeout(u.value),document.removeEventListener("mouseup",I),document.removeEventListener("selectionchange",I),document.removeEventListener("touchend",I),document.removeEventListener("click",R),window.removeEventListener("orientationchange",ee),window.removeEventListener("scroll",q),[".layout-wrapper",".chat-widget-wrapper"].forEach(W=>{const Q=document.querySelector(W);Q&&Q.removeEventListener("scroll",q)}),T(),d.value=null},ee=()=>{setTimeout(()=>{i.value=m()},500)},ce=()=>{var J;const W=window.location.pathname;if(!K(W,(J=p.widget)==null?void 0:J.include_path_patterns)){t.value=!1;return}i.value=m(),i.value?(document.addEventListener("selectionchange",I,{passive:!0}),document.addEventListener("touchend",I,{passive:!0})):document.addEventListener("mouseup",I,{passive:!0}),document.addEventListener("click",R,{passive:!1}),i.value&&window.addEventListener("orientationchange",ee,{passive:!0}),window.addEventListener("scroll",q,{passive:!0}),[".layout-wrapper",".chat-widget-wrapper"].forEach(ne=>{const ke=document.querySelector(ne);ke&&ke.addEventListener("scroll",q,{passive:!0})})};return Ke(()=>{$o(()=>{H(),ce()},!0)}),Kt(()=>{H()}),(W,Q)=>t.value?(v(),k("div",{key:0,ref_key:"tooltip",ref:n,onClick:Q[3]||(Q[3]=cn(()=>{},["stop"])),class:"fixed z-[9999999990] bg-white rounded-xl p-1 border border-gray-200",style:kt(h)},[c("div",iO,[c("div",aO,[U(b(a_),{size:"17","stroke-width":"1.5"}),c("div",lO,[Ot(c("input",{ref_key:"inputRef",ref:s,type:"text","onUpdate:modelValue":Q[0]||(Q[0]=J=>o.value=J),onKeydown:[wl(E,["enter"]),wl(C,["esc"])],onFocus:Q[1]||(Q[1]=J=>a.value=!0),onBlur:A,placeholder:"Nhp cu hi ",class:"border-none w-full outline-none px-2 h-7"},null,544),[[ln,o.value]])]),c("button",{"aria-label":`eac-widget-ask-ai${i.value?"-mobile":""}`,class:se(["whitespace-nowrap text-[13px] font-medium tracking-tight h-7 flex justify-center items-center px-2 rounded-lg transition-all duration-300",[(i.value,"bg-gray-50 hover:bg-blue-50 hover:text-blue-500 border border-gray-100"),o.value&&"text-blue-500 !bg-blue-50"]]),onClick:E,onMousedown:Q[2]||(Q[2]=cn(()=>{},["prevent"]))}," Hi AI ",42,cO)])])],4)):B("",!0)}}},Symbol.toStringTag,{value:"Module"})),uO={class:"relative flex flex-col w-full overflow-hidden bg-white h-dvh"},dO={class:"flex items-center justify-between px-3 h-[50px] bg-white border-b sm:px-4"},fO={class:"font-medium text-gray-900"},hO={class:"ml-2 text-gray-500"},pO={class:"flex gap-2"},mO={class:"flex items-center justify-center h-[calc(100%-80px-50px)] overflow-hidden bg-white sm:px-14"},gO=["src","alt"],vO=["src"],yO={class:"h-[80px] flex-shrink-0 p-2 bg-white border-t flex items-center justify-center"},bO={class:"flex h-full gap-2 overflow-x-auto"},xO=["onClick"],_O=["src","alt"],wO=["data-index","src"],kO=["src"],SO={key:2,class:"absolute inset-0 flex items-center justify-center bg-black/20"},CO={class:"flex items-center justify-center w-6 h-6 rounded-full sm:w-8 sm:h-8 bg-white/70"},$O={key:3,class:"absolute inset-0 flex items-center justify-center rounded-lg bg-blue-500/20"},TO=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"ImageGallery",props:{media:{type:Array,required:!0},initialIndex:{type:Number,default:0},onRemove:{type:Function,default:null}},emits:["close"],setup(e,{emit:t}){const n=e,s=pe(()=>n.media.filter(H=>H.type==="image"||H.type==="video")),r=t,o=L(n.initialIndex),i=L([]),a=L([]);L({});const l=L(null),u=pe(()=>s.value[o.value]||{});Ee(u,H=>{H.type==="video"&&l.value&&l.value.load()});const d=()=>{o.value<s.value.length-1?o.value++:o.value=0,p()},f=()=>{o.value>0?o.value--:o.value=s.value.length-1,p()},h=H=>{o.value=H,p()},p=async()=>{await gt();const H=i.value[o.value];H&&H.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},m=async()=>{try{const H=await fetch(u.value.url);if(!H.ok)throw new Error("Failed to fetch file");const ee=await H.blob(),ce=window.URL.createObjectURL(ee),W=document.createElement("a");if(W.href=ce,u.value.filename)W.download=u.value.filename;else{const Q=u.value.url.split("?")[0],J=Q.substring(Q.lastIndexOf("/")+1);W.download=J||`download_${Date.now()}`}document.body.appendChild(W),W.click(),document.body.removeChild(W),window.URL.revokeObjectURL(ce)}catch(H){console.error("Download failed:",H)}},x=()=>{window.open(u.value.url,"_blank")},y=H=>new Promise((ee,ce)=>{H.load();const W=()=>{H.currentTime=.1,H.removeEventListener("loadedmetadata",W)},Q=()=>{ee(),H.removeEventListener("loadeddata",Q),H.removeEventListener("error",J)},J=()=>{ce(new Error("Cannot load video")),H.removeEventListener("loadedmetadata",W),H.removeEventListener("loadeddata",Q),H.removeEventListener("error",J)};H.addEventListener("loadedmetadata",W),H.addEventListener("loadeddata",Q),H.addEventListener("error",J),setTimeout(()=>{ee()},3e3)}),_=async()=>{await gt();for(const[H,ee]of s.value.entries())if(ee.type==="video"&&ee.url){const ce=a.value[H];if(ce)try{await y(ce)}catch(W){console.error(`Error setting thumbnail for video ${ee.url}:`,W)}}},C=()=>{n.onRemove?n.onRemove():r("close")},A=H=>{H.target===H.currentTarget&&C()},E=H=>{switch(H.key){case"ArrowLeft":f();break;case"ArrowRight":d();break;case"Escape":C();break}},$=L(0),T=L(0),I=L(0),R=L(0),q=H=>{$.value=H.changedTouches[0].screenX,I.value=H.changedTouches[0].screenY},G=H=>{T.value=H.changedTouches[0].screenX,R.value=H.changedTouches[0].screenY},K=()=>{const H=$.value-T.value,ee=Math.abs(I.value-R.value);Math.abs(H)>50&&ee<100&&(H>0?d():f())};return Ke(async()=>{document.addEventListener("keydown",E),document.body.style.overflow="hidden",p(),await _()}),Kt(()=>{document.removeEventListener("keydown",E),document.body.style.overflow=""}),(H,ee)=>(v(),k("div",{class:"flex fixed inset-0 z-[99999999990] justify-center items-center backdrop-blur-sm bg-black/90",onClick:A,onTouchstart:q,onTouchmove:G,onTouchend:K},[c("div",uO,[c("div",dO,[c("h2",fO,[Fe(V(u.value.type==="video"?"Video":"Hnh nh")+" ",1),c("span",hO,V(o.value+1)+"/"+V(s.value.length),1)]),c("div",pO,[c("button",{onClick:m,class:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",title:"Ti xung"},[U(b(Xh),{size:"20"})]),c("button",{onClick:x,class:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",title:"M trong tab mi"},[U(b(Kx),{size:"20"})]),c("button",{onClick:C,class:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors"},[U(b(Zs),{size:"20"})])])]),c("div",mO,[u.value.type==="image"?(v(),k("img",{key:0,src:u.value.url,alt:`Gallery Image ${o.value+1}`,class:"object-contain w-full h-full"},null,8,gO)):u.value.type==="video"?(v(),k("video",{ref_key:"mainVideoRef",ref:l,key:u.value.url,controls:"",playsinline:"","webkit-playsinline":"",preload:"metadata",class:"h-full max-w-full"},[c("source",{src:u.value.url+"#t=0.5",type:"video/mp4"},null,8,vO),Fe(" Your browser does not support the video tag. ")])):B("",!0)]),c("button",{onClick:f,class:"absolute hidden sm:block left-1 top-[46%] -translate-y-1/2 z-20 pointer-events-auto p-2 sm:p-3 transition-all rounded-full shadow-lg bg-white/60 hover:bg-white backdrop-blur-sm",title:"Trc"},[U(b(Eo),{class:"w-5 h-5 text-gray-700 sm:w-6 sm:h-6"})]),c("button",{onClick:d,class:"absolute hidden sm:block right-1 top-[46%] -translate-y-1/2 z-20 pointer-events-auto p-2 sm:p-3 transition-all rounded-full shadow-lg bg-white/60 hover:bg-white backdrop-blur-sm",title:"Sau"},[U(b(Io),{class:"w-5 h-5 text-gray-700 sm:w-6 sm:h-6"})]),c("div",yO,[c("div",bO,[(v(!0),k(be,null,Ie(s.value,(ce,W)=>(v(),k("div",{key:W,ref_for:!0,ref:Q=>{Q&&(i.value[W]=Q)},class:"relative flex-shrink-0 h-full overflow-hidden rounded-lg cursor-pointer group aspect-[1/1]",onClick:Q=>h(W)},[ce.type==="image"?(v(),k("img",{key:0,src:ce.url,alt:`Thumbnail ${W+1}`,class:se(["object-cover w-full h-full transition-all border-2 rounded-lg",W===o.value?"border-blue-500":"border-gray-200 hover:border-gray-300"])},null,10,_O)):ce.type==="video"?(v(),k("video",{key:1,ref_for:!0,ref:Q=>{Q&&(a.value[W]=Q)},muted:"",playsinline:"","webkit-playsinline":"",preload:"metadata",class:se(["object-cover w-full h-full transition-all border-2 rounded-lg",W===o.value?"border-blue-500":"border-gray-200 hover:border-gray-300"]),"data-index":W,src:ce.url+"#t=0.1"},[c("source",{src:ce.url,type:"video/mp4"},null,8,kO)],10,wO)):B("",!0),ce.type==="video"?(v(),k("div",SO,[c("div",CO,[U(b(np),{class:"w-3 h-3 sm:w-4 sm:h-4 text-gray-700 ml-0.5"})])])):B("",!0),W===o.value?(v(),k("div",$O)):B("",!0)],8,xO))),128))])])])],32))}}},Symbol.toStringTag,{value:"Module"}));class nm{constructor(t={}){ft(this,"executeCallbacks",(t,n)=>{t!==n&&this.callbacks.forEach(s=>{try{document.readyState==="complete"?s(t,n):document.addEventListener("DOMContentLoaded",()=>s(t,n),{once:!0})}catch(r){console.error("[URLChangeListener] Callback error:",r)}})});ft(this,"handleChange",(t=window.location.href)=>{const n=this.normalizeUrl(t),s=this.currentUrl;n!==s&&(this.currentUrl=n,this.executeCallbacks(n,s))});this.options={watchPath:!0,watchQuery:!1,ignoreParams:[],...t},this.callbacks=new Set,this.currentUrl=this.normalizeUrl(window.location.href),this.isActive=!1,this.originalPushState=null,this.originalReplaceState=null}normalizeUrl(t){try{const n=new URL(t,window.location.origin);let s="";if(this.options.watchPath&&(s+=n.pathname),this.options.watchQuery){const r=new URLSearchParams(n.search);this.options.ignoreParams.forEach(i=>r.delete(i));const o=r.toString();o&&(s+="?"+o)}return s}catch{return t}}start(){return this.isActive?this:(this.originalPushState=history.pushState,this.originalReplaceState=history.replaceState,history.pushState=(...t)=>{this.originalPushState.apply(history,t),this.handleChange(t[2]?new URL(t[2],window.location.origin).href:window.location.href)},history.replaceState=(...t)=>{this.originalReplaceState.apply(history,t),this.handleChange(t[2]?new URL(t[2],window.location.origin).href:window.location.href)},window.addEventListener("popstate",this.handleChange),this.isActive=!0,this)}stop(){return this.isActive?(this.originalPushState&&(history.pushState=this.originalPushState),this.originalReplaceState&&(history.replaceState=this.originalReplaceState),window.removeEventListener("popstate",this.handleChange),this.isActive=!1,this.originalPushState=null,this.originalReplaceState=null,this):this}on(t){if(typeof t!="function")throw new Error("Callback must be a function");return this.callbacks.add(t),this}off(t){return this.callbacks.delete(t),this}trigger(){return this.callbacks.forEach(t=>{try{t(this.currentUrl,null)}catch(n){console.error("[URLChangeListener] Trigger callback error:",n)}}),this}destroy(){return this.stop(),this.callbacks.clear(),this}get active(){return this.isActive}get current(){return this.currentUrl}get listenerCount(){return this.callbacks.size}}function AO(e,t=!1){const n=new nm({watchPath:!0,watchQuery:!1}).on(e).start();return t&&setTimeout(()=>e(n.current,null),0),n}function qo(e,t=!1){const n=new nm({watchPath:!0,watchQuery:!0}).on(e).start();return t&&setTimeout(()=>e(n.current,null),0),n}const sm=()=>me.state.handle===Sn,bn={addToCart:[".rangdong-add-to-cart"],buyNow:[".btn-buy-now",".rangdong-buy-now"],cartSize:[".cart-box .badge"],cartTotalPrice:[".flex.items-center.justify-between.caption .font-medium.text-red-400.body-text"],purchaseTotalPrice:[".rangdong-purchase-total-price"],quantityInput:["#quantity-product"],purchaseCustomerName:[".rangdong-purchase-customer-name"],purchaseCustomerPhone:[".rangdong-purchase-customer-phone"],purchaseCustomerEmail:[".rangdong-purchase-customer-email"],purchaseCustomerShippingAddress:[".rangdong-purchase-shipping-address"],purchaseCustomerDeliveryMethod:[".rangdong-purchase-delivery-method-name"],purchaseCustomerPaymentGateway:[".rangdong-purchase-payment-gateway-name"]},Ta={category:/^\/([a-z0-9-]+)-c-(\d+)\/?$/,product:/^\/([a-z0-9-]+)-p-(\d+)$/,search:/^\/tim-kiem\?keyword=([^&]+)/,checkout:/^\/don-hang\/?$/,purchase:/^\/dat-hang-thanh-cong\?orderId=([^&]+)/};let Oc=[];const rm=(e,t)=>{const n=e.match(t);return(n==null?void 0:n[2])||null},EO=e=>{const t=e.match(Ta.purchase);return(t==null?void 0:t[1])||null},om=e=>{for(const[t,n]of Object.entries(Ta))if(n.test(e))return t;return"unknown"},IO=e=>{if(!e.includes("?"))return{};const[,t]=e.split("?"),n={};return new URLSearchParams(t).forEach((s,r)=>{n[r]=s}),n},PO=()=>{var e;for(const t of bn.cartSize){const n=document.querySelector(t);if(n)return((e=n.textContent)==null?void 0:e.trim())||"0"}return"0"},OO=()=>{var e;for(const t of bn.cartTotalPrice){const n=document.querySelector(t);if(n)return((e=n.textContent)==null?void 0:e.trim())||"0"}return"0"},RO=()=>{var e;for(const t of bn.purchaseTotalPrice){const n=document.querySelector(t);if(n)return((e=n.textContent)==null?void 0:e.trim())||"0"}return"0"},MO=()=>{var e;for(const t of bn.quantityInput){const n=document.querySelector(t);if(n)return((e=n.value)==null?void 0:e.trim())||"1"}return"1"},Dr=e=>{var t;for(const n of e){const s=document.querySelector(n);if(s)return((t=s.innerText)==null?void 0:t.trim())||""}return""},LO=()=>({name:Dr(bn.purchaseCustomerName),phone:Dr(bn.purchaseCustomerPhone),email:Dr(bn.purchaseCustomerEmail),shipping_address:Dr(bn.purchaseCustomerShippingAddress),delivery_method:Dr(bn.purchaseCustomerDeliveryMethod),payment_gateway:Dr(bn.purchaseCustomerPaymentGateway)}),DO=()=>{Oc.forEach(({element:e,event:t,handler:n})=>{e.removeEventListener(t,n)}),Oc=[]},NO=(e,t,n,s)=>{const r=MO();Le.addToCart({id:e??"",name:t??"",price:n??"",image:s??"",quantity:r,brand:"Rng ng"})},jO=(e,t,n,s)=>{const r=[];if(bn.addToCart.forEach(i=>{const a=document.querySelectorAll(i);r.push(...a)}),bn.buyNow.forEach(i=>{const a=document.querySelectorAll(i);r.push(...a)}),r.length===0)return;const o=()=>{NO(e,t,n,s)};r.forEach(i=>{i.addEventListener("click",o),Oc.push({element:i,event:"click",handler:o})})},FO=()=>{const e=PO(),t=OO();Le.checkout({cart_size:e,cart_total_price:t})},zO=e=>{const t=EO(e),n=RO(),s=LO();Le.purchase({order_id:t??"",total_value:n??"",customer:s})};qo(e=>{if(!sm())return;switch(om(e)){case"search":const{keyword:n}=IO(e);Le.search({search_term:n??""});break;case"purchase":setTimeout(()=>{zO(e)},1500);break}},!0),AO(e=>{DO();const t=()=>{var r;const n=om(e),s=Vt("Product")||{};switch(n){case"category":const o=rm(e,Ta.category);Le.categoryView({category_id:o??"",name:s.name??s.title??"",brand:"Rng ng",image:s.image??"",url:window.location.href});break;case"product":const a={id:rm(e,Ta.product)??s.productID??"",sku:s.sku??"",name:s.name??s.title??"",brand:"Rng ng",price:((r=s.offers)==null?void 0:r.price)??"",image:s.image??"",url:window.location.href};Le.productView(a),setTimeout(()=>{jO(a.product_id,a.name,a.price,a.image)},1500);break;case"checkout":setTimeout(()=>{FO()},1500);break}};setTimeout(()=>{sm()&&t()},1e3)},!0);const qO=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),BO=(e,t)=>{let n;return(...s)=>{n&&clearTimeout(n),n=setTimeout(()=>{e.apply(null,s)},t)}},UO=()=>me.state.handle===Nn,VO={purchase:/^\/gio-hang-hoan-tat$/,login:/^\/dang-nhap$/,signup:/^\/dang-ky$/,accountInfo:/^\/thong-tin-tai-khoan$/,cart:/^\/gio-hang$/,trackOrder:/^\/kiem-tra-don-hang$/,category:/^\/([a-z0-9-]+)(-p-\d+)?\/?$/,product:/^\/([a-z0-9-]+\/)?([a-z0-9-]+)$/},Rc={searchKeyword:[".title_search h1 strong:last-child"],productCard:[".product"],addToCartButton:[".click_buy"]},HO=e=>{for(const t of e){const n=document.querySelector(t);if(n)return n}return null},WO=e=>{for(const[t,n]of Object.entries(VO))if(n.test(e))return t;return"unknown"},GO=()=>{const e=document.querySelector(".template_info");if(e){const t=e.textContent.match(/S n hng ca bn l:\s*(\d+)/);if(t)return t[1]}for(const t of document.querySelectorAll(".template_info strong")){const n=t.textContent.trim();if(/^\d{12,}$/.test(n))return n}return null},Aa=e=>{var n,s;const t=document.querySelectorAll(".cart_total_money ul li");for(const r of t){const o=r.querySelector(".cart_total-tilte strong");if((n=o==null?void 0:o.textContent)!=null&&n.includes(e)){const i=r.querySelector(".cart_total-price span");return((s=i==null?void 0:i.textContent)==null?void 0:s.trim())??""}}return""},KO=()=>({subTotalPrice:Aa("TM TNH"),shippingCost:Aa("PH VN CHUYN"),totalPrice:Aa("TNG CNG")}),im=()=>{var e,t,n;return((n=(t=(e=HO(Rc.searchKeyword))==null?void 0:e.textContent)==null?void 0:t.trim())==null?void 0:n.replace(/"/g,""))||null};let qn=[],Mc=[];const QO=()=>{qn.forEach(({element:e,event:t,handler:n,options:s})=>{e.removeEventListener(t,n,s)}),qn=[],Mc.forEach(e=>{e.disconnect()}),Mc=[]},Nr=e=>{var n,s;const t=document.querySelectorAll(".info_delivery-item li");for(const r of t){const o=r.querySelector("strong");if((n=o==null?void 0:o.textContent)!=null&&n.includes(e)){const i=r.querySelector("span");return((s=i==null?void 0:i.textContent)==null?void 0:s.trim())??""}}return""},JO=()=>{var o,i;const e=Nr("a ch"),t=Nr("Qun/Huyn"),n=Nr("Tnh/ Thnh ph"),r=[e,t,n].filter(Boolean).join(", ");return{name:Nr("H v Tn"),phone:Nr("in thoi"),email:Nr("Email"),shipping_address:r,delivery_method:((i=(o=document.querySelector(".info_delivery-item:nth-child(2) .info_delivery-title"))==null?void 0:o.textContent)==null?void 0:i.trim())??"",payment_gateway:""}},am=()=>{const e=(n,s)=>{var r,o;return((o=(r=n.querySelector(s))==null?void 0:r.textContent)==null?void 0:o.trim())??""},t=document.querySelectorAll(".my_cart .info_pro-cart");return Array.from(t).map(n=>{var a;const s=e(n,".name_pro span strong"),o=e(n,".name_pro span").replace(s,"").trim(),i=n.querySelector(".info_pro_cart-left a");return{url:(i==null?void 0:i.href)??"",image:((a=i==null?void 0:i.querySelector("img"))==null?void 0:a.src)??"",brand:s,name:o,price:e(n,".price_sale span").replace(/\D/g,""),discount:e(n,".discount_percent"),savings:e(n,".cart_saving strong"),quantity:parseInt(e(n,".cart_pro_amount .number")||"1",10)}})},XO=()=>{const e=(n,s)=>{var r,o;return((o=(r=n.querySelector(s))==null?void 0:r.textContent)==null?void 0:o.trim())??""},t=document.querySelectorAll(".my_cart .info_pro-cart");return Array.from(t).map(n=>{var i,a,l,u,d,f;const s=n.querySelector(".info_pro_cart-left a"),r=s==null?void 0:s.querySelector("img"),o=n.querySelectorAll(".cart_pro_size");return{url:(s==null?void 0:s.href)??"",image:(r==null?void 0:r.src)??"",alt:(r==null?void 0:r.alt)??"",name:e(n,".name_pro h3"),price:e(n,".price_sale span").replace(/\D/g,""),variant:((l=(a=(i=o[0])==null?void 0:i.querySelector(".info_pro_cart-title"))==null?void 0:a.textContent)==null?void 0:l.trim())??"",color:((f=(d=(u=o[1])==null?void 0:u.querySelector("span"))==null?void 0:d.textContent)==null?void 0:f.trim())??"",quantity:parseInt(e(n,".cart_pro_amount span")||"1",10)}})};let Lc=!1;const ZO=()=>{if(Lc)return;const e=GO(),t=KO();if(!e||!t.totalPrice||t.totalPrice==="0")return;const n=JO(),s=XO();Le.purchase({order_id:e,total_value:t.totalPrice,sub_total:t.subTotalPrice,shipping_cost:t.shippingCost,customer:n,products:s}),Lc=!0,setTimeout(()=>Lc=!1,6e4)},YO=()=>{const e=im();e&&Le.search({search_term:e})},e9=e=>{var a,l,u;const t={},n=e.querySelector("h3.name_pro"),s=(a=n==null?void 0:n.textContent)==null?void 0:a.trim();if(s){const d=s.match(/^(\w+)\s+/);t.brand=d==null?void 0:d[1],t.name=s.replace(/^\w+\s*/,"").trim();const f=s.match(/\b([A-Z]-\d+[A-Z0-9]+)\b/);f&&(t.product_sku=f[1])}const r=e.querySelector(".name_pro a")||e.querySelector(".img_pro a");if(r!=null&&r.href){const d=r.href.split("/").filter(Boolean);d.length&&(t.product_sku=d[d.length-1])}const o=e.querySelector(".price_sale span");if((l=o==null?void 0:o.textContent)!=null&&l.trim()){const f=o.textContent.trim().match(/([\dX.]+(?:\s*)?)/i);f&&(t.price=f[1].trim())}const i=e.querySelector(".price_market");if((u=i==null?void 0:i.textContent)!=null&&u.trim()){const f=i.textContent.trim().match(/([\d.]+(?:\s*)?)/i);f&&(t.originPrice=f[1].trim())}return t},t9=()=>{const e=t=>{const n=Rc.productCard.find(s=>t.target.closest(s));n&&Le.productSelect(e9(t.target.closest(n)))};document.addEventListener("click",e),qn.push({element:document,event:"click",handler:e})},lm=()=>{var o,i,a,l;const e={name:"null",phone:"null",birth:"null",mail:"null"},t=document.querySelector(".txt_name");if(t){const u=(o=t.textContent)==null?void 0:o.trim();u&&(e.name=u)}const n=document.querySelector(".txt_phone");if(n){const u=(i=n.textContent)==null?void 0:i.trim();u&&(e.phone=u)}const s=document.querySelector(".txt_birth");if(s){const u=(a=s.textContent)==null?void 0:a.trim();u&&(e.birth=u)}const r=document.querySelector(".txt_mail");if(r){const u=(l=r.textContent)==null?void 0:l.trim();u&&(e.mail=u)}return e},n9=()=>{setTimeout(()=>{const e=lm();Le.login(e)},1e3)},s9=()=>{setTimeout(()=>{const e=lm();Le.signUp(e)},1e3)},r9=e=>{var a,l;const t={},n=e.querySelector(".name_pro");if(n){const d=(n.textContent||"").replace(/\s+/g," ").trim();if(d){t.name=d;const f=d.match(/^(\w+)/);f&&(t.brand=f[1]);const h=d.split(" "),p=h[h.length-1];p&&/[A-Z]/.test(p)&&/\d/.test(p)&&(t.product_sku=p)}}const s=e.querySelector(".price_sale span, .price_sale"),r=(a=s==null?void 0:s.textContent)==null?void 0:a.trim();if(r){const u=r.match(/([\dX.]+\s*)/i);u&&(t.price=u[1].trim())}const o=e.querySelector(".price_market"),i=(l=o==null?void 0:o.textContent)==null?void 0:l.trim();if(i){const u=i.match(/([\d.]+\s*)/i);u&&(t.originPrice=u[1].trim())}return t},o9=()=>{document.querySelectorAll(".remove_pro_cart").forEach(t=>{const n=()=>{const s=t.closest(".info_pro_cart-item");if(s){const r=r9(s);Le.removeFromCart(r)}};t.addEventListener("click",n),qn.push({element:t,event:"click",handler:n})})},i9=()=>{document.querySelectorAll(Rc.addToCartButton.join(", ")).forEach(t=>{const n=()=>{const s=dm();Le.addToCart(s)};t.addEventListener("click",n),qn.push({element:t,event:"click",handler:n})})},cm=()=>{let e=0;return document.querySelectorAll(".my_cart .info_pro-cart").forEach(n=>{var r;const s=n.querySelector(".cart_pro_amount .number");if(s){const o=parseInt(((r=s.textContent)==null?void 0:r.trim())??"1",10);e+=o}else e+=1}),e.toString()},um=()=>Aa("TNG CNG")||"0",a9=()=>{const e=document.querySelector(".btn_submit_book");if(e){const t=()=>{var o,i;const n=cm(),s=um(),r=document.querySelector('input[name="newqr_option"]:checked');if(r){const a=r.closest("label"),l=(i=(o=a==null?void 0:a.textContent)==null?void 0:o.replace(/\s+/g," "))==null?void 0:i.trim(),u={method_id:r.id||void 0,method_name:l||void 0,cart_size:n,cart_total_price:s};Object.keys(u).forEach(d=>u[d]===void 0&&delete u[d]),Le.addPaymentInfo(u)}Le.checkout({cart_size:n,cart_total_price:s,products:am()})};e.addEventListener("click",t),qn.push({element:e,event:"click",handler:t})}},l9=(e=document)=>{var u,d,f,h,p,m,x,y,_,C;const t={},n=e.querySelector('input[name="select_delivery"]:checked');n&&(t.delivery_method=n.value==="2"?"n siu th nhn hng":"Nhn hng ti nh");const s=e.querySelector("#city_chosse");if((u=s==null?void 0:s.value)!=null&&u.trim()){const A=s.closest(".form_select-item"),E=A==null?void 0:A.querySelector(".vs__selected"),$=(d=E==null?void 0:E.textContent)==null?void 0:d.trim();$&&(t.city=$)}const r=e.querySelector('input[name="state"]');if((f=r==null?void 0:r.value)!=null&&f.trim()){const A=r.closest(".form_select-item"),E=A==null?void 0:A.querySelector(".vs__selected"),$=(h=E==null?void 0:E.textContent)==null?void 0:h.trim();$&&(t.district=$)}const o=e.querySelector('input[name="address"]'),i=(p=o==null?void 0:o.value)==null?void 0:p.trim();if(i&&(t.address=i),t.delivery_method==="pickup"){const A=e.querySelector('input[name="store"]:checked');if(A){const E=A.closest("label"),$=(x=(m=E==null?void 0:E.textContent)==null?void 0:m.replace(/\s+/g," "))==null?void 0:x.trim();t.store_id=A.value,$&&(t.store_name=$)}}const a=e.querySelector('select[name="today"]'),l=(C=(_=(y=a==null?void 0:a.selectedOptions)==null?void 0:y[0])==null?void 0:_.textContent)==null?void 0:C.trim();return l&&(t.shipping_time=l),t},c9=()=>{const e=document.getElementById("f_cart_payment");if(!e)return;const t=()=>{const r=l9(e);Le.addShippingInfo(r)},n=BO(t,1e3),s=(r,o,i=!1)=>{e.querySelectorAll(r).forEach(l=>{const u=i?n:t;l.addEventListener(o,u,!0),qn.push({element:l,event:o,handler:u,options:!0})})};s('input[name="select_delivery"]',"change"),s("#city_chosse","change"),s('input[name="state"]',"change"),s('input[name="store"]',"change"),s('select[name="today"]',"change"),s('input[name="address"]',"input",!0)},dm=()=>{var t,n,s;const e=Vt("Product")||{};return{id:e.sku??"",sku:e.sku??"",name:e.name??"",url:window.location.href,price:((t=e.offers)==null?void 0:t.price)??"",image:Array.isArray(e.image)?e.image[0]??"":e.image??"",quantity:1,brand:Array.isArray((n=e.brand)==null?void 0:n.name)?e.brand.name[0]??"":((s=e.brand)==null?void 0:s.name)??""}},u9=()=>!!document.querySelector("#product_detail"),d9=()=>!!document.querySelector("#product_cate"),f9=()=>{var o,i,a,l;const e=Vt("Product")||{};if(e.name)return{name:e.name??e.title??"",brand:Array.isArray((o=e.brand)==null?void 0:o.name)?e.brand.name[0]??"in My Ch Ln":((i=e.brand)==null?void 0:i.name)??"in My Ch Ln",image:Array.isArray(e.image)?e.image[0]??"":e.image??"",url:window.location.href};const t=Vt("BreadcrumbList")||{};if(t.itemListElement&&Array.isArray(t.itemListElement)){const u=t.itemListElement[t.itemListElement.length-1];if(u&&u.item)return{name:u.item.name??"",brand:"in My Ch Ln",image:"",url:window.location.href}}const n=window.location.pathname.split("/").filter(Boolean);let s="";const r=document.querySelector(".title_cat h1");if(r&&(s=((a=r.textContent)==null?void 0:a.trim())??""),!s){const u=document.querySelector(".box_breadcrumb-item li:last-child a");u&&(s=((l=u.textContent)==null?void 0:l.trim())??"")}return!s&&n.length&&(s=n[0]),{name:s,brand:"in My Ch Ln",image:"",url:window.location.href}},h9=()=>{const e=document.querySelector("#from_call_me");if(!e)return;const t=n=>{var l,u;n.preventDefault();const s=e.querySelector('input[name="name"]'),r=e.querySelector('input[name="phone"]'),o=Vt("Product")||{},i=((l=s==null?void 0:s.value)==null?void 0:l.trim())||"",a=((u=r==null?void 0:r.value)==null?void 0:u.trim())||"";!i||!a||Le.generateLead({name:i,phone:a,demand:"T vn sn phm "+(o.name||""),url:window.location.href})};e.addEventListener("submit",t,!0),qn.push({element:e,event:"submit",handler:t,options:!0})},p9=()=>{var o,i,a;const e={},t=document.querySelector(".box_account__step");if(t){const l=t.querySelector(".titorder");l&&(e.order_header=(o=l.innerText)==null?void 0:o.trim());const u=t.querySelector(".box_account__inline-block");u&&(e.order_date=(i=u.innerText)==null?void 0:i.trim())}const n=document.querySelectorAll(".box_account__box");n.length>0&&(e.order_details=Array.from(n).map(l=>{var u,d,f,h;return{title:((d=(u=l.querySelector(".box_account__title"))==null?void 0:u.innerText)==null?void 0:d.trim())??"",content:((h=(f=l.querySelector(".box_account__desc"))==null?void 0:f.innerText)==null?void 0:h.trim())??""}}));const s=document.querySelectorAll(".content_account table tbody tr");s.length>0&&(e.products=Array.from(s).map(l=>{var _,C,A,E,$,T;const u=l.querySelectorAll("td"),d=u[0],f=((_=d==null?void 0:d.querySelector(".table_product__image img"))==null?void 0:_.src)??"",h=d==null?void 0:d.querySelector(".table_product__detail a");let p="",m="";if(h){const I=h.cloneNode(!0);I.querySelectorAll("br").forEach(q=>q.remove()),p=((C=I.textContent)==null?void 0:C.trim())??"",m=h.href??""}const x=((E=(A=u[3])==null?void 0:A.textContent)==null?void 0:E.trim())??"",y=((T=($=u[5])==null?void 0:$.textContent)==null?void 0:T.trim())??"";return{url:m,image:f,name:p,quantity:x,price:y}}));const r=document.querySelector(".box_account__total");return r&&(e.order_total=(a=r.innerText)==null?void 0:a.trim()),e},m9=()=>{const e=document.querySelector(".box-content form");if(!e)return;const t=e.querySelector("#my_check_out");if(!t)return;const n=document.querySelector(".content_account");let s=e.querySelector(".error");if(s||(s=e.querySelector(".block_input .error")),!n||!s)return;const r=()=>{var h,p;const o=e.querySelectorAll('input[name="checkorder"]'),i=o[0],a=o.length>1?o[1]:null,l=(h=i==null?void 0:i.value)==null?void 0:h.trim(),u=(p=a==null?void 0:a.value)==null?void 0:p.trim();if(!l||!u)return;let d=!1;const f=new MutationObserver(()=>{var A,E,$,T,I;if(d)return;const m=(A=s.textContent)==null?void 0:A.trim(),x=window.getComputedStyle(s);if(m&&m.length>0&&x.display!=="none"){Le.trackOrder({phone:l,order_number:u,error:m}),d=!0,f.disconnect();return}const y=n.children.length>0,_=n.querySelector(".bg_account"),C=(($=(E=n.querySelector("h3"))==null?void 0:E.textContent)==null?void 0:$.includes("Chi tit n hng"))||((I=(T=n.querySelector(".titorder"))==null?void 0:T.textContent)==null?void 0:I.includes("Chi tit n hng"));if(y&&(_||C)){const R=p9();Le.trackOrder({phone:l,order_number:u,order_detail:R}),d=!0,f.disconnect()}});f.observe(s,{childList:!0,characterData:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),f.observe(n,{childList:!0,subtree:!0}),Mc.push(f),setTimeout(()=>{d||f.disconnect()},1e4)};t.addEventListener("click",r),qn.push({element:t,event:"click",handler:r})},g9=()=>{const e=!!document.querySelector(".version_mobile"),t=e?document.querySelector(".content_pro form"):document.querySelector("#form_mail");if(!t)return;const n=s=>{var l,u;s.preventDefault();const r=t.querySelector(e?'input[name="email_customer"]':'input[name="email"]'),o=document.querySelector("#newsletter_key"),i=((l=r==null?void 0:r.value)==null?void 0:l.trim())||"",a=((u=o==null?void 0:o.value)==null?void 0:u.trim())||"";i&&Le.generateLead({email:i,demand:"Nhn khuyn mi sn phm "+a,url:window.location.href})};t.addEventListener("submit",n,!0),qn.push({element:t,event:"submit",handler:n,options:!0})};qo(e=>{if(!UO())return;switch(QO(),im()&&YO(),WO(e)){case"purchase":setTimeout(ZO,1500);break;case"accountInfo":{const s=sessionStorage.getItem("dienmaycholon_from_login"),r=sessionStorage.getItem("dienmaycholon_from_signup");s?(n9(),sessionStorage.removeItem("dienmaycholon_from_login")):r&&(s9(),sessionStorage.removeItem("dienmaycholon_from_signup"));break}case"login":sessionStorage.setItem("dienmaycholon_from_login","true");break;case"signup":sessionStorage.setItem("dienmaycholon_from_signup","true");break;case"product":u9()&&setTimeout(()=>{const s=dm();Le.productView(s),i9(),h9(),g9()},1500);break;case"category":d9()&&setTimeout(()=>{const s=f9();Le.categoryView(s)},1500);break;case"cart":setTimeout(()=>{o9(),a9(),c9(),Le.cartView({cart_size:cm(),cart_total_price:um(),products:am()})},4e3);break;case"trackOrder":setTimeout(m9,1500);break}},!0),t9();const v9=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),y9=(e,t)=>{let n;return(...s)=>{n&&clearTimeout(n),n=setTimeout(()=>{e.apply(null,s)},t)}},b9=()=>window.location.hostname==="m.pico.vn",x9=()=>me.state.handle===Xn,_9={cart:/^\/checkout\/cart\/?$/,purchase:/^\/checkout\/confirm\/?$/,login:/^\/login\/?$/,register:/^\/register\/?$/,category:/^\/[a-z0-9-]+\.c\/?$/,product:/^\/[a-z0-9-]+-[A-Z0-9]+$/},fm={productCard:[".productCardSwp",".itemProducts"],addToCartButton:["#add-to-cart","#buy-now","#installment"]},hm=e=>{if(!e.includes("?"))return{};const t={};return new URLSearchParams(e.split("?")[1]).forEach((n,s)=>{t[s]=n}),t},w9=e=>hm(e).query||null,k9=e=>e.split("/").filter(Boolean).length===1,S9=e=>{const t=new URL(e,window.location.origin).pathname;if(Vt("CollectionPage"))return"category";for(const[s,r]of Object.entries(_9))if(r.test(t))return s;return"unknown"},jr=e=>{const t=e==null?void 0:e.match(/([\d.]+(?:\s*)?)/i);return t?t[0].trim():null},Dc=e=>{const t=e==null?void 0:e.match(/-([A-Z0-9]+)$/);return t?t[1]:null},C9=()=>{var s,r;const e=Vt("CollectionPage");if(e){let o=e.name;if(!o){const i=Tr();o=i==null?void 0:i.title}if(!o){const i=document.querySelector("title");o=(s=i==null?void 0:i.textContent)==null?void 0:s.trim()}return{name:o||"null",brand:"Pico",url:window.location.href,description:e.description||""}}const t=Tr();let n=t==null?void 0:t.title;if(!n){const o=document.querySelector("title");n=(r=o==null?void 0:o.textContent)==null?void 0:r.trim()}return{name:n||"null",brand:"Pico",url:window.location.href}},$9=()=>{setTimeout(()=>Le.categoryView(C9()),1e3)},T9=e=>{const t=new URL(e,window.location.origin).pathname,n=k9(t)?w9(e):null;n&&Le.search({search_term:n})},A9=e=>{var o;const t={},n=e.querySelector("a.line-clamp-2");n&&(t.name=(o=n.textContent)==null?void 0:o.trim(),t.product_sku=Dc(n.href));const s=e.querySelector(".sale-price .text-2xl.font-extrabold.text-red-500, .sale-price p");s&&(t.price=jr(s.textContent));const r=e.querySelector(".originPrice .text-base.text-zinc-500, .originPrice p");return r&&(t.originPrice=jr(r.textContent)),t},E9=()=>{var i,a,l,u,d,f,h,p,m,x,y,_,C,A;const e=Vt("Product");if(e)return{id:e.sku||"",sku:e.sku||"",mpn:e.mpn||"",name:e.name||"",brand:typeof e.brand=="object"?((i=e.brand)==null?void 0:i.name)||"":e.brand||"",price:((l=(a=e.offers)==null?void 0:a.price)==null?void 0:l.toString())||"",originPrice:((d=(u=e.offers)==null?void 0:u.highPrice)==null?void 0:d.toString())||"",image:Array.isArray(e.image)?e.image[0]||"":e.image||"",url:window.location.href};const t={};t.name=((h=(f=document.querySelector("title"))==null?void 0:f.textContent)==null?void 0:h.trim())||((m=(p=document.querySelector("h1"))==null?void 0:p.textContent)==null?void 0:m.trim())||((y=(x=document.querySelector("h3.text-titleDetail"))==null?void 0:x.textContent)==null?void 0:y.trim());const n=Array.from(document.querySelectorAll("li")).find(E=>{var $,T;return(T=($=E.querySelector(".label"))==null?void 0:$.textContent)==null?void 0:T.includes("Thng hiu")}),s=n==null?void 0:n.querySelector("span.value a");if(s)t.brand=(_=s.textContent)==null?void 0:_.trim();else{const E=Array.from(document.querySelectorAll(".highLightSpec .label")).find($=>{var T;return(T=$.textContent)==null?void 0:T.includes("Thng hiu")});if(E){const $=(C=E.closest(".relative"))==null?void 0:C.querySelector(".value span");$&&(t.brand=(A=$.textContent)==null?void 0:A.trim())}}t.product_sku=Dc(window.location.pathname);const r=[".text-2xl.font-extrabold.text-red-600",".text-2xl.font-extrabold.text-red-500",".entry-price .text-3xl.font-extrabold.text-orange",".entry-price .text-3xl.font-extrabold.text-white"];for(const E of r){const $=document.querySelector(E);if($){t.price=jr($.textContent);break}}const o=[".originPrice .text-base.text-zinc-500",".originPrice p",".entry-price .originPrice",".originPrice.text-dark-800"];for(const E of o){const $=document.querySelector(E);if($){t.originPrice=jr($.textContent);break}}return t},I9=()=>{document.addEventListener("click",e=>{for(const t of fm.productCard){const n=e.target.closest(t);if(n){Le.productSelect(A9(n));break}}})},P9=()=>{setTimeout(()=>Le.productView(E9()),1500)},O9=()=>{document.querySelectorAll(fm.addToCartButton.join(", ")).forEach(t=>{t.addEventListener("click",()=>{var r,o;const n=Vt("Product")||{},s={id:n.sku||"",sku:n.sku||"",name:n.name||"",url:window.location.href,price:((r=n.offers)==null?void 0:r.price)||"",image:Array.isArray(n.image)?n.image[0]||"":n.image||"",brand:typeof n.brand=="object"?((o=n.brand)==null?void 0:o.name)||"":n.brand||""};Le.addToCart(s)})})},pm=e=>{var n;const t=e.querySelector(".cartItemAction span");return parseInt(((n=t==null?void 0:t.textContent)==null?void 0:n.trim())||"0",10)||0},R9=()=>{const e=Array.from(document.querySelectorAll(".cartItemsContent .cartItem"));if(e.length===0)return"0";const t=e.reduce((n,s)=>n+pm(s),0);return t>0?t.toString():e.length.toString()},Nc=()=>{var n;const e=(n=document.querySelector(".cartTotal span:nth-child(2)"))==null?void 0:n.textContent,t=jr(e);return t||"0"},M9=()=>Array.from(document.querySelectorAll(".cartItemsContent .cartItem")).map(t=>{var d,f;const n=t.querySelector(".cartItemThumb img"),s=(n==null?void 0:n.src)||(n==null?void 0:n.getAttribute("src"))||"";let r=t.querySelector(".cartItemTitle a");const o=((d=r==null?void 0:r.textContent)==null?void 0:d.trim())||(n==null?void 0:n.getAttribute("alt"))||"";let i;i=t.querySelector(".cartItemPrice p:first-child");const a=((f=i==null?void 0:i.textContent)==null?void 0:f.trim())||"",l=jr(a),u=pm(t);return{name:o,image:s,price:l,quantity:u}}),L9=()=>{setTimeout(()=>{const e=R9();e!=="0"&&Le.cartView({cart_size:e,cart_total_price:Nc()})},1500)},D9=()=>{document.addEventListener("click",e=>{var r,o;const t=e.target.closest(".cartItemDelete, button[class*='cartItemDelete'], [data-remove-cart], [data-delete-cart], button[class*='remove'], button[class*='delete'], [aria-label*='xa'], [aria-label*='remove'], [aria-label*='delete']");if(!t)return;const n=t.closest(".cartItem, [class*='cartItem'], [class*='cart-item'], [data-cart-item]"),s={};if(n){const i=n.querySelector("a, h3, h4, [class*='name'], [class*='title']");i&&(s.name=(r=i.textContent)==null?void 0:r.trim()),s.product_sku=Dc((o=n.querySelector("a[href]"))==null?void 0:o.href)}Le.removeFromCart(s)})},N9=()=>{var r;const e=()=>{const o=M9(),i=o.reduce((l,u)=>l+u.quantity,0).toString();Le.checkout({cart_size:i,cart_total_price:Nc(),products:o});const a={total_value:Nc(),products:o};sessionStorage.setItem("pico_checkout",JSON.stringify(a))},t=document.querySelector("#btnCheckout");if(t){t.addEventListener("click",e);return}const n=['button[type="submit"]',"[data-checkout]","[class*='checkout']","[class*='thanh-toan']","[class*='dat-hang']"],s=["thanh ton","t hng","checkout"];for(const o of n)for(const i of document.querySelectorAll(o)){const a=((r=i.textContent)==null?void 0:r.toLowerCase())||"";if(s.some(l=>a.includes(l))){i.addEventListener("click",e);return}}},j9=()=>{var i,a,l,u,d,f,h,p,m;const e={},t=b9(),n=document.querySelector('input[name="shippingMethod"]:checked');if(n){const x=n.value,y={standard:"Giao hng tn ni",pickUpInStore:"Nhn ti ca hng"};e.delivery_method=y[x]||x}if(t){const x=document.querySelectorAll('.flex.flex-col .relative.w-full button[type="button"]');if(x.length>0){const y=(l=(a=(i=x[0])==null?void 0:i.querySelector(".truncate"))==null?void 0:a.textContent)==null?void 0:l.trim();y&&y!=="Chn thnh ph"&&(e.city=y)}if(x.length>1){const y=(f=(d=(u=x[1])==null?void 0:u.querySelector(".truncate"))==null?void 0:d.textContent)==null?void 0:f.trim();y&&y!=="Chn qun huyn"&&(e.district=y)}if(x.length>2){const y=(m=(p=(h=x[2])==null?void 0:h.querySelector(".truncate"))==null?void 0:p.textContent)==null?void 0:m.trim();y&&y!=="Chn phng x"&&(e.ward=y)}}else{const x=document.querySelector('input[name="provinceCode[name]"]');x!=null&&x.value&&(e.city=x.value.trim());const y=document.querySelector('input[name="districtCode[name]"]');y!=null&&y.value&&(e.district=y.value.trim());const _=document.querySelector('input[name="wardCode[name]"]');_!=null&&_.value&&(e.ward=_.value.trim())}const s=document.querySelector('input[name="address"][placeholder="Nhp s nh, tn ng"]');let r="";s!=null&&s.value&&(r=s.value.trim());const o=[r,e.ward,e.district,e.city].filter(Boolean);if(o.length>0&&(e.address=o.join(", ")),e.delivery_method==="pickup"){const x=document.querySelector('input[name="storeCode[name]"]');x!=null&&x.value&&(e.store_name=x.value.trim())}return e},F9=()=>{const e=()=>{const r=j9();Object.keys(r).length>0&&Le.addShippingInfo(r)},t=y9(e,1e3);document.querySelectorAll('input[name="shippingMethod"]').forEach(r=>{r.addEventListener("change",e,!0)});const n=document.querySelector('input[name="address"][placeholder="Nhp s nh, tn ng"]');n&&n.addEventListener("input",t,!0),['input[name="provinceCode[name]"]','input[name="districtCode[name]"]','input[name="wardCode[name]"]'].forEach(r=>{const o=document.querySelector(r);o&&(new MutationObserver(t).observe(o,{attributes:!0,attributeFilter:["value"]}),o.addEventListener("input",t,!0),o.addEventListener("change",t,!0))})},z9=()=>{const e=()=>{var s,r;const t=document.querySelector('input[name*="payment"]:checked, input[type="radio"][name*="payment"]:checked, select[name*="payment"]');if(!t)return;const n={method_id:t.id||t.value,method_name:t.getAttribute("data-name")||((r=(s=t.closest("label"))==null?void 0:s.textContent)==null?void 0:r.trim())};Object.keys(n).forEach(o=>!n[o]&&delete n[o]),Object.keys(n).length>0&&Le.addPaymentInfo(n)};document.querySelectorAll('input[name*="payment"], select[name*="payment"]').forEach(t=>{t.addEventListener("change",e,!0)})},q9=e=>{const t={},n=hm(window.location.href);n.orderNumberId&&(t.order_id=n.orderNumberId);const s=document.body.innerHTML.match(/n hng:\s*#([A-Z0-9]+)/);if(s&&(t.order_number=s[1]),e)try{const i=JSON.parse(e);t.total_value=i.total_value||"",t.products=i.products||[]}catch(i){console.error("Failed to parse pico checkout data:",i),t.total_value="",t.products=[]}else t.total_value="",t.products=[];const r={gender:"",name:"",phone:"",email:"",shipping_address:"",payment_gateway:"",delivery_method:""},o=document.querySelector(".checkoutPaymentOrderAddress");if(o){const i=o.innerHTML.match(/Khch hng:<\/span>\s*<span[^>]*>([^-]+)-\s*([\d\s]+)</);i&&(r.name=i[1].trim(),r.phone=i[2].trim().replace(/\s/g,""));const a=o.innerHTML.match(/Giao n:<\/span>\s*<span[^>]*>([^<]+)</);a&&(r.shipping_address=a[1].trim());const l=o.innerHTML.match(/Hnh thc thanh ton:<\/span>\s*<span[^>]*>([^<]+)</);l&&(r.payment_gateway=l[1].trim())}if(!r.name||!r.phone)try{const i=localStorage.getItem("guestInfo");if(i){const a=JSON.parse(i);if(r.gender||(r.gender=a.gender||""),r.name||(r.name=a.name||""),r.phone||(r.phone=a.phone||""),!r.payment_gateway){const l={COD:"Thanh ton khi nhn hng (COD)",bankTransfer:"Chuyn khon ngn hng",creditCard:"Th tn dng/Ghi n"};r.payment_gateway=l[a.payment]||l.COD}}}catch{}return r.delivery_method="",t.customer=r,t};let jc=!1;const B9=()=>{if(jc)return;const e=sessionStorage.getItem("pico_checkout");e&&setTimeout(()=>{const t=q9(e);t.order_id&&(Le.purchase(t),jc=!0,setTimeout(()=>jc=!1,6e4),sessionStorage.removeItem("pico_checkout"))},1500)},U9=e=>{var n,s;const t=(s=(n=e.querySelector('input[name="phone"]'))==null?void 0:n.value)==null?void 0:s.trim();return t?{phone:t}:{}},V9=e=>{var o,i,a,l,u,d;const t={},n=(i=(o=e.querySelector('input[name="name"]'))==null?void 0:o.value)==null?void 0:i.trim(),s=(l=(a=e.querySelector('input[name="phone"]'))==null?void 0:a.value)==null?void 0:l.trim(),r=(d=(u=e.querySelector('input[name="email"]'))==null?void 0:u.value)==null?void 0:d.trim();return n&&(t.name=n),s&&(t.phone=s),r&&(t.email=r),t},H9=()=>{const e=document.querySelector("form");e&&e.addEventListener("submit",t=>{const n=U9(e);n.phone&&sessionStorage.setItem("pico_login_data",JSON.stringify(n))},!0)},mm=()=>{let e=!1;const t=()=>{var o,i;if(e)return;const s=['[aria-haspopup="menu"] span','[id*="radix"] span'];let r=null;for(const a of s){const l=document.querySelectorAll(a);for(const u of l){const d=(o=u.textContent)==null?void 0:o.trim();if(d&&d.includes("Cho,")){r=d;break}}if(r)break}if(!r){const a=document.querySelectorAll("span");for(const l of a){const u=(i=l.textContent)==null?void 0:i.trim();if(u&&u.includes("Cho,")){r=u;break}}}if(r&&r.includes("Cho,")){const a=sessionStorage.getItem("pico_login_data");if(a)try{const l=JSON.parse(a),u=r.match(/Cho,\s*(.+)/);u&&u[1]&&(l.name=u[1].trim()),Le.login(l),sessionStorage.removeItem("pico_login_data"),e=!0}catch{}}};setTimeout(t,1e3),new MutationObserver(()=>{t()}).observe(document.body,{childList:!0,subtree:!0})},W9=()=>{const e=s=>{var i;const r=document.querySelector("h3.text-HeadlineLarge"),o=(i=r==null?void 0:r.textContent)==null?void 0:i.trim();if(o&&o.includes("ng k ti khon thnh cng")){const a=sessionStorage.getItem("pico_signup_data");if(a)try{const l=JSON.parse(a);Le.signUp(l),sessionStorage.removeItem("pico_signup_data"),s&&s.disconnect()}catch{}}};setTimeout(()=>e(null),500);const t=new MutationObserver(()=>{e(t)});t.observe(document.body,{childList:!0,subtree:!0});const n=document.querySelector("form");n&&n.addEventListener("submit",s=>{const r=V9(n);(r.phone||r.email)&&sessionStorage.setItem("pico_signup_data",JSON.stringify(r))},!0)},G9=()=>{},K9=()=>{const e=document.getElementById("contact");e&&e.addEventListener("click",()=>{setTimeout(()=>{const t=document.getElementById("headlessui-portal-root");if(!t)return;const n=t.querySelector("form");if(!n)return;const s=()=>{const r={};n.querySelectorAll("input, select, textarea").forEach(a=>{const l=a.name||a.id||"unnamed";a.type==="checkbox"?r[l]=a.checked:a.type==="radio"?a.checked?r[l]=a.value:r[l]||(r[l]=null):r[l]=a.value});const o=r.name||"",i=r.phone||"";if(o&&i){const a=Vt("Product")||{};Le.generateLead({name:o,phone:i,demand:"T vn sn phm "+(a.name||""),url:window.location.href})}};n.addEventListener("submit",s)},2e3)})},Q9=e=>{const t=S9(e);switch(T9(e),t){case"category":$9();break;case"product":P9(),setTimeout(()=>{O9(),K9()},1500);break;case"cart":L9(),D9(),setTimeout(()=>{N9(),F9(),z9()},1500);break;case"purchase":B9();break;case"login":setTimeout(H9,500),mm();break;case"register":setTimeout(W9,500);break;default:mm();break}};qo(e=>{x9()&&Q9(e)},!0),I9(),setTimeout(G9,1500);const J9=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),gm=()=>me.state.handle===Fl,X9={purchase:/^\/payment$/},vm={productCard:[".card-pricing"],loginButton:[".login-button"]};let ym=!1;const Z9=e=>{if(!e||typeof e!="object")return{};try{return JSON.parse(JSON.stringify(e))}catch{return{...e}}},Y9=e=>{if(!e)return null;const t=e.match(/([\d.]+(?:\s*)?)/i);return t?t[0].trim():e.trim()},eR=e=>{const t=new URL(e,window.location.origin).pathname;for(const[n,s]of Object.entries(X9))if(s.test(t))return n;return"unknown"},tR=()=>{document.addEventListener("click",e=>{var l,u,d,f;const t=e.target.closest(vm.productCard.join(", "));if(!t)return;const n=((u=(l=t.querySelector(".plan-name"))==null?void 0:l.textContent)==null?void 0:u.trim())||"unknown",s=t.querySelector("[price]"),r=(s==null?void 0:s.getAttribute("price"))||((d=s==null?void 0:s.textContent)==null?void 0:d.trim())||null,o=Y9(r),i=t.querySelector("a[href]")||t.querySelector("button")||t,a=i instanceof HTMLAnchorElement?i.getAttribute("href")||i.href:((f=i==null?void 0:i.getAttribute)==null?void 0:f.call(i,"href"))||null;Le.productSelect({name:n,price:o,category:"pricing_plan",brand:"Easy AI Chat"}),a&&a.includes("/payment")&&Le.checkout({cart_size:"1",cart_total_price:o})},!0)},nR=()=>{document.addEventListener("click",e=>{e.target.closest(vm.loginButton.join(", "))&&Le.login()},!0)},sR=()=>{if(ym)return;Array.isArray(window.dataLayer)||(window.dataLayer=[]);const e=window.dataLayer.push;window.dataLayer.push=function(...t){for(const n of t)if(!(!n||typeof n!="object")){if(n.type==="subscription-purchase-success"){const s={order_id:n.orderId,total_value:n.total,customer:n.customer};Le.purchase(s)}if(n.type==="contact-form-submit"){const s=Z9(n.formData),r=n.submissionId??n.submission_id;r&&(s.submission_id=r),n.source&&(s.source=n.source);const o=n.messageId??n.message_id;o&&(s.message_id=o),Le.generateLead(s)}}return e.apply(this,t)},ym=!0},bm=e=>{const t=eR(e);console.log("[WebEAC] Page type detected:",t),(t==="purchase"||t==="contact")&&sR()};qo(e=>{gm()&&(bm(e),tR(),nR())},!0),setTimeout(()=>{gm()&&bm(window.location.href)},1e3);const rR=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),oR=(e,t)=>{let n;return(...s)=>{n&&clearTimeout(n),n=setTimeout(()=>{e.apply(null,s)},t)}},iR=()=>me.state.handle===Jn,aR={purchase:/^\/checkout\/success/,login:/^\/login$/,signup:/^\/register$/,cart:/^\/cart$/,search:/^\/tag\?key=/},lR={addToCartButton:[".btn-add-cart",".redirectCart"]},cR=e=>{for(const[t,n]of Object.entries(aR))if(n.test(e))return t;return"unknown"},xm=e=>{if(!e.includes("?"))return{};const t={};return new URLSearchParams(e.split("?")[1]).forEach((n,s)=>{t[s]=n}),t},Fr=e=>e?e.replace(/\s+/g,"").replace(//g,""):"";let Bn=[],_m=[];const uR=()=>{Bn.forEach(({element:e,event:t,handler:n,options:s})=>{e.removeEventListener(t,n,s)}),Bn=[],_m.forEach(e=>{e.disconnect()}),_m=[]},dR=()=>!!document.querySelector(".p-product.p-pdetail"),fR=()=>!!document.querySelector(".p-product.p-cate"),hR=()=>!!document.getElementById("wrap-product-search"),pR=e=>{if(!hR())return;const n=xm(e).key;n&&Le.search({search_term:decodeURIComponent(n)})},wm=()=>{var t,n,s;const e=Vt("Product");return e?{id:e.sku||e.mpn||"",sku:e.sku||"",mpn:e.mpn||"",name:e.name||"",url:window.location.href,price:((n=(t=e.offers)==null?void 0:t.price)==null?void 0:n.toString())||"",image:zl()||e.image||"",brand:typeof e.brand=="object"?((s=e.brand)==null?void 0:s.name)||"":e.brand||""}:{}},mR=()=>{setTimeout(()=>{const e=wm();e.name&&Le.productView(e)},1500)},gR=()=>{document.querySelectorAll(lR.addToCartButton.join(", ")).forEach(t=>{const n=()=>{const s=wm();s.name&&Le.addToCart(s)};t.addEventListener("click",n),Bn.push({element:t,event:"click",handler:n})})},vR=()=>{const e=Tr();return e&&e.title?{name:e.title,brand:"MediaMart",image:e.image||"",url:window.location.href}:{name:document.title||"",brand:"MediaMart",image:"",url:window.location.href}},yR=()=>{setTimeout(()=>{const e=vR();e.name&&Le.categoryView(e)},1500)},Fc=()=>{const e=document.querySelectorAll(".cart-items tr[ng-repeat]");return Array.from(e).map(t=>{var l,u,d,f,h;const n=((l=t.querySelector(".product-image img"))==null?void 0:l.src)||"",s=((d=(u=t.querySelector(".productName"))==null?void 0:u.textContent)==null?void 0:d.trim())||"",r=((h=(f=t.querySelector(".productPriceCurrent"))==null?void 0:f.textContent)==null?void 0:h.trim())||"",o=Fr(r),i=t.querySelector(".quantity-field"),a=parseInt((i==null?void 0:i.value)||"1",10);return{image:n,name:s,price:o,quantity:a}})},km=()=>Fc().reduce((n,s)=>n+s.quantity,0).toString(),Sm=()=>{var t,n;const e=((n=(t=document.querySelector(".orderTotal td:nth-child(2) .ng-binding"))==null?void 0:t.textContent)==null?void 0:n.trim())||"";return Fr(e)},bR=()=>{setTimeout(()=>{const e=km(),t=Sm(),n=Fc();Le.cartView({cart_size:e,cart_total_price:t,products:n})},1500)},xR=()=>{document.querySelectorAll(".fa-remove").forEach(t=>{const n=()=>{var r,o,i,a;const s=t.closest("tr[ng-repeat]");if(s){const l=((o=(r=s.querySelector(".productName"))==null?void 0:r.textContent)==null?void 0:o.trim())||"",u=((a=(i=s.querySelector(".productPriceCurrent"))==null?void 0:i.textContent)==null?void 0:a.trim())||"",d=Fr(u);Le.removeFromCart({name:l,price:d})}};t.addEventListener("click",n),Bn.push({element:t,event:"click",handler:n})})},_R=e=>{const t={},n=xm(window.location.href);if(n.orderId&&(t.order_id=n.orderId,t.order_number=n.orderId),e)try{const r=JSON.parse(e);t.customer=r.customer||{},t.products=r.products||[]}catch(r){console.error("Failed to parse checkout data:",r),t.customer={},t.products=[]}else t.customer={},t.products=[];return document.querySelectorAll(".puser-orderdetail table tbody tr").forEach(r=>{var i,a,l;const o=r.textContent;if(o.includes("Tng tin")){const u=r.querySelectorAll("td");if(u.length>=2){const d=(i=u[u.length-1].textContent)==null?void 0:i.trim();t.total_value=Fr(d)}}else if(o.includes("Thnh tin")){const u=r.querySelectorAll("td");if(u.length>=2){const d=(a=u[u.length-1].textContent)==null?void 0:a.trim();t.sub_total=Fr(d)}}else if(o.includes("Ph vn chuyn")){const u=r.querySelectorAll("td");if(u.length>=2){const f=((l=u[u.length-1].textContent)==null?void 0:l.trim()).match(/^([\d.,]+)\s*/);f?t.shipping_cost=Fr(f[1]):t.shipping_cost="0"}}}),t};let zc=!1;const wR=()=>{if(zc)return;const e=sessionStorage.getItem("mediamart_checkout");e&&setTimeout(()=>{const t=_R(e);t.order_id&&t.total_value&&(Le.purchase(t),zc=!0,setTimeout(()=>zc=!1,6e4),sessionStorage.removeItem("mediamart_checkout"))},1500)},kR=()=>{const e=document.querySelector('form[action="/login"]');if(!e)return;const t=()=>{var r;const n=e.querySelector('#Email, input[name="Email"]'),s=((r=n==null?void 0:n.value)==null?void 0:r.trim())||"";s&&Le.login({email:s,method:"email"})};e.addEventListener("submit",t,!0),Bn.push({element:e,event:"submit",handler:t,options:!0})},SR=()=>{const e=document.querySelector('form[action="/register"]');if(!e)return;const t=()=>{var l,u,d;const n=e.querySelector('#Email, input[name="Email"]'),s=e.querySelector('#FullName, input[name="FullName"]'),r=e.querySelector('#PhoneNumber, input[name="PhoneNumber"]'),o=((l=n==null?void 0:n.value)==null?void 0:l.trim())||"",i=((u=s==null?void 0:s.value)==null?void 0:u.trim())||"",a=((d=r==null?void 0:r.value)==null?void 0:d.trim())||"";(o||i||a)&&Le.signUp({email:o,name:i,phone:a,method:"email"})};e.addEventListener("submit",t,!0),Bn.push({element:e,event:"submit",handler:t,options:!0})},Cm=()=>{const e={},t=document.querySelector('#NewAddressForm_ContactName, input[name="NewAddressForm.ContactName"]');t!=null&&t.value&&(e.name=t.value.trim());const n=document.querySelector('#NewAddressForm_ContactPhone, input[name="NewAddressForm.ContactPhone"]');n!=null&&n.value&&(e.phone=n.value.trim());const s=document.querySelector('#NewAddressForm_ContactEmail, input[name="NewAddressForm.ContactEmail"]');s!=null&&s.value&&(e.email=s.value.trim());const r=document.querySelector('#NewAddressForm_StateOrProvinceId, select[name="NewAddressForm.StateOrProvinceId"]');r!=null&&r.value&&r.selectedOptions[0]&&(e.city=r.selectedOptions[0].textContent.trim());const o=document.querySelector('#NewAddressForm_DistrictId, select[name="NewAddressForm.DistrictId"]');o!=null&&o.value&&o.selectedOptions[0]&&(e.district=o.selectedOptions[0].textContent.trim());const i=document.querySelector('#NewAddressForm_AddressLine1, input[name="NewAddressForm.AddressLine1"]');let a="";i!=null&&i.value&&(a=i.value.trim());const l=[a,e.district,e.city].filter(Boolean);return l.length>0&&(e.address=l.join(", ")),e},CR=()=>{const e=document.querySelector("#checkout-delivery-address");if(!e)return;const t=()=>{const i=Cm();Object.keys(i).length>0&&Le.addShippingInfo(i)},n=oR(t,1e3);["#NewAddressForm_ContactName","#NewAddressForm_ContactPhone","#NewAddressForm_ContactEmail","#NewAddressForm_AddressLine1"].forEach(i=>{const a=e.querySelector(i);a&&(a.addEventListener("input",n,!0),Bn.push({element:a,event:"input",handler:n,options:!0}))}),["#NewAddressForm_StateOrProvinceId","#NewAddressForm_DistrictId"].forEach(i=>{const a=e.querySelector(i);a&&(a.addEventListener("change",t,!0),Bn.push({element:a,event:"change",handler:t,options:!0}))}),e.querySelectorAll('input[name="ShippingMethod"]').forEach(i=>{i.addEventListener("change",t,!0),Bn.push({element:i,event:"change",handler:t,options:!0})})},$R=()=>{const e=document.querySelector("#checkout-delivery-address");if(!e)return;const t=n=>{n.preventDefault();const s=km(),r=Sm(),o=Fc(),i=Cm();Le.checkout({cart_size:s,cart_total_price:r,products:o,...i});const a={customer:{name:i.name||"",phone:i.phone||"",email:i.email||"",shipping_address:i.address||"",delivery_method:"Giao hng tn ni",payment_gateway:"Thanh ton khi nhn hng (COD)"},products:o};sessionStorage.setItem("mediamart_checkout",JSON.stringify(a)),setTimeout(()=>{e.submit()},100)};e.addEventListener("submit",t,!0),Bn.push({element:e,event:"submit",handler:t,options:!0})};qo(e=>{if(!iR())return;uR(),pR(e);const t=new URL(e,window.location.origin).pathname;switch(cR(t)){case"purchase":wR();break;case"login":setTimeout(kR,500);break;case"signup":setTimeout(SR,500);break;case"cart":bR(),xR(),setTimeout(()=>{CR(),$R()},1500);break;default:dR()?(mR(),setTimeout(gR,1500)):fR()&&yR();break}setTimeout(()=>{},2e3)},!0);const TR=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Bo={ADD_CART:"/cart/api/cart/AddProduct"},Uo={DMX_STAGING:"https://staging.dienmayxanh.com",DMX_PRODUCTION:"https://www.dienmayxanh.com",TGDD_STAGING:"https://staging.thegioididong.com",TGDD_PRODUCTION:"https://www.thegioididong.com"},AR={"www.dienmayxanh.com":{ADD_CART:Uo.DMX_PRODUCTION+Bo.ADD_CART},"staging.dienmayxanh.com":{ADD_CART:Uo.DMX_STAGING+Bo.ADD_CART},"www.thegioididong.com":{ADD_CART:Uo.TGDD_PRODUCTION+Bo.ADD_CART},"staging.thegioididong.com":{ADD_CART:Uo.TGDD_STAGING+Bo.ADD_CART},localhost:{ADD_CART:Uo.DMX_PRODUCTION+Bo.ADD_CART}};function $m(){const e=L(!1),t=L(null),n=L(null),s=L(null),{handle:r}=Ct(me.state),o=async({productId:l,productCode:u,productType:d,quantity:f})=>{try{e.value=!0,t.value||(t.value=window.location.hostname);const h=AR[t.value].ADD_CART,p={requestChooseServiceDetail:{bringProductsName:"",isTransContact:!1,isUserManual:!1,lstProductCodeMoreColors:"",productId:l},requestProductAdd:[{indexGiftAdds:[],productId:l,productCode:u,productType:Number(d)||1,quantity:Number(f)||1}]},m=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(p)});if(!m.ok)throw new Error(`EAC - Error adding product to cart: ${m.status}`);return await m.json()}catch(h){throw console.error("EAC - Error adding product to cart:",h),h}finally{e.value=!1}},i=(l=[],u)=>{var m,x;const{origin:d,pathname:f}=window.location;let h=(m=l.find(y=>y.href.includes("/cart/single")))==null?void 0:m.href,p=(x=l.find(y=>y.href.includes("/cart/them-vao-gio-hang")))==null?void 0:x.href;if(u===d+f){const y=document.querySelector('a.btn-buynow[href*="/cart/single"]'),_=document.querySelector('a.btn-buynow[href*="/cart/them-vao-gio-hang"]');y!=null&&y.href&&(h=y.href),_!=null&&_.href&&(p=_.href)}h&&(n.value=d+h),p&&(s.value=d+p)},a=l=>{const u=l.split("?")[1];return u?u.split("&").reduce((d,f)=>{const[h,p]=f.split("=");return d[h]=p,d},{}):{}};return Ke(()=>{t.value=window.location.hostname}),{addCart:o,getLinkBuyNowAndSingleCart:i,getParamCTALink:a,isLoading:e,linkSingleCart:n,linkBuyNow:s}}const ER={class:"p-[8px] flex flex-col group h-full"},IR=["src","alt"],PR=["src","alt"],OR={class:"flex flex-col flex-1 mt-2"},RR={class:"flex flex-wrap items-center mt-1"},MR={class:"mr-1 text-red-500 font-semibold text-[15px]"},LR={key:0},DR={key:1},NR={key:2},jR={key:0,class:"text-xs font-light text-gray-500"},FR={key:1,class:"text-xs font-light text-gray-500"},zR={key:0,class:"mt-2 mb-1 variant-attributes"},qR={class:"mb-0.5 text-xs tracking-tight text-gray-500"},BR={class:"flex space-x-2"},UR=["onClick"],VR={key:1,class:"flex items-center mt-2"},HR={key:1,class:"text-gray-500 text-xs translate-y-[1px] ml-0.5"},WR={key:0,class:"mt-4"},GR={href:"/cart",class:"flex justify-center items-center p-2 w-full text-sm text-white rounded border transition-colors duration-200 bg-[#FC7600] border-[#FC7600] hover:bg-[#FC7600]/80 hover:border-[#FC7600]/80"},KR={key:1,class:"mt-4"},QR=["href"],JR=["href"],XR=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"CardProductNew",props:{item:{type:Object}},emits:["open-flow-checkout","send-message","loading"],setup(e,{emit:t}){var $,T;const n=e,s=t,{addCart:r,getLinkBuyNowAndSingleCart:o,linkSingleCart:i,linkBuyNow:a}=$m(),l=L(!1),u=((T=($=D.bot)==null?void 0:$.config)==null?void 0:T.ui.logo)||`${D.appDomain}/link.png`,d=L(null),f=L(!1);ta(n.item.links)&&(n.item.links=JSON.parse(n.item.links)),Ee(f,I=>{s("loading",I)});const h=L(!1),p=L(null),m=L(null),x=L(!1),y=()=>{var q,G;const{source:I,links:R}=n.item;if(m.value=(q=R==null?void 0:R.variant_items)==null?void 0:q.filter(K=>!K.hasOwnProperty("status")||K.status),x.value=!1,((G=m.value)==null?void 0:G.length)>0){x.value=m.value.some(H=>!!H.data_id);const K=m.value[0];K.code&&K.color_hex?p.value=K:p.value=null}o(R==null?void 0:R.cta_links,I)},_=async I=>{if(!Number(I))return;const R=document.querySelector(".header__cart .cart-number");R&&(R.textContent||R.classList.add("has-cart"),R.textContent=I)};async function C(){try{const I=new Date().getTime(),q=`${window.location.origin}/cart/api/cart/info?_=${I}`,K=await(await fetch(q,{method:"GET",headers:{Accept:"application/json"}})).json();if(K&&K.items_count){const H=document.querySelector(".header__cart .cart-number");H&&(H.textContent||H.classList.add("has-cart"),H.textContent=K.items_count)}}catch(I){console.error("Error:",I)}}function A(){var q,G,K,H,ee,ce;if(f.value)return;let I=(K=(G=(q=n.item.links)==null?void 0:q.cta_links)==null?void 0:G.find(W=>W.href.includes("/cart/them-vao-gio-hang")))==null?void 0:K.href;if(!I)return s("send-message",`Lin h t vn ${n.item.title}`);if(f.value=!0,x.value){const W=((ce=(ee=(H=n.item.links)==null?void 0:H.variant_items)==null?void 0:ee.find(Q=>!!Q.data_id))==null?void 0:ce.data_id)??1;I=I+`&packageSelection=${W}`}const R=document.createElement("iframe");R.style.display="none",R.src=I,R.onload=async W=>{document.body.removeChild(R),f.value=!1,h.value=!0,C();let{title:Q,image:J,source:ne}=n.item;const ke=await Ar(J);ke.status||(J=u);const qe=Pr({title:Q,image:J,source:ne,isImageValid:ke.status,cartUrl:"/cart"});s("send-message",qe)},R.onerror=W=>{document.body.removeChild(R),f.value=!1},document.body.appendChild(R)}const E=async()=>{if(x.value||a.value&&!a.value.includes("productCode")){A();return}try{if(!a.value&&!p.value)return s("send-message",`Lin h t vn ${n.item.title}`);if(f.value)return;f.value=!0;let I={};if(p.value)I={quantity:1,productId:p.value.id,productCode:p.value.code,productType:p.value.product_type};else{const q=Yl(a.value);I={quantity:1,productId:q.productId,productCode:q.productCode,productType:q.productType}}const R=await r(I,x.value);if(R&&R.data){h.value=!0;const q=R.data.products.reduce((W,Q)=>W+Q.quantity,0);_(q);let{title:G,image:K,source:H}=n.item;const ee=await Ar(K);ee.status||(K=u);const ce=Pr({title:G,image:K,source:H,isImageValid:ee.status,cartUrl:"/cart"});s("send-message",ce)}else{const q=R.errormessage;zn.actions.warning({message:q})}}catch(I){console.log(I),I!=null&&I.message&&zn.actions.error({message:"C li xy ra, vui lng th li sau"})}finally{f.value=!1}};return Ke(()=>{d.value=window.location.origin,y()}),(I,R)=>{var q,G,K,H;return v(),k("div",ER,[(v(),re(Gt(e.item.source?"a":"div"),{href:e.item.source,target:"_self",class:"rounded overflow-hidden flex items-center justify-center aspect-[1/1]"},{default:xe(()=>[e.item.image&&!l.value?(v(),k("img",{key:0,src:e.item.image,alt:e.item.title,class:"object-contain w-full h-full",onError:R[0]||(R[0]=()=>l.value=!0)},null,40,IR)):(v(),k("img",{key:1,src:b(u),alt:e.item.title,class:"object-cover overflow-hidden w-8 h-8 rounded-full"},null,8,PR))]),_:1},8,["href"])),c("div",OR,[(v(),re(Gt(e.item.source?"a":"div"),{href:e.item.source,target:"_self",class:"text-sm font-medium text-gray-900 line-clamp-1 sm:group-hover:text-primary"},{default:xe(()=>[Fe(V(e.item.title),1)]),_:1},8,["href"])),c("div",RR,[c("div",MR,[e.item.texts&&e.item.texts.price?(v(),k("div",LR,V(e.item.texts.price),1)):p.value&&p.value.price_text?(v(),k("div",DR,V(p.value.price_text),1)):e.item.price?(v(),k("div",NR,V(b(Qe)(e.item.price,{currency:e.item.currency})),1)):B("",!0)]),p.value&&p.value.old_price_text!==p.value.price_text&&p.value.old_price_text!=="0"?(v(),k("del",jR,V(p.value.old_price_text),1)):!((G=(q=e.item.links)==null?void 0:q.variant_items)!=null&&G.length)&&e.item.old_price>0&&e.item.old_price!==e.item.price&&e.item.old_price_text!==0?(v(),k("del",FR,V(b(Qe)(e.item.old_price,{currency:e.item.currency})),1)):B("",!0)]),p.value?(v(),k("div",zR,[c("div",qR," Mu: "+V(p.value.color||""),1),c("div",BR,[(v(!0),k(be,null,Ie(m.value,(ee,ce)=>(v(),k("div",{key:ce,class:"cursor-pointer",onClick:W=>p.value=ee},[c("div",{class:se(["size-[20px] rounded-full border ring-1 shadow-[inset_0_3px_4px_rgba(0,0,0,0.05)]",p.value.code===ee.code?"border-blue-50 ring-blue-300":"border-transparent ring-transparent"]),style:kt({backgroundColor:ee.color_hex})},null,6)],8,UR))),128))])])):B("",!0),Number(e.item.rating)||e.item.review_count?(v(),k("div",VR,[Number(e.item.rating)?(v(),k("div",{key:0,class:"ecg-stars",style:kt({"--rating":Number(e.item.rating)})},null,4)):B("",!0),e.item.review_count?(v(),k("div",HR," ("+V(b(Th)(e.item.review_count))+") ",1)):B("",!0)])):B("",!0)]),h.value?(v(),k("div",WR,[c("a",GR,[U(b(Jt),{"stroke-width":"1.5",size:"18",class:"mr-1"}),Fe(" Thanh ton ngay ")])])):(v(),k("div",KR,[b(i)?(v(),k("a",{key:0,href:b(i),class:"flex justify-center items-center p-2 w-full text-sm text-gray-600 bg-white rounded border border-gray-200 hover:bg-primary hover:text-white hover:border-primary"},[U(b(Jt),{"stroke-width":"1.5",size:"18",class:"mr-1"}),Fe(" Mua ngay ")],8,QR)):(H=(K=e.item.links)==null?void 0:K.cta_links)!=null&&H.length?(v(),k("button",{key:2,onClick:R[1]||(R[1]=ee=>E()),class:se(["flex justify-center items-center p-2 w-full text-sm bg-white rounded border border-gray-200",f.value?"cursor-pointer text-gray-400":"hover:bg-primary hover:text-white hover:border-primary text-gray-600"])},[b(a)||p.value?(v(),k(be,{key:0},[f.value?(v(),re(Ht,{key:0,class:"w-[18px] h-[18px] mr-1"})):(v(),re(b(Jt),{key:1,"stroke-width":"1.5",size:"18",class:"mr-1"}))],64)):(v(),re(b(Zh),{key:1,"stroke-width":"1.5",size:"18",class:"mr-1"})),Fe(" "+V(b(a)||p.value?"Thm vo gi":"Lin h"),1)],2)):(v(),k("a",{key:1,href:e.item.source,class:"flex justify-center items-center p-2 w-full text-sm text-gray-600 bg-white rounded border border-gray-200 hover:bg-primary hover:text-white hover:border-primary"},[U(b(fc),{"stroke-width":"1.5",size:"18",class:"mr-1"}),Fe(" Xem chi tit ")],8,JR))]))])}}}},Symbol.toStringTag,{value:"Module"})),ZR={class:"p-[10px] rounded group border border-gray-200 w-full"},YR={class:"flex"},eM=["src","alt"],tM=["src","alt"],nM={class:"flex flex-col flex-1"},sM={class:"flex flex-wrap items-center mt-1"},rM={class:"mr-1 text-red-500 font-semibold text-[15px]"},oM={key:0},iM={key:1},aM={key:2},lM={key:0,class:"text-xs font-light text-gray-500"},cM={key:1,class:"text-xs font-light text-gray-500"},uM={key:0,class:"my-2 variant-attributes"},dM={class:"mb-0.5 text-xs tracking-tight text-gray-500"},fM={class:"flex space-x-2"},hM=["onClick"],pM={key:1,class:"flex items-center"},mM={key:1,class:"text-gray-500 text-xs translate-y-[1px] ml-0.5"},gM={key:0,class:"mt-3"},vM={href:"/cart",class:"flex justify-center items-center p-2 w-full text-sm text-white rounded border transition-colors duration-200 bg-[#FC7600] border-[#FC7600] hover:bg-[#FC7600]/80 hover:border-[#FC7600]/80"},yM={key:1,class:"mt-3"},bM=["href"],xM=["href"],_M=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"CardProductRowNew",props:{item:{type:Object}},emits:["open-flow-checkout","send-message","loading"],setup(e,{emit:t}){var $,T;const n=e,s=t,{addCart:r,getLinkBuyNowAndSingleCart:o,linkSingleCart:i,linkBuyNow:a}=$m(),l=L(!1),u=((T=($=D.bot)==null?void 0:$.config)==null?void 0:T.ui.logo)||`${D.appDomain}/link.png`,d=L(null),f=L(!1);ta(n.item.links)&&(n.item.links=JSON.parse(n.item.links)),Ee(f,I=>{s("loading",I)});const h=L(!1),p=L(null),m=L(null),x=L(!1),y=()=>{var q,G;const{source:I,links:R}=n.item;if(m.value=(q=R==null?void 0:R.variant_items)==null?void 0:q.filter(K=>!K.hasOwnProperty("status")||K.status),x.value=!1,((G=m.value)==null?void 0:G.length)>0){x.value=m.value.some(H=>!!H.data_id);const K=m.value[0];K.code&&K.color_hex?p.value=K:p.value=null}o(R==null?void 0:R.cta_links,I)},_=async I=>{if(!Number(I))return;const R=document.querySelector(".header__cart .cart-number");R&&(R.textContent||R.classList.add("has-cart"),R.textContent=I)};async function C(){try{const I=new Date().getTime(),q=`${window.location.origin}/cart/api/cart/info?_=${I}`,K=await(await fetch(q,{method:"GET",headers:{Accept:"application/json"}})).json();if(K&&K.items_count){const H=document.querySelector(".header__cart .cart-number");H&&(H.textContent||H.classList.add("has-cart"),H.textContent=K.items_count)}}catch(I){console.error("Error:",I)}}function A(){var q,G,K,H,ee,ce;if(f.value)return;let I=(K=(G=(q=n.item.links)==null?void 0:q.cta_links)==null?void 0:G.find(W=>W.href.includes("/cart/them-vao-gio-hang")))==null?void 0:K.href;if(!I)return s("send-message",`Lin h t vn ${n.item.title}`);if(f.value=!0,x.value){const W=((ce=(ee=(H=n.item.links)==null?void 0:H.variant_items)==null?void 0:ee.find(Q=>!!Q.data_id))==null?void 0:ce.data_id)??1;I=I+`&packageSelection=${W}`}const R=document.createElement("iframe");R.style.display="none",R.src=I,R.onload=async W=>{document.body.removeChild(R),f.value=!1,h.value=!0,C();let{title:Q,image:J,source:ne}=n.item;const ke=await Ar(J);ke.status||(J=u);const qe=Pr({title:Q,image:J,source:ne,isImageValid:ke.status,cartUrl:"/cart"});s("send-message",qe)},R.onerror=W=>{document.body.removeChild(R),f.value=!1},document.body.appendChild(R)}const E=async()=>{if(x.value||a.value&&!a.value.includes("productCode")){A();return}try{if(!a.value&&!p.value)return s("send-message",`Lin h t vn ${n.item.title}`);if(f.value)return;f.value=!0;let I={};if(p.value)I={quantity:1,productId:p.value.id,productCode:p.value.code,productType:p.value.product_type};else{const q=Yl(a.value);I={quantity:1,productId:q.productId,productCode:q.productCode,productType:q.productType}}const R=await r(I);if(R&&R.data){h.value=!0;const q=R.data.products.reduce((W,Q)=>W+Q.quantity,0);_(q);let{title:G,image:K,source:H}=n.item;const ee=await Ar(K);ee.status||(K=u);const ce=Pr({title:G,image:K,source:H,isImageValid:ee.status,cartUrl:"/cart"});s("send-message",ce)}else{const q=R.errormessage;console.log("Failed to add to cart",q),zn.actions.warning({message:q})}}catch(I){console.log(I),I!=null&&I.message&&zn.actions.error({message:"C li xy ra, vui lng th li sau"})}finally{f.value=!1}};return Ke(()=>{d.value=window.location.origin,y()}),(I,R)=>{var q,G;return v(),k("div",ZR,[c("div",YR,[(v(),re(Gt(e.item.source?"a":"div"),{href:e.item.source,target:"_self",class:"rounded overflow-hidden size-[124px] flex items-center justify-center mr-2 flex-shrink-0"},{default:xe(()=>[e.item.image&&!l.value?(v(),k("img",{key:0,src:e.item.image,alt:e.item.title,class:"object-contain w-full h-full",onError:R[0]||(R[0]=()=>l.value=!0)},null,40,eM)):(v(),k("img",{key:1,src:b(u),alt:e.item.title,class:"object-cover overflow-hidden w-8 h-8 rounded-full"},null,8,tM))]),_:1},8,["href"])),c("div",nM,[(v(),re(Gt(e.item.source?"a":"div"),{href:e.item.source,target:"_self",class:"text-sm font-medium text-gray-900 line-clamp-2 group-hover:text-primary"},{default:xe(()=>[Fe(V(e.item.title),1)]),_:1},8,["href"])),c("div",sM,[c("div",rM,[e.item.texts&&e.item.texts.price?(v(),k("div",oM,V(e.item.texts.price),1)):p.value&&p.value.price_text&&p.value.price_text!=="0"?(v(),k("div",iM,V(p.value.price_text),1)):e.item.price&&e.item.price!==0?(v(),k("div",aM,V(b(Qe)(e.item.price,{currency:e.item.currency})),1)):B("",!0)]),p.value&&p.value.old_price_text!==p.value.price_text&&p.value.old_price_text!=="0"?(v(),k("del",lM,V(p.value.old_price_text),1)):e.item.old_price>0&&e.item.old_price!==e.item.price?(v(),k("del",cM,V(b(Qe)(e.item.old_price,{currency:e.item.currency})),1)):B("",!0)]),p.value?(v(),k("div",uM,[c("div",dM," Mu: "+V(p.value.color||""),1),c("div",fM,[(v(!0),k(be,null,Ie(m.value,(K,H)=>(v(),k("div",{key:H,class:"cursor-pointer",onClick:ee=>p.value=K},[c("div",{class:se(["size-[20px] rounded-full border ring-1 shadow-[inset_0_3px_4px_rgba(0,0,0,0.05)]",p.value.code===K.code?"border-blue-50 ring-blue-300":"border-transparent ring-transparent"]),style:kt({backgroundColor:K.color_hex})},null,6)],8,hM))),128))])])):B("",!0),Number(e.item.rating)||e.item.review_count?(v(),k("div",pM,[Number(e.item.rating)?(v(),k("div",{key:0,class:"ecg-stars",style:kt({"--rating":Number(e.item.rating)})},null,4)):B("",!0),e.item.review_count?(v(),k("div",mM," ("+V(b(Th)(e.item.review_count))+") ",1)):B("",!0)])):B("",!0)])]),h.value?(v(),k("div",gM,[c("a",vM,[U(b(Jt),{"stroke-width":"1.5",size:"18",class:"mr-1"}),Fe(" Thanh ton ngay ")])])):(v(),k("div",yM,[b(i)?(v(),k("a",{key:0,href:b(i),class:"flex justify-center items-center p-2 w-full text-sm text-gray-600 bg-white rounded border border-gray-200 hover:bg-primary hover:text-white hover:border-primary"},[U(b(Jt),{"stroke-width":"1.5",size:"18",class:"mr-1"}),Fe(" Mua ngay ")],8,bM)):(G=(q=e.item.links)==null?void 0:q.cta_links)!=null&&G.length?(v(),k("button",{key:2,onClick:R[1]||(R[1]=K=>E()),class:se(["flex justify-center items-center p-2 w-full text-sm bg-white rounded border border-gray-200",f.value?"cursor-pointer text-gray-400":"hover:bg-primary hover:text-white hover:border-primary text-gray-600"])},[b(a)||p.value?(v(),k(be,{key:0},[f.value?(v(),re(Ht,{key:0,class:"w-[18px] h-[18px] mr-1"})):(v(),re(b(Jt),{key:1,"stroke-width":"1.5",size:"18",class:"mr-1"}))],64)):(v(),re(b(Zh),{key:1,"stroke-width":"1.5",size:"18",class:"mr-1"})),Fe(" "+V(b(a)||p.value?"Thm vo gi":"Lin h"),1)],2)):(v(),k("a",{key:1,href:e.item.source,class:"flex justify-center items-center p-2 w-full text-sm text-gray-600 bg-white rounded border border-gray-200 hover:bg-primary hover:text-white hover:border-primary"},[U(b(fc),{"stroke-width":"1.5",size:"18",class:"mr-1"}),Fe(" Xem chi tit ")],8,xM))]))])}}}},Symbol.toStringTag,{value:"Module"}));function Tm(){const e=L(!1),t=L(null),n=L(null),s="https://ecommerce.pico.vn",r="/user/api/shopping-cart",o=ut.create({baseURL:s,timeout:1e4,headers:{"Content-Type":"application/json"}}),i=()=>{const d=navigator.userAgent.toLowerCase(),f=window.screen.width;return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(d)?f>=768?"Tablet":"Mobile":"Desktop"};o.interceptors.request.use(d=>{try{const f=pt.get("guestId"),h=pt.get("access"),p=pt.get("sale-region")||"MN1",m=i();f&&h&&(d.headers={...d.headers,access:h,channel:"b2c",party:"ecom",platform:m,"sale-region":p,uuid:f})}catch(f){console.warn("Failed to add custom headers:",f)}return d},d=>Promise.reject(d)),o.interceptors.response.use(d=>d,d=>{var h,p;const f=((p=(h=d.response)==null?void 0:h.data)==null?void 0:p.message)||d.message||"API request failed";return console.error("API Error:",f),Promise.reject(d)});const a=async d=>{var h,p;if(!(d!=null&&d.productId))throw new Error("Product ID is required");const f=l();if(!f.isValid)throw new Error(`Missing required cookies: ${f.missing.join(", ")}`);e.value=!0,t.value=null,n.value=null;try{const m={productId:d.productId,shippingMethod:d.shippingMethod||"pickUpInStore",quantity:d.quantity||1,serviceIds:d.serviceIds||[],selectedReceiveAtWarehouse:d.selectedReceiveAtWarehouse||!1},x=await o.post(r,m);return n.value=x.data,x.data}catch(m){const x=((p=(h=m.response)==null?void 0:h.data)==null?void 0:p.message)||m.message||"Failed to add product to cart";throw t.value=x,new Error(x)}finally{e.value=!1}},l=()=>{const f=["guestId","access"].filter(h=>!pt.get(h));return{isValid:f.length===0,missing:f}},u=()=>({uuid:pt.get("guestId"),access:pt.get("access"),saleRegion:pt.get("sale-region")||"MN1",platform:i()});return pe(()=>l().isValid),pe(()=>u()),{isLoading:fr(e),error:fr(t),cartResponse:fr(n),addToCart:a}}function Am(){L(!1);const e=L(!1),t=(s=1)=>{const r=document.querySelector(".cart-header .count_item");if(r){const o=parseInt(r.textContent)||0;r.textContent=o+s,r.classList.remove("hidden-count")}};return{addToCart:async s=>{try{if(e.value)return;e.value=!0;const r=new FormData;r.append("variantId",s.variantId),r.append("quantity",s.quantity||1);const o=await fetch("https://eco-mart.vn/cart/add",{method:"POST",body:r,headers:{"X-Requested-With":"XMLHttpRequest"}});if(o.ok){const i=o.headers.get("content-type");if(i&&i.includes("application/json")){const a=await o.json();return console.log("Item added to cart successfully:",a),t(s.quantity||1),a}else return console.log("Item added to cart successfully"),t(s.quantity||1),{success:!0,message:"Added to cart"}}else throw new Error(`HTTP error! status: ${o.status}`)}catch(r){throw console.error("Error adding item to cart:",r),r}finally{e.value=!1}}}}const wM={class:"p-[8px] flex flex-col group sm:hover:shadow duration-200 h-full"},kM=["src","alt"],SM=["src","alt"],CM={class:"flex flex-col flex-1 mt-2"},$M={key:0,class:"mt-1 text-sm text-gray-500 line-clamp-2"},TM={key:1,class:"flex flex-wrap items-center mt-1"},AM={class:"mr-1 text-sm font-semibold text-red-500"},EM={key:0},IM={key:1},PM={key:0,class:"text-xs font-light text-gray-500"},OM={key:2,class:"flex items-center mt-1"},RM={key:1,class:"text-gray-500 text-xs translate-y-[1px] ml-0.5"},MM={key:0,class:"mt-4"},LM=["href"],DM={key:1,class:"mt-4"},NM=c("div",{class:"leading-[140%]"},"Lin h hotline",-1),jM=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"CardProduct",props:{item:{type:Object}},emits:["open-flow-checkout","send-message","loading"],setup(e,{emit:t}){var A,E;const n=e,s=t,r=L(!1),o=((E=(A=D.bot)==null?void 0:A.config)==null?void 0:E.ui.logo)||`${D.appDomain}/link.png`,i=L(null),a=L(!1),l=L(!1);ta(n.item.links)&&(n.item.links=JSON.parse(n.item.links)),Ee(a,$=>{s("loading",$)}),Ke(()=>{i.value=window.location.origin});const u=async()=>{var $;if(!a.value)try{a.value=!0;let T=D.selectedForm;($=n.item.texts)!=null&&$.price&&(n.item.price=0,n.item.old_price=0);const I={...n.item,quantity:1};if(T){let R=!1;T.items.forEach(q=>{var G,K;((G=q.sku)==null?void 0:G.toString())===((K=I.sku)==null?void 0:K.toString())&&(R=!0,q.quantity=Number(q.quantity)+1)}),T={...T,items:R?T.items:[...T.items,I]}}else T={items:[I]};wa().update({formData:T,status:"draft"})}catch{}finally{a.value=!1}},d=async()=>{try{if(a.value)return;a.value=!0;const $={quantity:1,product_id:n.item.product_id,product_sku:n.item.product_sku},{data:T}=await ze.cart.add($);T.success&&(D.cart=T.data,s("open-flow-checkout"),ECG.sync.emit("cart",{source:"easy-ai-chat",data:T.data}))}catch($){console.log("ecg error: ",$)}finally{a.value=!1}};function f(){D.handle===Sn?d():D.handle===Jn?p(n.item.sku):D.handle===Xn?m():D.handle===Zn?x():u(),y("add_to_cart",{product_id:n.item.product_sku,name:n.item.title,price:n.item.price,quantity:1})}const h=async()=>{let{title:$,image:T,source:I}=n.item,R="/cart";const q=await Ar(T);q.status||(T=o),D.handle===Jn?R=R+"?utm_source=easyai&utm_medium=productcard":D.handle===Xn?R="/checkout/cart?utm_source=easyai":D.handle===Zn&&(R="/cart?utm_source=easyai&utm_medium=productcard");const G=Pr({title:$,image:T,source:I,isImageValid:q.status,cartUrl:R});s("send-message",G)};async function p($){if(a.value)return;const T="https://mediamart.vn/cart/add-items/";try{if(!$)throw new Error("Product IDs are required");a.value=!0;let I="";if(Array.isArray($)){if($.length===0)throw new Error("Product IDs array cannot be empty");$.forEach(G=>{if(!G||G<=0)throw new Error("All product IDs must be positive numbers")}),I=$.join(",")}else{if($<=0)throw new Error("Product ID must be a positive number");I=$.toString()}const R=T+I+"?utm_source=easyai",q=await fetch(R,{method:"GET",headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"}});if(!q.ok){const G=await q.text();throw console.log("Error response:",G),new Error(`HTTP error! status: ${q.status} - ${G}`)}await q.text(),l.value=!0,h()}catch(I){console.error("Error adding items to cart:",I)}finally{a.value=!1}}async function m(){var $;try{if(a.value)return;a.value=!0;const T=await Tm().addToCart({productId:n.item.product_id,quantity:1,serviceIds:[],giftItems:[],selectedReceiveAtWarehouse:!1});if(T&&T.data){l.value=!0,h();const I=($=T.data.products)==null?void 0:$.reduce((G,K)=>G+K.quantity,0),R=document.querySelector('a[href="/checkout/cart"] .bg-product-salePrice'),q=document.querySelector("#bottomMobileTab .bg-red.rounded-full");R&&(R.textContent=I||0),q&&(q.textContent=I||0)}a.value=!1}catch(T){console.error("Error adding items to cart:",T)}finally{a.value=!1}}async function x(){try{if(a.value||!n.item.product_id)return;a.value=!0;const $=await Am().addToCart({variantId:n.item.product_id,quantity:1});$&&$.success&&(l.value=!0,h()),a.value=!1}catch($){console.error("Error adding items to cart:",$)}finally{a.value=!1}}function y($,T={}){["hotline","add_to_cart","checkout"].includes($)&&Dt.ctaClick({type:$,...T})}function _($,T={}){["product","page"].includes($)&&Dt.linkClick({type:$,...T})}const C=()=>{const{image:$,image_url:T}=n.item;return $||(Array.isArray(T)&&T[0]?T[0]:null)};return($,T)=>(v(),k("div",wM,[(v(),re(Gt(e.item.source?"a":"div"),{href:e.item.source,target:"_self",onClick:T[1]||(T[1]=I=>_("product",{url:e.item.source})),class:"rounded-sm overflow-hidden flex items-center justify-center aspect-[1/1]"},{default:xe(()=>[C()&&!r.value?(v(),k("img",{key:0,src:C(),alt:e.item.title,class:"object-contain w-full h-full",onError:T[0]||(T[0]=()=>r.value=!0)},null,40,kM)):(v(),k("img",{key:1,src:b(o),alt:e.item.title,class:"object-cover overflow-hidden w-8 h-8 rounded-full"},null,8,SM))]),_:1},8,["href"])),c("div",CM,[(v(),re(Gt(e.item.source?"a":"div"),{href:e.item.source,target:"_self",onClick:T[2]||(T[2]=I=>_("product",{url:e.item.source})),class:"text-sm font-medium text-gray-900 line-clamp-2 sm:group-hover:text-primary",style:{"word-break":"break-word"}},{default:xe(()=>[Fe(V(e.item.title),1)]),_:1},8,["href"])),!e.item.price&&!e.item.rating&&e.item.description?(v(),k("p",$M,V(e.item.description),1)):B("",!0),b(D).handle!==b(Nn)?(v(),k("div",TM,[c("div",AM,[e.item.texts&&e.item.texts.price?(v(),k("div",EM,V(e.item.texts.price),1)):e.item.price?(v(),k("div",IM,V(b(Qe)(e.item.price,{currency:e.item.currency})),1)):B("",!0)]),e.item.old_price>0&&e.item.old_price!==e.item.price?(v(),k("del",PM,V(b(Qe)(e.item.old_price,{currency:e.item.currency})),1)):B("",!0)])):B("",!0),Number(e.item.rating)||e.item.review_count?(v(),k("div",OM,[Number(e.item.rating)?(v(),k("div",{key:0,class:"ecg-stars",style:kt({"--rating":Number(e.item.rating)})},null,4)):B("",!0),e.item.review_count?(v(),k("div",RM," ("+V(e.item.review_count)+") ",1)):B("",!0)])):B("",!0)]),l.value?(v(),k("div",MM,[c("a",{href:{[b(Xn)]:"/checkout/cart?utm_source=easyai",[b(Jn)]:"/cart?utm_source=easyai"}[b(D).handle]||"/cart",onClick:T[3]||(T[3]=I=>y("checkout",{product_id:e.item.product_id||e.item.product_sku,name:e.item.title,price:e.item.price,quantity:1})),class:"flex justify-center items-center p-2 w-full text-sm text-white rounded border transition-colors duration-200 bg-[#FC7600] border-[#FC7600] hover:bg-[#FC7600]/80 hover:border-[#FC7600]/80"},[U(b(Jt),{"stroke-width":"1.5",size:"18",class:"mr-1"}),Fe(" Thanh ton ngay ")],8,LM)])):(v(),k("div",DM,[b(D).forms.order&&e.item.price&&b(D).handle!==b(Nn)?(v(),k("button",{key:0,onClick:T[4]||(T[4]=I=>f()),class:se(["flex justify-center items-center p-2 w-full text-sm bg-white rounded border border-gray-200",a.value?"cursor-pointer text-gray-400":"hover:bg-primary hover:text-white hover:border-primary text-gray-600"])},[a.value?(v(),re(Ht,{key:0,class:"w-[18px] h-[18px] mr-1"})):(v(),re(b(Jt),{key:1,"stroke-width":"1.5",size:"18",class:"mr-1"})),Fe(" Thm vo gi ")],2)):b(D).handle===b(Nn)?(v(),k("a",{key:1,href:"tel:19002628",onClick:T[5]||(T[5]=I=>y("hotline",{value:"19002628"})),class:"flex justify-center items-center p-2 w-full text-sm text-gray-600 bg-white rounded border border-gray-200 hover:bg-primary hover:text-white hover:border-primary"},[U(b(dc),{size:"18",class:"mr-1"}),NM])):B("",!0)]))]))}}},Symbol.toStringTag,{value:"Module"})),FM={class:"p-[12px] group border border-gray-200 w-full"},zM={class:"flex"},qM=["src","alt"],BM=["src","alt"],UM={class:"flex flex-col flex-1"},VM={key:0,class:"my-1 text-sm text-gray-500 line-clamp-2"},HM={key:1,class:"flex flex-wrap items-center mt-1"},WM={class:"mr-1 text-sm font-semibold text-red-500"},GM={key:0},KM={key:1},QM={key:0,class:"text-xs font-light text-gray-500"},JM={key:2,class:"flex items-center"},XM={key:1,class:"text-gray-500 text-xs translate-y-[1px] ml-0.5"},ZM={key:0,class:"mt-2"},YM=["href"],eL=c("div",{class:"leading-[140%]"},"Lin h hotline",-1),tL=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"CardProductRow",props:{item:{type:Object}},emits:["open-flow-checkout","send-message","loading"],setup(e,{emit:t}){var A,E;const n=e,s=t,r=L(!1),o=((E=(A=D.bot)==null?void 0:A.config)==null?void 0:E.ui.logo)||`${D.appDomain}/link.png`,i=L(null);ta(n.item.links)&&(n.item.links=JSON.parse(n.item.links));const a=L(!1);Ee(a,$=>{s("loading",$)}),Ke(()=>{i.value=window.location.origin});const l=async()=>{var $;if(!a.value)try{a.value=!0;let T=D.selectedForm;($=n.item.texts)!=null&&$.price&&(n.item.price=0,n.item.old_price=0);const I={...n.item,quantity:1};if(T){let R=!1;T.items.forEach(q=>{var G,K;((G=q.sku)==null?void 0:G.toString())===((K=I.sku)==null?void 0:K.toString())&&(R=!0,q.quantity=Number(q.quantity)+1)}),T={...T,items:R?T.items:[...T.items,I]}}else T={items:[I]};wa().update({formData:T,status:"draft"})}catch{}finally{a.value=!1}},u=async()=>{try{if(a.value)return;a.value=!0;const $={quantity:1,product_id:n.item.product_id,product_sku:n.item.product_sku},{data:T}=await ze.cart.add($);T.success&&(D.cart=T.data,s("open-flow-checkout"),ECG.sync.emit("cart",{source:"easy-ai-chat",data:T.data}))}catch($){console.log("ecg error: ",$)}finally{a.value=!1}};function d(){D.handle===Sn?u():D.handle===Jn?p(n.item.sku):D.handle===Xn?m():D.handle===Zn?x():l(),y("add_to_cart",{product_id:n.item.product_sku,name:n.item.title,price:n.item.price,quantity:1})}const f=L(!1),h=async()=>{let{title:$,image:T,source:I}=n.item,R="/cart";const q=await Ar(T);q.status||(T=o),D.handle===Jn?R=R+"?utm_source=easyai&utm_medium=productcard":D.handle===Xn?R="/checkout/cart?utm_source=easyai":D.handle===Zn&&(R="/cart?utm_source=easyai&utm_medium=productcard");const G=Pr({title:$,image:T,source:I,isImageValid:q.status,cartUrl:R});s("send-message",G)};async function p($){if(a.value)return;const T="https://mediamart.vn/cart/add-items/";try{if(!$)throw new Error("Product IDs are required");a.value=!0;let I="";if(Array.isArray($)){if($.length===0)throw new Error("Product IDs array cannot be empty");$.forEach(G=>{if(!G||G<=0)throw new Error("All product IDs must be positive numbers")}),I=$.join(",")}else{if($<=0)throw new Error("Product ID must be a positive number");I=$.toString()}const R=T+I+"?utm_source=easyai",q=await fetch(R,{method:"GET",headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"}});if(!q.ok){const G=await q.text();throw console.log("Error response:",G),new Error(`HTTP error! status: ${q.status} - ${G}`)}await q.text(),f.value=!0,h()}catch(I){console.error("Error adding items to cart:",I)}finally{a.value=!1}}async function m(){var $;try{if(a.value)return;a.value=!0;const T=await Tm().addToCart({productId:n.item.product_id,quantity:1,serviceIds:[],giftItems:[],selectedReceiveAtWarehouse:!1});if(T&&T.data){f.value=!0,h();const I=($=T.data.products)==null?void 0:$.reduce((G,K)=>G+K.quantity,0),R=document.querySelector('a[href="/checkout/cart"] .bg-product-salePrice'),q=document.querySelector("#bottomMobileTab .bg-red.rounded-full");R&&(R.textContent=I||0),q&&(q.textContent=I||0)}a.value=!1}catch(T){console.error("Error adding items to cart:",T)}finally{a.value=!1}}async function x(){try{if(a.value)return;a.value=!0;const $=await Am().addToCart({variantId:n.item.product_id,quantity:1});$&&$.success&&(f.value=!0,h()),a.value=!1}catch($){console.error("Error adding items to cart:",$)}finally{a.value=!1}}function y($,T={}){["hotline","add_to_cart","checkout"].includes($)&&Dt.ctaClick({type:$,...T})}function _($,T={}){["product","page"].includes($)&&Dt.linkClick({type:$,...T})}const C=()=>{const{image:$,image_url:T}=n.item;return $||(Array.isArray(T)&&T[0]?T[0]:null)};return($,T)=>(v(),k("div",FM,[c("div",zM,[(v(),re(Gt(e.item.source?"a":"div"),{href:e.item.source,target:"_self",onClick:T[1]||(T[1]=I=>_("product",{url:e.item.source})),class:"rounded overflow-hidden w-[110px] h-[110px] flex items-center justify-center mr-3 flex-shrink-0"},{default:xe(()=>[C()&&!r.value?(v(),k("img",{key:0,src:C(),alt:e.item.title,class:"object-contain w-full h-full",onError:T[0]||(T[0]=()=>r.value=!0)},null,40,qM)):(v(),k("img",{key:1,src:b(o),alt:e.item.title,class:"object-cover overflow-hidden w-8 h-8 rounded-full"},null,8,BM))]),_:1},8,["href"])),c("div",UM,[(v(),re(Gt(e.item.source?"a":"div"),{href:e.item.source,target:"_self",onClick:T[2]||(T[2]=I=>_("product",{url:e.item.source})),class:"text-sm font-medium text-gray-900 line-clamp-2 group-hover:text-primary",style:{"word-break":"break-word"}},{default:xe(()=>[Fe(V(e.item.title),1)]),_:1},8,["href"])),!e.item.price&&!e.item.rating&&e.item.description?(v(),k("p",VM,V(e.item.description),1)):B("",!0),b(Nn)!==b(D).handle?(v(),k("div",HM,[c("div",WM,[e.item.texts&&e.item.texts.price?(v(),k("div",GM,V(e.item.texts.price),1)):e.item.price?(v(),k("div",KM,V(b(Qe)(e.item.price,{currency:e.item.currency})),1)):B("",!0)]),e.item.old_price>0&&e.item.old_price!==e.item.price?(v(),k("del",QM,V(b(Qe)(e.item.old_price,{currency:e.item.currency})),1)):B("",!0)])):B("",!0),Number(e.item.rating)||e.item.review_count?(v(),k("div",JM,[Number(e.item.rating)?(v(),k("div",{key:0,class:"ecg-stars",style:kt({"--rating":Number(e.item.rating)})},null,4)):B("",!0),e.item.review_count?(v(),k("div",XM," ("+V(e.item.review_count)+") ",1)):B("",!0)])):B("",!0)])]),f.value?(v(),k("div",ZM,[c("a",{href:{[b(Xn)]:"/checkout/cart?utm_source=easyai",[b(Jn)]:"/cart?utm_source=easyai",[b(Zn)]:"/cart?utm_source=easyai&utm_medium=productcard"}[b(D).handle]||"/cart",onClick:T[3]||(T[3]=I=>y("checkout",{product_id:e.item.product_id||e.item.product_sku,name:e.item.title,price:e.item.price,quantity:1})),class:"flex justify-center items-center p-2 w-full text-sm text-white rounded border transition-colors duration-200 bg-[#FC7600] border-[#FC7600] hover:bg-[#FC7600]/80 hover:border-[#FC7600]/80"},[U(b(Jt),{"stroke-width":"1.5",size:"18",class:"mr-1"}),Fe(" Thanh ton ngay ")],8,YM)])):(v(),k(be,{key:1},[b(D).forms.order&&e.item.price&&b(D).handle!==b(Nn)?(v(),k("button",{key:0,onClick:T[4]||(T[4]=I=>d()),class:se(["flex justify-center items-center p-2.5 mt-2 w-full text-sm bg-white rounded border border-gray-200",a.value?"cursor-pointer text-gray-400":"hover:bg-primary hover:text-white hover:border-primary text-gray-600"])},[a.value?(v(),re(Ht,{key:0,class:"w-[18px] h-[18px] mr-1"})):(v(),re(b(Jt),{key:1,"stroke-width":"1.5",size:"18",class:"mr-1"})),Fe(" Thm vo gi ")],2)):b(Nn)===b(D).handle?(v(),k("a",{key:1,href:"tel:19002628",onClick:T[5]||(T[5]=I=>y("hotline",{value:"19002628"})),class:"flex justify-center items-center p-2 mt-2 w-full text-sm text-gray-600 bg-white rounded border border-gray-200 hover:bg-primary hover:text-white hover:border-primary"},[U(b(dc),{size:"18",class:"mr-2"}),eL])):B("",!0)],64))]))}}},Symbol.toStringTag,{value:"Module"})),nL={key:0,class:"flex flex-col p-2 group"},sL=["href"],rL=["src","alt"],oL=["src","alt"],iL={class:"flex flex-col flex-1 mt-2"},aL=["href"],lL={class:"flex flex-wrap items-center mt-1"},cL={class:"mr-1 text-sm font-semibold text-red-500"},uL={key:0,class:"text-xs font-light text-gray-500"},dL={key:0,class:"flex items-center mt-1"},fL={key:1,class:"text-gray-500 text-xs translate-y-[1px] ml-0.5"},hL=c("div",null,"Thm vo gi",-1),pL={key:1,class:"flex p-2 border border-gray-200 group"},mL=["href"],gL=["src","alt"],vL=["src","alt"],yL={class:"flex flex-col flex-1 ml-3 min-w-0"},bL=["href"],xL={class:"flex flex-wrap items-center mt-1"},_L={class:"mr-1 text-sm font-semibold text-red-500"},wL={key:0,class:"text-xs font-light text-gray-500"},kL={key:0,class:"flex items-center mt-1"},SL={key:1,class:"text-gray-500 text-xs translate-y-[1px] ml-0.5"},CL=c("div",null,"Thm vo gi",-1),$L=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"CardProductRangDong",props:{item:{type:Object},type:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)}},emits:["open-flow-checkout"],setup(e,{emit:t}){const n="https://widget.easyaichat.app",s=e,r=t,o=L(!1),i=L(!1),a=pe(()=>{var d,f;return((f=(d=me.bot.config)==null?void 0:d.ui)==null?void 0:f.logo)||`${n}/link.png`}),l=async()=>{try{if(i.value)return;i.value=!0;const d={quantity:1,product_id:s.item.product_id,product_sku:s.item.product_sku},{data:f}=await ze.cart.add(d);f.success&&(D.cart=f.data,r("open-flow-checkout"),ECG.sync.emit("cart",{source:"easy-ai-chat",data:f.data}))}catch(d){console.log("ecg error: ",d)}finally{i.value=!1}},u=()=>{var f,h,p,m;const d=ec(s.item)??{};((h=(f=d.links)==null?void 0:f.variants)==null?void 0:h.length)>0?(Oh.actions.setSelectedProduct({...d,options:((p=d.links)==null?void 0:p.options)??[],variants:((m=d.links)==null?void 0:m.variants)??[]}),Oh.actions.toggleOpenPanelVariants(!0)):l()};return(d,f)=>e.type==="vertical"?(v(),k("div",nL,[c("a",{href:e.item.source,target:"_self",class:"rounded overflow-hidden flex items-center justify-center aspect-[1/1]"},[e.item.image&&!o.value?(v(),k("img",{key:0,src:e.item.image,alt:e.item.title,class:"object-cover w-full h-full",onError:f[0]||(f[0]=()=>o.value=!0)},null,40,rL)):(v(),k("img",{key:1,src:a.value,alt:e.item.title,class:"object-cover overflow-hidden w-8 h-8 rounded-full"},null,8,oL))],8,sL),c("div",iL,[c("a",{href:e.item.source,target:"_self",class:"text-sm font-medium text-gray-900 line-clamp-2 sm:group-hover:text-primary"},V(e.item.title),9,aL),c("div",lL,[c("div",cL,V(b(Qe)(e.item.price,{currency:e.item.currency})),1),e.item.old_price>0&&e.item.old_price!==e.item.price?(v(),k("del",uL,V(b(Qe)(e.item.old_price,{currency:e.item.currency})),1)):B("",!0)]),Number(e.item.rating)||e.item.review_count?(v(),k("div",dL,[Number(e.item.rating)?(v(),k("div",{key:0,class:"ecg-stars",style:kt({"--rating":Number(e.item.rating)})},null,4)):B("",!0),e.item.review_count?(v(),k("div",fL," ("+V(e.item.review_count)+") ",1)):B("",!0)])):B("",!0)]),c("button",{onClick:f[1]||(f[1]=h=>u()),class:"flex justify-center items-center p-2 mt-4 w-full text-sm text-gray-600 bg-white rounded border border-gray-200 hover:bg-primary hover:text-white hover:border-primary"},[i.value?(v(),re(Ht,{key:0,class:"w-[16px] h-[16px] mr-1"})):(v(),re(b(Jt),{key:1,"stroke-width":"1.5",class:"mr-1 size-[16px]"})),hL])])):(v(),k("div",pL,[c("a",{href:e.item.source,target:"_self",class:"flex overflow-hidden flex-shrink-0 justify-center items-center size-[100px] rounded"},[e.item.image&&!o.value?(v(),k("img",{key:0,src:e.item.image,alt:e.item.title,class:"object-cover w-full h-full",onError:f[2]||(f[2]=()=>o.value=!0)},null,40,gL)):(v(),k("img",{key:1,src:a.value,alt:e.item.title,class:"object-cover overflow-hidden w-8 h-8 rounded-full"},null,8,vL))],8,mL),c("div",yL,[c("a",{href:e.item.source,target:"_self",class:"text-sm font-medium text-gray-900 line-clamp-2 sm:group-hover:text-primary"},V(e.item.title),9,bL),c("div",xL,[c("div",_L,V(b(Qe)(e.item.price,{currency:e.item.currency})),1),e.item.old_price>0&&e.item.old_price!==e.item.price?(v(),k("del",wL,V(b(Qe)(e.item.old_price,{currency:e.item.currency})),1)):B("",!0)]),Number(e.item.rating)||e.item.review_count?(v(),k("div",kL,[Number(e.item.rating)?(v(),k("div",{key:0,class:"ecg-stars",style:kt({"--rating":Number(e.item.rating)})},null,4)):B("",!0),e.item.review_count?(v(),k("div",SL," ("+V(e.item.review_count)+") ",1)):B("",!0)])):B("",!0),c("button",{onClick:f[3]||(f[3]=h=>u()),class:"flex justify-center items-center p-1.5 mt-2 w-full text-sm text-gray-600 bg-white rounded border border-gray-200 hover:bg-primary hover:text-white hover:border-primary"},[i.value?(v(),re(Ht,{key:0,class:"w-[16px] h-[16px] mr-1"})):(v(),re(b(Jt),{key:1,"stroke-width":"1.5",class:"mr-1 size-[16px]"})),CL])])]))}}},Symbol.toStringTag,{value:"Module"})),TL=[(e=>(In("data-v-c03e5d9c"),e=e(),Pn(),e))(()=>c("span",{class:"ecg-loader"},null,-1))],Em=Object.freeze(Object.defineProperty({__proto__:null,default:nt({__name:"TypingIndicator",props:{variant:{type:String,default:"secondary"}},setup(e){return(t,n)=>(v(),k("div",{class:se(["inline-flex items-center",e.variant==="secondary"?"px-4 h-11 bg-gray-100 rounded-xl":""])},TL,2))}},[["__scopeId","data-v-c03e5d9c"]])},Symbol.toStringTag,{value:"Module"})),AL={},EL={class:"text-white",xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},IL=[c("path",{fill:"currentColor",d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z"},null,-1),c("path",{d:"M6 12h16"},null,-1)];function PL(e,t){return v(),k("svg",EL,IL)}const OL=nt(AL,[["render",PL]]),RL={},ML={class:"text-gray-800",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},LL=[c("path",{d:"M3 6h18"},null,-1),c("path",{fill:"currentColor",d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"},null,-1),c("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"},null,-1)];function DL(e,t){return v(),k("svg",ML,LL)}const NL=nt(RL,[["render",DL]]),jL={key:0,class:"text-center px-4"},FL={class:"mb-3 flex justify-center"},zL={class:"w-12 h-12 bg-red-50 rounded-full flex items-center justify-center"},qL={class:"text-base font-semibold text-gray-900 mb-2"},BL={class:"text-sm text-gray-600 mb-5"},UL={key:1},VL={class:"px-8 pb-4 mb-6 text-center text-gray-500 text-base"},HL={key:0,class:"flex items-center justify-center gap-2"},WL=c("div",{class:"text-sm"},"ang nghe",-1),GL={key:1,class:"text-gray-900"},KL={class:"flex items-center mx-auto gap-10 max-w-[320px]"},QL={class:"flex flex-col items-center justify-center gap-4"},JL=c("span",{class:"text-sm text-gray-900"},"Xa",-1),XL={class:"flex flex-col items-center justify-center gap-4"},ZL=c("span",{class:"text-sm text-gray-900"},"Gi tin nhn",-1),YL=c("span",{class:"text-sm text-gray-900"},"Chnh sa",-1),e7=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"ChatVoiceSetting",emits:["transcriptionComplete","editTranscription","cancelTranscription"],setup(e,{emit:t}){const n=Rt({loader:()=>Promise.resolve().then(()=>Em)}),s=t,{isOpen:r,showPermissionDenied:o,permissionMessage:i,hidePermissionDeniedMessage:a,stopSpeechRecognition:l,releaseMediaResources:u,startSpeechRecognition:d,isSpeechRecognitionSupported:f,setProcessing:h,recordedTranscript:p}=Ec(),m=L(!1),x=yr("chatViewRef",null),y=()=>{a(),m.value=!1,r.value=!1},_=()=>{l(),u(),m.value=!1,r.value=!1,s("cancelTranscription","")},C=async()=>{h(!0);try{l(),await new Promise(E=>setTimeout(E,100)),p.value&&p.value.trim()!==""&&s("transcriptionComplete",p.value)}catch{}finally{h(!1),u(),m.value=!1,r.value=!1}},A=()=>{l(),p.value&&p.value.trim()!==""&&(s("editTranscription",p.value),p.value=""),m.value=!1,r.value=!1,u()};return Ee(o,E=>{E&&(m.value=!0)}),Ee(r,async E=>{if(E&&!m.value){if(!f()){m.value=!0;return}h(!0),m.value=!0,await d(),h(!1)}}),Ee(m,E=>{E||(u(),r.value=!1,a())}),(E,$)=>(v(),re(b(Lr),{modal:!1,open:m.value,"onUpdate:open":$[1]||($[1]=T=>m.value=T),"should-scale-background":!1},{default:xe(()=>[U(b(Ss),{to:b(x)},{default:xe(()=>[c("div",{onClick:$[0]||($[0]=T=>m.value=!1),class:se(["drawer-overlay-custom",{"drawer-overlay-custom--open":m.value}])},null,2),U(b($s),{class:"px-4 pb-10 pt-12 bg-white absolute bottom-0 rounded-t-2xl left-0 right-0 outline-none z-50 overflow-hidden"},{default:xe(()=>[b(i)&&b(i).type==="error"?(v(),k("div",jL,[c("div",FL,[c("div",zL,[U(b(l_),{class:"w-6 h-6 text-red-500"})])]),c("h3",qL,V(b(i).title),1),c("p",BL,V(b(i).message),1),c("button",{onClick:y,class:"w-full py-2.5 px-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium"},"  hiu ")])):(v(),k("div",UL,[c("div",VL,[b(p)?(v(),k("div",GL,V(b(p)),1)):(v(),k("div",HL,[U(b(lc),{size:"18"}),WL,U(b(n),{size:"sm",variant:"default"})]))]),c("div",KL,[c("div",QL,[c("button",{onClick:_,class:"bg-gray-100 rounded-full size-[80px] flex items-center justify-center hover:bg-red-50 hover:text-red-600 transition-colors"},[U(NL)]),JL]),c("div",XL,[c("button",{onClick:C,class:"bg-blue-500 rounded-full size-[80px] flex items-center justify-center pulse-animation-3"},[U(OL)]),ZL]),c("div",{class:se([b(p)?"opacity-100":"opacity-50 pointer-events-none","flex flex-col items-center justify-center gap-4"])},[c("button",{onClick:A,class:"bg-gray-100 rounded-full size-[80px] flex items-center justify-center hover:bg-orange-50 hover:text-orange-600 transition-colors"},[U(b(f_),{size:"26",class:"text-gray-900"})]),YL],2)])]))]),_:1})]),_:1},8,["to"])]),_:1},8,["open"]))}}},Symbol.toStringTag,{value:"Module"})),t7=["disabled"],n7=Object.freeze(Object.defineProperty({__proto__:null,default:nt({__name:"ChatVoiceTrigger",props:{assistantProcessing:{type:Boolean,default:!1},voiceProcessing:{type:Boolean,default:!1}},setup(e){const{openChatVoice:t,checkMicrophonePermission:n,showPermissionDeniedMessage:s}=Ec(),r=async()=>{(await n()).granted?t():s()};return(o,i)=>(v(),k("button",{onClick:i[0]||(i[0]=a=>r()),class:se(["button-mic-trigger",e.voiceProcessing&&"voice-processing pulse-animation-1"]),disabled:e.assistantProcessing||e.voiceProcessing},[e.voiceProcessing?(v(),re(b(lc),{key:0,size:"16"})):(v(),re(b(ep),{key:1,size:"18"}))],10,t7))}},[["__scopeId","data-v-d2852a2c"]])},Symbol.toStringTag,{value:"Module"})),s7={class:"px-4 pb-1 pt-2"},r7={class:"flex items-center w-full justify-around pb-3 pt-3.5 px-2 rounded-3xl shadow-sm border border-gray-100 bg-white"},o7=c("div",{class:"text-xs font-medium"},"Trang ch",-1),i7=c("div",{class:"text-xs font-medium"},"Nhn tin",-1),a7=c("div",{class:"text-xs font-medium"},"Tr gip",-1),l7=c("div",{class:"text-xs font-medium"},"n hng",-1),c7={__name:"ChatMenu",props:{currentScreen:{type:String,required:!0},menu:{type:Object,default:()=>{}}},emits:["change-screen"],setup(e,{emit:t}){const n=t,s=r=>{n("change-screen",r)};return(r,o)=>(v(),k("div",s7,[c("div",r7,[e.menu.home?(v(),k("button",{key:0,onClick:o[0]||(o[0]=i=>s("home")),class:se(["flex flex-col items-center gap-1 transition-colors",e.currentScreen==="home"?"text-primary":"text-gray-500 hover:text-gray-600"])},[U(b(e_),{size:20}),o7],2)):B("",!0),c("button",{onClick:o[1]||(o[1]=i=>s("conversations")),class:se(["flex flex-col items-center gap-1 transition-colors",e.currentScreen==="conversations"?"text-primary":"text-gray-500 hover:text-gray-600"])},[U(b(i_),{size:20}),i7],2),e.menu.help_center?(v(),k("button",{key:1,onClick:o[2]||(o[2]=i=>s("helps")),class:se(["flex flex-col items-center gap-1 transition-colors",e.currentScreen==="helps"?"text-primary":"text-gray-500 hover:text-gray-600"])},[U(b(Jh),{size:20}),a7],2)):B("",!0),e.menu.order_tracking?(v(),k("button",{key:2,onClick:o[3]||(o[3]=i=>s("order_tracking")),class:se(["flex flex-col items-center gap-1 transition-colors",e.currentScreen==="order_tracking"?"text-primary":"text-gray-500 hover:text-gray-600"])},[U(b(uc),{size:20}),l7],2)):B("",!0)])]))}},u7={class:"flex flex-col h-full w-full bg-gray-50"},d7={class:"flex-1 overflow-hidden"},f7={key:0,class:"flex-1 px-4 pb-1"},h7=["innerHTML"],p7=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"ChatContainer",emits:["close-chat"],setup(e){const t=Rt(()=>Promise.resolve().then(()=>_D)),n=Rt(()=>Promise.resolve().then(()=>G8)),s=Rt(()=>Promise.resolve().then(()=>BD)),r=Rt(()=>Promise.resolve().then(()=>oj)),o=pe(()=>{var _;return(_=me.state.bot)==null?void 0:_.config.ui.signature}),i=pe(()=>{var _,C;return((C=(_=me.state.bot)==null?void 0:_.config)==null?void 0:C.page)??{}}),a=pe(()=>!i.value||Object.keys(i.value).length===0?!1:Object.values(i.value).some(_=>_&&_.enabled===!0)),l=pe(()=>{var _,C,A;return{home:((_=i.value.home)==null?void 0:_.enabled)||!1,help_center:((C=i.value.help_center)==null?void 0:C.enabled)||!1,order_tracking:((A=i.value.order_tracking)==null?void 0:A.enabled)||!1}}),u=pe(()=>a.value),d=pe(()=>{const _=["conversations"];return l.value.home&&_.push("home"),l.value.help_center&&_.push("helps"),l.value.order_tracking&&_.push("order_tracking"),_.push("chat"),_}),f=()=>a.value&&l.value.home?"home":"conversations",h=_=>_==="chat"?"conversations":d.value.includes(_)?_:f(),p=pe(()=>{const _=me.state.chatState.viewTab;return h(_)});Ke(()=>{let _=me.state.chatState.viewTab;me.state.chatState.shouldOpenChatScreen?_="conversations":(!_||_==="chat")&&(_=f());const C=h(_);C!==me.state.chatState.viewTab&&me.actions.updateChatState({viewTab:C})});const m=_=>{me.actions.updateChatState({viewTab:_})},x=()=>{if(l.value.home){me.actions.updateChatState({viewTab:"home"});return}me.actions.updateChatState({viewTab:"conversations"})},y=_=>{me.actions.updateChatState({viewTab:"conversations"}),gt(()=>{setTimeout(()=>{const{send:C}=Xs();C({message:_})},200)})};return(_,C)=>{var A,E,$;return v(),k("div",u7,[c("div",d7,[(v(),re(Xr,null,[p.value==="home"&&((A=i.value.home)!=null&&A.enabled)?(v(),re(b(t),{key:0,onCloseChat:C[0]||(C[0]=T=>_.$emit("close-chat")),onSendMessage:y,onSetScreen:C[1]||(C[1]=T=>m(T)),dataHome:i.value.home},null,8,["dataHome"])):B("",!0)],1024)),(v(),re(Xr,null,[p.value==="conversations"?(v(),re(b(n),{key:0,class:"h-full w-full pb-1",showMenu:u.value,onClose:x},{actions:xe(()=>[c("button",{onClick:C[2]||(C[2]=T=>_.$emit("close-chat")),"aria-label":"eac-close-chat",class:"size-8 rounded-lg flex items-center justify-center bg-white/10 hover:bg-white/20"},[U(b(aa),{size:"16"})])]),_:1},8,["showMenu"])):B("",!0)],1024)),(v(),re(Xr,null,[p.value==="helps"&&((E=i.value.help_center)!=null&&E.enabled)?(v(),re(b(s),{key:0,onClose:x,onCloseChat:C[3]||(C[3]=T=>_.$emit("close-chat")),dataHelpCenter:i.value.help_center},null,8,["dataHelpCenter"])):B("",!0)],1024)),(v(),re(Xr,null,[p.value==="order_tracking"&&(($=i.value.order_tracking)!=null&&$.enabled)?(v(),re(b(r),{key:0,onClose:x,onCloseChat:C[4]||(C[4]=T=>_.$emit("close-chat"))})):B("",!0)],1024))]),(v(),re(Xr,null,[u.value&&!["conversations"].includes(p.value)?(v(),re(c7,{key:0,"current-screen":p.value,menu:l.value,onChangeScreen:m},null,8,["current-screen","menu"])):B("",!0)],1024)),c("div",{class:se(["flex items-center justify-center w-full py-1",[o.value&&o.value.length>35?"flex-col text-center":"flex-row",p.value==="conversations"&&"bg-white",o.value&&o.value.length<=35&&"pl-6 pr-4"]])},[o.value?(v(),k("div",f7,[c("div",{class:"text-[10px] text-gray-500 font-medium leading-[120%]",innerHTML:o.value},null,8,h7)])):B("",!0),U(Xp)],2)])}}}},Symbol.toStringTag,{value:"Module"})),m7=st({top:0,left:0,container:null,title:null,link:null,aiText:{},isLoadingSummary:!1});function g7(e){const t=e.trim();return t.startsWith("#")?"id":t.startsWith(".")?"class":null}const v7=(e,t)=>{const n=g7(t),s=t.slice(1);return n==="class"?e.classList.contains(s):n==="id"?e.id===s:!1};function y7(){const{widgets:e}=Js(),{container:t,title:n,top:s,left:r,link:o,aiText:i,isLoadingSummary:a}=Ct(m7),l=()=>{t.value=null,n.value=null},u=x=>{var E;const y=x.getBoundingClientRect(),C=["h2","h3",".product-title","strong a",".name_pro",".card-title",".product-name",".title-2"].reduce(($,T)=>{if($)return $;const I=x.querySelector(T);return I?I.textContent:$},""),A=x.tagName.toLowerCase()==="a"?x.href:((E=x.querySelector("a"))==null?void 0:E.href)||"";return{container:x,title:C,left:y.left,top:y.top,link:A}},d=x=>{l();const y=[".product-card",".card-product",".item-product","#adv3 .c","#uc .c",".km .c",".km .h",".c.jcarousel-item",".q .x",".pkd .h",".pkd .c",".product-card"];let _=null;for(const C of y)if(v7(x.target,C)){_=x.target;break}if(!_)for(const C of y){const A=C.replaceAll(".w-1/2",""),E=x.target.closest(A);if(E){_=E;break}}if(_){const C=u(_);t.value=C.container,n.value=C.title,s.value=C.top+8,r.value=C.left+8,o.value=C.link}else t.value=null,n.value=null,s.value=0,r.value=0,o.value=null},f=()=>{t.value&&l()};Ke(()=>{var x,y,_,C,A;((y=(x=e.value.product_card_summary)==null?void 0:x.config_enhances)==null?void 0:y.length)>0&&((A=(C=(_=e.value.product_card_summary.config_enhances[0])==null?void 0:_.widgetSettings)==null?void 0:C.selectorProductCards)==null?void 0:A.length)>0,document.addEventListener("mousemove",d),document.addEventListener("scroll",f),window.addEventListener("resize",f)}),Kt(()=>{document.removeEventListener("mousemove",d),document.removeEventListener("scroll",f),window.removeEventListener("resize",f)});const m=((x,y)=>{let _;return(...C)=>{clearTimeout(_),_=setTimeout(()=>x(...C),y)}})(async()=>{var x;try{if(!o.value||i.value[o.value]||a.value)return;a.value=!0;const{data:y}=await ze.summary.getSummary({handle:(x=D.bot)==null?void 0:x.handle,source:o.value});y!=null&&y.highlight&&(i.value[o.value]=y.highlight),a.value=!1}catch{a.value=!1}},500);return Ee(o,x=>{x&&m()}),{top:s,left:r,container:t,title:n,aiText:i,link:o,isLoadingSummary:a}}const b7={class:"relative ask-ai-group"},x7={class:"flex items-center bg-white border border-b-[3px] border-gray-200 rounded-lg h-8"},_7={class:"flex justify-center items-center text-gray-900 size-8"},w7={class:"size-[20px] overflow-hidden rounded-full"},k7=["src"],S7=c("div",{class:"text-xs w-[0px] group-hover:opacity-100 group-hover:w-[72px] duration-200"},[c("div",{class:"text-gray-900 whitespace-nowrap opacity-0 delay-100 group-hover:opacity-100"}," Tr l AI ")],-1),C7=["onClick"],$7={class:"flex-1"},T7={class:"flex flex-col px-1 mt-1"},A7={key:0,class:"text-[12px] p-2 rounded-xl bg-blue-50 mt-0.5"},E7={class:"ask-ai-result"},I7={key:1,class:"text-[12px] p-2 rounded-xl bg-blue-50 mt-0.5"},P7=[c("div",{class:"ask-ai-result"},"AI ang x l ...",-1)],O7=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"WidgetFeatureSummaryCard",props:["bot"],setup(e){const{container:t,title:n,top:s,left:r,link:o,aiText:i}=y7(),a=L(null),l=L([]);let u=L(null);const d=m=>{ECG.send(m)},f=()=>{if(!i.value[o.value])return;const x=`${i.value[o.value]}`.split(" ");l.value=[];let y=0;u.value=setInterval(()=>{y<x.length?(l.value.push(x[y]),y++):clearInterval(u.value)},60)},h=()=>{l.value.length>0||(clearInterval(u.value),f())},p=()=>{clearInterval(u.value),l.value=[]};return ds(()=>{i.value[o.value]&&l.value.length===0&&(clearInterval(u.value),f())}),Ee(t,()=>{t.value&&a.value.style&&(a.value.style.top=`${s.value}px`,a.value.style.left=`${r.value}px`),p()}),(m,x)=>{var y,_;return v(),k("div",{onMousemove:x[2]||(x[2]=cn(()=>{},["stop"])),onMouseover:h,ref_key:"ShapeDetectElementRef",ref:a,class:se(["fixed z-50 duration-100 delay-150 group",b(t)?"opacity-100 visible ":"opacity-0 invisible pointer-events-none"])},[c("div",b7,[c("div",x7,[c("div",_7,[c("div",w7,[c("img",{src:(_=(y=b(D).bot)==null?void 0:y.config)==null?void 0:_.ui.logo,class:"object-cover w-full h-full"},null,8,k7)])]),S7]),c("div",{onMouseover:x[0]||(x[0]=cn(()=>{},["stop"])),onMousemove:x[1]||(x[1]=cn(()=>{},["stop"])),class:"ask-ai-quick-replies"},[(v(!0),k(be,null,Ie([{name:" Tm tt u nhc im",content:`Tm tt u nhc im ca ${b(n)}`},{name:"  Sn phm tng t",content:`Tm Sn phm tng t vi ${b(n)}`}],(C,A)=>(v(),k("div",{key:A,class:"tag-suggestion",onClick:E=>d(C.content)},[c("div",$7,V(C.name),1),U(b(Io),{size:"12",class:"text-gray-600"})],8,C7))),128)),c("div",T7,[U(zo,{title:"AI nh gi"}),b(i)[b(o)]&&l.value.length?(v(),k("div",A7,[c("div",E7,[(v(),k("span",{key:l.value.length},V(l.value.join(" ")),1))])])):(v(),k("div",I7,P7))])],32)])],34)}}}},Symbol.toStringTag,{value:"Module"})),R7={class:"flex items-center gap-1"},M7=["src","alt"],L7={class:"flex-1 truncate text-sm tracking-tight relative text-gray-500"},D7={class:"mt-2.5 text-base text-gray-900 leading-[140%] line-clamp-2"},N7=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"ChatBoxNewMessage",emits:["toggle"],setup(e,{emit:t}){const n=t,s=pe(()=>me.state.chatState.lastUnreadMessage),r=pe(()=>{var a,l;return(l=(a=me.state.bot)==null?void 0:a.config)==null?void 0:l.ui}),o=pe(()=>{if(!s.value)return"C tin nhn mi";const{content_type:a,content:l}=s.value;switch(a){case"text":return l||"C tin nhn mi";case"image":return` gi ${Array.isArray(l)?l.length:1} hnh nh`;case"video":return` gi ${Array.isArray(l)?l.length:1} video`;case"file":return` gi ${Array.isArray(l)?l.length:1} file nh km`;case"gif":return` gi ${Array.isArray(l)?l.length:1} nh gif`;case"sticker":return` gi ${Array.isArray(l)?l.length:1} nhn`;case"product_cards":return`C ${Array.isArray(l.elements)?l.elements.length:1} sn phm c  xut`;default:return"C tin nhn mi"}}),i=()=>{n("toggle")};return(a,l)=>r.value?(v(),k("div",{key:0,onClick:l[0]||(l[0]=u=>i()),class:se(["p-4 py-3 min-w-[180px] max-w-[280px] cursor-pointer border bg-white rounded-2xl border-gray-100 box-shadow-md",[r.value.alignment.position==="right"?"ml-auto":"mr-auto"]])},[c("div",R7,[c("img",{src:r.value.logo,alt:r.value.name,class:"size-5 object-cover rounded-full overflow-hidden"},null,8,M7),c("div",L7,V(r.value.name),1)]),c("div",D7,V(o.value),1)],2)):B("",!0)}}},Symbol.toStringTag,{value:"Module"})),j7="data:image/webp;base64,UklGRtAGAABXRUJQVlA4WAoAAAAQAAAATwAATwAAQUxQSHQDAAABoLRtmyHJXtAbEV+Ojd2xbdu27XN2trWybdu2Mba9sn1OZkR876KcGRExAWi7ywCg756XP/7NuLmrCtVi1dxx3zxx+V59ASBzKLlYwOx+6/fz2MZ5P9y2hwWslEkA7PTgdNaGEKPW0xhDYO2Mh3YGIGVxBjj9D5Lqg7KNGryS/OMMwLgyWAHOn0yqj+xg9EpOPh8Q2zEBDhlN+sCOB0+OPgSQzhhBnzdIH1nK6Mk3+kBMB6zBkQsZAksbIhceAWvb5oD7yIKlLsh7AdcmgfmMMbLkMfIzA2mLoOdwFsrSa8HhPSFtcOgziTkrmXNSb7iWLLqOZ8GK5hzXFbYFA/zGnJXN+StgmnN4iTkrnPNFuKYyXE7PSntehqwJh62UWi1l3BKukcFQelbccwhMA8FVLFj5gldC6lgMXkmtnnLlIJgawRMsmMCCj0MAWGyQU1OgzNeHBQQP0zOJng9BYNB3CTUNysV9YQSX0TORnpdCLH5nSEXgb7DYJFJToQwbA1fQM5melwMfMaTkQ3Sfw5iOyNnddo5MatzpYsaURF70KENKAh/5OjVfj2NMSeS4edSUKOetZmJX+9R4plY1Of+n5v/l1JQol89JzZwhjCmJHPIuQ0oC370jNXceT02J8vgNV1PToVyzEUYxpiNyFPAEfTo8nwCOZkhH4NFAr4XUVCgX9YLgVfpUeL4KcTiAMRWRB8LBYCRDGgJHwQCC8+nT4HkBBDAw0xhTEDnNwAAQnEufAs/zIKg1+JeheoFDYFDXYTeqVk65O1w9CO5nUbWCD0DQ0ABj6KvlORYwjeCwac5Ypch8Mzg0m+F4qlZHlScgQ/MZrmLQqmjg1cjQquAeBq2GBt4Lh5aNw72sRlTeB2tag3G4mbECnrwO1qCdxuELhtIVjKfAGbQ3w6X0JQuRU7ZGhnYLzmYoVSzIpy0ydOCUUsWCnHQw4NB+h2NKFDy56GpADDpyKGNTqu3S4EnOvbU3IOiow37NqCfpfdBWNHhPkn9f1B0Qg07tTq0XPcn5OWuDbzKw1g+/a3sAYtBpi53qBU+ueHL7Hhuf/fS/C9nioiHPnrsxACsGnbdYL1IZlJx140DU77PNkZfc+uCzL730zIO3XnrkNn0AwIhFOR1eoZL8/XQHiDVWxKBlI2JRWgN5pSi+PhBAZlDfWCdNOmvQcVZQOCA2AwAAEBIAnQEqUABQAD6RQptKJaOpJqZzPAEgEglsALcBrtmeJf3b8pvZUq3924fE0MNfzAP033BHni+jX0AP8B1G3oAeXF7I37m+jk0QVoKAEM28ZX1Bvu/Qd/YAwzNKM/u7WIhKfKfM5UCi/VqPyy1fqXAeNELL+x/0vfCAyanmz6ARgozz/YZk1AcINuzmw5zBsUNBv6rWKBQAAP7+hwO2nl3XheqGaUHr0VXrM5+plmfGH6mWj3uls1bOfMt/ud8vaff/3PhdErNr0VYDglGwtuE5TdY4tJsi/qmB3Fyu5ekjJHM3+/ALHhQ3AapMI0mrValYr818USUxcL7L8aP8m9zXKUbcY/J8IJmEIGTvGZFEO2AOKEk+nYnR4mvbWxhnUJIhpjZtosZGnU7Q64JsR0WWKjYSHFjmEeWxOfJZbvVtvUW9H8H83STcpAL1D3wqajrI14tJWvWwkhihI9066wKy2DJd6uXWfdj3kisfWmJ+Ps/eN64Mv/G3t8kniLVI9P6QP0BBeC1hKku6NqN/01nmr92masef+qGZRMPptSyZivex0QbQd57ZSZkAgs+kPcQQrFrDMZiMzW7KBSZznEGVv1gxivHe50KOxW+90WcrWvmhcTMt2Bvy15JsAySPkK5HGwmMkSMngEhLnwiRaP2W/hetQIA9ZQzWh4rlCIyzfmO71hUcFH4k40wS15dyhTB4tLXLF+zTJT/I2XzBOk0viLeRaxek2Dxi0LQgg/S+9pyWdlt/U0HkhjqJapySw7JzPSRqHyUm8v6b6G31v7M/iei1qCaj1Xap9JP4/54SdujaMqtntHw0rzHM11NGEepodiBwVGkV0kdu74zCvu9Szrw2upBo7hcEkQ6T/HoKnK0XY/ZS1Ta3y0CLl53I/3/JQxt8shI5RsK2qmH0jJYZET2hUWKaH8c7qg17F7dDpRjS6kstyAk9Z8gygk/41sQlApXP0e+5ofkEuaT8Pr4b4KZRrnfpBiBtMhB/PdllZM1VCbItbHtdP4kxENVhE+dheJKTH7ZpVZvKiGo5XZaowwhvlh3hDT3xiX6S+c0GwE9Cq4+XZ6HYyBZhvuvgBPMlxyAA",F7="data:image/webp;base64,UklGRs4HAABXRUJQVlA4WAoAAAAQAAAATwAATwAAQUxQSPICAAABoLNt2zk/un7v+86x6dZV2K3KP1ZfwFXMT7A2O1Vx0q5tI7adbGXbnnlxF+P5PdVWETEBDLAKFTDlojn3PbLx+Oc//90q6lriP79+9cH2Zx5YNn46QMMxigG48PpXPmlpuN9suP9SB94PLVScddNBteeUci6ln1JyTimr/aOHzwPvhuI8LPhBUky5aLglxSzp5QkIQwhwzVGplTSiOUp6biaVG1AVmP6mFLNGORa1boEwEAdL/lVKGvUobT6HxgA8rJOialha+nGcRl8e3lbMqmdLuoJGHw62qqnaRukKGj1V8JaaqnGSJgi9BNaoqVon/XQurltgkaJq3tJWqi6Oaf8o100t3Ubo5HlDUbUvas3CtQWuUZKBUc/h2+CoDSqawENgrqJMjHqpzbFbyQapnIfzTKrIyKiHaARWKVqR9aED/5GyFcq6BMZUZGbU/XCToh1JG+B5S4q+Ob06pWyHVMan/qZiSNbSy2Rq0gMLlW15+g4lS7K2Lbfmg8dtKfrqVWt+3aBsifTPdmvibmvKXmv0/4vd1uTt1rQ2WPP3q0qWFP38uDWfL7cl6/jt1mxYqGxJ0iOXydSke6f+pmJI1uzqlLIdRa0LeV7RjqyPT+MmS5JehjEVO6KuA/+RshnSBQRWKVqRdIDKM6liRdQNBBy7lWwo+v0cKgJzFG1oaRWB9qNKFhT9Nw0HBK6xoamHCLR73lSsX9LXU6g6OKb/q1y3rHgJns6BJYp1i1pEg+6BdWrWq6k1NOixgrfVrFNTb0PVCw62qlmfpraBo3cPbynmeuSod8DTr4c1UqxDlNaDp38Hi/5WSqOWkv5dCo5BVoGpr0sxjVKK0lszCBUDDnD1UanEPBo5FunYtRAYvPMwZ5ekEmMuwyg5xiJp91zwjqGGCiZWfaSOOaWUcp8ppZTV8ePVk0Bg6MGBH7vp+VO/aYi/n3r+5nEPLjCSPgBUUy9beMfyx17bsH333n0d9+7evuG1x1fesejyaRVA8AwSVlA4ILYEAADQFwCdASpQAFAAPpE8mkiloyKhKlYMsLASCWwAwRUM/xA2Fnrn5VcyryxE3d6c0ePj1L+YB+nXSS/ZL1GfsT+zvYi9AD+l/3jrO/QA8s/9tfg4/dT0o80i/sfaNXl76ct5g9pApl3j6+n9/l+3Yzf7Gq+vivPeDsxrS8Ac+g4ROxcsYb1Dynxi3fMahIR8AmwnnORqL3l+YpsU6AovnW9ixEvnik3G1/u0FppJvwgoFpoTGooCj/HXcsHZGT+ppelIf9KZwSagAP64fDB/EPBHP9CQUeoZif9cesHyt44/1mUNwqV2KO+5KYBIwMFzENaQSKM5qn/W/jgsPwWGtAzYDwipxSe+YbHkEhlUzrCw3YoOR8Vx+32F5x9ClgVDh96Z6PnpU1Kv4QtLm4ohGi8uQBKAfuXCwPQHV9/jkNUtephv3YHaxZVG3oVJ8h5jQFNXXrcoyK+PaXueO1hhfYuqWViv5TA616B5ahMnR1YL/P0EOECH6QJtZxM0sDjTaNdbcXsm0f/J2Ts6cSA04Ujrr6swaIlZB18HnLJBgs46U6sphVTPoylZ4ATN0B/y4/q+zfyD8A0Mzl1CcwkgeLIMMg5EF9I51UV7TxBzZiSGd/3qN5Sug+24Pf32UJLb3H8aoLhdU6bZESTkB7FYPclMU3EdisGAacV97K9+z1iBK4fei7Ih1TXyM1IUMDjBZi6e5ihvUjTKdUj0NeY7zbBZ9L/c4j9s9OpB0SCK50s6DuzvtOFQpQuRN8/XvOHsrgnEvFFlkHclw9QWBh7UHnel71YTiGSEoIXdnAbKpa+N+bIaSiuLUWx2C4su0zXbFAu9Q4NvkWKPO/arQCYj2dZTVNa1uE/fO+KNXRN4y3B65trNNG02vu9zOQzPOslKfoyr6uR8zdPyBYPoMimypbm+cR7DBudc0ulUN34dOuG3z0Gida533lBAmQP2PBojhagBEJms3kDJ70DD6T/agFpi3S6fPt2O9zDxoPK1qTqIxfC3xkmYAjXX+eqDEBQnE2UI6MSgDpFfq3WA7i8ynHPx5yZw31WxqGez86vDf80bHiNkeDTdusq3x1ndKLV7xUzWVhDmjk+jD/GS2w9kIdxsHPaUK66/rvo/VerYa/NyTRCpYtncY46YUzH5IrWOI6IYNjlxfMWMvwUFKqZFhbfIDvtMYhDOLpln9CSPJW866m+/rF6dMr4BrOENDp6ZQg7Y/uvPM/ZvgIIBDSfOixn0kWCPFJvq7QPW/sSLHlzzxCsfd1bxfBwGOAz0wJ388A9w2/X0lJH+Ugd/bXlSFAIgaihWPLmtamdoC35/RHQ0cWowD2z3yFWaAZvuIQEgkelnrFFNBqRHO+T/8WmFMI8ePR4zzlScQr0mHLjIc5xqM+7ENp7QABi+k6D55pRS6KVMqab4+mt68FCRlA/e8mdr01+nGVIf2L/PdacR75ZfSLyaHhSeYX/yl67hz0nH5BeEkBYqrUZI43bZg5QLUspHsaCf+NGtMA2eFvwBsUQMfm8nPVLb53yqsm5rs9mMqDMvC0YEOFM237KrGPE3tfbzFQ4YSU17vqFw3zTjUKAWoeIWUwlY+3JjlE8+RUCFvuByPBjDAAA=",z7="data:image/webp;base64,UklGRiIDAABXRUJQVlA4WAoAAAAQAAAAOwAAKQAAQUxQSBYCAAABmS8wRPQ/EHS1bTumV9fzft/3W4PYNiu7SmencrIFTmfV2YOks50qG2Cvtarf9syHp5hZmmcHIiZgAgjAFwFQJ2ukkbLSUurVqlGlQrkygYDHcRyloGKxWCgvL2/QkEF9evXp1KVDhzZtIoAvgkIhIll7rDTdGA2qoDQjfdp88cgtQzyxAiSOuKEGCpVSBaKI+DtVRBUTwpcy02ZocsAznhjgiZ13BkLCERDCwX/qFPmnSqnEGE/tdZsv4ovscEbECaCUhQNEfLfM9ZUT8VwB4aDkfaHARVsIbDRFzAODPmwyViMsAwWLIlZuqUcwH4QJKCwGTGEFmAs1RrMiMBmyUmBUYLQKWVUgrKSkZAhlBKiWlgYFmwKBlAZmoESDWjCrUKuKHaBKJTsKFQJ2gIDHkgPTCUuRkKW8HDsCQwbZAQb0sSPQpweEnW6dzCiR06WNGaBfl3aDqihhQqFTtzZdxoFNhRahPk2gjIi/AL8hYQP4DvgARgU+A96DsOFJfAC889MMMY+BUOAVeHyRE+5Awim5WAWcBEQ8d513FkKOEBAloqBUogIOgC8HMXHOcTdUQmECqogoEP9EFagiQjgQwml1GDw5AODcNMV+a0wxSr1yDv5rUSCKAKEezb574SV48gBAJXwtbgAysrKy0hqk1KlRq0qFCuUCgYDHEQ6gVCwWC+Xl5Awa0K9Xt07tWnUZBgC+HABWUDgg5gAAAHAGAJ0BKjwAKgA+kUKcSiWjoqGquAgAsBIJQBmSPD/btNJ4B+ICARCIkGqat3IjrK03S10Sw6ypi4rmAAD+75rHhRPAdCf3sF3YLuwX+t8bGiqpePf6+ZV0dxFTe7agBbBH1AchhTT7x9k/dJRfGFcPovaDi8eVUNUP1q3g8+OUoGyQgbRPetMkJI13uHCbkXFXPGtBGJws9i1MH8nd+a/UHPeexfV+h69/xluP6t0TfCatucBVlP+EPTXNe3S/cE/iobCvjR5ICW3hH/Yn/qxzc/Gmf3c9jY4ABATpB/fLP+nwAAAA",q7="data:image/webp;base64,UklGRugEAABXRUJQVlA4WAoAAAAQAAAAOwAAOwAAQUxQSHcCAAABoF1texox+izL4aQL5mWqIlAB3WMPyxhmTi4ZqqD7oWVuYCzpf4MeW2ogIiZAizsvacmOvT88eDL5/ffJ04c/7ntniSTvNLjz0qqdl0aJzml8edcqybthKi9t+OkfgBRjMjNLKSaAf49tlHw1gJfWXgdiSCyYQgRurJN8b43qzw2C0asFsC+8mn6qWh+NIDBggPEnqqsenHQQWmNQa+Gw5BZy0lmIDB6N85JbwEm3aY0MreWu5DpV0m3mZDrnrlR1qXWWOdnOuaC6Q6ODtGTcckTNW7w+AsvB3mLGJ/JvqFSPiOREZOxVveb1OS150fKlvCSntYblZrBOTvK6TiA3Ajfl5bSBbDsBm+S8fiKUEDgur1X/YCUY/62WdhIpMrBbukQo5aqWjEhlJCZLdySKtff2kgazviIHfiCWc+xBOYnHT0jlPJ9gpRiz33uwN3cx7PUe/swBeyPWw6SHbI3ZU1IpiecPS3r8I7GUyLF9pHIOvJMo1t5bMiaVkZgs1WVCGYGr0i7iUNbbHmnVv1gJxv9r5HWMUELghLzTRobuCTbLyesGIb/ALdWS0zrDcjNYLyfJ6wva3Fq+lpekSn5MzCsybVS9Jq9PMMvJjM/k9eZGh2lzajmqRm+vdZ55PnMuqlbHSrrLPJc596Wqi5x0l9ZysJb7klN3J13A4nDRuCg5LeqkI9DaMNbCUclp8arWJ2MIQwSYfqa6Uq+N/JdAsH4sAF81atS3l9bdBGJIi6QQgFvrJa/+Ky9tOv4fQIwpmZmlFCLAfyc2S77SoM5Lq3dfmRidbXJ1z2qpdhrceUlL3z1w7PHz2Z9/zp4/PnbgvaWSvNPiAFZQOCBKAgAA0A8AnQEqPAA8AD6ROppIpaMioSwSvMiwEglsALc91bx/6T+O/M+a4978nj5mJyfmAfp90gPMB+z3q8f3L1K+gB/iOox9ADy4PZL/dbCL/5zM1Vzm6J7xhy4G/R3MLed+sS6PrZreMRjtw41/Y6bqD02brsXp8yo0yXZ7V2MLgOLuFvePo02QAP7p7DbDiD2AyeFnhD8uelTZYyYXoBksTpcFgc/ktYPE6iT+knfc/9Jtb588XC/1PKhDE1cUpGsvYvD1Vy4oDHQSmA28w5jCAaxFPaJpFp6vXcWSHtl4WMdzB3qEdnw9/xKklfBKXeCWgCVmbyPy5WnuvHtgZ0OGL6Jy1YsvVUV+2C/mhFD1UAUWH1fVs2H+EfdjxT93F6UkxVMkANEm2YyWfHVGqdBEL4ZpU8RK24FaJcZZx6V2vNHS92tAjgAPnCQ7sK05PprSS16cUciKUh8BN189s1C0WtaAqZ8X8XNGaDq1TfbOOQ69pdTOFumUTwycReIq/h+uKoqH5zdq6qH7bKD0ikCnlMOhJX+iiZOSNC3+jYLD32LMU5VT8TYLVA+cLTaQy7w/Egw5udxqoqfrcSapUVLf+5mTzE7ehYGgAB2cUKyKRqN/ReHqvIXB2PP6QTwINn1hZTeQ+rTWfWSoTSZc7F/8yelk1fypMzzkGu5/3k0seBJ4Qw35QRbCW1jWYbcuGDqMereBBHe+m2Y+oAMKFg64a/izMfpfD2NrBPiCOgr+gTsiO6s7Bd33Ksp/4ePaYCvTufb6zat8b0AAAA==",B7="data:image/webp;base64,UklGRsgCAABXRUJQVlA4ILwCAADQDwCdASo8ADwAPpE+mkoloyIhphVc6LASCWwAyPwycMkVbNA7Te2a8wH6k7qB1yHoAfsZ6Y37R/CJ+1Ho7PJOGfdAOsb43XC1Rnd5ntpzshIe31RIcoFm31ExFqzOptCaeeTKd67V7dWliYw17KyFJlv/a7aKs4VfB4xcnRSRCAuZO+dtYAAA/vz4RBV1eN0U1NoEF8pKwqlyuIW6K/4/cbPyMYJ/pQr9SecL6LJwtcjd+OhNpN95DikBQoaXIdSqPer9MxQgALTc+/Xb1G17b3D2E38w4EEIC1Hkg2K5jEsfQ3H/5dIYH392O1/Kp4xHvGy2f3of/n8TerbP+GjTe0WMRRsm8HcL7XzbSZ/eQiTyDOUamFZg1URFvVrGi9WoBX2DjZeoHadtpp6SZphBfnZ5HQd++VNZVS2P+/XTkFQr6aPzrtFFJF+KFBajDJ89rLuuMmFPdTXNI51OO0a4o+/Gs55TJ4v4873zFJV6dIytNWyKx0/iemiS1Mkf2rDqWh0Okq2RE48VzeClfag/9WxzSiQp8H5pAR6+8709epX0Gwi7oO7novsJ4LfYS1Rl4eT5ir1ASGKUe+mVUFexvfIZC/S4PzyQgN6FxF/s6xP5kPu8OvctjT4qU2mM06VwKkQFxWHdhpFiq8P8DFqPLSENIjySy2gOtgbBcMdYffxCqWUrfQPFbBIykRPs94LdOZfMpS/JD5Wn3LfoA3zoG3Jm/343JbsINmvPcjIg4wJZAkTzQRZ2eZtRfwz5QprDxP8ArsM/z3Hce95ow4iTGtl58FHWAQ7glFcgveS1tilLrJE6e22uozcOl+B+rZPk7XuOZk+LFIH3wxP/hL7waKjcJyU35wdJ5UXMshZDVATPsNh7KQnslc3vJIn25/GQD3KuD3n/6NEh/ZYHTwQDe/si+9+Pwp8S0AAA",U7="data:image/webp;base64,UklGRjAFAABXRUJQVlA4WAoAAAAQAAAAOwAAOwAAQUxQSCcBAAABgKPtf9rmp0ea40xwrzQ73ob5PmnOkWYrMwRs/fVbgv6X2yEiGLZtG0m61wvUXgEA4IBsaTydPyy97DDsVcQvH+bTcSkCHLY0FoX2JVP0opWHNZs3UF+Q4iWE4wlBvJBvVRizeQ/IODBFQ0z2Ny6LAWNhykrCPiwc6jvSVMOEVTgUFhQqKHzLAW3GVDFmE9lLBh0Cz6PSZqYTFcf0WngOp5qPyZxBi8DZgyZ3Syq68JrEoomoEr5ewr86RBPRPUN1z27dzqDbVXQ7kmo3G+h2wuyFYhfNoKXXgRtA/k0nEr7m4FBjotP5y3Cw6DPR2BpdWMAAfY2N090xkKpvaW+r18rmDRiLfOuCKXreyMEabOmA6GR4ena3SCQcoSSLu9lkWMxsbUkAAFZQOCDiAwAAkBMAnQEqPAA8AD6RRJxKpaOioagYCACwEglsAJ0yy7i/xPmn1B3AOm2NtC8/LW+A56TpAP6r1FHoAeWT7IX7qekrWQwZMsVmY+UJ6r+wHsV/sAmBREtU2N9/xgfF8opeIE0NsIuAlPZKb6PHYVYRNE5cBqV9wann0N9gYnI/fhLtJO4WqSGSNtUxxPZp2Be4GUBERjBHfLUJyu8fRJ70TL5529MAAP7i5+SrLJ5fkdH4p9w/L6/Ob+7rKmVW0OdOqSVPGBTfp5QZUDS+/q2P/p6Wt+Ib99JrtE6GeFO/a7+3NGcUXQVlxnXIUY0QaJ/kQqw6gxw73cN6jfwaVd4wdnql2QZuQ/p1Xmf0bnsAL2csUpkT5WCBx59ShbqM9UikwsOcerYPHP3ODfKyLVRR01JRYqWV/xxEXKbT0JqGkE2A3UtAw4y0O6wHQ1tck7/HFuQnkrTimYL14QLddiD2kD5PnzZXz66PgIAnDYVBwyQehO4KGMQu2r0ix2Fv242bQk8cOcPCd94shae5zHmuNZMpcbkDzgQ0zN8QKtnCiFIs8IeXPL+1IW/g3bT4/+nkfoBPDPNphUZyxqfVsQ+joRZmLxRIapH1QQdUIBq1PSEvbXzhx9mGzjeygvag7nsNzgw8C93JCPW/yVADO1FvbAqeHjP8To/eu4lrw0eJ56YnH5PEZVXtBz5rzk4k1gDH+ANgsj74npMSrsFoeMm4SKNPLAvJNmQiQeYvNS8N4/eeA0N69CR24KHJuvK0gmz6hrKFNZsgzTFs1CtPQeaJ7adhkMBu0d1pzyBmgo/R01DmsMsKbgyIKK5fu6kYlIyo8BBqK+e4G/hB058OdO32EP4nDigGdWq+7vXKclkPW63iErBpE88OVyGQ9rwTAyBq/pg766uv9fvNWn1j9F0hG/9P+bkp4CjI/Cg5E5gKZSnYXGjwCkJgz/mDVn1Misb80Y0PGYlQCKSj2zQp7bgnxiFm8ynY4r28zFiQUBlaFHU/b+q1ta4yv6q1DJsfRXm3MpHIifySNr/9WxGzXhSV2nwvlN0STPNjkmHfukscGxVtKjA4V6lMB6/uHBiZRHRSmyNuz4aL9r6vlFa4Y88xUQsLvGS5ZHB8CGmpLcALSNlhmIRX3yc9mGHFH0q26/8xbvgk6siErWxyHanUioWtpLbspm7XzJoMjznUfwjD4z6ayPndm1SCX2wfk2HJrxahGkd4nhEfNkNGqUhxrTx5jE1rkjjkLWOXvcXpAyHneYa5e8hENqWeQMJXm1hra6G7Hi9iF7BLo53iY+gL3VAcS1wvIltQRWuAMT8rnyZTIAAAAA==",V7="data:image/webp;base64,UklGRm4DAABXRUJQVlA4WAoAAAAQAAAATwAATwAAQUxQSJoAAAABd6AokqQ2eumZwxccIImICJB3FP/iTUREOKqtPWryh6Fd/hKihIMCfHTUgAKWLJEQB0RCDHSe589HPgE9Ef2fACN1/0XiOCvUqHuCsLMil7BJN34qdXiD0MO2HpTv6fXDEZo7y/r149gPX5BG/F37ZYmvH8d+uH84wvrK0rSe4z1xeDN4WLmETbrxU6m6Bwg7K0bq/psqznI1VlA4IK4CAACwEACdASpQAFAAPoE2kkelIyGhOtJKAKAQCWgAzXw+R9eob5pGRzP/QD3ifjveLeZL9gPVl9Dfnb9SrvR+Q33MywNLEzXvADYsO0rhxXJx7KXxXdoTB8ZWHAkzZylMtACVBtshEWjG9Sp8Q0aCJZi5rxPVt0wtC6gRLvNhYhlSdVP92uGrp3q5eLDCb2QAAP701AsbKZIFRUBPGa3/BQJhqpXKH/+Wf3m4uoqabIf/1OP+Tj/k47PphdOUJnNzbozRRsC9XhpWuovdCGnqO5RELU8yD0YJ+EPyTwahyQ8Fxbix1/aae9iLM6vj1aD1Jr5eEfeYf6o91HoRPEWxro/W2C3FeuarTtDaT/7rsN6dfxBBbChkpEuqXX5rB15SPub9OUXo3t/jrUbhHvEEmKdIWaQcQ/tjsyu3hXM6idjz8Kk2Sv32kL4MsQcGn9MLR3xy3OJl2cEd2H8LqM+x1eD36Ey7bSMk31KpwnrpkZjw6+9MVU6P+qtf+oqFNdSG/pocX2W8EPZ2pIHAoy8+3Wv6352mPlgJdGXKwDIgp0iFBiMipo1scHutKQ/0zxQ9QCuJGQfsPaSz+Qf1SMWX9SUlNXDrDIxVPET12ny8UtWdcarMIt80h1o5M6FCXSR6LoK+MSAsW6UvVrsfZR+6qSHroWbTR5JfEpo2rfunAjSst0JFQ3r/qliI2e31hdYCKKRxmlana4XfQK54DyKptPIiYr5VrER59fGMiceimEcoIQlpK0kAZcYl+eT+nOna90pXtK8OU3X/NSwH+PT65pfBwRi430iM5IXvQ7ClCOPIDZZP6pcwqnE8x1PzTV4OEdgjOHIVuKFt6iYdGV75SaiwOL/QW7q3VDeews5B8ImQX014vPFQZWHKRUie8rV+XfcGPAynLLfble6Z9v4AAA==",H7={id:"eac-home-screen",class:"relative pt-4 flex flex-col h-full w-full"},W7=c("div",{class:"flex flex-col absolute top-0 left-0 w-full xs:rounded-t-lg overflow-hidden h-72"},[c("div",{class:"flex-1 bg-primary"}),c("div",{class:"h-48",style:{background:`linear-gradient(
                        180deg,
                        var(--ui-primary-color) 46.88%,
                        rgba(0, 0, 0, 0) 100%
                    )`}})],-1),G7={class:"flex flex-col flex-1 overscroll-none overflow-y-auto px-4 pt-0 pb-2 w-full h-full relative"},K7={class:"p-2 py-8 relative"},Q7={key:0,class:"text-[28px] font-semibold text-white whitespace-pre-wrap"},J7={key:1,class:"text-base text-white whitespace-pre-wrap mt-2"},X7={class:"flex-1 space-y-6"},Z7={class:"bg-white rounded-2xl border border-gray-200/90 shadow-custom-soft overflow-hidden px-4 py-5"},Y7={class:"flex-shrink-0"},eD={class:"relative"},tD=["src","alt"],nD=c("div",{class:"size-3 border-2 border-white bg-green-500 rounded-full absolute bottom-0 right-0"},null,-1),sD={class:"flex-1 min-w-0"},rD={class:"mb-1 flex items-center justify-between"},oD={class:"text-gray-600 text-sm tracking-tight"},iD={class:"flex-shrink-0 size-[18px] bg-red-500 text-white text-[11px] font-semibold rounded-full flex items-center justify-center"},aD={class:"flex items-center gap-2"},lD={class:"text-base text-gray-900 font-medium line-clamp-2 flex-1"},cD={key:0,class:"space-y-2"},uD=["onClick"],dD={class:"flex-1 text-sm sm:group-hover:font-semibold sm:group-hover:text-primary"},fD={class:"p-1 duration-300 sm:-translate-x-0.5 sm:group-hover:translate-x-1.5 bg-primary text-white border border-primary rounded-full flex items-center justify-center"},hD={key:1,class:"border border-gray-100 shadow-sm rounded-2xl bg-white overflow-hidden"},pD=c("div",{class:"py-3 px-4 border-b border-b-gray-100 font-medium"}," Lin kt nhanh ",-1),mD={class:"divide-y divide-gray-100"},gD=["href","target"],vD={class:"size-9 bg-gray-50 rounded-full flex items-center justify-center flex-shrink-0"},yD=["src","alt"],bD={class:"text-left"},xD={class:"text-sm text-gray-900"},_D=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"HomeScreen",props:{dataHome:{type:Object,default:()=>({})}},emits:["close-chat","send-message","set-screen"],setup(e,{emit:t}){const n=e,s=t,{bot:r}=Ct(me.state),{messages:o}=Xs(),i=pe(()=>{var y,_;return((_=(y=r.value)==null?void 0:y.config)==null?void 0:_.ui)||{}}),a=pe(()=>{var y,_;return((_=(y=r.value)==null?void 0:y.config)==null?void 0:_.quickPrompt.messages)||[]}),l=pe(()=>{var y;return(y=n.dataHome)==null?void 0:y.title}),u=pe(()=>{var y;return(y=n.dataHome)==null?void 0:y.description}),d=pe(()=>{const y=o.value.filter(C=>C.sender_type==="assistant"&&C.content_type==="text");if(y.length===0)return{content:" Xin cho! Em c th gip g cho anh/ch?",created_at:null};const _=y[y.length-1];return{content:_.content||"Tin nhn mi",created_at:_.created_at}}),f=()=>{me.actions.updateChatState({viewTab:"conversations"})},h=y=>{s("send-message",y)},p=(y,_=null)=>y==="custom"?_||Xx:{messenger:j7,zalo:F7,hotline:tp,email:s_,phone:tp,youtube:z7,facebook:q7,tiktok:B7,instagram:U7,linkedin:V7}[y]||Yh,m=(y,_)=>_?y==="hotline"||y==="phone"?_.startsWith("tel:")?_:`tel:${_}`:y==="email"?_.startsWith("mailto:")?_:`mailto:${_}`:_:"#",x=pe(()=>{var _;return(((_=n.dataHome)==null?void 0:_.quick_contact)||[]).filter(C=>C.enabled!==!1).map(C=>({type:C.type,href:m(C.type,C.value),target:C.type==="messenger"||C.type==="zalo"||C.type==="custom"?"_blank":void 0,icon:p(C.type,C.logo_url),title:C.title,subtitle:C.description,subtitleClass:C.type==="hotline"||C.type==="phone"?"text-red-500 font-medium":"text-gray-500"}))});return(y,_)=>(v(),k("div",H7,[W7,c("div",G7,[c("div",K7,[c("button",{onClick:_[0]||(_[0]=C=>y.$emit("close-chat")),"aria-label":"eac-close-chat",class:"p-2 absolute right-0 top-0 rounded-lg hover:bg-white/10 cursor-pointer text-white"},[U(b(aa),{size:"20"})]),l.value?(v(),k("div",Q7,V(l.value),1)):B("",!0),u.value?(v(),k("div",J7,V(u.value),1)):B("",!0)]),c("div",X7,[c("div",Z7,[c("div",{class:"flex gap-2 bg-gray-50 hover:bg-gray-100 border border-gray-100 py-3 px-2.5 rounded-xl cursor-pointer",onClick:_[1]||(_[1]=C=>f())},[c("div",Y7,[c("div",eD,[c("img",{src:i.value.iconImage||i.value.logo,alt:i.value.name,class:"size-12 ring-1 ring-gray-100 border-2 border-white rounded-full object-cover shadow-sm"},null,8,tD),nD])]),c("div",sD,[c("div",rD,[c("div",oD,V(i.value.name),1),c("div",iD,V(b(me).state.chatState.unreadMessageCount||1),1)]),c("div",aD,[c("p",lD,V(d.value.content),1)])])]),c("button",{onClick:_[2]||(_[2]=C=>f()),class:"w-full mt-3 h-12 rounded-xl text-base text-white bg-primary hover:opacity-90 transition-opacity flex items-center justify-center gap-1"},[Fe(" Gi tin nhn "),U(b(sp),{size:18})])]),a.value.length>0?(v(),k("div",cD,[(v(!0),k(be,null,Ie(a.value,(C,A)=>(v(),k("div",{key:A,onClick:E=>h(C.content),class:"overflow-hidden flex items-center rounded-xl cursor-pointer text-gray-900 px-4 py-3.5 gap-2 bg-white border border-gray-200 shadow-sm group"},[c("div",dD,V(C.content),1),c("div",fD,[U(b(Gh),{size:"12","stroke-width":"3.5"})])],8,uD))),128))])):B("",!0),x.value.length>0?(v(),k("div",hD,[pD,c("div",mD,[(v(!0),k(be,null,Ie(x.value,(C,A)=>(v(),k("a",{key:A,href:C.href,target:C.target,class:"flex items-center gap-2.5 px-3 py-2 bg-white hover:bg-gray-50 transition-colors"},[c("div",vD,[typeof C.icon!="string"?(v(),re(Gt(C.icon),{key:0,size:"22",class:"fill-blue-500 stroke-white stroke-1"})):(v(),k("img",{key:1,src:C.icon,alt:C.title,class:se(["w-6",["tiktok"].includes(C.type)?"object-cover rounded-full":"object-contain"])},null,10,yD))]),c("div",bD,[c("div",xD,V(C.title),1),c("div",{class:se(["text-xs",C.subtitleClass])},V(C.subtitle),3)])],8,gD))),128))])])):B("",!0)])])]))}}},Symbol.toStringTag,{value:"Module"})),qc=e=>(In("data-v-3d58654b"),e=e(),Pn(),e),wD={class:"flex flex-col h-full bg-gray-50"},kD={class:"flex items-center gap-2 p-3 bg-primary relative"},SD=qc(()=>c("h2",{class:"text-base font-medium text-white"},"Tr gip",-1)),CD={class:"flex-1 overflow-y-auto p-4"},$D={class:"space-y-6"},TD={key:0},AD={class:"flex items-center gap-2 mb-3 px-1 text-gray-800"},ED=qc(()=>c("h3",{class:"font-semibold"},"Cu hi thng gp",-1)),ID={class:"space-y-2"},PD=["onClick"],OD={class:"overflow-hidden"},RD={class:"px-4 pb-4 pt-0"},MD={class:"text-sm text-gray-600 leading-relaxed whitespace-pre-wrap"},LD={key:1},DD={class:"flex items-center gap-2 mb-3 px-1 text-gray-800"},ND=qc(()=>c("h3",{class:"font-semibold"},"Ti liu hu ch",-1)),jD={class:"space-y-2"},FD=["href"],zD={class:"flex-1 text-sm sm:group-hover:font-semibold sm:group-hover:text-primary"},qD={class:"p-1 duration-300 sm:-translate-x-0.5 sm:group-hover:translate-x-1.5 bg-primary text-white border border-primary rounded-full flex items-center justify-center"},BD=Object.freeze(Object.defineProperty({__proto__:null,default:nt({__name:"ChatHelps",props:{dataHelpCenter:{type:Object,default:()=>({})}},emits:["close","close-chat"],setup(e){const t=e,n=L(null),s=pe(()=>{var u;return((u=t.dataHelpCenter)==null?void 0:u.faqs)||[]}),r=pe(()=>{var d;return(((d=t.dataHelpCenter)==null?void 0:d.documents)||[]).map(f=>({icon:f.title.includes("")?"":"",title:f.title.replace(/^\s*/,"").trim(),url:f.link}))}),o=u=>{n.value=n.value===u?null:u},i=u=>{u.style.height="0",u.offsetHeight,u.style.height=u.scrollHeight+"px"},a=u=>{u.style.height="auto"},l=u=>{u.style.height=u.scrollHeight+"px",u.offsetHeight,u.style.height="0"};return(u,d)=>(v(),k("div",wD,[c("div",kD,[c("button",{onClick:d[0]||(d[0]=f=>u.$emit("close")),class:"p-1.5 rounded-lg hover:bg-white/10 text-white","aria-label":"Quay li"},[U(b(Eo),{size:20})]),SD,c("button",{onClick:d[1]||(d[1]=f=>u.$emit("close-chat")),"aria-label":"eac-close-chat",class:"p-1.5 rounded-lg hover:bg-white/10 cursor-pointer text-white ml-auto"},[U(b(aa),{size:"20"})])]),c("div",CD,[c("div",$D,[s.value.length>0?(v(),k("div",TD,[c("div",AD,[U(b(Jh),{size:18}),ED]),c("div",ID,[(v(!0),k(be,null,Ie(s.value,(f,h)=>(v(),k("div",{key:h,class:"bg-white shadow-sm rounded-xl border border-gray-200 overflow-hidden transition-all duration-200"},[c("button",{onClick:p=>o(h),class:se(["w-full flex items-center justify-between px-4 py-3.5 text-left transition-colors",[n.value===h?"":"hover:bg-gray-100 hover:shadow"]])},[c("span",{class:se(["text-sm text-gray-800 pr-3",n.value===h?"font-semibold":"font-normal"])},V(f.question),3),U(b(Kh),{size:16,class:se(["text-gray-500 flex-shrink-0 transition-transform duration-300",{"rotate-180":n.value===h}])},null,8,["class"])],10,PD),U(mn,{name:"accordion",onEnter:i,onAfterEnter:a,onLeave:l},{default:xe(()=>[Ot(c("div",OD,[c("div",RD,[c("div",MD,V(f.answer),1)])],512),[[uo,n.value===h]])]),_:2},1024)]))),128))])])):B("",!0),r.value.length>0?(v(),k("div",LD,[c("div",DD,[U(b(ia),{size:18}),ND]),c("div",jD,[(v(!0),k(be,null,Ie(r.value,(f,h)=>(v(),k("a",{key:h,href:f.url,target:"_blank",rel:"noopener noreferrer",class:"overflow-hidden flex items-center rounded-xl cursor-pointer text-gray-900 px-4 py-3.5 gap-2 bg-white border border-gray-200 shadow-sm group"},[c("div",zD,V(f.title),1),c("div",qD,[U(b(Gh),{size:"12","stroke-width":"3.5"})])],8,FD))),128))])])):B("",!0)])])]))}},[["__scopeId","data-v-3d58654b"]])},Symbol.toStringTag,{value:"Module"})),UD={class:"flex flex-col h-full bg-gray-50"},VD={class:"flex items-center gap-2 p-3 bg-primary"},HD={class:"text-base font-medium text-white flex-1"},WD={class:"flex-1 overflow-y-auto"},GD={key:0,class:"p-4 space-y-6"},KD={class:"bg-white rounded-2xl border border-gray-200 shadow-sm p-4"},QD={class:"flex items-center gap-2 mb-4 text-gray-800"},JD=c("h3",{class:"text-base font-medium"},"Tra cu n hng",-1),XD={class:"space-y-3"},ZD={class:"relative"},YD=["disabled"],eN={key:1},tN={key:2,class:"flex items-center gap-2"},nN=c("span",{class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1),sN={key:0,class:"bg-red-50 border border-red-200 rounded-xl p-3"},rN={class:"flex items-start gap-2"},oN={class:"text-sm text-red-700"},iN={key:1,class:"p-4 space-y-4"},aN={class:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden"},lN={class:"p-4"},cN={class:"flex items-center justify-between mb-2"},uN={class:"flex items-center gap-2"},dN=c("span",{class:"text-sm font-medium text-gray-600"}," M n hng: ",-1),fN={class:"font-semibold text-gray-800"},hN={class:"flex items-center justify-between"},pN={class:"text-xs text-gray-500"},mN={key:0,class:"bg-white rounded-2xl border border-gray-200 shadow-sm"},gN=c("div",{class:"py-3 px-4 text-base font-medium text-gray-900 border-b border-gray-200"}," Thng tin ngi nhn ",-1),vN={class:"py-3 px-4 space-y-2"},yN={key:0,class:"flex space-x-3"},bN=c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," H v tn ",-1),xN={class:"text-sm text-gray-700 font-medium"},_N={key:1,class:"flex space-x-3"},wN=c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," S in thoi ",-1),kN={class:"text-sm text-gray-700 font-medium"},SN={key:2,class:"flex space-x-3"},CN=c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," a ch nhn hng ",-1),$N={class:"text-sm text-gray-700 font-medium"},TN={class:"bg-white rounded-2xl border border-gray-200 shadow-sm"},AN=c("div",{class:"py-3 px-4 text-base font-medium text-gray-900 border-b border-gray-200"}," Thng tin n hng ",-1),EN={class:"py-3 px-4 space-y-2"},IN={class:"flex space-x-3"},PN=c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," Ngy t hng ",-1),ON={class:"text-sm text-gray-700 font-medium"},RN={class:"flex space-x-3"},MN=c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," M n hng ",-1),LN={class:"text-sm text-gray-700 font-medium"},DN={key:0,class:"flex space-x-3"},NN=c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," Phng thc thanh ton ",-1),jN={class:"text-sm text-gray-700 font-medium"},FN={key:1,class:"flex space-x-3"},zN=c("div",{class:"text-sm text-gray-700 w-[120px] flex-shrink-0"}," Ghi ch ",-1),qN={class:"text-sm text-gray-700 font-medium"},BN=c("div",{class:"font-semibold text-gray-700 mb-3"}," Sn phm  t ",-1),UN={class:"space-y-3 mb-4 border-b border-b-gray-200 pb-4"},VN={class:"flex items-center justify-between"},HN=c("div",{class:"text-gray-500 mr-2 text-sm"}," Tng tin hng ",-1),WN={class:"text-right text-base"},GN={class:"text-gray-700 text-sm"},KN={key:0,class:"flex items-center justify-between"},QN=c("div",{class:"text-gray-500 mr-2 text-sm"}," Khuyn mi ",-1),JN={class:"text-right text-base"},XN={class:"text-green-500 text-sm"},ZN={key:1,class:"flex items-center justify-between"},YN=c("div",{class:"text-gray-500 mr-2 text-sm"}," Ph vn chuyn ",-1),ej={class:"text-right text-base"},tj={class:"text-gray-700 text-sm"},nj={class:"flex items-center justify-between mt-2"},sj=c("div",{class:"text-gray-500 mr-2 text-sm"},[c("span",{class:"font-medium text-gray-900"},"Tng cng"),c("span",{class:"text-xs ml-1"},"( bao gm VAT)")],-1),rj={class:"text-red-500 text-base font-semibold"},oj=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"ChatOrder",emits:["close","close-chat"],setup(e){const t=L(""),n=L(!1),s=L(null),r=L(""),o=L("search"),i=async()=>{if(t.value.trim()){n.value=!0,r.value="",s.value=null;try{const{data:d}=await ze.order.getOne(t.value.trim());if(d.success){const f={...(d==null?void 0:d.data)??{},order_number:t.value};s.value=f,o.value="detail"}}catch(d){console.error("Error checking order:",d),r.value="Khng tm thy n hng. Vui lng kim tra li m n hng hoc lin h b phn chm sc khch hng."}finally{n.value=!1}}},a=()=>{o.value="search",s.value=null,r.value="",t.value=""},l=d=>({pending:"ang x l",confirmed:" xc nhn",processing:"ang chun b",shipped:"ang giao hng",delivered:" giao hng",cancelled:" hy"})[d]||d,u=d=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",processing:"bg-purple-100 text-purple-800",shipped:"bg-indigo-100 text-indigo-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[d]||"bg-gray-100 text-gray-800";return(d,f)=>(v(),k("div",UD,[c("div",VD,[o.value==="detail"?(v(),k("button",{key:0,onClick:a,class:"p-1.5 rounded-lg hover:bg-white/10 text-white","aria-label":"Quay li"},[U(b(Eo),{size:20})])):(v(),k("button",{key:1,onClick:f[0]||(f[0]=h=>d.$emit("close")),class:"p-1.5 rounded-lg hover:bg-white/10 text-white","aria-label":"Quay li"},[U(b(Eo),{size:20})])),c("h2",HD,V(o.value==="detail"?"Chi tit n hng":"Tra cu n hng"),1),c("button",{onClick:f[1]||(f[1]=h=>d.$emit("close-chat")),class:"p-1.5 rounded-lg hover:bg-white/10 text-white","aria-label":"ng chat"},[U(b(aa),{size:20})])]),c("div",WD,[o.value==="search"?(v(),k("div",GD,[c("div",KD,[c("div",QD,[U(b(uc),{size:18}),JD]),c("div",XD,[c("div",ZD,[Ot(c("input",{"onUpdate:modelValue":f[2]||(f[2]=h=>t.value=h),type:"text",placeholder:"Nhp m n hng (VD: DH123456)",class:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-colors bg-white",onKeyup:wl(i,["enter"])},null,544),[[ln,t.value]])]),c("button",{onClick:i,disabled:!t.value.trim()||n.value,class:"w-full py-2.5 bg-primary text-white font-medium rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity flex items-center justify-center gap-2"},[n.value?B("",!0):(v(),re(b(fc),{key:0,size:18})),n.value?(v(),k("span",tN,[nN,Fe(" ang tm kim... ")])):(v(),k("span",eN,"Kim tra n hng"))],8,YD)])]),r.value?(v(),k("div",sN,[c("div",rN,[U(b(Qh),{size:18,class:"text-red-500 flex-shrink-0 mt-0.5"}),c("div",oN,V(r.value),1)])])):B("",!0)])):o.value==="detail"&&s.value?(v(),k("div",iN,[c("div",aN,[c("div",lN,[c("div",cN,[c("div",uN,[U(b(uc),{size:20,class:"text-primary"}),dN,c("span",fN," #"+V(s.value.order_number),1)])]),c("div",hN,[c("div",pN," Ngy t: "+V(b(Dl)(s.value.created_at)),1),s.value.status?(v(),k("span",{key:0,class:se(["px-3 py-1 text-xs font-medium rounded-full",u(s.value.status)])},V(l(s.value.status)),3)):B("",!0)])])]),s.value.shipping_address?(v(),k("div",mN,[gN,c("div",vN,[s.value.shipping_address.name?(v(),k("div",yN,[bN,c("div",xN,V(s.value.shipping_address.name),1)])):B("",!0),s.value.shipping_address.phone?(v(),k("div",_N,[wN,c("div",kN,V(s.value.shipping_address.phone),1)])):B("",!0),s.value.shipping_address.address1?(v(),k("div",SN,[CN,c("div",$N,V(s.value.shipping_address.address1),1)])):B("",!0)])])):B("",!0),c("div",TN,[AN,c("div",EN,[c("div",IN,[PN,c("div",ON,V(b(Dl)(s.value.created_at)),1)]),c("div",RN,[MN,c("div",LN," #"+V(s.value.order_number),1)]),s.value.payment_gateway_names?(v(),k("div",DN,[NN,c("div",jN,V(s.value.payment_gateway_names),1)])):B("",!0),s.value.note?(v(),k("div",FN,[zN,c("div",qN,V(s.value.note),1)])):B("",!0)])]),c("div",null,[BN,c("div",UN,[(v(!0),k(be,null,Ie(s.value.items,h=>(v(),re($a,{key:h.sku,item:h},null,8,["item"]))),128))]),c("div",null,[c("div",VN,[HN,c("div",WN,[c("div",GN,V(b(Qe)(s.value.subtotal_price)),1)])]),s.value.total_discounts?(v(),k("div",KN,[QN,c("div",JN,[c("div",XN,V(b(Qe)(s.value.total_discounts)),1)])])):B("",!0),s.value.shipping_price?(v(),k("div",ZN,[YN,c("div",ej,[c("div",tj,V(b(Qe)(s.value.shipping_price)),1)])])):B("",!0),c("div",nj,[sj,c("div",rj,V(b(Qe)(s.value.total_price)),1)])])])])):B("",!0)])]))}}},Symbol.toStringTag,{value:"Module"}))});
